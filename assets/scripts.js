var Helpers;!function(t){t.GetRectangle=function(t){var e=t.getBoundingClientRect();return{Top:e.top,Right:e.right,Bottom:e.bottom,Left:e.left}},t.IsOutside=function(t,e){return t.Top<=e.Top||t.Left<=e.Left||t.Right>=e.Right||t.Bottom>=e.Bottom},t.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetOutsideDir=function(t,e){var i=[];return t.Top<=e.Top&&i.push(Direction.Top),t.Left<=e.Left&&i.push(Direction.Left),t.Right>=e.Right&&i.push(Direction.Right),t.Bottom>=e.Bottom&&i.push(Direction.Bottom),i}}(Helpers||(Helpers={}));var Direction;!function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"}(Direction||(Direction={}));var HERO_WIDTH=100,HERO_HEIGHT=130,BASESPEED=.3,Hero=function(){function t(t){var e=this;this.Speed=BASESPEED,this.ChangeDir=function(){var t=Helpers.GetRandomInt(0,e._Direction.length-1);e._ChangeDir(t)},this._ChangeDir=function(t){if(!(0>t||t>=e._Direction.length)){var i=e._Direction[t];switch(i){case Direction.Top:e._Direction[t]=Direction.Bottom;break;case Direction.Bottom:e._Direction[t]=Direction.Top;break;case Direction.Left:e._Direction[t]=Direction.Right;break;case Direction.Right:e._Direction[t]=Direction.Left}}},this.Elt=document.createElement("div"),this.Elt.classList.add("hero"),this.Elt.style.width=HERO_WIDTH+"px",this.Elt.style.height=HERO_HEIGHT+"px",t.appendChild(this.Elt),this.Position={x:50,y:50},this._Direction=[Direction.Top,Direction.Left],this.Move()}return t.prototype.ChangeDirFromCollision=function(t){for(var e=t.length;e--;){var i=t[e],o=this._Direction.indexOf(i);this._ChangeDir(o)}},t.prototype.GoOppositeDir=function(){for(var t=this._Direction.length;t--;)this._ChangeDir(t)},t.prototype.Move=function(){var t=this;this._Direction.forEach(function(e){switch(e){case Direction.Top:t.Position.y=t.Position.y-t.Speed;break;case Direction.Bottom:t.Position.y=t.Position.y+t.Speed;break;case Direction.Left:t.Position.x=t.Position.x-t.Speed;break;case Direction.Right:t.Position.x=t.Position.x+t.Speed}}),this.Elt.style.top=this.Position.y+"%",this.Elt.style.left=this.Position.x+"%"},t}(),Playground;!function(t){var e=document.getElementById("playground");if(e){for(var i=1,o=[],n=Helpers.GetRectangle(e),r=0;i>r;r++)o.push(new Hero(e));var s=function(t){for(var e=0;e<o.length;e++){var i=o[e];i.Move();var r=Helpers.GetRectangle(i.Elt);Helpers.IsOutside(r,n)&&i.ChangeDirFromCollision(Helpers.GetOutsideDir(r,n))}requestAnimationFrame(s)};requestAnimationFrame(s);for(var a=0;a<o.length;a++){var c=o[a];c.Elt.addEventListener("mouseover",function(){c.Speed=3*c.Speed}),c.Elt.addEventListener("mouseout",function(){c.Speed=BASESPEED}),setInterval(function(){Math.random()>.2&&c.ChangeDir()},3e3)}window.addEventListener("resize",function(){n=Helpers.GetRectangle(e)})}}(Playground||(Playground={}));var TUMBLR_URL=document.location.protocol+"://rickymarou.tumblr.com/api/read/json",POST_PER_PAGE=20,Tumblr;!function(t){var e,i,o=0;t.Init=function(t){i=t,r()};var n=function(){if(4===e.readyState){200!=e.status&&console.log("error");var t=JSON.parse(e.responseText);console.log(t)}},r=function(){e&&e.abort(),e=new XMLHttpRequest,e.onreadystatechange=n,e.open("GET",TUMBLR_URL+"?start="+o+"&num="+POST_PER_PAGE,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-type","application/json"),e.send()}}(Tumblr||(Tumblr={}));var Home;!function(t){var e=document.getElementById("tumblr");e&&Tumblr.Init(e)}(Home||(Home={}));
!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],t=C[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?w[s[0]]=i:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=i),A.push((i?"":"no-")+s.join("-"))}}function o(e){var t=x.className,n=w._config.classPrefix||"";if(T&&(t=t.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?x.className.baseVal=t:x.className=t)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(){var e=t.body;return e||(e=l(T?"svg":"body"),e.fake=!0),e}function f(e,t){return!!~(""+e).indexOf(t)}function d(e,n,r,i){var o,a,s,f,d="modernizr",c=l("div"),p=u();if(parseInt(r,10))for(;r--;)s=l("div"),s.id=i?i[r]:d+(r+1),c.appendChild(s);return o=l("style"),o.type="text/css",o.id="s"+d,(p.fake?p:c).appendChild(o),p.appendChild(c),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),a=n(c,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=f,x.offsetHeight):c.parentNode.removeChild(c),!!a}function c(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(s(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+s(t[i])+":"+r+")");return o=o.join(" or "),d("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function p(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?p(i,n||t):i);return!1}function h(e,t,i,o){function s(){d&&(delete M.style,delete M.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var u=c(e,i);if(!r(u,"undefined"))return u}for(var d,p,m,h,v,g=["modernizr","tspan"];!M.style;)d=!0,M.modElem=l(g.shift()),M.style=M.modElem.style;for(m=e.length,p=0;m>p;p++)if(h=e[p],v=M.style[h],f(h,"-")&&(h=a(h)),M.style[h]!==n){if(o||r(i,"undefined"))return s(),"pfx"==t?h:!0;try{M.style[h]=i}catch(y){}if(M.style[h]!=v)return s(),"pfx"==t?h:!0}return s(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+j.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?h(s,t,i,o):(s=(e+" "+_.join(a+" ")+a).split(" "),m(s,t,n))}function g(e,t,r){return v(e,n,n,t,r)}function y(e,t){if("object"==typeof e)for(var n in e)V(e,n)&&y(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),i=w[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return w;t="function"==typeof t?t():t,1==r.length?w[r[0]]=t:(!w[r[0]]||w[r[0]]instanceof Boolean||(w[r[0]]=new Boolean(w[r[0]])),w[r[0]][r[1]]=t),o([(t&&0!=t?"":"no-")+r.join("-")]),w._trigger(e,t)}return w}var A=[],C=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){C.push({name:e,fn:t,options:n})},addAsyncTest:function(e){C.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w,w.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var E=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=E;var x=t.documentElement;w.addTest("classlist","classList"in x);var T="svg"===x.nodeName.toLowerCase();T||!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=x.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=x.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),x.elements=n+" "+e,u(t)}function o(e){var t=E[e[b]];return t||(t={},w++,e[b]=w,E[w]=t),t}function a(e,n,r){if(n||(n=t),v)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():C.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||A.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function s(e,n){if(e||(e=t),v)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return x.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function u(e){e||(e=t);var r=o(e);return!x.shivCSS||h||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),v||l(e,r),e}function f(e){for(var t,n=e.getElementsByTagName("*"),i=n.length,o=RegExp("^(?:"+r().join("|")+")$","i"),a=[];i--;)t=n[i],o.test(t.nodeName)&&a.push(t.applyElement(d(t)));return a}function d(e){for(var t,n=e.attributes,r=n.length,i=e.ownerDocument.createElement(S+":"+e.nodeName);r--;)t=n[r],t.specified&&i.setAttribute(t.nodeName,t.nodeValue);return i.style.cssText=e.style.cssText,i}function c(e){for(var t,n=e.split("{"),i=n.length,o=RegExp("(^|[\\s,>+~])("+r().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),a="$1"+S+"\\:$2";i--;)t=n[i]=n[i].split("}"),t[t.length-1]=t[t.length-1].replace(o,a),n[i]=t.join("}");return n.join("{")}function p(e){for(var t=e.length;t--;)e[t].removeNode()}function m(e){function t(){clearTimeout(a._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,i,a=o(e),s=e.namespaces,l=e.parentWindow;return!_||e.printShived?e:("undefined"==typeof s[S]&&s.add(S),l.attachEvent("onbeforeprint",function(){t();for(var o,a,s,l=e.styleSheets,u=[],d=l.length,p=Array(d);d--;)p[d]=l[d];for(;s=p.pop();)if(!s.disabled&&T.test(s.media)){try{o=s.imports,a=o.length}catch(m){a=0}for(d=0;a>d;d++)p.push(o[d]);try{u.push(s.cssText)}catch(m){}}u=c(u.reverse().join("")),i=f(e),r=n(e,u)}),l.attachEvent("onafterprint",function(){p(i),clearTimeout(a._removeSheetTimer),a._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var h,v,g="3.7.3",y=e.html5||{},A=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,C=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",w=0,E={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,v=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){h=!0,v=!0}}();var x={elements:y.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:g,shivCSS:y.shivCSS!==!1,supportsUnknownElements:v,shivMethods:y.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:s,addElements:i};e.html5=x,u(t);var T=/^$|\b(?:all|print)\b/,S="html5shiv",_=!v&&function(){var n=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof e.attachEvent)}();x.type+=" print",x.shivPrint=m,m(t),"object"==typeof module&&module.exports&&(module.exports=x)}("undefined"!=typeof e?e:this,t);var S="Moz O ms Webkit",_=b._config.usePrefixes?S.toLowerCase().split(" "):[];b._domPrefixes=_;var N=function(e,t){var n=!1,r=l("div"),i=r.style;if(e in i){var o=_.length;for(i[e]=t,n=i[e];o--&&!n;)i[e]="-"+_[o]+"-"+t,n=i[e]}return""===n&&(n=!1),n};b.prefixedCSSValue=N,w.addTest("canvas",function(){var e=l("canvas");return!(!e.getContext||!e.getContext("2d"))}),w.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",i=0,o=E.length-1;o>i;i++)e=0===i?"to ":"",r+=t+E[i]+"linear-gradient("+e+"left top, #9f9, white);";w._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=l("a"),s=a.style;return s.cssText=r,(""+s.backgroundImage).indexOf("gradient")>-1}),w.addTest("placeholder","placeholder"in l("input")&&"placeholder"in l("textarea")),w.addTest("srcset","srcset"in l("img")),w.addTest("inlinesvg",function(){var e=l("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&e.firstChild&&e.firstChild.namespaceURI)});var k="CSS"in e&&"supports"in e.CSS,P="supportsCSS"in e;w.addTest("supports",k||P);var j=b._config.usePrefixes?S.split(" "):[];b._cssomPrefixes=j;var z=function(t){var r,i=E.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var a=0;i>a;a++){var s=E[a],l=s.toUpperCase()+"_"+r;if(l in o)return"@-"+s.toLowerCase()+"-"+t}return!1};b.atRule=z;var L=b.testStyles=d;w.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",E.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(r,function(e){n=9===e.offsetTop})}return n}),w.addTest("formvalidation",function(){var t=l("form");if(!("checkValidity"in t&&"addEventListener"in t))return!1;if("reportValidity"in t)return!0;var n,r=!1;return w.formvalidationapi=!0,t.addEventListener("submit",function(t){e.opera&&!e.operamini||t.preventDefault(),t.stopPropagation()},!1),t.innerHTML='<input name="modTest" required="required" /><button></button>',L("#modernizr form{position:absolute;top:-99999em}",function(e){e.appendChild(t),n=t.getElementsByTagName("input")[0],n.addEventListener("invalid",function(e){r=!0,e.preventDefault(),e.stopPropagation()},!1),w.formvalidationmessage=!!n.validationMessage,t.getElementsByTagName("button")[0].click()}),r});var B=l("input"),D="search tel url email datetime date month week time datetime-local number range color".split(" "),O={};w.inputtypes=function(e){for(var r,i,o,a=e.length,s="1)",l=0;a>l;l++)B.setAttribute("type",r=e[l]),o="text"!==B.type&&"style"in B,o&&(B.value=s,B.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&B.style.WebkitAppearance!==n?(x.appendChild(B),i=t.defaultView,o=i.getComputedStyle&&"textfield"!==i.getComputedStyle(B,null).WebkitAppearance&&0!==B.offsetHeight,x.removeChild(B)):/^(search|tel)$/.test(r)||(o=/^(url|email)$/.test(r)?B.checkValidity&&B.checkValidity()===!1:B.value!=s)),O[e[l]]=!!o;return O}(D),w.addTest("localizednumber",function(){if(!w.inputtypes.number)return!1;if(!w.formvalidation)return!1;var e,n=l("div"),r=u(),i=function(){return x.insertBefore(r,x.firstElementChild||x.firstChild)}();n.innerHTML='<input type="number" value="1.0" step="0.1"/>';var o=n.childNodes[0];i.appendChild(n),o.focus();try{t.execCommand("InsertText",!1,"1,1")}catch(a){}return e="number"===o.type&&1.1===o.valueAsNumber&&o.checkValidity(),i.removeChild(n),r.fake&&i.parentNode.removeChild(i),e});var $={elem:l("modernizr")};w._q.push(function(){delete $.elem});var M={style:$.elem.style};w._q.unshift(function(){delete M.style});b.testProp=function(e,t,r){return h([e],n,t,r)};b.testAllProps=v;var R=b.prefixed=function(e,t,n){return 0===e.indexOf("@")?z(e):(-1!=e.indexOf("-")&&(e=a(e)),t?v(e,t,n):v(e,"pfx"))};b.prefixedCSS=function(e){var t=R(e);return t&&s(t)};b.testAllProps=g,w.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),w.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=w._config.usePrefixes;if(e&&(!t||"webkitPerspective"in x.style)){var n,r="#modernizr{width:0;height:0}";w.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),w.addTest("csstransitions",g("transition","all",!0));var V;!function(){var e={}.hasOwnProperty;V=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),b._l={},b.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),w.hasOwnProperty(e)&&setTimeout(function(){w._trigger(e,w[e])},0)},b._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},w._q.push(function(){b.addTest=y}),w.addAsyncTest(function(){var e,t,n,r=l("img"),i="sizes"in r;!i&&"srcset"in r?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){y("sizes",2==r.width)},r.onload=n,r.onerror=n,r.setAttribute("sizes","9px"),r.srcset=e+" 1w,"+t+" 8w",r.src=e):y("sizes",i)}),i(),o(A),delete b.addTest,delete b.addAsyncTest;for(var F=0;F<w._q.length;F++)w._q[F]();e.Modernizr=w}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm91dHB1dC5qcyIsImxpYi9tb2Rlcm5penItY3VzdG9tLmpzIl0sIm5hbWVzIjpbIkhlbHBlcnMiLCJHZXRSZWN0YW5nbGUiLCJlbHQiLCJwb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJUb3AiLCJ0b3AiLCJSaWdodCIsInJpZ2h0IiwiQm90dG9tIiwiYm90dG9tIiwiTGVmdCIsImxlZnQiLCJJc091dHNpZGUiLCJyZWN0IiwiY29udGFpbmVyIiwiR2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiR2V0T3V0c2lkZURpciIsInJlc3VsdCIsInB1c2giLCJEaXJlY3Rpb24iLCJIRVJPX1dJRFRIIiwiSEVST19IRUlHSFQiLCJCQVNFU1BFRUQiLCJIZXJvIiwiX3RoaXMiLCJ0aGlzIiwiU3BlZWQiLCJDaGFuZ2VEaXIiLCJyYW5kb21EaXJJbmRleCIsIl9EaXJlY3Rpb24iLCJsZW5ndGgiLCJfQ2hhbmdlRGlyIiwiZGlySW5kZXgiLCJmcm9tIiwiRWx0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImFwcGVuZENoaWxkIiwiUG9zaXRpb24iLCJ4IiwieSIsIk1vdmUiLCJwcm90b3R5cGUiLCJDaGFuZ2VEaXJGcm9tQ29sbGlzaW9uIiwiZnJvbURpcnMiLCJsIiwiaW5kZXhPZiIsIkdvT3Bwb3NpdGVEaXIiLCJmb3JFYWNoIiwiZGlyIiwiUGxheWdyb3VuZCIsIkNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiX1RvdGFsRmFjZXMiLCJfSGVyb2VzIiwiQ29udGFpbmVyUmVjdCIsImkiLCJfTG9vcCIsInRpbWVzdGFtcCIsImoiLCJoZXJvIiwiaGVyb1JlY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJ3aW5kb3ciLCJUVU1CTFJfVVJMIiwibG9jYXRpb24iLCJwcm90b2NvbCIsIlBPU1RfUEVSX1BBR0UiLCJUdW1ibHIiLCJfUmVxdWVzdCIsIl9Db250YWluZXIiLCJfQ3VySW5kZXgiLCJJbml0IiwiX0dldFBvc3RzIiwiX0dldFBvc3RzUmVhZHlTdGF0ZUNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJhYm9ydCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiSG9tZSIsIl9UdW1ibHJDb250YWluZXIiLCJ1bmRlZmluZWQiLCJpcyIsIm9iaiIsInR5cGUiLCJ0ZXN0UnVubmVyIiwiZmVhdHVyZU5hbWVzIiwiZmVhdHVyZSIsImFsaWFzSWR4IiwibmFtZUlkeCIsImZlYXR1cmVOYW1lIiwiZmVhdHVyZU5hbWVTcGxpdCIsImZlYXR1cmVJZHgiLCJ0ZXN0cyIsImhhc093blByb3BlcnR5IiwibmFtZSIsInRvTG93ZXJDYXNlIiwib3B0aW9ucyIsImFsaWFzZXMiLCJmbiIsInNwbGl0IiwiTW9kZXJuaXpyIiwiQm9vbGVhbiIsImNsYXNzZXMiLCJqb2luIiwic2V0Q2xhc3NlcyIsImNsYXNzTmFtZSIsImRvY0VsZW1lbnQiLCJjbGFzc1ByZWZpeCIsIl9jb25maWciLCJpc1NWRyIsImJhc2VWYWwiLCJlbmFibGVKU0NsYXNzIiwicmVKUyIsIlJlZ0V4cCIsInJlcGxhY2UiLCJlbmFibGVDbGFzc2VzIiwiY3NzVG9ET00iLCJzdHIiLCJtMSIsIm0yIiwidG9VcHBlckNhc2UiLCJkb21Ub0NTUyIsImFyZ3VtZW50cyIsImNyZWF0ZUVsZW1lbnROUyIsImNhbGwiLCJhcHBseSIsImdldEJvZHkiLCJib2R5IiwiZmFrZSIsImNvbnRhaW5zIiwic3Vic3RyIiwiaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMiLCJydWxlIiwiY2FsbGJhY2siLCJub2RlcyIsInRlc3RuYW1lcyIsInJldCIsIm5vZGUiLCJkb2NPdmVyZmxvdyIsIm1vZCIsImRpdiIsInBhcnNlSW50IiwiaWQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYmFja2dyb3VuZCIsIm92ZXJmbG93IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwib2Zmc2V0SGVpZ2h0IiwibmF0aXZlVGVzdFByb3BzIiwicHJvcHMiLCJ2YWx1ZSIsIkNTUyIsInN1cHBvcnRzIiwiY29uZGl0aW9uVGV4dCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImZuQmluZCIsInRoYXQiLCJ0ZXN0RE9NUHJvcHMiLCJlbGVtIiwiaXRlbSIsInRlc3RQcm9wcyIsInByZWZpeGVkIiwic2tpcFZhbHVlVGVzdCIsImNsZWFuRWxlbXMiLCJhZnRlckluaXQiLCJtU3R5bGUiLCJtb2RFbGVtIiwicHJvcHNMZW5ndGgiLCJwcm9wIiwiYmVmb3JlIiwiZWxlbXMiLCJzaGlmdCIsImUiLCJ0ZXN0UHJvcHNBbGwiLCJ1Y1Byb3AiLCJjaGFyQXQiLCJzbGljZSIsImNzc29tUHJlZml4ZXMiLCJ0ZXN0QWxsUHJvcHMiLCJhZGRUZXN0IiwidGVzdCIsImtleSIsImhhc093blByb3AiLCJsYXN0IiwiX3RyaWdnZXIiLCJNb2Rlcm5penJQcm90byIsIl92ZXJzaW9uIiwidXNlUHJlZml4ZXMiLCJfcSIsIm9uIiwiY2IiLCJzZWxmIiwic2V0VGltZW91dCIsImFkZEFzeW5jVGVzdCIsImNyZWF0ZVNWR1JlY3QiLCJwcmVmaXhlcyIsIl9wcmVmaXhlcyIsImRvY3VtZW50RWxlbWVudCIsIm5vZGVOYW1lIiwiYWRkU3R5bGVTaGVldCIsIm93bmVyRG9jdW1lbnQiLCJwIiwicGFyZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbm5lckhUTUwiLCJpbnNlcnRCZWZvcmUiLCJsYXN0Q2hpbGQiLCJmaXJzdENoaWxkIiwiZ2V0RWxlbWVudHMiLCJlbGVtZW50cyIsImh0bWw1IiwiYWRkRWxlbWVudHMiLCJuZXdFbGVtZW50cyIsInNoaXZEb2N1bWVudCIsImdldEV4cGFuZG9EYXRhIiwiZGF0YSIsImV4cGFuZG9EYXRhIiwiZXhwYW5kbyIsImV4cGFuSUQiLCJzdXBwb3J0c1Vua25vd25FbGVtZW50cyIsImNhY2hlIiwiY2xvbmVOb2RlIiwic2F2ZUNsb25lcyIsImNyZWF0ZUVsZW0iLCJjYW5IYXZlQ2hpbGRyZW4iLCJyZVNraXAiLCJ0YWdVcm4iLCJmcmFnIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNsb25lIiwic2hpdk1ldGhvZHMiLCJjcmVhdGVGcmFnIiwiRnVuY3Rpb24iLCJzaGl2Q1NTIiwic3VwcG9ydHNIdG1sNVN0eWxlcyIsImhhc0NTUyIsImFkZFdyYXBwZXJzIiwiaW5kZXgiLCJyZUVsZW1lbnRzIiwiYXBwbHlFbGVtZW50IiwiY3JlYXRlV3JhcHBlciIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwid3JhcHBlciIsInNoaXZOYW1lc3BhY2UiLCJzcGVjaWZpZWQiLCJzZXRBdHRyaWJ1dGUiLCJub2RlVmFsdWUiLCJzaGl2Q3NzVGV4dCIsInBhaXIiLCJwYXJ0cyIsInJlcGxhY2VtZW50IiwicmVtb3ZlV3JhcHBlcnMiLCJ3cmFwcGVycyIsInJlbW92ZU5vZGUiLCJzaGl2UHJpbnQiLCJyZW1vdmVTaGVldCIsImNsZWFyVGltZW91dCIsIl9yZW1vdmVTaGVldFRpbWVyIiwic2hpdmVkU2hlZXQiLCJuYW1lc3BhY2VzIiwib3duZXJXaW5kb3ciLCJwYXJlbnRXaW5kb3ciLCJzdXBwb3J0c1NoaXZhYmxlU2hlZXRzIiwicHJpbnRTaGl2ZWQiLCJhdHRhY2hFdmVudCIsImltcG9ydHMiLCJzaGVldCIsImNvbGxlY3Rpb24iLCJzdHlsZVNoZWV0cyIsInNoZWV0cyIsIkFycmF5IiwicG9wIiwiZGlzYWJsZWQiLCJyZU1lZGlhIiwibWVkaWEiLCJlciIsInJldmVyc2UiLCJ2ZXJzaW9uIiwiYSIsImNoaWxkTm9kZXMiLCJkb2NFbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJvbVByZWZpeGVzIiwiZG9tUHJlZml4ZXMiLCJfZG9tUHJlZml4ZXMiLCJwcmVmaXhlZENTU1ZhbHVlIiwiZ2V0Q29udGV4dCIsImFuZ2xlIiwic3RyMSIsInN0cjIiLCJjc3MiLCJsZW4iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJTVkdSZWN0IiwibmFtZXNwYWNlVVJJIiwibmV3U3ludGF4Iiwib2xkU3ludGF4IiwiX2Nzc29tUHJlZml4ZXMiLCJhdFJ1bGUiLCJjc3NydWxlIiwiQ1NTUnVsZSIsInByZWZpeCIsInRoaXNSdWxlIiwidGVzdFN0eWxlcyIsImJvb2wiLCJEb2N1bWVudFRvdWNoIiwicXVlcnkiLCJvZmZzZXRUb3AiLCJmb3JtIiwiaW5wdXQiLCJpbnZhbGlkRmlyZWQiLCJmb3JtdmFsaWRhdGlvbmFwaSIsIm9wZXJhIiwib3BlcmFtaW5pIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJmb3JtdmFsaWRhdGlvbm1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsaWNrIiwiaW5wdXRFbGVtIiwiaW5wdXR0eXBlcyIsImlucHV0cyIsImlucHV0RWxlbVR5cGUiLCJkZWZhdWx0VmlldyIsInNtaWxlIiwiV2Via2l0QXBwZWFyYW5jZSIsImNoZWNrVmFsaWRpdHkiLCJudW1iZXIiLCJmb3JtdmFsaWRhdGlvbiIsImRpZmYiLCJlbCIsInJvb3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImZvY3VzIiwiZXhlY0NvbW1hbmQiLCJ2YWx1ZUFzTnVtYmVyIiwidW5zaGlmdCIsInRlc3RQcm9wIiwidXNlVmFsdWUiLCJwcmVmaXhlZENTUyIsInByZWZpeGVkUHJvcCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInVzZVByZWZpeCIsIm1xIiwiZGVmYXVsdFN0eWxlIiwib2Zmc2V0V2lkdGgiLCJfaGFzT3duUHJvcGVydHkiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwiX2wiLCJyZXMiLCJjYnMiLCJ3aWR0aDEiLCJ3aWR0aDIiLCJpbWFnZSIsImlzU2l6ZXMiLCJvbmxvYWQiLCJvbmVycm9yIiwic3Jjc2V0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USxLQWdJakJjLEVBQVU0RixHQUFHaE0sS0FBSyxXQUNoQjZMLEVBQWVOLFFBQVVBLElBeUIzQm5GLEVBQVVpRyxhQUFhLFdBQ3JCLEdBQUltSyxHQUFRQyxFQUFRakwsRUFDaEJrTCxFQUFReFYsRUFBYyxPQUV0QnlWLEVBQVUsU0FBV0QsSUFHcEJDLEdBQVksVUFBYUQsSUFDNUJELEVBQVMscUZBQ1RELEVBQVMsNkVBRVRoTCxFQUFPLFdBQ0xELEVBQVEsUUFBd0IsR0FBZm1MLEVBQU1wVixRQUd6Qm9WLEVBQU1FLE9BQVNwTCxFQUNma0wsRUFBTUcsUUFBVXJMLEVBQ2hCa0wsRUFBTWhILGFBQWEsUUFBUyxPQUU1QmdILEVBQU1JLE9BQVNOLEVBQVMsT0FBU0MsRUFBUyxNQUMxQ0MsRUFBTUssSUFBTVAsR0FFWmpMLEVBQVEsUUFBU29MLEtBTXJCdlIsSUFHQW9CLEVBQVdGLFNBRUp1RixHQUFlTixjQUNmTSxHQUFlUSxZQUd0QixLQUFLLEdBQUkxSixHQUFJLEVBQUdBLEVBQUl5RCxFQUFVNEYsR0FBR3BMLE9BQVErQixJQUN2Q3lELEVBQVU0RixHQUFHckosSUFJZlMsR0FBT2dELFVBQVlBLEdBS2xCaEQsT0FBUW5DIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSGVscGVycztcbihmdW5jdGlvbiAoSGVscGVycykge1xuICAgIEhlbHBlcnMuR2V0UmVjdGFuZ2xlID0gZnVuY3Rpb24gKGVsdCkge1xuICAgICAgICB2YXIgcG9zID0gZWx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgVG9wOiBwb3MudG9wLFxuICAgICAgICAgICAgUmlnaHQ6IHBvcy5yaWdodCxcbiAgICAgICAgICAgIEJvdHRvbTogcG9zLmJvdHRvbSxcbiAgICAgICAgICAgIExlZnQ6IHBvcy5sZWZ0XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBIZWxwZXJzLklzT3V0c2lkZSA9IGZ1bmN0aW9uIChyZWN0LCBjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIChyZWN0LlRvcCA8PSBjb250YWluZXIuVG9wKVxuICAgICAgICAgICAgfHwgKHJlY3QuTGVmdCA8PSBjb250YWluZXIuTGVmdClcbiAgICAgICAgICAgIHx8IChyZWN0LlJpZ2h0ID49IGNvbnRhaW5lci5SaWdodClcbiAgICAgICAgICAgIHx8IChyZWN0LkJvdHRvbSA+PSBjb250YWluZXIuQm90dG9tKTtcbiAgICB9O1xuICAgIEhlbHBlcnMuR2V0UmFuZG9tSW50ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICAgIH07XG4gICAgSGVscGVycy5HZXRPdXRzaWRlRGlyID0gZnVuY3Rpb24gKHJlY3QsIGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGlmIChyZWN0LlRvcCA8PSBjb250YWluZXIuVG9wKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLlRvcCk7XG4gICAgICAgIGlmIChyZWN0LkxlZnQgPD0gY29udGFpbmVyLkxlZnQpXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uTGVmdCk7XG4gICAgICAgIGlmIChyZWN0LlJpZ2h0ID49IGNvbnRhaW5lci5SaWdodClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKERpcmVjdGlvbi5SaWdodCk7XG4gICAgICAgIGlmIChyZWN0LkJvdHRvbSA+PSBjb250YWluZXIuQm90dG9tKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLkJvdHRvbSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn0pKEhlbHBlcnMgfHwgKEhlbHBlcnMgPSB7fSkpO1xudmFyIERpcmVjdGlvbjtcbihmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlRvcFwiXSA9IDBdID0gXCJUb3BcIjtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiUmlnaHRcIl0gPSAxXSA9IFwiUmlnaHRcIjtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiQm90dG9tXCJdID0gMl0gPSBcIkJvdHRvbVwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMZWZ0XCJdID0gM10gPSBcIkxlZnRcIjtcbn0pKERpcmVjdGlvbiB8fCAoRGlyZWN0aW9uID0ge30pKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJsaWIvZGVmaW5pdGlvbnMtY3VzdG9tLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkhlbHBlcnMudHNcIi8+XG52YXIgSEVST19XSURUSCA9IDEwMDtcbnZhciBIRVJPX0hFSUdIVCA9IDEzMDtcbnZhciBCQVNFU1BFRUQgPSAwLjM7XG52YXIgSGVybyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVybyhjb250YWluZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5TcGVlZCA9IEJBU0VTUEVFRDtcbiAgICAgICAgLy9DaGFuZ2VzIG9uZSBvZiB0aGUgZGlyZWN0aW9uIChyYW5kb21seSBzZWxlY3RlZClcbiAgICAgICAgdGhpcy5DaGFuZ2VEaXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmFuZG9tRGlySW5kZXggPSBIZWxwZXJzLkdldFJhbmRvbUludCgwLCBfdGhpcy5fRGlyZWN0aW9uLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgX3RoaXMuX0NoYW5nZURpcihyYW5kb21EaXJJbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX0NoYW5nZURpciA9IGZ1bmN0aW9uIChkaXJJbmRleCkge1xuICAgICAgICAgICAgaWYgKGRpckluZGV4IDwgMCB8fCBkaXJJbmRleCA+PSBfdGhpcy5fRGlyZWN0aW9uLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgZnJvbSA9IF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdO1xuICAgICAgICAgICAgc3dpdGNoIChmcm9tKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uVG9wOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fRGlyZWN0aW9uW2RpckluZGV4XSA9IERpcmVjdGlvbi5Cb3R0b207XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkJvdHRvbTpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF0gPSBEaXJlY3Rpb24uVG9wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5MZWZ0OlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fRGlyZWN0aW9uW2RpckluZGV4XSA9IERpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uUmlnaHQ6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLkVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuRWx0LmNsYXNzTGlzdC5hZGQoXCJoZXJvXCIpO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS53aWR0aCA9IEhFUk9fV0lEVEggKyBcInB4XCI7XG4gICAgICAgIHRoaXMuRWx0LnN0eWxlLmhlaWdodCA9IEhFUk9fSEVJR0hUICsgXCJweFwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5FbHQpO1xuICAgICAgICB0aGlzLlBvc2l0aW9uID0geyB4OiA1MCwgeTogNTAgfTtcbiAgICAgICAgdGhpcy5fRGlyZWN0aW9uID0gW0RpcmVjdGlvbi5Ub3AsIERpcmVjdGlvbi5MZWZ0XTtcbiAgICAgICAgdGhpcy5Nb3ZlKCk7XG4gICAgfVxuICAgIEhlcm8ucHJvdG90eXBlLkNoYW5nZURpckZyb21Db2xsaXNpb24gPSBmdW5jdGlvbiAoZnJvbURpcnMpIHtcbiAgICAgICAgdmFyIGwgPSBmcm9tRGlycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgICAgIHZhciBmcm9tID0gZnJvbURpcnNbbF07XG4gICAgICAgICAgICB2YXIgZGlySW5kZXggPSB0aGlzLl9EaXJlY3Rpb24uaW5kZXhPZihmcm9tKTtcbiAgICAgICAgICAgIHRoaXMuX0NoYW5nZURpcihkaXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhlcm8ucHJvdG90eXBlLkdvT3Bwb3NpdGVEaXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsID0gdGhpcy5fRGlyZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgdGhpcy5fQ2hhbmdlRGlyKGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIZXJvLnByb3RvdHlwZS5Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLl9EaXJlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRpcikge1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlRvcDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueSA9IF90aGlzLlBvc2l0aW9uLnkgLSBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi55ID0gX3RoaXMuUG9zaXRpb24ueSArIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5MZWZ0OlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi54ID0gX3RoaXMuUG9zaXRpb24ueCAtIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueCA9IF90aGlzLlBvc2l0aW9uLnggKyBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS50b3AgPSB0aGlzLlBvc2l0aW9uLnkgKyBcIiVcIjtcbiAgICAgICAgdGhpcy5FbHQuc3R5bGUubGVmdCA9IHRoaXMuUG9zaXRpb24ueCArIFwiJVwiO1xuICAgIH07XG4gICAgcmV0dXJuIEhlcm87XG59KCkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9IZXJvLnRzXCIvPlxudmFyIFBsYXlncm91bmQ7XG4oZnVuY3Rpb24gKFBsYXlncm91bmQpIHtcbiAgICB2YXIgQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5Z3JvdW5kXCIpO1xuICAgIGlmIChDb250YWluZXIpIHtcbiAgICAgICAgdmFyIF9Ub3RhbEZhY2VzID0gMSwgX0hlcm9lcyA9IFtdLCBDb250YWluZXJSZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoQ29udGFpbmVyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfVG90YWxGYWNlczsgaSsrKSB7XG4gICAgICAgICAgICBfSGVyb2VzLnB1c2gobmV3IEhlcm8oQ29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9FdmVyeSBmcmFtZVxuICAgICAgICB2YXIgX0xvb3AgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9IZXJvZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVybyA9IF9IZXJvZXNbal07XG4gICAgICAgICAgICAgICAgLy9Nb3ZlIGhlcm9cbiAgICAgICAgICAgICAgICBoZXJvLk1vdmUoKTtcbiAgICAgICAgICAgICAgICAvL0lmIGhlcm8gaXMgb3V0c2lkZSBjb250YWluZXIsIGNoYW5nZSBpdHMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgdmFyIGhlcm9SZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoaGVyby5FbHQpO1xuICAgICAgICAgICAgICAgIGlmIChIZWxwZXJzLklzT3V0c2lkZShoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVyby5DaGFuZ2VEaXJGcm9tQ29sbGlzaW9uKEhlbHBlcnMuR2V0T3V0c2lkZURpcihoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIC8vRXZlbnRzXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX0hlcm9lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy9JZiBtb3VzZSBpcyBvdmVyIEhlcm8sIGdvIGZhc3RlciAgICBcbiAgICAgICAgICAgIHZhciBoZXJvID0gX0hlcm9lc1tqXTtcbiAgICAgICAgICAgIGhlcm8uRWx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vaGVyby5Hb09wcG9zaXRlRGlyKCk7XG4gICAgICAgICAgICAgICAgaGVyby5TcGVlZCA9IGhlcm8uU3BlZWQgKiAzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZXJvLkVsdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGhlcm8uU3BlZWQgPSBCQVNFU1BFRUQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vUmFuZG9tbHkgY2hhbmdlIGRpcmVjdGlvbiBldmVyeSAzIHNlY1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC4yKVxuICAgICAgICAgICAgICAgICAgICBoZXJvLkNoYW5nZURpcigpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9SZWNhbGN1bGF0ZSBjb250YWluZXIgc2l6ZSB3aGVuIGNoYW5naW5nIHdpbmRvdyBzaXplXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIENvbnRhaW5lclJlY3QgPSBIZWxwZXJzLkdldFJlY3RhbmdsZShDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG59KShQbGF5Z3JvdW5kIHx8IChQbGF5Z3JvdW5kID0ge30pKTtcbnZhciBUVU1CTFJfVVJMID0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgKyBcIjovL3JpY2t5bWFyb3UudHVtYmxyLmNvbS9hcGkvcmVhZC9qc29uXCI7XG4vL2NvbnN0IFRVTUJMUl9VUkw6IHN0cmluZyA9IFwiaHR0cDovL2FwaS50dW1ibHIuY29tL3YyL2Jsb2cvcmlja3ltYXJvdS50dW1ibHIuY29tL3Bvc3RzXCI7XG52YXIgUE9TVF9QRVJfUEFHRSA9IDIwO1xudmFyIFR1bWJscjtcbihmdW5jdGlvbiAoVHVtYmxyKSB7XG4gICAgdmFyIF9SZXF1ZXN0LCBfQ29udGFpbmVyLCBfTG9hZGVyLCBfQ3VySW5kZXggPSAwO1xuICAgIFR1bWJsci5Jbml0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICBfQ29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICBfR2V0UG9zdHMoKTtcbiAgICB9O1xuICAgIHZhciBfR2V0UG9zdHNSZWFkeVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX1JlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKF9SZXF1ZXN0LnN0YXR1cyAhPSAyMDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZShfUmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgfTtcbiAgICB2YXIgX0dldFBvc3RzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX1JlcXVlc3QpXG4gICAgICAgICAgICBfUmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICBfUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICBfUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBfR2V0UG9zdHNSZWFkeVN0YXRlQ2hhbmdlO1xuICAgICAgICBfUmVxdWVzdC5vcGVuKFwiR0VUXCIsIFRVTUJMUl9VUkwgKyBcIj9zdGFydD1cIiArIF9DdXJJbmRleCArIFwiJm51bT1cIiArIFBPU1RfUEVSX1BBR0UsIHRydWUpO1xuICAgICAgICBfUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICBfUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgX1JlcXVlc3Quc2VuZCgpO1xuICAgIH07XG59KShUdW1ibHIgfHwgKFR1bWJsciA9IHt9KSk7XG52YXIgSG9tZTtcbihmdW5jdGlvbiAoSG9tZSkge1xuICAgIHZhciBfVHVtYmxyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0dW1ibHJcIik7XG4gICAgaWYgKF9UdW1ibHJDb250YWluZXIpXG4gICAgICAgIFR1bWJsci5Jbml0KF9UdW1ibHJDb250YWluZXIpO1xufSkoSG9tZSB8fCAoSG9tZSA9IHt9KSk7XG4iLCIvKiFcbiAqIG1vZGVybml6ciB2My4zLjFcbiAqIEJ1aWxkIGh0dHA6Ly9tb2Rlcm5penIuY29tL2Rvd25sb2FkPy1jYW52YXMtY2xhc3NsaXN0LWNzc2dyYWRpZW50cy1jc3N0cmFuc2Zvcm1zLWNzc3RyYW5zZm9ybXMzZC1jc3N0cmFuc2l0aW9ucy1pbmxpbmVzdmctbG9jYWxpemVkbnVtYmVyLXBsYWNlaG9sZGVyLXNpemVzLXNyY3NldC1zdmctdG91Y2hldmVudHMtZG9tcHJlZml4ZXMtcHJlZml4ZWQtcHJlZml4ZWRjc3MtcHJlZml4ZWRjc3N2YWx1ZS1wcmVmaXhlcy1wcmludHNoaXYtc2V0Y2xhc3Nlcy10ZXN0YWxscHJvcHMtdGVzdHByb3AtZG9udG1pblxuICpcbiAqIENvcHlyaWdodCAoYylcbiAqICBGYXJ1ayBBdGVzXG4gKiAgUGF1bCBJcmlzaFxuICogIEFsZXggU2V4dG9uXG4gKiAgUnlhbiBTZWRkb25cbiAqICBQYXRyaWNrIEtldHRuZXJcbiAqICBTdHUgQ294XG4gKiAgUmljaGFyZCBIZXJyZXJhXG5cbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuLypcbiAqIE1vZGVybml6ciB0ZXN0cyB3aGljaCBuYXRpdmUgQ1NTMyBhbmQgSFRNTDUgZmVhdHVyZXMgYXJlIGF2YWlsYWJsZSBpbiB0aGVcbiAqIGN1cnJlbnQgVUEgYW5kIG1ha2VzIHRoZSByZXN1bHRzIGF2YWlsYWJsZSB0byB5b3UgaW4gdHdvIHdheXM6IGFzIHByb3BlcnRpZXMgb25cbiAqIGEgZ2xvYmFsIGBNb2Rlcm5penJgIG9iamVjdCwgYW5kIGFzIGNsYXNzZXMgb24gdGhlIGA8aHRtbD5gIGVsZW1lbnQuIFRoaXNcbiAqIGluZm9ybWF0aW9uIGFsbG93cyB5b3UgdG8gcHJvZ3Jlc3NpdmVseSBlbmhhbmNlIHlvdXIgcGFnZXMgd2l0aCBhIGdyYW51bGFyIGxldmVsXG4gKiBvZiBjb250cm9sIG92ZXIgdGhlIGV4cGVyaWVuY2UuXG4qL1xuXG47KGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCl7XG4gIHZhciBjbGFzc2VzID0gW107XG4gIFxuXG4gIHZhciB0ZXN0cyA9IFtdO1xuICBcblxuICAvKipcbiAgICpcbiAgICogTW9kZXJuaXpyUHJvdG8gaXMgdGhlIGNvbnN0cnVjdG9yIGZvciBNb2Rlcm5penJcbiAgICpcbiAgICogQGNsYXNzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqL1xuXG4gIHZhciBNb2Rlcm5penJQcm90byA9IHtcbiAgICAvLyBUaGUgY3VycmVudCB2ZXJzaW9uLCBkdW1teVxuICAgIF92ZXJzaW9uOiAnMy4zLjEnLFxuXG4gICAgLy8gQW55IHNldHRpbmdzIHRoYXQgZG9uJ3Qgd29yayBhcyBzZXBhcmF0ZSBtb2R1bGVzXG4gICAgLy8gY2FuIGdvIGluIGhlcmUgYXMgY29uZmlndXJhdGlvbi5cbiAgICBfY29uZmlnOiB7XG4gICAgICAnY2xhc3NQcmVmaXgnOiAnJyxcbiAgICAgICdlbmFibGVDbGFzc2VzJzogdHJ1ZSxcbiAgICAgICdlbmFibGVKU0NsYXNzJzogdHJ1ZSxcbiAgICAgICd1c2VQcmVmaXhlcyc6IHRydWVcbiAgICB9LFxuXG4gICAgLy8gUXVldWUgb2YgdGVzdHNcbiAgICBfcTogW10sXG5cbiAgICAvLyBTdHViIHRoZXNlIGZvciBwZW9wbGUgd2hvIGFyZSBsaXN0ZW5pbmdcbiAgICBvbjogZnVuY3Rpb24odGVzdCwgY2IpIHtcbiAgICAgIC8vIEkgZG9uJ3QgcmVhbGx5IHRoaW5rIHBlb3BsZSBzaG91bGQgZG8gdGhpcywgYnV0IHdlIGNhblxuICAgICAgLy8gc2FmZSBndWFyZCBpdCBhIGJpdC5cbiAgICAgIC8vIC0tIE5PVEU6OiB0aGlzIGdldHMgV0FZIG92ZXJyaWRkZW4gaW4gc3JjL2FkZFRlc3QgZm9yIGFjdHVhbCBhc3luYyB0ZXN0cy5cbiAgICAgIC8vIFRoaXMgaXMgaW4gY2FzZSBwZW9wbGUgbGlzdGVuIHRvIHN5bmNocm9ub3VzIHRlc3RzLiBJIHdvdWxkIGxlYXZlIGl0IG91dCxcbiAgICAgIC8vIGJ1dCB0aGUgY29kZSB0byAqZGlzYWxsb3cqIHN5bmMgdGVzdHMgaW4gdGhlIHJlYWwgdmVyc2lvbiBvZiB0aGlzXG4gICAgICAvLyBmdW5jdGlvbiBpcyBhY3R1YWxseSBsYXJnZXIgdGhhbiB0aGlzLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY2Ioc2VsZlt0ZXN0XSk7XG4gICAgICB9LCAwKTtcbiAgICB9LFxuXG4gICAgYWRkVGVzdDogZnVuY3Rpb24obmFtZSwgZm4sIG9wdGlvbnMpIHtcbiAgICAgIHRlc3RzLnB1c2goe25hbWU6IG5hbWUsIGZuOiBmbiwgb3B0aW9uczogb3B0aW9uc30pO1xuICAgIH0sXG5cbiAgICBhZGRBc3luY1Rlc3Q6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICB0ZXN0cy5wdXNoKHtuYW1lOiBudWxsLCBmbjogZm59KTtcbiAgICB9XG4gIH07XG5cbiAgXG5cbiAgLy8gRmFrZSBzb21lIG9mIE9iamVjdC5jcmVhdGUgc28gd2UgY2FuIGZvcmNlIG5vbiB0ZXN0IHJlc3VsdHMgdG8gYmUgbm9uIFwib3duXCIgcHJvcGVydGllcy5cbiAgdmFyIE1vZGVybml6ciA9IGZ1bmN0aW9uKCkge307XG4gIE1vZGVybml6ci5wcm90b3R5cGUgPSBNb2Rlcm5penJQcm90bztcblxuICAvLyBMZWFrIG1vZGVybml6ciBnbG9iYWxseSB3aGVuIHlvdSBgcmVxdWlyZWAgaXQgcmF0aGVyIHRoYW4gZm9yY2UgaXQgaGVyZS5cbiAgLy8gT3ZlcndyaXRlIG5hbWUgc28gY29uc3RydWN0b3IgbmFtZSBpcyBuaWNlciA6RFxuICBNb2Rlcm5penIgPSBuZXcgTW9kZXJuaXpyKCk7XG5cbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiU1ZHXCIsXG4gIFwicHJvcGVydHlcIjogXCJzdmdcIixcbiAgXCJjYW5pdXNlXCI6IFwic3ZnXCIsXG4gIFwidGFnc1wiOiBbXCJzdmdcIl0sXG4gIFwiYXV0aG9yc1wiOiBbXCJFcmlrIERhaGxzdHJvbVwiXSxcbiAgXCJwb2x5ZmlsbHNcIjogW1xuICAgIFwic3Znd2ViXCIsXG4gICAgXCJyYXBoYWVsXCIsXG4gICAgXCJhbXBsZXNka1wiLFxuICAgIFwiY2FudmdcIixcbiAgICBcInN2Zy1ib2lsZXJwbGF0ZVwiLFxuICAgIFwic2llXCIsXG4gICAgXCJkb2pvZ2Z4XCIsXG4gICAgXCJmYWJyaWNqc1wiXG4gIF1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHN1cHBvcnQgZm9yIFNWRyBpbiBgPGVtYmVkPmAgb3IgYDxvYmplY3Q+YCBlbGVtZW50cy5cbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3N2ZycsICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKS5jcmVhdGVTVkdSZWN0KTtcblxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBzZXQgZm9yIGNzcyB0ZXN0cy4gU2VlIHRpY2tldCAjMjFcbiAgICogaHR0cDovL2dpdC5pby92VUdsNFxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5fcHJlZml4ZXNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLl9wcmVmaXhlc1xuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBNb2Rlcm5penIuX3ByZWZpeGVzIGlzIHRoZSBpbnRlcm5hbCBsaXN0IG9mIHByZWZpeGVzIHRoYXQgd2UgdGVzdCBhZ2FpbnN0XG4gICAqIGluc2lkZSBvZiB0aGluZ3MgbGlrZSBbcHJlZml4ZWRdKCNtb2Rlcm5penItcHJlZml4ZWQpIGFuZCBbcHJlZml4ZWRDU1NdKCMtY29kZS1tb2Rlcm5penItcHJlZml4ZWRjc3MpLiBJdCBpcyBzaW1wbHlcbiAgICogYW4gYXJyYXkgb2Yga2ViYWItY2FzZSB2ZW5kb3IgcHJlZml4ZXMgeW91IGNhbiB1c2Ugd2l0aGluIHlvdXIgY29kZS5cbiAgICpcbiAgICogU29tZSBjb21tb24gdXNlIGNhc2VzIGluY2x1ZGVcbiAgICpcbiAgICogR2VuZXJhdGluZyBhbGwgcG9zc2libGUgcHJlZml4ZWQgdmVyc2lvbiBvZiBhIENTUyBwcm9wZXJ0eVxuICAgKiBgYGBqc1xuICAgKiB2YXIgcnVsZSA9IE1vZGVybml6ci5fcHJlZml4ZXMuam9pbigndHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyAnKTtcbiAgICpcbiAgICogcnVsZSA9PT0gJ3RyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgbW96LXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgby10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG1zLXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsnXG4gICAqIGBgYFxuICAgKlxuICAgKiBHZW5lcmF0aW5nIGFsbCBwb3NzaWJsZSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgQ1NTIHZhbHVlXG4gICAqIGBgYGpzXG4gICAqIHJ1bGUgPSAnZGlzcGxheTonICsgIE1vZGVybml6ci5fcHJlZml4ZXMuam9pbignZmxleDsgZGlzcGxheTonKSArICdmbGV4JztcbiAgICpcbiAgICogcnVsZSA9PT0gJ2Rpc3BsYXk6ZmxleDsgZGlzcGxheTotd2Via2l0LWZsZXg7IGRpc3BsYXk6LW1vei1mbGV4OyBkaXNwbGF5Oi1vLWZsZXg7IGRpc3BsYXk6LW1zLWZsZXg7IGRpc3BsYXk6ZmxleCdcbiAgICogYGBgXG4gICAqL1xuXG4gIC8vIHdlIHVzZSBbJycsJyddIHJhdGhlciB0aGFuIGFuIGVtcHR5IGFycmF5IGluIG9yZGVyIHRvIGFsbG93IGEgcGF0dGVybiBvZiAuYGpvaW4oKWBpbmcgcHJlZml4ZXMgdG8gdGVzdFxuICAvLyB2YWx1ZXMgaW4gZmVhdHVyZSBkZXRlY3RzIHRvIGNvbnRpbnVlIHRvIHdvcmtcbiAgdmFyIHByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyAnIC13ZWJraXQtIC1tb3otIC1vLSAtbXMtICcuc3BsaXQoJyAnKSA6IFsnJywnJ10pO1xuXG4gIC8vIGV4cG9zZSB0aGVzZSBmb3IgdGhlIHBsdWdpbiBBUEkuIExvb2sgaW4gdGhlIHNvdXJjZSBmb3IgaG93IHRvIGpvaW4oKSB0aGVtIGFnYWluc3QgeW91ciBpbnB1dFxuICBNb2Rlcm5penJQcm90by5fcHJlZml4ZXMgPSBwcmVmaXhlcztcblxuICBcblxuICAvKipcbiAgICogaXMgcmV0dXJucyBhIGJvb2xlYW4gaWYgdGhlIHR5cGVvZiBhbiBvYmogaXMgZXhhY3RseSB0eXBlLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGlzXG4gICAqIEBwYXJhbSB7Kn0gb2JqIC0gQSB0aGluZyB3ZSB3YW50IHRvIGNoZWNrIHRoZSB0eXBlIG9mXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gQSBzdHJpbmcgdG8gY29tcGFyZSB0aGUgdHlwZW9mIGFnYWluc3RcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzKG9iaiwgdHlwZSkge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSB0eXBlO1xuICB9XG4gIDtcblxuICAvKipcbiAgICogUnVuIHRocm91Z2ggYWxsIHRlc3RzIGFuZCBkZXRlY3QgdGhlaXIgc3VwcG9ydCBpbiB0aGUgY3VycmVudCBVQS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRlc3RSdW5uZXIoKSB7XG4gICAgdmFyIGZlYXR1cmVOYW1lcztcbiAgICB2YXIgZmVhdHVyZTtcbiAgICB2YXIgYWxpYXNJZHg7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgbmFtZUlkeDtcbiAgICB2YXIgZmVhdHVyZU5hbWU7XG4gICAgdmFyIGZlYXR1cmVOYW1lU3BsaXQ7XG5cbiAgICBmb3IgKHZhciBmZWF0dXJlSWR4IGluIHRlc3RzKSB7XG4gICAgICBpZiAodGVzdHMuaGFzT3duUHJvcGVydHkoZmVhdHVyZUlkeCkpIHtcbiAgICAgICAgZmVhdHVyZU5hbWVzID0gW107XG4gICAgICAgIGZlYXR1cmUgPSB0ZXN0c1tmZWF0dXJlSWR4XTtcbiAgICAgICAgLy8gcnVuIHRoZSB0ZXN0LCB0aHJvdyB0aGUgcmV0dXJuIHZhbHVlIGludG8gdGhlIE1vZGVybml6cixcbiAgICAgICAgLy8gdGhlbiBiYXNlZCBvbiB0aGF0IGJvb2xlYW4sIGRlZmluZSBhbiBhcHByb3ByaWF0ZSBjbGFzc05hbWVcbiAgICAgICAgLy8gYW5kIHB1c2ggaXQgaW50byBhbiBhcnJheSBvZiBjbGFzc2VzIHdlJ2xsIGpvaW4gbGF0ZXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIG5hbWUsIGl0J3MgYW4gJ2FzeW5jJyB0ZXN0IHRoYXQgaXMgcnVuLFxuICAgICAgICAvLyBidXQgbm90IGRpcmVjdGx5IGFkZGVkIHRvIHRoZSBvYmplY3QuIFRoYXQgc2hvdWxkXG4gICAgICAgIC8vIGJlIGRvbmUgd2l0aCBhIHBvc3QtcnVuIGFkZFRlc3QgY2FsbC5cbiAgICAgICAgaWYgKGZlYXR1cmUubmFtZSkge1xuICAgICAgICAgIGZlYXR1cmVOYW1lcy5wdXNoKGZlYXR1cmUubmFtZS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgIGlmIChmZWF0dXJlLm9wdGlvbnMgJiYgZmVhdHVyZS5vcHRpb25zLmFsaWFzZXMgJiYgZmVhdHVyZS5vcHRpb25zLmFsaWFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBBZGQgYWxsIHRoZSBhbGlhc2VzIGludG8gdGhlIG5hbWVzIGxpc3RcbiAgICAgICAgICAgIGZvciAoYWxpYXNJZHggPSAwOyBhbGlhc0lkeCA8IGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzLmxlbmd0aDsgYWxpYXNJZHgrKykge1xuICAgICAgICAgICAgICBmZWF0dXJlTmFtZXMucHVzaChmZWF0dXJlLm9wdGlvbnMuYWxpYXNlc1thbGlhc0lkeF0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSB0ZXN0LCBvciB1c2UgdGhlIHJhdyB2YWx1ZSBpZiBpdCdzIG5vdCBhIGZ1bmN0aW9uXG4gICAgICAgIHJlc3VsdCA9IGlzKGZlYXR1cmUuZm4sICdmdW5jdGlvbicpID8gZmVhdHVyZS5mbigpIDogZmVhdHVyZS5mbjtcblxuXG4gICAgICAgIC8vIFNldCBlYWNoIG9mIHRoZSBuYW1lcyBvbiB0aGUgTW9kZXJuaXpyIG9iamVjdFxuICAgICAgICBmb3IgKG5hbWVJZHggPSAwOyBuYW1lSWR4IDwgZmVhdHVyZU5hbWVzLmxlbmd0aDsgbmFtZUlkeCsrKSB7XG4gICAgICAgICAgZmVhdHVyZU5hbWUgPSBmZWF0dXJlTmFtZXNbbmFtZUlkeF07XG4gICAgICAgICAgLy8gU3VwcG9ydCBkb3QgcHJvcGVydGllcyBhcyBzdWIgdGVzdHMuIFdlIGRvbid0IGRvIGNoZWNraW5nIHRvIG1ha2Ugc3VyZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIGltcGxpZWQgcGFyZW50IHRlc3RzIGhhdmUgYmVlbiBhZGRlZC4gWW91IG11c3QgY2FsbCB0aGVtIGluXG4gICAgICAgICAgLy8gb3JkZXIgKGVpdGhlciBpbiB0aGUgdGVzdCwgb3IgbWFrZSB0aGUgcGFyZW50IHRlc3QgYSBkZXBlbmRlbmN5KS5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIENhcCBpdCB0byBUV08gdG8gbWFrZSB0aGUgbG9naWMgc2ltcGxlIGFuZCBiZWNhdXNlIHdobyBuZWVkcyB0aGF0IGtpbmQgb2Ygc3VidGVzdGluZ1xuICAgICAgICAgIC8vIGhhc2h0YWcgZmFtb3VzIGxhc3Qgd29yZHNcbiAgICAgICAgICBmZWF0dXJlTmFtZVNwbGl0ID0gZmVhdHVyZU5hbWUuc3BsaXQoJy4nKTtcblxuICAgICAgICAgIGlmIChmZWF0dXJlTmFtZVNwbGl0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gcmVzdWx0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjYXN0IHRvIGEgQm9vbGVhbiwgaWYgbm90IG9uZSBhbHJlYWR5XG4gICAgICAgICAgICAvKiBqc2hpbnQgLVcwNTMgKi9cbiAgICAgICAgICAgIGlmIChNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gJiYgIShNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gaW5zdGFuY2VvZiBCb29sZWFuKSkge1xuICAgICAgICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gPSBuZXcgQm9vbGVhbihNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV1bZmVhdHVyZU5hbWVTcGxpdFsxXV0gPSByZXN1bHQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2xhc3Nlcy5wdXNoKChyZXN1bHQgPyAnJyA6ICduby0nKSArIGZlYXR1cmVOYW1lU3BsaXQuam9pbignLScpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIGRvY0VsZW1lbnQgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIHRvIGdyYWIgdGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgZG9jdW1lbnRcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBUaGUgcm9vdCBlbGVtZW50IG9mIHRoZSBkb2N1bWVudFxuICAgKi9cblxuICB2YXIgZG9jRWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiY2xhc3NMaXN0XCIsXG4gIFwiY2FuaXVzZVwiOiBcImNsYXNzbGlzdFwiLFxuICBcInByb3BlcnR5XCI6IFwiY2xhc3NsaXN0XCIsXG4gIFwidGFnc1wiOiBbXCJkb21cIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiZGF0YXZpZXdfYXBpXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiTUROIERvY3NcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vZWxlbWVudC5jbGFzc0xpc3RcIlxuICB9XVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2NsYXNzbGlzdCcsICdjbGFzc0xpc3QnIGluIGRvY0VsZW1lbnQpO1xuXG5cbiAgLyoqXG4gICAqIEEgY29udmVuaWVuY2UgaGVscGVyIHRvIGNoZWNrIGlmIHRoZSBkb2N1bWVudCB3ZSBhcmUgcnVubmluZyBpbiBpcyBhbiBTVkcgZG9jdW1lbnRcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICB2YXIgaXNTVkcgPSBkb2NFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdmcnO1xuICBcblxuICAvKipcbiAgICogc2V0Q2xhc3NlcyB0YWtlcyBhbiBhcnJheSBvZiBjbGFzcyBuYW1lcyBhbmQgYWRkcyB0aGVtIHRvIHRoZSByb290IGVsZW1lbnRcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBzZXRDbGFzc2VzXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IGNsYXNzZXMgLSBBcnJheSBvZiBjbGFzcyBuYW1lc1xuICAgKi9cblxuICAvLyBQYXNzIGluIGFuIGFuZCBhcnJheSBvZiBjbGFzcyBuYW1lcywgZS5nLjpcbiAgLy8gIFsnbm8td2VicCcsICdib3JkZXJyYWRpdXMnLCAuLi5dXG4gIGZ1bmN0aW9uIHNldENsYXNzZXMoY2xhc3Nlcykge1xuICAgIHZhciBjbGFzc05hbWUgPSBkb2NFbGVtZW50LmNsYXNzTmFtZTtcbiAgICB2YXIgY2xhc3NQcmVmaXggPSBNb2Rlcm5penIuX2NvbmZpZy5jbGFzc1ByZWZpeCB8fCAnJztcblxuICAgIGlmIChpc1NWRykge1xuICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLmJhc2VWYWw7XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdlIGBuby1qc2AgdG8gYGpzYCAoaW5kZXBlbmRlbnRseSBvZiB0aGUgYGVuYWJsZUNsYXNzZXNgIG9wdGlvbilcbiAgICAvLyBIYW5kbGUgY2xhc3NQcmVmaXggb24gdGhpcyB0b29cbiAgICBpZiAoTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlSlNDbGFzcykge1xuICAgICAgdmFyIHJlSlMgPSBuZXcgUmVnRXhwKCcoXnxcXFxccyknICsgY2xhc3NQcmVmaXggKyAnbm8tanMoXFxcXHN8JCknKTtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5yZXBsYWNlKHJlSlMsICckMScgKyBjbGFzc1ByZWZpeCArICdqcyQyJyk7XG4gICAgfVxuXG4gICAgaWYgKE1vZGVybml6ci5fY29uZmlnLmVuYWJsZUNsYXNzZXMpIHtcbiAgICAgIC8vIEFkZCB0aGUgbmV3IGNsYXNzZXNcbiAgICAgIGNsYXNzTmFtZSArPSAnICcgKyBjbGFzc1ByZWZpeCArIGNsYXNzZXMuam9pbignICcgKyBjbGFzc1ByZWZpeCk7XG4gICAgICBpc1NWRyA/IGRvY0VsZW1lbnQuY2xhc3NOYW1lLmJhc2VWYWwgPSBjbGFzc05hbWUgOiBkb2NFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICB9XG5cbiAgfVxuXG4gIDtcblxuLyoqXG4gICogQG9wdGlvbk5hbWUgaHRtbDVwcmludHNoaXZcbiAgKiBAb3B0aW9uUHJvcCBodG1sNXByaW50c2hpdlxuICAqL1xuXG4gIC8vIFRha2UgdGhlIGh0bWw1IHZhcmlhYmxlIG91dCBvZiB0aGUgaHRtbDVzaGl2IHNjb3BlIHNvIHdlIGNhbiByZXR1cm4gaXQuXG4gIHZhciBodG1sNTtcbiAgaWYgKCFpc1NWRykge1xuXG4gICAgLyoqXG4gICAgICogQHByZXNlcnZlIEhUTUw1IFNoaXYgMy43LjMgfCBAYWZhcmthcyBAamRhbHRvbiBAam9uX25lYWwgQHJlbSB8IE1JVC9HUEwyIExpY2Vuc2VkXG4gICAgICovXG4gICAgOyhmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50KSB7XG4gICAgICAvKmpzaGludCBldmlsOnRydWUgKi9cbiAgICAgIC8qKiB2ZXJzaW9uICovXG4gICAgICB2YXIgdmVyc2lvbiA9ICczLjcuMyc7XG5cbiAgICAgIC8qKiBQcmVzZXQgb3B0aW9ucyAqL1xuICAgICAgdmFyIG9wdGlvbnMgPSB3aW5kb3cuaHRtbDUgfHwge307XG5cbiAgICAgIC8qKiBVc2VkIHRvIHNraXAgcHJvYmxlbSBlbGVtZW50cyAqL1xuICAgICAgdmFyIHJlU2tpcCA9IC9ePHxeKD86YnV0dG9ufG1hcHxzZWxlY3R8dGV4dGFyZWF8b2JqZWN0fGlmcmFtZXxvcHRpb258b3B0Z3JvdXApJC9pO1xuXG4gICAgICAvKiogTm90IGFsbCBlbGVtZW50cyBjYW4gYmUgY2xvbmVkIGluIElFICoqL1xuICAgICAgdmFyIHNhdmVDbG9uZXMgPSAvXig/OmF8Ynxjb2RlfGRpdnxmaWVsZHNldHxoMXxoMnxoM3xoNHxoNXxoNnxpfGxhYmVsfGxpfG9sfHB8cXxzcGFufHN0cm9uZ3xzdHlsZXx0YWJsZXx0Ym9keXx0ZHx0aHx0cnx1bCkkL2k7XG5cbiAgICAgIC8qKiBEZXRlY3Qgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyBkZWZhdWx0IGh0bWw1IHN0eWxlcyAqL1xuICAgICAgdmFyIHN1cHBvcnRzSHRtbDVTdHlsZXM7XG5cbiAgICAgIC8qKiBOYW1lIG9mIHRoZSBleHBhbmRvLCB0byB3b3JrIHdpdGggbXVsdGlwbGUgZG9jdW1lbnRzIG9yIHRvIHJlLXNoaXYgb25lIGRvY3VtZW50ICovXG4gICAgICB2YXIgZXhwYW5kbyA9ICdfaHRtbDVzaGl2JztcblxuICAgICAgLyoqIFRoZSBpZCBmb3IgdGhlIHRoZSBkb2N1bWVudHMgZXhwYW5kbyAqL1xuICAgICAgdmFyIGV4cGFuSUQgPSAwO1xuXG4gICAgICAvKiogQ2FjaGVkIGRhdGEgZm9yIGVhY2ggZG9jdW1lbnQgKi9cbiAgICAgIHZhciBleHBhbmRvRGF0YSA9IHt9O1xuXG4gICAgICAvKiogRGV0ZWN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdW5rbm93biBlbGVtZW50cyAqL1xuICAgICAgdmFyIHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzO1xuXG4gICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgYS5pbm5lckhUTUwgPSAnPHh5ej48L3h5ej4nO1xuICAgICAgICAgIC8vaWYgdGhlIGhpZGRlbiBwcm9wZXJ0eSBpcyBpbXBsZW1lbnRlZCB3ZSBjYW4gYXNzdW1lLCB0aGF0IHRoZSBicm93c2VyIHN1cHBvcnRzIGJhc2ljIEhUTUw1IFN0eWxlc1xuICAgICAgICAgIHN1cHBvcnRzSHRtbDVTdHlsZXMgPSAoJ2hpZGRlbicgaW4gYSk7XG5cbiAgICAgICAgICBzdXBwb3J0c1Vua25vd25FbGVtZW50cyA9IGEuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSB8fCAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBhc3NpZ24gYSBmYWxzZSBwb3NpdGl2ZSBpZiB1bmFibGUgdG8gc2hpdlxuICAgICAgICAgICAgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpKCdhJyk7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIHR5cGVvZiBmcmFnLmNsb25lTm9kZSA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBmcmFnLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgZnJhZy5jcmVhdGVFbGVtZW50ID09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0oKSk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgIC8vIGFzc2lnbiBhIGZhbHNlIHBvc2l0aXZlIGlmIGRldGVjdGlvbiBmYWlscyA9PiB1bmFibGUgdG8gc2hpdlxuICAgICAgICAgIHN1cHBvcnRzSHRtbDVTdHlsZXMgPSB0cnVlO1xuICAgICAgICAgIHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICB9KCkpO1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgc3R5bGUgc2hlZXQgd2l0aCB0aGUgZ2l2ZW4gQ1NTIHRleHQgYW5kIGFkZHMgaXQgdG8gdGhlIGRvY3VtZW50LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNzc1RleHQgVGhlIENTUyB0ZXh0LlxuICAgICAgICogQHJldHVybnMge1N0eWxlU2hlZXR9IFRoZSBzdHlsZSBlbGVtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBhZGRTdHlsZVNoZWV0KG93bmVyRG9jdW1lbnQsIGNzc1RleHQpIHtcbiAgICAgICAgdmFyIHAgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcbiAgICAgICAgICBwYXJlbnQgPSBvd25lckRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0gfHwgb3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgcC5pbm5lckhUTUwgPSAneDxzdHlsZT4nICsgY3NzVGV4dCArICc8L3N0eWxlPic7XG4gICAgICAgIHJldHVybiBwYXJlbnQuaW5zZXJ0QmVmb3JlKHAubGFzdENoaWxkLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgYGh0bWw1LmVsZW1lbnRzYCBhcyBhbiBhcnJheS5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFuIGFycmF5IG9mIHNoaXZlZCBlbGVtZW50IG5vZGUgbmFtZXMuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRzKCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBodG1sNS5lbGVtZW50cztcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50cyA9PSAnc3RyaW5nJyA/IGVsZW1lbnRzLnNwbGl0KCcgJykgOiBlbGVtZW50cztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBFeHRlbmRzIHRoZSBidWlsdC1pbiBsaXN0IG9mIGh0bWw1IGVsZW1lbnRzXG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBuZXdFbGVtZW50cyB3aGl0ZXNwYWNlIHNlcGFyYXRlZCBsaXN0IG9yIGFycmF5IG9mIG5ldyBlbGVtZW50IG5hbWVzIHRvIHNoaXZcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGNvbnRleHQgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGFkZEVsZW1lbnRzKG5ld0VsZW1lbnRzLCBvd25lckRvY3VtZW50KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGh0bWw1LmVsZW1lbnRzO1xuICAgICAgICBpZih0eXBlb2YgZWxlbWVudHMgIT0gJ3N0cmluZycpe1xuICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHMuam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHR5cGVvZiBuZXdFbGVtZW50cyAhPSAnc3RyaW5nJyl7XG4gICAgICAgICAgbmV3RWxlbWVudHMgPSBuZXdFbGVtZW50cy5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbDUuZWxlbWVudHMgPSBlbGVtZW50cyArJyAnKyBuZXdFbGVtZW50cztcbiAgICAgICAgc2hpdkRvY3VtZW50KG93bmVyRG9jdW1lbnQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIGRhdGEgYXNzb2NpYXRlZCB0byB0aGUgZ2l2ZW4gZG9jdW1lbnRcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCBvZiBkYXRhLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gZXhwYW5kb0RhdGFbb3duZXJEb2N1bWVudFtleHBhbmRvXV07XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSB7fTtcbiAgICAgICAgICBleHBhbklEKys7XG4gICAgICAgICAgb3duZXJEb2N1bWVudFtleHBhbmRvXSA9IGV4cGFuSUQ7XG4gICAgICAgICAgZXhwYW5kb0RhdGFbZXhwYW5JRF0gPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIHJldHVybnMgYSBzaGl2ZWQgZWxlbWVudCBmb3IgdGhlIGdpdmVuIG5vZGVOYW1lIGFuZCBkb2N1bWVudFxuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWUgbmFtZSBvZiB0aGUgZWxlbWVudFxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBzaGl2ZWQgZWxlbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudChub2RlTmFtZSwgb3duZXJEb2N1bWVudCwgZGF0YSl7XG4gICAgICAgIGlmICghb3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIG93bmVyRG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZihzdXBwb3J0c1Vua25vd25FbGVtZW50cyl7XG4gICAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub2RlO1xuXG4gICAgICAgIGlmIChkYXRhLmNhY2hlW25vZGVOYW1lXSkge1xuICAgICAgICAgIG5vZGUgPSBkYXRhLmNhY2hlW25vZGVOYW1lXS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzYXZlQ2xvbmVzLnRlc3Qobm9kZU5hbWUpKSB7XG4gICAgICAgICAgbm9kZSA9IChkYXRhLmNhY2hlW25vZGVOYW1lXSA9IGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSkpLmNsb25lTm9kZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXZvaWQgYWRkaW5nIHNvbWUgZWxlbWVudHMgdG8gZnJhZ21lbnRzIGluIElFIDwgOSBiZWNhdXNlXG4gICAgICAgIC8vICogQXR0cmlidXRlcyBsaWtlIGBuYW1lYCBvciBgdHlwZWAgY2Fubm90IGJlIHNldC9jaGFuZ2VkIG9uY2UgYW4gZWxlbWVudFxuICAgICAgICAvLyAgIGlzIGluc2VydGVkIGludG8gYSBkb2N1bWVudC9mcmFnbWVudFxuICAgICAgICAvLyAqIExpbmsgZWxlbWVudHMgd2l0aCBgc3JjYCBhdHRyaWJ1dGVzIHRoYXQgYXJlIGluYWNjZXNzaWJsZSwgYXMgd2l0aFxuICAgICAgICAvLyAgIGEgNDAzIHJlc3BvbnNlLCB3aWxsIGNhdXNlIHRoZSB0YWIvd2luZG93IHRvIGNyYXNoXG4gICAgICAgIC8vICogU2NyaXB0IGVsZW1lbnRzIGFwcGVuZGVkIHRvIGZyYWdtZW50cyB3aWxsIGV4ZWN1dGUgd2hlbiB0aGVpciBgc3JjYFxuICAgICAgICAvLyAgIG9yIGB0ZXh0YCBwcm9wZXJ0eSBpcyBzZXRcbiAgICAgICAgcmV0dXJuIG5vZGUuY2FuSGF2ZUNoaWxkcmVuICYmICFyZVNraXAudGVzdChub2RlTmFtZSkgJiYgIW5vZGUudGFnVXJuID8gZGF0YS5mcmFnLmFwcGVuZENoaWxkKG5vZGUpIDogbm9kZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIGEgc2hpdmVkIERvY3VtZW50RnJhZ21lbnQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudFxuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBjb250ZXh0IGRvY3VtZW50LlxuICAgICAgICogQHJldHVybnMge09iamVjdH0gVGhlIHNoaXZlZCBEb2N1bWVudEZyYWdtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudEZyYWdtZW50KG93bmVyRG9jdW1lbnQsIGRhdGEpe1xuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICBvd25lckRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3VwcG9ydHNVbmtub3duRWxlbWVudHMpe1xuICAgICAgICAgIHJldHVybiBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhID0gZGF0YSB8fCBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KTtcbiAgICAgICAgdmFyIGNsb25lID0gZGF0YS5mcmFnLmNsb25lTm9kZSgpLFxuICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgIGVsZW1zID0gZ2V0RWxlbWVudHMoKSxcbiAgICAgICAgICBsID0gZWxlbXMubGVuZ3RoO1xuICAgICAgICBmb3IoO2k8bDtpKyspe1xuICAgICAgICAgIGNsb25lLmNyZWF0ZUVsZW1lbnQoZWxlbXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgYGNyZWF0ZUVsZW1lbnRgIGFuZCBgY3JlYXRlRG9jdW1lbnRGcmFnbWVudGAgbWV0aG9kcyBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudHxEb2N1bWVudEZyYWdtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdk1ldGhvZHMob3duZXJEb2N1bWVudCwgZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEuY2FjaGUpIHtcbiAgICAgICAgICBkYXRhLmNhY2hlID0ge307XG4gICAgICAgICAgZGF0YS5jcmVhdGVFbGVtID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50O1xuICAgICAgICAgIGRhdGEuY3JlYXRlRnJhZyA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudDtcbiAgICAgICAgICBkYXRhLmZyYWcgPSBkYXRhLmNyZWF0ZUZyYWcoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24obm9kZU5hbWUpIHtcbiAgICAgICAgICAvL2Fib3J0IHNoaXZcbiAgICAgICAgICBpZiAoIWh0bWw1LnNoaXZNZXRob2RzKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIG93bmVyRG9jdW1lbnQsIGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIG93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCA9IEZ1bmN0aW9uKCdoLGYnLCAncmV0dXJuIGZ1bmN0aW9uKCl7JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YXIgbj1mLmNsb25lTm9kZSgpLGM9bi5jcmVhdGVFbGVtZW50OycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaC5zaGl2TWV0aG9kcyYmKCcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1bnJvbGwgdGhlIGBjcmVhdGVFbGVtZW50YCBjYWxsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRFbGVtZW50cygpLmpvaW4oKS5yZXBsYWNlKC9bXFx3XFwtOl0rL2csIGZ1bmN0aW9uKG5vZGVOYW1lKSB7XG4gICAgICAgICAgZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKTtcbiAgICAgICAgICBkYXRhLmZyYWcuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgICAgcmV0dXJuICdjKFwiJyArIG5vZGVOYW1lICsgJ1wiKSc7XG4gICAgICAgIH0pICtcbiAgICAgICAgICAnKTtyZXR1cm4gbn0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKShodG1sNSwgZGF0YS5mcmFnKTtcbiAgICAgIH1cblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGdpdmVuIGRvY3VtZW50LlxuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBzaGl2LlxuICAgICAgICogQHJldHVybnMge0RvY3VtZW50fSBUaGUgc2hpdmVkIGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2RG9jdW1lbnQob3duZXJEb2N1bWVudCkge1xuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICBvd25lckRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KTtcblxuICAgICAgICBpZiAoaHRtbDUuc2hpdkNTUyAmJiAhc3VwcG9ydHNIdG1sNVN0eWxlcyAmJiAhZGF0YS5oYXNDU1MpIHtcbiAgICAgICAgICBkYXRhLmhhc0NTUyA9ICEhYWRkU3R5bGVTaGVldChvd25lckRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RzIGJsb2NrIGRpc3BsYXkgbm90IGRlZmluZWQgaW4gSUU2LzcvOC85XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FydGljbGUsYXNpZGUsZGlhbG9nLGZpZ2NhcHRpb24sZmlndXJlLGZvb3RlcixoZWFkZXIsaGdyb3VwLG1haW4sbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja30nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRzIHN0eWxpbmcgbm90IHByZXNlbnQgaW4gSUU2LzcvOC85XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcmt7YmFja2dyb3VuZDojRkYwO2NvbG9yOiMwMDB9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZXMgbm9uLXJlbmRlcmVkIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbXBsYXRle2Rpc3BsYXk6bm9uZX0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3VwcG9ydHNVbmtub3duRWxlbWVudHMpIHtcbiAgICAgICAgICBzaGl2TWV0aG9kcyhvd25lckRvY3VtZW50LCBkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudDtcbiAgICAgIH1cblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIGBodG1sNWAgb2JqZWN0IGlzIGV4cG9zZWQgc28gdGhhdCBtb3JlIGVsZW1lbnRzIGNhbiBiZSBzaGl2ZWQgYW5kXG4gICAgICAgKiBleGlzdGluZyBzaGl2aW5nIGNhbiBiZSBkZXRlY3RlZCBvbiBpZnJhbWVzLlxuICAgICAgICogQHR5cGUgT2JqZWN0XG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICpcbiAgICAgICAqIC8vIG9wdGlvbnMgY2FuIGJlIGNoYW5nZWQgYmVmb3JlIHRoZSBzY3JpcHQgaXMgaW5jbHVkZWRcbiAgICAgICAqIGh0bWw1ID0geyAnZWxlbWVudHMnOiAnbWFyayBzZWN0aW9uJywgJ3NoaXZDU1MnOiBmYWxzZSwgJ3NoaXZNZXRob2RzJzogZmFsc2UgfTtcbiAgICAgICAqL1xuICAgICAgdmFyIGh0bWw1ID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIG5vZGUgbmFtZXMgb2YgdGhlIGVsZW1lbnRzIHRvIHNoaXYuXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBBcnJheXxTdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgICdlbGVtZW50cyc6IG9wdGlvbnMuZWxlbWVudHMgfHwgJ2FiYnIgYXJ0aWNsZSBhc2lkZSBhdWRpbyBiZGkgY2FudmFzIGRhdGEgZGF0YWxpc3QgZGV0YWlscyBkaWFsb2cgZmlnY2FwdGlvbiBmaWd1cmUgZm9vdGVyIGhlYWRlciBoZ3JvdXAgbWFpbiBtYXJrIG1ldGVyIG5hdiBvdXRwdXQgcGljdHVyZSBwcm9ncmVzcyBzZWN0aW9uIHN1bW1hcnkgdGVtcGxhdGUgdGltZSB2aWRlbycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGN1cnJlbnQgdmVyc2lvbiBvZiBodG1sNXNoaXZcbiAgICAgICAgICovXG4gICAgICAgICd2ZXJzaW9uJzogdmVyc2lvbixcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHRvIGluZGljYXRlIHRoYXQgdGhlIEhUTUw1IHN0eWxlIHNoZWV0IHNob3VsZCBiZSBpbnNlcnRlZC5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIEJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgICdzaGl2Q1NTJzogKG9wdGlvbnMuc2hpdkNTUyAhPT0gZmFsc2UpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJcyBlcXVhbCB0byB0cnVlIGlmIGEgYnJvd3NlciBzdXBwb3J0cyBjcmVhdGluZyB1bmtub3duL0hUTUw1IGVsZW1lbnRzXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICAnc3VwcG9ydHNVbmtub3duRWxlbWVudHMnOiBzdXBwb3J0c1Vua25vd25FbGVtZW50cyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHRvIGluZGljYXRlIHRoYXQgdGhlIGRvY3VtZW50J3MgYGNyZWF0ZUVsZW1lbnRgIGFuZCBgY3JlYXRlRG9jdW1lbnRGcmFnbWVudGBcbiAgICAgICAgICogbWV0aG9kcyBzaG91bGQgYmUgb3ZlcndyaXR0ZW4uXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICAnc2hpdk1ldGhvZHMnOiAob3B0aW9ucy5zaGl2TWV0aG9kcyAhPT0gZmFsc2UpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHN0cmluZyB0byBkZXNjcmliZSB0aGUgdHlwZSBvZiBgaHRtbDVgIG9iamVjdCAoXCJkZWZhdWx0XCIgb3IgXCJkZWZhdWx0IHByaW50XCIpLlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICAndHlwZSc6ICdkZWZhdWx0JyxcblxuICAgICAgICAvLyBzaGl2cyB0aGUgZG9jdW1lbnQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgYGh0bWw1YCBvYmplY3Qgb3B0aW9uc1xuICAgICAgICAnc2hpdkRvY3VtZW50Jzogc2hpdkRvY3VtZW50LFxuXG4gICAgICAgIC8vY3JlYXRlcyBhIHNoaXZlZCBlbGVtZW50XG4gICAgICAgIGNyZWF0ZUVsZW1lbnQ6IGNyZWF0ZUVsZW1lbnQsXG5cbiAgICAgICAgLy9jcmVhdGVzIGEgc2hpdmVkIGRvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgY3JlYXRlRG9jdW1lbnRGcmFnbWVudDogY3JlYXRlRG9jdW1lbnRGcmFnbWVudCxcblxuICAgICAgICAvL2V4dGVuZHMgbGlzdCBvZiBlbGVtZW50c1xuICAgICAgICBhZGRFbGVtZW50czogYWRkRWxlbWVudHNcbiAgICAgIH07XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvLyBleHBvc2UgaHRtbDVcbiAgICAgIHdpbmRvdy5odG1sNSA9IGh0bWw1O1xuXG4gICAgICAvLyBzaGl2IHRoZSBkb2N1bWVudFxuICAgICAgc2hpdkRvY3VtZW50KGRvY3VtZW50KTtcblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFByaW50IFNoaXYgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKiBVc2VkIHRvIGZpbHRlciBtZWRpYSB0eXBlcyAqL1xuICAgICAgdmFyIHJlTWVkaWEgPSAvXiR8XFxiKD86YWxsfHByaW50KVxcYi87XG5cbiAgICAgIC8qKiBVc2VkIHRvIG5hbWVzcGFjZSBwcmludGFibGUgZWxlbWVudHMgKi9cbiAgICAgIHZhciBzaGl2TmFtZXNwYWNlID0gJ2h0bWw1c2hpdic7XG5cbiAgICAgIC8qKiBEZXRlY3Qgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyBzaGl2YWJsZSBzdHlsZSBzaGVldHMgKi9cbiAgICAgIHZhciBzdXBwb3J0c1NoaXZhYmxlU2hlZXRzID0gIXN1cHBvcnRzVW5rbm93bkVsZW1lbnRzICYmIChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gYXNzaWduIGEgZmFsc2UgbmVnYXRpdmUgaWYgdW5hYmxlIHRvIHNoaXZcbiAgICAgICAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQubmFtZXNwYWNlcyA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGRvY3VtZW50LnBhcmVudFdpbmRvdyA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGRvY0VsLmFwcGx5RWxlbWVudCA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGRvY0VsLnJlbW92ZU5vZGUgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cuYXR0YWNoRXZlbnQgPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKTtcbiAgICAgIH0oKSk7XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFdyYXBzIGFsbCBIVE1MNSBlbGVtZW50cyBpbiB0aGUgZ2l2ZW4gZG9jdW1lbnQgd2l0aCBwcmludGFibGUgZWxlbWVudHMuXG4gICAgICAgKiAoZWcuIHRoZSBcImhlYWRlclwiIGVsZW1lbnQgaXMgd3JhcHBlZCB3aXRoIHRoZSBcImh0bWw1c2hpdjpoZWFkZXJcIiBlbGVtZW50KVxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAgICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSB3cmFwcGVycyBhZGRlZC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYWRkV3JhcHBlcnMob3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgbm9kZSxcbiAgICAgICAgbm9kZXMgPSBvd25lckRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyksXG4gICAgICAgICAgaW5kZXggPSBub2Rlcy5sZW5ndGgsXG4gICAgICAgICAgcmVFbGVtZW50cyA9IFJlZ0V4cCgnXig/OicgKyBnZXRFbGVtZW50cygpLmpvaW4oJ3wnKSArICcpJCcsICdpJyksXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBub2RlID0gbm9kZXNbaW5kZXhdO1xuICAgICAgICAgIGlmIChyZUVsZW1lbnRzLnRlc3Qobm9kZS5ub2RlTmFtZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUuYXBwbHlFbGVtZW50KGNyZWF0ZVdyYXBwZXIobm9kZSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgcHJpbnRhYmxlIHdyYXBwZXIgZm9yIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtFbGVtZW50fSBUaGUgd3JhcHBlci5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlcihlbGVtZW50KSB7XG4gICAgICAgIHZhciBub2RlLFxuICAgICAgICBub2RlcyA9IGVsZW1lbnQuYXR0cmlidXRlcyxcbiAgICAgICAgICBpbmRleCA9IG5vZGVzLmxlbmd0aCxcbiAgICAgICAgICB3cmFwcGVyID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoc2hpdk5hbWVzcGFjZSArICc6JyArIGVsZW1lbnQubm9kZU5hbWUpO1xuXG4gICAgICAgIC8vIGNvcHkgZWxlbWVudCBhdHRyaWJ1dGVzIHRvIHRoZSB3cmFwcGVyXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGVzW2luZGV4XTtcbiAgICAgICAgICBub2RlLnNwZWNpZmllZCAmJiB3cmFwcGVyLnNldEF0dHJpYnV0ZShub2RlLm5vZGVOYW1lLCBub2RlLm5vZGVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29weSBlbGVtZW50IHN0eWxlcyB0byB0aGUgd3JhcHBlclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBlbGVtZW50LnN0eWxlLmNzc1RleHQ7XG4gICAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBnaXZlbiBDU1MgdGV4dC5cbiAgICAgICAqIChlZy4gaGVhZGVye30gYmVjb21lcyBodG1sNXNoaXZcXDpoZWFkZXJ7fSlcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY3NzVGV4dCBUaGUgQ1NTIHRleHQgdG8gc2hpdi5cbiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBzaGl2ZWQgQ1NTIHRleHQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZDc3NUZXh0KGNzc1RleHQpIHtcbiAgICAgICAgdmFyIHBhaXIsXG4gICAgICAgIHBhcnRzID0gY3NzVGV4dC5zcGxpdCgneycpLFxuICAgICAgICAgIGluZGV4ID0gcGFydHMubGVuZ3RoLFxuICAgICAgICAgIHJlRWxlbWVudHMgPSBSZWdFeHAoJyhefFtcXFxccyw+K35dKSgnICsgZ2V0RWxlbWVudHMoKS5qb2luKCd8JykgKyAnKSg/PVtbXFxcXHMsPit+Iy46XXwkKScsICdnaScpLFxuICAgICAgICAgIHJlcGxhY2VtZW50ID0gJyQxJyArIHNoaXZOYW1lc3BhY2UgKyAnXFxcXDokMic7XG5cbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBwYWlyID0gcGFydHNbaW5kZXhdID0gcGFydHNbaW5kZXhdLnNwbGl0KCd9Jyk7XG4gICAgICAgICAgcGFpcltwYWlyLmxlbmd0aCAtIDFdID0gcGFpcltwYWlyLmxlbmd0aCAtIDFdLnJlcGxhY2UocmVFbGVtZW50cywgcmVwbGFjZW1lbnQpO1xuICAgICAgICAgIHBhcnRzW2luZGV4XSA9IHBhaXIuam9pbignfScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCd7Jyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gd3JhcHBlcnMsIGxlYXZpbmcgdGhlIG9yaWdpbmFsIGVsZW1lbnRzLlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbXMge0FycmF5fSB3cmFwcGVycyBBbiBhcnJheSBvZiBwcmludGFibGUgd3JhcHBlcnMuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVdyYXBwZXJzKHdyYXBwZXJzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHdyYXBwZXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICB3cmFwcGVyc1tpbmRleF0ucmVtb3ZlTm9kZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgcHJpbnQuXG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHNoaXYuXG4gICAgICAgKiBAcmV0dXJucyB7RG9jdW1lbnR9IFRoZSBzaGl2ZWQgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZQcmludChvd25lckRvY3VtZW50KSB7XG4gICAgICAgIHZhciBzaGl2ZWRTaGVldCxcbiAgICAgICAgd3JhcHBlcnMsXG4gICAgICAgIGRhdGEgPSBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KSxcbiAgICAgICAgICBuYW1lc3BhY2VzID0gb3duZXJEb2N1bWVudC5uYW1lc3BhY2VzLFxuICAgICAgICAgIG93bmVyV2luZG93ID0gb3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3c7XG5cbiAgICAgICAgaWYgKCFzdXBwb3J0c1NoaXZhYmxlU2hlZXRzIHx8IG93bmVyRG9jdW1lbnQucHJpbnRTaGl2ZWQpIHtcbiAgICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXNbc2hpdk5hbWVzcGFjZV0gPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBuYW1lc3BhY2VzLmFkZChzaGl2TmFtZXNwYWNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVNoZWV0KCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChkYXRhLl9yZW1vdmVTaGVldFRpbWVyKTtcbiAgICAgICAgICBpZiAoc2hpdmVkU2hlZXQpIHtcbiAgICAgICAgICAgIHNoaXZlZFNoZWV0LnJlbW92ZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNoaXZlZFNoZWV0PSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgb3duZXJXaW5kb3cuYXR0YWNoRXZlbnQoJ29uYmVmb3JlcHJpbnQnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIHJlbW92ZVNoZWV0KCk7XG5cbiAgICAgICAgICB2YXIgaW1wb3J0cyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgc2hlZXQsXG4gICAgICAgICAgY29sbGVjdGlvbiA9IG93bmVyRG9jdW1lbnQuc3R5bGVTaGVldHMsXG4gICAgICAgICAgICBjc3NUZXh0ID0gW10sXG4gICAgICAgICAgICBpbmRleCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgICAgc2hlZXRzID0gQXJyYXkoaW5kZXgpO1xuXG4gICAgICAgICAgLy8gY29udmVydCBzdHlsZVNoZWV0cyBjb2xsZWN0aW9uIHRvIGFuIGFycmF5XG4gICAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICAgIHNoZWV0c1tpbmRleF0gPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uY2F0IGFsbCBzdHlsZSBzaGVldCBDU1MgdGV4dFxuICAgICAgICAgIHdoaWxlICgoc2hlZXQgPSBzaGVldHMucG9wKCkpKSB7XG4gICAgICAgICAgICAvLyBJRSBkb2VzIG5vdCBlbmZvcmNlIGEgc2FtZSBvcmlnaW4gcG9saWN5IGZvciBleHRlcm5hbCBzdHlsZSBzaGVldHMuLi5cbiAgICAgICAgICAgIC8vIGJ1dCBoYXMgdHJvdWJsZSB3aXRoIHNvbWUgZHluYW1pY2FsbHkgY3JlYXRlZCBzdHlsZXNoZWV0c1xuICAgICAgICAgICAgaWYgKCFzaGVldC5kaXNhYmxlZCAmJiByZU1lZGlhLnRlc3Qoc2hlZXQubWVkaWEpKSB7XG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbXBvcnRzID0gc2hlZXQuaW1wb3J0cztcbiAgICAgICAgICAgICAgICBsZW5ndGggPSBpbXBvcnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgfSBjYXRjaChlcil7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHNoZWV0cy5wdXNoKGltcG9ydHNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY3NzVGV4dC5wdXNoKHNoZWV0LmNzc1RleHQpO1xuICAgICAgICAgICAgICB9IGNhdGNoKGVyKXt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gd3JhcCBhbGwgSFRNTDUgZWxlbWVudHMgd2l0aCBwcmludGFibGUgZWxlbWVudHMgYW5kIGFkZCB0aGUgc2hpdmVkIHN0eWxlIHNoZWV0XG4gICAgICAgICAgY3NzVGV4dCA9IHNoaXZDc3NUZXh0KGNzc1RleHQucmV2ZXJzZSgpLmpvaW4oJycpKTtcbiAgICAgICAgICB3cmFwcGVycyA9IGFkZFdyYXBwZXJzKG93bmVyRG9jdW1lbnQpO1xuICAgICAgICAgIHNoaXZlZFNoZWV0ID0gYWRkU3R5bGVTaGVldChvd25lckRvY3VtZW50LCBjc3NUZXh0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBvd25lcldpbmRvdy5hdHRhY2hFdmVudCgnb25hZnRlcnByaW50JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gcmVtb3ZlIHdyYXBwZXJzLCBsZWF2aW5nIHRoZSBvcmlnaW5hbCBlbGVtZW50cywgYW5kIHJlbW92ZSB0aGUgc2hpdmVkIHN0eWxlIHNoZWV0XG4gICAgICAgICAgcmVtb3ZlV3JhcHBlcnMod3JhcHBlcnMpO1xuICAgICAgICAgIGNsZWFyVGltZW91dChkYXRhLl9yZW1vdmVTaGVldFRpbWVyKTtcbiAgICAgICAgICBkYXRhLl9yZW1vdmVTaGVldFRpbWVyID0gc2V0VGltZW91dChyZW1vdmVTaGVldCwgNTAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3duZXJEb2N1bWVudC5wcmludFNoaXZlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBvd25lckRvY3VtZW50O1xuICAgICAgfVxuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLy8gZXhwb3NlIEFQSVxuICAgICAgaHRtbDUudHlwZSArPSAnIHByaW50JztcbiAgICAgIGh0bWw1LnNoaXZQcmludCA9IHNoaXZQcmludDtcblxuICAgICAgLy8gc2hpdiBmb3IgcHJpbnRcbiAgICAgIHNoaXZQcmludChkb2N1bWVudCk7XG5cbiAgICAgIGlmKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGh0bWw1O1xuICAgICAgfVxuXG4gICAgfSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZG9jdW1lbnQpKTtcbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogSWYgdGhlIGJyb3dzZXJzIGZvbGxvdyB0aGUgc3BlYywgdGhlbiB0aGV5IHdvdWxkIGV4cG9zZSB2ZW5kb3Itc3BlY2lmaWMgc3R5bGUgYXM6XG4gICAqICAgZWxlbS5zdHlsZS5XZWJraXRCb3JkZXJSYWRpdXNcbiAgICogaW5zdGVhZCBvZiBzb21ldGhpbmcgbGlrZSB0aGUgZm9sbG93aW5nLCB3aGljaCB3b3VsZCBiZSB0ZWNobmljYWxseSBpbmNvcnJlY3Q6XG4gICAqICAgZWxlbS5zdHlsZS53ZWJraXRCb3JkZXJSYWRpdXNcblxuICAgKiBXZWJraXQgZ2hvc3RzIHRoZWlyIHByb3BlcnRpZXMgaW4gbG93ZXJjYXNlIGJ1dCBPcGVyYSAmIE1veiBkbyBub3QuXG4gICAqIE1pY3Jvc29mdCB1c2VzIGEgbG93ZXJjYXNlIGBtc2AgaW5zdGVhZCBvZiB0aGUgY29ycmVjdCBgTXNgIGluIElFOCtcbiAgICogICBlcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwOC8wMy8xMC8yMS40OC4xMC9cblxuICAgKiBNb3JlIGhlcmU6IGdpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvaXNzdWUvMjFcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2ZW5kb3Itc3BlY2lmaWMgc3R5bGUgcHJvcGVydGllc1xuICAgKi9cblxuICB2YXIgb21QcmVmaXhlcyA9ICdNb3ogTyBtcyBXZWJraXQnO1xuICBcblxuICAvKipcbiAgICogTGlzdCBvZiBKYXZhU2NyaXB0IERPTSB2YWx1ZXMgdXNlZCBmb3IgdGVzdHNcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuX2RvbVByZWZpeGVzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5fZG9tUHJlZml4ZXNcbiAgICogQG9wdGlvblByb3AgZG9tUHJlZml4ZXNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogTW9kZXJuaXpyLl9kb21QcmVmaXhlcyBpcyBleGFjdGx5IHRoZSBzYW1lIGFzIFtfcHJlZml4ZXNdKCNtb2Rlcm5penItX3ByZWZpeGVzKSwgYnV0IHJhdGhlclxuICAgKiB0aGFuIGtlYmFiLWNhc2UgcHJvcGVydGllcywgYWxsIHByb3BlcnRpZXMgYXJlIHRoZWlyIENhcGl0YWxpemVkIHZhcmlhbnRcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLl9kb21QcmVmaXhlcyA9PT0gWyBcIk1velwiLCBcIk9cIiwgXCJtc1wiLCBcIldlYmtpdFwiIF07XG4gICAqIGBgYFxuICAgKi9cblxuICB2YXIgZG9tUHJlZml4ZXMgPSAoTW9kZXJuaXpyUHJvdG8uX2NvbmZpZy51c2VQcmVmaXhlcyA/IG9tUHJlZml4ZXMudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpIDogW10pO1xuICBNb2Rlcm5penJQcm90by5fZG9tUHJlZml4ZXMgPSBkb21QcmVmaXhlcztcbiAgXG5cbiAgLyoqXG4gICAqIGNzc1RvRE9NIHRha2VzIGEga2ViYWItY2FzZSBzdHJpbmcgYW5kIGNvbnZlcnRzIGl0IHRvIGNhbWVsQ2FzZVxuICAgKiBlLmcuIGJveC1zaXppbmcgLT4gYm94U2l6aW5nXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gY3NzVG9ET01cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBTdHJpbmcgbmFtZSBvZiBrZWJhYi1jYXNlIHByb3Agd2Ugd2FudCB0byBjb252ZXJ0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjYW1lbENhc2UgdmVyc2lvbiBvZiB0aGUgc3VwcGxpZWQgbmFtZVxuICAgKi9cblxuICBmdW5jdGlvbiBjc3NUb0RPTShuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvKFthLXpdKS0oW2Etel0pL2csIGZ1bmN0aW9uKHN0ciwgbTEsIG0yKSB7XG4gICAgICByZXR1cm4gbTEgKyBtMi50b1VwcGVyQ2FzZSgpO1xuICAgIH0pLnJlcGxhY2UoL14tLywgJycpO1xuICB9XG4gIDtcblxuICAvKipcbiAgICogZG9tVG9DU1MgdGFrZXMgYSBjYW1lbENhc2Ugc3RyaW5nIGFuZCBjb252ZXJ0cyBpdCB0byBrZWJhYi1jYXNlXG4gICAqIGUuZy4gYm94U2l6aW5nIC0+IGJveC1zaXppbmdcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBkb21Ub0NTU1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFN0cmluZyBuYW1lIG9mIGNhbWVsQ2FzZSBwcm9wIHdlIHdhbnQgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUga2ViYWItY2FzZSB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBuYW1lXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGRvbVRvQ1NTKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uKHN0ciwgbTEpIHtcbiAgICAgIHJldHVybiAnLScgKyBtMS50b0xvd2VyQ2FzZSgpO1xuICAgIH0pLnJlcGxhY2UoL15tcy0vLCAnLW1zLScpO1xuICB9XG4gIDtcblxuICAvKipcbiAgICogY3JlYXRlRWxlbWVudCBpcyBhIGNvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuIFNpbmNlIHdlXG4gICAqIHVzZSBjcmVhdGVFbGVtZW50IGFsbCBvdmVyIHRoZSBwbGFjZSwgdGhpcyBhbGxvd3MgZm9yIChzbGlnaHRseSkgc21hbGxlciBjb2RlXG4gICAqIGFzIHdlbGwgYXMgYWJzdHJhY3RpbmcgYXdheSBpc3N1ZXMgd2l0aCBjcmVhdGluZyBlbGVtZW50cyBpbiBjb250ZXh0cyBvdGhlciB0aGFuXG4gICAqIEhUTUwgZG9jdW1lbnRzIChlLmcuIFNWRyBkb2N1bWVudHMpLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IEFuIEhUTUwgb3IgU1ZHIGVsZW1lbnRcbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2UgaW4gSUU3LCB3aGVyZSB0aGUgdHlwZSBvZiBjcmVhdGVFbGVtZW50IGlzIFwib2JqZWN0XCIuXG4gICAgICAvLyBGb3IgdGhpcyByZWFzb24sIHdlIGNhbm5vdCBjYWxsIGFwcGx5KCkgYXMgT2JqZWN0IGlzIG5vdCBhIEZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJndW1lbnRzWzBdKTtcbiAgICB9IGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmNhbGwoZG9jdW1lbnQsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KGRvY3VtZW50LCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogcHJlZml4ZWRDU1NWYWx1ZSBpcyBhIHdheSB0ZXN0IGZvciBwcmVmaXhlZCBjc3MgcHJvcGVydGllcyAoZS5nLiBkaXNwbGF5OiAtd2Via2l0LWZsZXgpXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWVcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWUoKVxuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlZENTU1ZhbHVlXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBwcmVmaXhlZENTU1ZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHRlc3QgZm9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFN0cmluZyB2YWx1ZSBvZiB0aGUgbm9uIHByZWZpeGVkIHZlcnNpb24gb2YgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHRlc3QgZm9yXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8ZmFsc2V9IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSAocG9zc2libHkgcHJlZml4ZWQpXG4gICAqIHZhbGlkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5LCBvciBgZmFsc2VgIHdoZW4gaXQgaXMgdW5zdXBwb3J0ZWQuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBNb2Rlcm5penIucHJlZml4ZWRDU1NWYWx1ZWAgaXMgYSB3YXkgdGVzdCBmb3IgcHJlZml4ZWQgY3NzIHByb3BlcnRpZXMgKGUuZy4gZGlzcGxheTogLXdlYmtpdC1mbGV4KVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIucHJlZml4ZWRDU1NWYWx1ZSgnYmFja2dyb3VuZCcsICdsaW5lYXItZ3JhZGllbnQobGVmdCwgcmVkLCByZWQpJylcbiAgICogYGBgXG4gICAqXG4gICAqL1xuXG4gIHZhciBwcmVmaXhlZENTU1ZhbHVlID0gZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcbiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgdmFyIGVsZW0gPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuXG4gICAgaWYgKHByb3AgaW4gc3R5bGUpIHtcbiAgICAgIHZhciBpID0gZG9tUHJlZml4ZXMubGVuZ3RoO1xuXG4gICAgICBzdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgcmVzdWx0ID0gc3R5bGVbcHJvcF07XG5cbiAgICAgIHdoaWxlIChpLS0gJiYgIXJlc3VsdCkge1xuICAgICAgICBzdHlsZVtwcm9wXSA9ICctJyArIGRvbVByZWZpeGVzW2ldICsgJy0nICsgdmFsdWU7XG4gICAgICAgIHJlc3VsdCA9IHN0eWxlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQgPT09ICcnKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIE1vZGVybml6clByb3RvLnByZWZpeGVkQ1NTVmFsdWUgPSBwcmVmaXhlZENTU1ZhbHVlO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJDYW52YXNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNhbnZhc1wiLFxuICBcImNhbml1c2VcIjogXCJjYW52YXNcIixcbiAgXCJ0YWdzXCI6IFtcImNhbnZhc1wiLCBcImdyYXBoaWNzXCJdLFxuICBcInBvbHlmaWxsc1wiOiBbXCJmbGFzaGNhbnZhc1wiLCBcImV4Y2FudmFzXCIsIFwic2xjYW52YXNcIiwgXCJmeGNhbnZhc1wiXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgdGhlIGA8Y2FudmFzPmAgZWxlbWVudCBmb3IgMkQgZHJhd2luZy5cbiovXG5cbiAgLy8gT24gdGhlIFM2MCBhbmQgQkIgU3Rvcm0sIGdldENvbnRleHQgZXhpc3RzLCBidXQgYWx3YXlzIHJldHVybnMgdW5kZWZpbmVkXG4gIC8vIHNvIHdlIGFjdHVhbGx5IGhhdmUgdG8gY2FsbCBnZXRDb250ZXh0KCkgdG8gdmVyaWZ5XG4gIC8vIGdpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvaXNzdWUvOTcvXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjYW52YXMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KCcyZCcpKTtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgR3JhZGllbnRzXCIsXG4gIFwiY2FuaXVzZVwiOiBcImNzcy1ncmFkaWVudHNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNzc2dyYWRpZW50c1wiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdLFxuICBcImtub3duQnVnc1wiOiBbXCJGYWxzZS1wb3NpdGl2ZXMgb24gd2ViT1MgKGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy8yMDIpXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiV2Via2l0IEdyYWRpZW50IFN5bnRheFwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzE3NS9pbnRyb2R1Y2luZy1jc3MtZ3JhZGllbnRzL1wiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIkxpbmVhciBHcmFkaWVudCBTeW50YXhcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvbGluZWFyLWdyYWRpZW50XCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiVzNDIEdyYWRpZW50IFNwZWNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLWltYWdlcy0zLyNncmFkaWVudHNcIlxuICB9XVxufVxuISovXG5cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnY3NzZ3JhZGllbnRzJywgZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgc3RyMSA9ICdiYWNrZ3JvdW5kLWltYWdlOic7XG4gICAgdmFyIHN0cjIgPSAnZ3JhZGllbnQobGluZWFyLGxlZnQgdG9wLHJpZ2h0IGJvdHRvbSxmcm9tKCM5ZjkpLHRvKHdoaXRlKSk7JztcbiAgICB2YXIgY3NzID0gJyc7XG4gICAgdmFyIGFuZ2xlO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHByZWZpeGVzLmxlbmd0aCAtIDE7IGkgPCBsZW47IGkrKykge1xuICAgICAgYW5nbGUgPSAoaSA9PT0gMCA/ICd0byAnIDogJycpO1xuICAgICAgY3NzICs9IHN0cjEgKyBwcmVmaXhlc1tpXSArICdsaW5lYXItZ3JhZGllbnQoJyArIGFuZ2xlICsgJ2xlZnQgdG9wLCAjOWY5LCB3aGl0ZSk7JztcbiAgICB9XG5cbiAgICBpZiAoTW9kZXJuaXpyLl9jb25maWcudXNlUHJlZml4ZXMpIHtcbiAgICAvLyBsZWdhY3kgd2Via2l0IHN5bnRheCAoRklYTUU6IHJlbW92ZSB3aGVuIHN5bnRheCBub3QgaW4gdXNlIGFueW1vcmUpXG4gICAgICBjc3MgKz0gc3RyMSArICctd2Via2l0LScgKyBzdHIyO1xuICAgIH1cblxuICAgIHZhciBlbGVtID0gY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBzdHlsZSA9IGVsZW0uc3R5bGU7XG4gICAgc3R5bGUuY3NzVGV4dCA9IGNzcztcblxuICAgIC8vIElFNiByZXR1cm5zIHVuZGVmaW5lZCBzbyBjYXN0IHRvIHN0cmluZ1xuICAgIHJldHVybiAoJycgKyBzdHlsZS5iYWNrZ3JvdW5kSW1hZ2UpLmluZGV4T2YoJ2dyYWRpZW50JykgPiAtMTtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJwbGFjZWhvbGRlciBhdHRyaWJ1dGVcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInBsYWNlaG9sZGVyXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiLCBcImF0dHJpYnV0ZVwiXSxcbiAgXCJidWlsZGVyQWxpYXNlc1wiOiBbXCJmb3Jtc19wbGFjZWhvbGRlclwiXVxufVxuISovXG4vKiBET0NcblRlc3RzIGZvciBwbGFjZWhvbGRlciBhdHRyaWJ1dGUgaW4gaW5wdXRzIGFuZCB0ZXh0YXJlYXNcbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3BsYWNlaG9sZGVyJywgKCdwbGFjZWhvbGRlcicgaW4gY3JlYXRlRWxlbWVudCgnaW5wdXQnKSAmJiAncGxhY2Vob2xkZXInIGluIGNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJykpKTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcInNyY3NldCBhdHRyaWJ1dGVcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInNyY3NldFwiLFxuICBcInRhZ3NcIjogW1wiaW1hZ2VcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJTbWFzaGluZyBNYWdhemluZSBBcnRpY2xlXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQVBOR1wiXG4gICAgfSx7XG4gICAgXCJuYW1lXCI6IFwiR2VuZXJhdGUgbXVsdGktcmVzb2x1dGlvbiBpbWFnZXMgZm9yIHNyY3NldCB3aXRoIEdydW50XCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9hZGR5b3NtYW5pLmNvbS9ibG9nL2dlbmVyYXRlLW11bHRpLXJlc29sdXRpb24taW1hZ2VzLWZvci1zcmNzZXQtd2l0aC1ncnVudC9cIlxuICAgIH1dXG59XG4hKi9cbi8qIERPQ1xuVGVzdCBmb3IgdGhlIHNyY3NldCBhdHRyaWJ1dGUgb2YgaW1hZ2VzXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdzcmNzZXQnLCAnc3Jjc2V0JyBpbiBjcmVhdGVFbGVtZW50KCdpbWcnKSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJJbmxpbmUgU1ZHXCIsXG4gIFwicHJvcGVydHlcIjogXCJpbmxpbmVzdmdcIixcbiAgXCJjYW5pdXNlXCI6IFwic3ZnLWh0bWw1XCIsXG4gIFwidGFnc1wiOiBbXCJzdmdcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJUZXN0IHBhZ2VcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3BhdWxpcmlzaC5jb20vZGVtby9pbmxpbmUtc3ZnXCJcbiAgfSwge1xuICAgIFwibmFtZVwiOiBcIlRlc3QgcGFnZSBhbmQgcmVzdWx0c1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vY29kZXBlbi5pby9lbHRvbm1lc3F1aXRhL2Z1bGwvR2dYYnZvL1wiXG4gIH1dLFxuICBcInBvbHlmaWxsc1wiOiBbXCJpbmxpbmUtc3ZnLXBvbHlmaWxsXCJdLFxuICBcImtub3duQnVnc1wiOiBbXCJGYWxzZSBuZWdhdGl2ZSBvbiBzb21lIENocm9taWEgYnJvd3NlcnMuXCJdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciBpbmxpbmUgU1ZHIGluIEhUTUwgKG5vdCB3aXRoaW4gWEhUTUwpLlxuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnaW5saW5lc3ZnJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRpdiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSAnPHN2Zy8+JztcbiAgICByZXR1cm4gKHR5cGVvZiBTVkdSZWN0ICE9ICd1bmRlZmluZWQnICYmIGRpdi5maXJzdENoaWxkICYmIGRpdi5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSkgPT0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJztcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgU3VwcG9ydHNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInN1cHBvcnRzXCIsXG4gIFwiY2FuaXVzZVwiOiBcImNzcy1mZWF0dXJlcXVlcmllc1wiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdLFxuICBcImJ1aWxkZXJBbGlhc2VzXCI6IFtcImNzc19zdXBwb3J0c1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlczIFNwZWNcIixcbiAgICBcImhyZWZcIjogXCJodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MzLWNvbmRpdGlvbmFsLyNhdC1zdXBwb3J0c1wiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIlJlbGF0ZWQgR2l0aHViIElzc3VlXCIsXG4gICAgXCJocmVmXCI6IFwiZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy82NDhcIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJXMyBJbmZvXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzMy1jb25kaXRpb25hbC8jdGhlLWNzc3N1cHBvcnRzcnVsZS1pbnRlcmZhY2VcIlxuICB9XVxufVxuISovXG5cbiAgdmFyIG5ld1N5bnRheCA9ICdDU1MnIGluIHdpbmRvdyAmJiAnc3VwcG9ydHMnIGluIHdpbmRvdy5DU1M7XG4gIHZhciBvbGRTeW50YXggPSAnc3VwcG9ydHNDU1MnIGluIHdpbmRvdztcbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3N1cHBvcnRzJywgbmV3U3ludGF4IHx8IG9sZFN5bnRheCk7XG5cblxuICAvKipcbiAgICogZ2V0Qm9keSByZXR1cm5zIHRoZSBib2R5IG9mIGEgZG9jdW1lbnQsIG9yIGFuIGVsZW1lbnQgdGhhdCBjYW4gc3RhbmQgaW4gZm9yXG4gICAqIHRoZSBib2R5IGlmIGEgcmVhbCBib2R5IGRvZXMgbm90IGV4aXN0XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gZ2V0Qm9keVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gUmV0dXJucyB0aGUgcmVhbCBib2R5IG9mIGEgZG9jdW1lbnQsIG9yIGFuXG4gICAqIGFydGlmaWNpYWxseSBjcmVhdGVkIGVsZW1lbnQgdGhhdCBzdGFuZHMgaW4gZm9yIHRoZSBib2R5XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldEJvZHkoKSB7XG4gICAgLy8gQWZ0ZXIgcGFnZSBsb2FkIGluamVjdGluZyBhIGZha2UgYm9keSBkb2Vzbid0IHdvcmsgc28gY2hlY2sgaWYgYm9keSBleGlzdHNcbiAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIC8vIENhbid0IHVzZSB0aGUgcmVhbCBib2R5IGNyZWF0ZSBhIGZha2Ugb25lLlxuICAgICAgYm9keSA9IGNyZWF0ZUVsZW1lbnQoaXNTVkcgPyAnc3ZnJyA6ICdib2R5Jyk7XG4gICAgICBib2R5LmZha2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBib2R5O1xuICB9XG5cbiAgO1xuXG4gIHZhciBjc3NvbVByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyBvbVByZWZpeGVzLnNwbGl0KCcgJykgOiBbXSk7XG4gIE1vZGVybml6clByb3RvLl9jc3NvbVByZWZpeGVzID0gY3Nzb21QcmVmaXhlcztcbiAgXG5cbiAgLyoqXG4gICAqIGF0UnVsZSByZXR1cm5zIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5IGF0LXJ1bGUgKGVnIEBrZXlmcmFtZXMpLCBwb3NzaWJseSBpblxuICAgKiBzb21lIHByZWZpeGVkIGZvcm0sIG9yIGZhbHNlLCBpbiB0aGUgY2FzZSBvZiBhbiB1bnN1cHBvcnRlZCBydWxlXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLmF0UnVsZVxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuYXRSdWxlKClcbiAgICogQG9wdGlvblByb3AgYXRSdWxlXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBhdFJ1bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtZSBvZiB0aGUgQC1ydWxlIHRvIHRlc3QgZm9yXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8Ym9vbGVhbn0gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIChwb3NzaWJseSBwcmVmaXhlZClcbiAgICogdmFsaWQgdmVyc2lvbiBvZiB0aGUgQC1ydWxlLCBvciBgZmFsc2VgIHdoZW4gaXQgaXMgdW5zdXBwb3J0ZWQuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqICB2YXIga2V5ZnJhbWVzID0gTW9kZXJuaXpyLmF0UnVsZSgnQGtleWZyYW1lcycpO1xuICAgKlxuICAgKiAgaWYgKGtleWZyYW1lcykge1xuICAgKiAgICAvLyBrZXlmcmFtZXMgYXJlIHN1cHBvcnRlZFxuICAgKiAgICAvLyBjb3VsZCBiZSBgQC13ZWJraXQta2V5ZnJhbWVzYCBvciBgQGtleWZyYW1lc2BcbiAgICogIH0gZWxzZSB7XG4gICAqICAgIC8vIGtleWZyYW1lcyA9PT0gYGZhbHNlYFxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICovXG5cbiAgdmFyIGF0UnVsZSA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICB2YXIgbGVuZ3RoID0gcHJlZml4ZXMubGVuZ3RoO1xuICAgIHZhciBjc3NydWxlID0gd2luZG93LkNTU1J1bGU7XG4gICAgdmFyIHJ1bGU7XG5cbiAgICBpZiAodHlwZW9mIGNzc3J1bGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICghcHJvcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSBsaXRlcmFsIEAgZnJvbSBiZWdpbm5pbmcgb2YgcHJvdmlkZWQgcHJvcGVydHlcbiAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC9eQC8sICcnKTtcblxuICAgIC8vIENTU1J1bGVzIHVzZSB1bmRlcnNjb3JlcyBpbnN0ZWFkIG9mIGRhc2hlc1xuICAgIHJ1bGUgPSBwcm9wLnJlcGxhY2UoLy0vZywgJ18nKS50b1VwcGVyQ2FzZSgpICsgJ19SVUxFJztcblxuICAgIGlmIChydWxlIGluIGNzc3J1bGUpIHtcbiAgICAgIHJldHVybiAnQCcgKyBwcm9wO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIHByZWZpeGVzIGdpdmVzIHVzIHNvbWV0aGluZyBsaWtlIC1vLSwgYW5kIHdlIHdhbnQgT19cbiAgICAgIHZhciBwcmVmaXggPSBwcmVmaXhlc1tpXTtcbiAgICAgIHZhciB0aGlzUnVsZSA9IHByZWZpeC50b1VwcGVyQ2FzZSgpICsgJ18nICsgcnVsZTtcblxuICAgICAgaWYgKHRoaXNSdWxlIGluIGNzc3J1bGUpIHtcbiAgICAgICAgcmV0dXJuICdALScgKyBwcmVmaXgudG9Mb3dlckNhc2UoKSArICctJyArIHByb3A7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIE1vZGVybml6clByb3RvLmF0UnVsZSA9IGF0UnVsZTtcblxuICBcblxuXG4gIC8qKlxuICAgKiBjb250YWlucyBjaGVja3MgdG8gc2VlIGlmIGEgc3RyaW5nIGNvbnRhaW5zIGFub3RoZXIgc3RyaW5nXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gY29udGFpbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgd2Ugd2FudCB0byBjaGVjayBmb3Igc3Vic3RyaW5nc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic3RyIC0gVGhlIHN1YnN0cmluZyB3ZSB3YW50IHRvIHNlYXJjaCB0aGUgZmlyc3Qgc3RyaW5nIGZvclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29udGFpbnMoc3RyLCBzdWJzdHIpIHtcbiAgICByZXR1cm4gISF+KCcnICsgc3RyKS5pbmRleE9mKHN1YnN0cik7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzIGluamVjdHMgYW4gZWxlbWVudCB3aXRoIHN0eWxlIGVsZW1lbnQgYW5kIHNvbWUgQ1NTIHJ1bGVzXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGUgLSBTdHJpbmcgcmVwcmVzZW50aW5nIGEgY3NzIHJ1bGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byB0ZXN0IHRoZSBpbmplY3RlZCBlbGVtZW50XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbm9kZXNdIC0gQW4gaW50ZWdlciByZXByZXNlbnRpbmcgdGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIG5vZGVzIHlvdSB3YW50IGluamVjdGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IFt0ZXN0bmFtZXNdIC0gQW4gYXJyYXkgb2Ygc3RyaW5ncyB0aGF0IGFyZSB1c2VkIGFzIGlkcyBmb3IgdGhlIGFkZGl0aW9uYWwgbm9kZXNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzKHJ1bGUsIGNhbGxiYWNrLCBub2RlcywgdGVzdG5hbWVzKSB7XG4gICAgdmFyIG1vZCA9ICdtb2Rlcm5penInO1xuICAgIHZhciBzdHlsZTtcbiAgICB2YXIgcmV0O1xuICAgIHZhciBub2RlO1xuICAgIHZhciBkb2NPdmVyZmxvdztcbiAgICB2YXIgZGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGJvZHkgPSBnZXRCb2R5KCk7XG5cbiAgICBpZiAocGFyc2VJbnQobm9kZXMsIDEwKSkge1xuICAgICAgLy8gSW4gb3JkZXIgbm90IHRvIGdpdmUgZmFsc2UgcG9zaXRpdmVzIHdlIGNyZWF0ZSBhIG5vZGUgZm9yIGVhY2ggdGVzdFxuICAgICAgLy8gVGhpcyBhbHNvIGFsbG93cyB0aGUgbWV0aG9kIHRvIHNjYWxlIGZvciB1bnNwZWNpZmllZCB1c2VzXG4gICAgICB3aGlsZSAobm9kZXMtLSkge1xuICAgICAgICBub2RlID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG5vZGUuaWQgPSB0ZXN0bmFtZXMgPyB0ZXN0bmFtZXNbbm9kZXNdIDogbW9kICsgKG5vZGVzICsgMSk7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdHlsZSA9IGNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgc3R5bGUuaWQgPSAncycgKyBtb2Q7XG5cbiAgICAvLyBJRTYgd2lsbCBmYWxzZSBwb3NpdGl2ZSBvbiBzb21lIHRlc3RzIGR1ZSB0byB0aGUgc3R5bGUgZWxlbWVudCBpbnNpZGUgdGhlIHRlc3QgZGl2IHNvbWVob3cgaW50ZXJmZXJpbmcgb2Zmc2V0SGVpZ2h0LCBzbyBpbnNlcnQgaXQgaW50byBib2R5IG9yIGZha2Vib2R5LlxuICAgIC8vIE9wZXJhIHdpbGwgYWN0IGFsbCBxdWlya3kgd2hlbiBpbmplY3RpbmcgZWxlbWVudHMgaW4gZG9jdW1lbnRFbGVtZW50IHdoZW4gcGFnZSBpcyBzZXJ2ZWQgYXMgeG1sLCBuZWVkcyBmYWtlYm9keSB0b28uICMyNzBcbiAgICAoIWJvZHkuZmFrZSA/IGRpdiA6IGJvZHkpLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGRpdik7XG5cbiAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcnVsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocnVsZSkpO1xuICAgIH1cbiAgICBkaXYuaWQgPSBtb2Q7XG5cbiAgICBpZiAoYm9keS5mYWtlKSB7XG4gICAgICAvL2F2b2lkIGNyYXNoaW5nIElFOCwgaWYgYmFja2dyb3VuZCBpbWFnZSBpcyB1c2VkXG4gICAgICBib2R5LnN0eWxlLmJhY2tncm91bmQgPSAnJztcbiAgICAgIC8vU2FmYXJpIDUuMTMvNS4xLjQgT1NYIHN0b3BzIGxvYWRpbmcgaWYgOjotd2Via2l0LXNjcm9sbGJhciBpcyB1c2VkIGFuZCBzY3JvbGxiYXJzIGFyZSB2aXNpYmxlXG4gICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICBkb2NPdmVyZmxvdyA9IGRvY0VsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XG4gICAgICBkb2NFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICBkb2NFbGVtZW50LmFwcGVuZENoaWxkKGJvZHkpO1xuICAgIH1cblxuICAgIHJldCA9IGNhbGxiYWNrKGRpdiwgcnVsZSk7XG4gICAgLy8gSWYgdGhpcyBpcyBkb25lIGFmdGVyIHBhZ2UgbG9hZCB3ZSBkb24ndCB3YW50IHRvIHJlbW92ZSB0aGUgYm9keSBzbyBjaGVjayBpZiBib2R5IGV4aXN0c1xuICAgIGlmIChib2R5LmZha2UpIHtcbiAgICAgIGJvZHkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChib2R5KTtcbiAgICAgIGRvY0VsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBkb2NPdmVyZmxvdztcbiAgICAgIC8vIFRyaWdnZXIgbGF5b3V0IHNvIGtpbmV0aWMgc2Nyb2xsaW5nIGlzbid0IGRpc2FibGVkIGluIGlPUzYrXG4gICAgICBkb2NFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICB9XG5cbiAgICByZXR1cm4gISFyZXQ7XG5cbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogdGVzdFN0eWxlcyBpbmplY3RzIGFuIGVsZW1lbnQgd2l0aCBzdHlsZSBlbGVtZW50IGFuZCBzb21lIENTUyBydWxlc1xuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci50ZXN0U3R5bGVzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci50ZXN0U3R5bGVzKClcbiAgICogQG9wdGlvblByb3AgdGVzdFN0eWxlc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gdGVzdFN0eWxlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZSAtIFN0cmluZyByZXByZXNlbnRpbmcgYSBjc3MgcnVsZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIHRlc3QgdGhlIGluamVjdGVkIGVsZW1lbnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtub2Rlc10gLSBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgbm9kZXMgeW91IHdhbnQgaW5qZWN0ZWRcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3Rlc3RuYW1lc10gLSBBbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgYXJlIHVzZWQgYXMgaWRzIGZvciB0aGUgYWRkaXRpb25hbCBub2Rlc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYE1vZGVybml6ci50ZXN0U3R5bGVzYCB0YWtlcyBhIENTUyBydWxlIGFuZCBpbmplY3RzIGl0IG9udG8gdGhlIGN1cnJlbnQgcGFnZVxuICAgKiBhbG9uZyB3aXRoIChwb3NzaWJseSBtdWx0aXBsZSkgRE9NIGVsZW1lbnRzLiBUaGlzIGxldHMgeW91IGNoZWNrIGZvciBmZWF0dXJlc1xuICAgKiB0aGF0IGNhbiBub3QgYmUgZGV0ZWN0ZWQgYnkgc2ltcGx5IGNoZWNraW5nIHRoZSBbSURMXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL01vemlsbGEvRGV2ZWxvcGVyX2d1aWRlL0ludGVyZmFjZV9kZXZlbG9wbWVudF9ndWlkZS9JRExfaW50ZXJmYWNlX3J1bGVzKS5cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RTdHlsZXMoJyNtb2Rlcm5penIgeyB3aWR0aDogOXB4OyBjb2xvcjogcGFwYXlhd2hpcDsgfScsIGZ1bmN0aW9uKGVsZW0sIHJ1bGUpIHtcbiAgICogICAvLyBlbGVtIGlzIHRoZSBmaXJzdCBET00gbm9kZSBpbiB0aGUgcGFnZSAoYnkgZGVmYXVsdCAjbW9kZXJuaXpyKVxuICAgKiAgIC8vIHJ1bGUgaXMgdGhlIGZpcnN0IGFyZ3VtZW50IHlvdSBzdXBwbGllZCAtIHRoZSBDU1MgcnVsZSBpbiBzdHJpbmcgZm9ybVxuICAgKlxuICAgKiAgIGFkZFRlc3QoJ3dpZHRod29ya3MnLCBlbGVtLnN0eWxlLndpZHRoID09PSAnOXB4JylcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB5b3VyIHRlc3QgcmVxdWlyZXMgbXVsdGlwbGUgbm9kZXMsIHlvdSBjYW4gaW5jbHVkZSBhIHRoaXJkIGFyZ3VtZW50XG4gICAqIGluZGljYXRpbmcgaG93IG1hbnkgYWRkaXRpb25hbCBkaXYgZWxlbWVudHMgdG8gaW5jbHVkZSBvbiB0aGUgcGFnZS4gVGhlXG4gICAqIGFkZGl0aW9uYWwgbm9kZXMgYXJlIGluamVjdGVkIGFzIGNoaWxkcmVuIG9mIHRoZSBgZWxlbWAgdGhhdCBpcyByZXR1cm5lZCBhc1xuICAgKiB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFN0eWxlcygnI21vZGVybml6ciB7d2lkdGg6IDFweH07ICNtb2Rlcm5penIyIHt3aWR0aDogMnB4fScsIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICogICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuaXpyJykuc3R5bGUud2lkdGggPT09ICcxcHgnOyAvLyB0cnVlXG4gICAqICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVybml6cjInKS5zdHlsZS53aWR0aCA9PT0gJzJweCc7IC8vIHRydWVcbiAgICogICBlbGVtLmZpcnN0Q2hpbGQgPT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5penIyJyk7IC8vIHRydWVcbiAgICogfSwgMSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBhbGwgb2YgdGhlIGFkZGl0aW9uYWwgZWxlbWVudHMgaGF2ZSBhbiBJRCBvZiBgbW9kZXJuaXpyW25dYCwgd2hlcmVcbiAgICogYG5gIGlzIGl0cyBpbmRleCAoZS5nLiB0aGUgZmlyc3QgYWRkaXRpb25hbCwgc2Vjb25kIG92ZXJhbGwgaXMgYCNtb2Rlcm5penIyYCxcbiAgICogdGhlIHNlY29uZCBhZGRpdGlvbmFsIGlzIGAjbW9kZXJuaXpyM2AsIGV0Yy4pLlxuICAgKiBJZiB5b3Ugd2FudCB0byBoYXZlIG1vcmUgbWVhbmluZ2Z1bCBJRHMgZm9yIHlvdXIgZnVuY3Rpb24sIHlvdSBjYW4gcHJvdmlkZVxuICAgKiB0aGVtIGFzIHRoZSBmb3VydGggYXJndW1lbnQsIGFzIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RTdHlsZXMoJyNmb28ge3dpZHRoOiAxMHB4fTsgI2JhciB7aGVpZ2h0OiAyMHB4fScsIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICogICBlbGVtLmZpcnN0Q2hpbGQgPT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb28nKTsgLy8gdHJ1ZVxuICAgKiAgIGVsZW0ubGFzdENoaWxkID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFyJyk7IC8vIHRydWVcbiAgICogfSwgMiwgWydmb28nLCAnYmFyJ10pO1xuICAgKiBgYGBcbiAgICpcbiAgICovXG5cbiAgdmFyIHRlc3RTdHlsZXMgPSBNb2Rlcm5penJQcm90by50ZXN0U3R5bGVzID0gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXM7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIlRvdWNoIEV2ZW50c1wiLFxuICBcInByb3BlcnR5XCI6IFwidG91Y2hldmVudHNcIixcbiAgXCJjYW5pdXNlXCIgOiBcInRvdWNoXCIsXG4gIFwidGFnc1wiOiBbXCJtZWRpYVwiLCBcImF0dHJpYnV0ZVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlRvdWNoIEV2ZW50cyBzcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtdG91Y2gtZXZlbnRzLTIwMTMwMTI0L1wiXG4gIH1dLFxuICBcIndhcm5pbmdzXCI6IFtcbiAgICBcIkluZGljYXRlcyBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgVG91Y2ggRXZlbnRzIHNwZWMsIGFuZCBkb2VzIG5vdCBuZWNlc3NhcmlseSByZWZsZWN0IGEgdG91Y2hzY3JlZW4gZGV2aWNlXCJcbiAgXSxcbiAgXCJrbm93bkJ1Z3NcIjogW1xuICAgIFwiRmFsc2UtcG9zaXRpdmUgb24gc29tZSBjb25maWd1cmF0aW9ucyBvZiBOb2tpYSBOOTAwXCIsXG4gICAgXCJGYWxzZS1wb3NpdGl2ZSBvbiBzb21lIEJsYWNrQmVycnkgNi4wIGJ1aWxkcyDigJMgaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzLzM3MiNpc3N1ZWNvbW1lbnQtMzExMjY5NVwiXG4gIF1cbn1cbiEqL1xuLyogRE9DXG5JbmRpY2F0ZXMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIFczQyBUb3VjaCBFdmVudHMgQVBJLlxuXG5UaGlzICpkb2VzIG5vdCogbmVjZXNzYXJpbHkgcmVmbGVjdCBhIHRvdWNoc2NyZWVuIGRldmljZTpcblxuKiBPbGRlciB0b3VjaHNjcmVlbiBkZXZpY2VzIG9ubHkgZW11bGF0ZSBtb3VzZSBldmVudHNcbiogTW9kZXJuIElFIHRvdWNoIGRldmljZXMgaW1wbGVtZW50IHRoZSBQb2ludGVyIEV2ZW50cyBBUEkgaW5zdGVhZDogdXNlIGBNb2Rlcm5penIucG9pbnRlcmV2ZW50c2AgdG8gZGV0ZWN0IHN1cHBvcnQgZm9yIHRoYXRcbiogU29tZSBicm93c2VycyAmIE9TIHNldHVwcyBtYXkgZW5hYmxlIHRvdWNoIEFQSXMgd2hlbiBubyB0b3VjaHNjcmVlbiBpcyBjb25uZWN0ZWRcbiogRnV0dXJlIGJyb3dzZXJzIG1heSBpbXBsZW1lbnQgb3RoZXIgZXZlbnQgbW9kZWxzIGZvciB0b3VjaCBpbnRlcmFjdGlvbnNcblxuU2VlIHRoaXMgYXJ0aWNsZTogW1lvdSBDYW4ndCBEZXRlY3QgQSBUb3VjaHNjcmVlbl0oaHR0cDovL3d3dy5zdHVjb3guY29tL2Jsb2cveW91LWNhbnQtZGV0ZWN0LWEtdG91Y2hzY3JlZW4vKS5cblxuSXQncyByZWNvbW1lbmRlZCB0byBiaW5kIGJvdGggbW91c2UgYW5kIHRvdWNoL3BvaW50ZXIgZXZlbnRzIHNpbXVsdGFuZW91c2x5IOKAkyBzZWUgW3RoaXMgSFRNTDUgUm9ja3MgdHV0b3JpYWxdKGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vbW9iaWxlL3RvdWNoYW5kbW91c2UvKS5cblxuVGhpcyB0ZXN0IHdpbGwgYWxzbyByZXR1cm4gYHRydWVgIGZvciBGaXJlZm94IDQgTXVsdGl0b3VjaCBzdXBwb3J0LlxuKi9cblxuICAvLyBDaHJvbWUgKGRlc2t0b3ApIHVzZWQgdG8gbGllIGFib3V0IGl0cyBzdXBwb3J0IG9uIHRoaXMsIGJ1dCB0aGF0IGhhcyBzaW5jZSBiZWVuIHJlY3RpZmllZDogaHR0cDovL2NyYnVnLmNvbS8zNjQxNVxuICBNb2Rlcm5penIuYWRkVGVzdCgndG91Y2hldmVudHMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9vbDtcbiAgICBpZiAoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoKSB7XG4gICAgICBib29sID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaW5jbHVkZSB0aGUgJ2hlYXJ0eicgYXMgYSB3YXkgdG8gaGF2ZSBhIG5vbiBtYXRjaGluZyBNUSB0byBoZWxwIHRlcm1pbmF0ZSB0aGUgam9pblxuICAgICAgLy8gaHR0cHM6Ly9naXQuaW8vdnpuRkhcbiAgICAgIHZhciBxdWVyeSA9IFsnQG1lZGlhICgnLCBwcmVmaXhlcy5qb2luKCd0b3VjaC1lbmFibGVkKSwoJyksICdoZWFydHonLCAnKScsICd7I21vZGVybml6cnt0b3A6OXB4O3Bvc2l0aW9uOmFic29sdXRlfX0nXS5qb2luKCcnKTtcbiAgICAgIHRlc3RTdHlsZXMocXVlcnksIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgYm9vbCA9IG5vZGUub2Zmc2V0VG9wID09PSA5O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBib29sO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkZvcm0gVmFsaWRhdGlvblwiLFxuICBcInByb3BlcnR5XCI6IFwiZm9ybXZhbGlkYXRpb25cIixcbiAgXCJ0YWdzXCI6IFtcImZvcm1zXCIsIFwidmFsaWRhdGlvblwiLCBcImF0dHJpYnV0ZVwiXSxcbiAgXCJidWlsZGVyQWxpYXNlc1wiOiBbXCJmb3Jtc192YWxpZGF0aW9uXCJdXG59XG4hKi9cbi8qIERPQ1xuVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHRlc3RzIHN1cHBvcnQgZm9yIGludGVyYWN0aXZlIGZvcm0gdmFsaWRhdGlvbi5cblRvIGNoZWNrIHZhbGlkYXRpb24gZm9yIGEgc3BlY2lmaWMgdHlwZSBvciBhIHNwZWNpZmljIG90aGVyIGNvbnN0cmFpbnQsXG50aGUgdGVzdCBjYW4gYmUgY29tYmluZWQ6XG5cbi0gYE1vZGVybml6ci5pbnB1dHR5cGVzLm51bWJlciAmJiBNb2Rlcm5penIuZm9ybXZhbGlkYXRpb25gIChicm93c2VyIHN1cHBvcnRzIHJhbmdlT3ZlcmZsb3csIHR5cGVNaXNtYXRjaCBldGMuIGZvciB0eXBlPW51bWJlcilcbi0gYE1vZGVybml6ci5pbnB1dC5yZXF1aXJlZCAmJiBNb2Rlcm5penIuZm9ybXZhbGlkYXRpb25gIChicm93c2VyIHN1cHBvcnRzIHZhbHVlTWlzc2luZylcbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Zvcm12YWxpZGF0aW9uJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZvcm0gPSBjcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgaWYgKCEoJ2NoZWNrVmFsaWRpdHknIGluIGZvcm0pIHx8ICEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGZvcm0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICgncmVwb3J0VmFsaWRpdHknIGluIGZvcm0pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgaW52YWxpZEZpcmVkID0gZmFsc2U7XG4gICAgdmFyIGlucHV0O1xuXG4gICAgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uYXBpID0gIHRydWU7XG5cbiAgICAvLyBQcmV2ZW50IGZvcm0gZnJvbSBiZWluZyBzdWJtaXR0ZWRcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIC8vIE9sZCBQcmVzdG8gYmFzZWQgT3BlcmEgZG9lcyBub3QgdmFsaWRhdGUgZm9ybSwgaWYgc3VibWl0IGlzIHByZXZlbnRlZFxuICAgICAgLy8gYWx0aG91Z2ggT3BlcmEgTWluaSBzZXJ2ZXJzIHVzZSBuZXdlciBQcmVzdG8uXG4gICAgICBpZiAoIXdpbmRvdy5vcGVyYSB8fCB3aW5kb3cub3BlcmFtaW5pKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgLy8gQ2FsbGluZyBmb3JtLnN1Ym1pdCgpIGRvZXNuJ3QgdHJpZ2dlciBpbnRlcmFjdGl2ZSB2YWxpZGF0aW9uLFxuICAgIC8vIHVzZSBhIHN1Ym1pdCBidXR0b24gaW5zdGVhZFxuICAgIC8vb2xkZXIgb3BlcmEgYnJvd3NlcnMgbmVlZCBhIG5hbWUgYXR0cmlidXRlXG4gICAgZm9ybS5pbm5lckhUTUwgPSAnPGlucHV0IG5hbWU9XCJtb2RUZXN0XCIgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiIC8+PGJ1dHRvbj48L2J1dHRvbj4nO1xuXG4gICAgdGVzdFN0eWxlcygnI21vZGVybml6ciBmb3Jte3Bvc2l0aW9uOmFic29sdXRlO3RvcDotOTk5OTllbX0nLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgICBpbnB1dCA9IGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF07XG5cbiAgICAgIC8vIFJlY29yZCB3aGV0aGVyIFwiaW52YWxpZFwiIGV2ZW50IGlzIGZpcmVkXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnZhbGlkJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpbnZhbGlkRmlyZWQgPSB0cnVlO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIC8vT3BlcmEgZG9lcyBub3QgZnVsbHkgc3VwcG9ydCB0aGUgdmFsaWRhdGlvbk1lc3NhZ2UgcHJvcGVydHlcbiAgICAgIE1vZGVybml6ci5mb3JtdmFsaWRhdGlvbm1lc3NhZ2UgPSAhIWlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuXG4gICAgICAvLyBTdWJtaXQgZm9ybSBieSBjbGlja2luZyBzdWJtaXQgYnV0dG9uXG4gICAgICBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdidXR0b24nKVswXS5jbGljaygpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGludmFsaWRGaXJlZDtcbiAgfSk7XG5cblxuICAvKipcbiAgICogbmF0aXZlVGVzdFByb3BzIGFsbG93cyBmb3IgdXMgdG8gdXNlIG5hdGl2ZSBmZWF0dXJlIGRldGVjdGlvbiBmdW5jdGlvbmFsaXR5IGlmIGF2YWlsYWJsZS5cbiAgICogc29tZSBwcmVmaXhlZCBmb3JtLCBvciBmYWxzZSwgaW4gdGhlIGNhc2Ugb2YgYW4gdW5zdXBwb3J0ZWQgcnVsZVxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIG5hdGl2ZVRlc3RQcm9wc1xuICAgKiBAcGFyYW0ge2FycmF5fSBwcm9wcyAtIEFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgd2Ugd2FudCB0byBjaGVjayB2aWEgQHN1cHBvcnRzXG4gICAqIEByZXR1cm5zIHtib29sZWFufHVuZGVmaW5lZH0gQSBib29sZWFuIHdoZW4gQHN1cHBvcnRzIGV4aXN0cywgdW5kZWZpbmVkIG90aGVyd2lzZVxuICAgKi9cblxuICAvLyBBY2NlcHRzIGEgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgYSBzaW5nbGUgdmFsdWVcbiAgLy8gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiBuYXRpdmUgZGV0ZWN0aW9uIG5vdCBhdmFpbGFibGVcbiAgZnVuY3Rpb24gbmF0aXZlVGVzdFByb3BzKHByb3BzLCB2YWx1ZSkge1xuICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuICAgIC8vIFN0YXJ0IHdpdGggdGhlIEpTIEFQSTogaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1jb25kaXRpb25hbC8jdGhlLWNzcy1pbnRlcmZhY2VcbiAgICBpZiAoJ0NTUycgaW4gd2luZG93ICYmICdzdXBwb3J0cycgaW4gd2luZG93LkNTUykge1xuICAgICAgLy8gVHJ5IGV2ZXJ5IHByZWZpeGVkIHZhcmlhbnQgb2YgdGhlIHByb3BlcnR5XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGlmICh3aW5kb3cuQ1NTLnN1cHBvcnRzKGRvbVRvQ1NTKHByb3BzW2ldKSwgdmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlIGZhbGwgYmFjayB0byBhdC1ydWxlIChmb3IgT3BlcmEgMTIueClcbiAgICBlbHNlIGlmICgnQ1NTU3VwcG9ydHNSdWxlJyBpbiB3aW5kb3cpIHtcbiAgICAgIC8vIEJ1aWxkIGEgY29uZGl0aW9uIHN0cmluZyBmb3IgZXZlcnkgcHJlZml4ZWQgdmFyaWFudFxuICAgICAgdmFyIGNvbmRpdGlvblRleHQgPSBbXTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uZGl0aW9uVGV4dC5wdXNoKCcoJyArIGRvbVRvQ1NTKHByb3BzW2ldKSArICc6JyArIHZhbHVlICsgJyknKTtcbiAgICAgIH1cbiAgICAgIGNvbmRpdGlvblRleHQgPSBjb25kaXRpb25UZXh0LmpvaW4oJyBvciAnKTtcbiAgICAgIHJldHVybiBpbmplY3RFbGVtZW50V2l0aFN0eWxlcygnQHN1cHBvcnRzICgnICsgY29uZGl0aW9uVGV4dCArICcpIHsgI21vZGVybml6ciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgfSB9JywgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5wb3NpdGlvbiA9PSAnYWJzb2x1dGUnO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBzaW5jZSB3ZSBoYXZlIGEgZmFpcmx5IGxhcmdlIG51bWJlciBvZiBpbnB1dCB0ZXN0cyB0aGF0IGRvbid0IG11dGF0ZSB0aGUgaW5wdXRcbiAgICogd2UgY3JlYXRlIGEgc2luZ2xlIGVsZW1lbnQgdGhhdCBjYW4gYmUgc2hhcmVkIHdpdGggYWxsIG9mIHRob3NlIHRlc3RzIGZvciBhXG4gICAqIG1pbm9yIHBlcmYgYm9vc3RcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEByZXR1cm5zIHtIVE1MSW5wdXRFbGVtZW50fVxuICAgKi9cbiAgdmFyIGlucHV0RWxlbSA9IGNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIkZvcm0gaW5wdXQgdHlwZXNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImlucHV0dHlwZXNcIixcbiAgXCJjYW5pdXNlXCI6IFwiZm9ybXNcIixcbiAgXCJ0YWdzXCI6IFtcImZvcm1zXCJdLFxuICBcImF1dGhvcnNcIjogW1wiTWlrZSBUYXlsb3JcIl0sXG4gIFwicG9seWZpbGxzXCI6IFtcbiAgICBcImpxdWVyeXRvb2xzXCIsXG4gICAgXCJ3ZWJzaGltc1wiLFxuICAgIFwiaDVmXCIsXG4gICAgXCJ3ZWJmb3JtczJcIixcbiAgICBcIm53eGZvcm1zXCIsXG4gICAgXCJmZHNsaWRlclwiLFxuICAgIFwiaHRtbDVzbGlkZXJcIixcbiAgICBcImdhbGxlcnlodG1sNWZvcm1zXCIsXG4gICAgXCJqc2NvbG9yXCIsXG4gICAgXCJodG1sNWZvcm1zaGltXCIsXG4gICAgXCJzZWxlY3RlZG9wdGlvbnNqc1wiLFxuICAgIFwiZm9ybXZhbGlkYXRpb25qc1wiXG4gIF1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHN1cHBvcnQgZm9yIEhUTUw1IGZvcm0gaW5wdXQgdHlwZXMgYW5kIGV4cG9zZXMgQm9vbGVhbiBzdWJwcm9wZXJ0aWVzIHdpdGggdGhlIHJlc3VsdHM6XG5cbmBgYGphdmFzY3JpcHRcbk1vZGVybml6ci5pbnB1dHR5cGVzLmNvbG9yXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5kYXRlXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5kYXRldGltZVxuTW9kZXJuaXpyLmlucHV0dHlwZXNbJ2RhdGV0aW1lLWxvY2FsJ11cbk1vZGVybml6ci5pbnB1dHR5cGVzLmVtYWlsXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5tb250aFxuTW9kZXJuaXpyLmlucHV0dHlwZXMubnVtYmVyXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5yYW5nZVxuTW9kZXJuaXpyLmlucHV0dHlwZXMuc2VhcmNoXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy50ZWxcbk1vZGVybml6ci5pbnB1dHR5cGVzLnRpbWVcbk1vZGVybml6ci5pbnB1dHR5cGVzLnVybFxuTW9kZXJuaXpyLmlucHV0dHlwZXMud2Vla1xuYGBgXG4qL1xuXG4gIC8vIFJ1biB0aHJvdWdoIEhUTUw1J3MgbmV3IGlucHV0IHR5cGVzIHRvIHNlZSBpZiB0aGUgVUEgdW5kZXJzdGFuZHMgYW55LlxuICAvLyAgIFRoaXMgaXMgcHV0IGJlaGluZCB0aGUgdGVzdHMgcnVubG9vcCBiZWNhdXNlIGl0IGRvZXNuJ3QgcmV0dXJuIGFcbiAgLy8gICB0cnVlL2ZhbHNlIGxpa2UgYWxsIHRoZSBvdGhlciB0ZXN0czsgaW5zdGVhZCwgaXQgcmV0dXJucyBhbiBvYmplY3RcbiAgLy8gICBjb250YWluaW5nIGVhY2ggaW5wdXQgdHlwZSB3aXRoIGl0cyBjb3JyZXNwb25kaW5nIHRydWUvZmFsc2UgdmFsdWVcblxuICAvLyBCaWcgdGhhbmtzIHRvIEBtaWtldGF5bHIgZm9yIHRoZSBodG1sNSBmb3JtcyBleHBlcnRpc2UuIG1pa2V0YXlsci5jb20vXG4gIHZhciBpbnB1dHR5cGVzID0gJ3NlYXJjaCB0ZWwgdXJsIGVtYWlsIGRhdGV0aW1lIGRhdGUgbW9udGggd2VlayB0aW1lIGRhdGV0aW1lLWxvY2FsIG51bWJlciByYW5nZSBjb2xvcicuc3BsaXQoJyAnKTtcbiAgdmFyIGlucHV0cyA9IHt9O1xuXG4gIE1vZGVybml6ci5pbnB1dHR5cGVzID0gKGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgdmFyIGxlbiA9IHByb3BzLmxlbmd0aDtcbiAgICB2YXIgc21pbGUgPSAnMSknO1xuICAgIHZhciBpbnB1dEVsZW1UeXBlO1xuICAgIHZhciBkZWZhdWx0VmlldztcbiAgICB2YXIgYm9vbDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgaW5wdXRFbGVtLnNldEF0dHJpYnV0ZSgndHlwZScsIGlucHV0RWxlbVR5cGUgPSBwcm9wc1tpXSk7XG4gICAgICBib29sID0gaW5wdXRFbGVtLnR5cGUgIT09ICd0ZXh0JyAmJiAnc3R5bGUnIGluIGlucHV0RWxlbTtcblxuICAgICAgLy8gV2UgZmlyc3QgY2hlY2sgdG8gc2VlIGlmIHRoZSB0eXBlIHdlIGdpdmUgaXQgc3RpY2tzLi5cbiAgICAgIC8vIElmIHRoZSB0eXBlIGRvZXMsIHdlIGZlZWQgaXQgYSB0ZXh0dWFsIHZhbHVlLCB3aGljaCBzaG91bGRuJ3QgYmUgdmFsaWQuXG4gICAgICAvLyBJZiB0aGUgdmFsdWUgZG9lc24ndCBzdGljaywgd2Uga25vdyB0aGVyZSdzIGlucHV0IHNhbml0aXphdGlvbiB3aGljaCBpbmZlcnMgYSBjdXN0b20gVUlcbiAgICAgIGlmIChib29sKSB7XG5cbiAgICAgICAgaW5wdXRFbGVtLnZhbHVlICAgICAgICAgPSBzbWlsZTtcbiAgICAgICAgaW5wdXRFbGVtLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246YWJzb2x1dGU7dmlzaWJpbGl0eTpoaWRkZW47JztcblxuICAgICAgICBpZiAoL15yYW5nZSQvLnRlc3QoaW5wdXRFbGVtVHlwZSkgJiYgaW5wdXRFbGVtLnN0eWxlLldlYmtpdEFwcGVhcmFuY2UgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgZG9jRWxlbWVudC5hcHBlbmRDaGlsZChpbnB1dEVsZW0pO1xuICAgICAgICAgIGRlZmF1bHRWaWV3ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cbiAgICAgICAgICAvLyBTYWZhcmkgMi00IGFsbG93cyB0aGUgc21pbGV5IGFzIGEgdmFsdWUsIGRlc3BpdGUgbWFraW5nIGEgc2xpZGVyXG4gICAgICAgICAgYm9vbCA9ICBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlICYmXG4gICAgICAgICAgICBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGlucHV0RWxlbSwgbnVsbCkuV2Via2l0QXBwZWFyYW5jZSAhPT0gJ3RleHRmaWVsZCcgJiZcbiAgICAgICAgICAgIC8vIE1vYmlsZSBhbmRyb2lkIHdlYiBicm93c2VyIGhhcyBmYWxzZSBwb3NpdGl2ZSwgc28gbXVzdFxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIGhlaWdodCB0byBzZWUgaWYgdGhlIHdpZGdldCBpcyBhY3R1YWxseSB0aGVyZS5cbiAgICAgICAgICAgIChpbnB1dEVsZW0ub2Zmc2V0SGVpZ2h0ICE9PSAwKTtcblxuICAgICAgICAgIGRvY0VsZW1lbnQucmVtb3ZlQ2hpbGQoaW5wdXRFbGVtKTtcblxuICAgICAgICB9IGVsc2UgaWYgKC9eKHNlYXJjaHx0ZWwpJC8udGVzdChpbnB1dEVsZW1UeXBlKSkge1xuICAgICAgICAgIC8vIFNwZWMgZG9lc24ndCBkZWZpbmUgYW55IHNwZWNpYWwgcGFyc2luZyBvciBkZXRlY3RhYmxlIFVJXG4gICAgICAgICAgLy8gICBiZWhhdmlvcnMgc28gd2UgcGFzcyB0aGVzZSB0aHJvdWdoIGFzIHRydWVcblxuICAgICAgICAgIC8vIEludGVyZXN0aW5nbHksIG9wZXJhIGZhaWxzIHRoZSBlYXJsaWVyIHRlc3QsIHNvIGl0IGRvZXNuJ3RcbiAgICAgICAgICAvLyAgZXZlbiBtYWtlIGl0IGhlcmUuXG5cbiAgICAgICAgfSBlbHNlIGlmICgvXih1cmx8ZW1haWwpJC8udGVzdChpbnB1dEVsZW1UeXBlKSkge1xuICAgICAgICAgIC8vIFJlYWwgdXJsIGFuZCBlbWFpbCBzdXBwb3J0IGNvbWVzIHdpdGggcHJlYmFrZWQgdmFsaWRhdGlvbi5cbiAgICAgICAgICBib29sID0gaW5wdXRFbGVtLmNoZWNrVmFsaWRpdHkgJiYgaW5wdXRFbGVtLmNoZWNrVmFsaWRpdHkoKSA9PT0gZmFsc2U7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGUgdXBncmFkZWQgaW5wdXQgY29tcG9udGVudCByZWplY3RzIHRoZSA6KSB0ZXh0LCB3ZSBnb3QgYSB3aW5uZXJcbiAgICAgICAgICBib29sID0gaW5wdXRFbGVtLnZhbHVlICE9IHNtaWxlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlucHV0c1sgcHJvcHNbaV0gXSA9ICEhYm9vbDtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0cztcbiAgfSkoaW5wdXR0eXBlcyk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJpbnB1dFt0eXBlPVxcXCJudW1iZXJcXFwiXSBMb2NhbGl6YXRpb25cIixcbiAgXCJwcm9wZXJ0eVwiOiBcImxvY2FsaXplZG51bWJlclwiLFxuICBcInRhZ3NcIjogW1wiZm9ybXNcIiwgXCJsb2NhbGl6YXRpb25cIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwiYXV0aG9yc1wiOiBbXCJQZXRlciBKYW5lc1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIldlYmtpdCBCdWcgVHJhY2tlciBMaXN0aW5nXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTQyNDg0XCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiQmFzZWQgb24gVGhpc1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vdHJhYy53ZWJraXQub3JnL2Jyb3dzZXIvdHJ1bmsvTGF5b3V0VGVzdHMvZmFzdC9mb3Jtcy9zY3JpcHQtdGVzdHMvaW5wdXQtbnVtYmVyLWtleW9wZXJhdGlvbi5qcz9yZXY9ODAwOTYjTDlcIlxuICB9XSxcbiAgXCJrbm93bkJ1Z3NcIjogW1wiT25seSBldmVyIHJldHVybnMgdHJ1ZSBpZiB0aGUgYnJvd3Nlci9PUyBpcyBjb25maWd1cmVkIHRvIHVzZSBjb21tYSBhcyBhIGRlY2ltYWwgc2VwYXJhdG9yLiBUaGlzIGlzIHByb2JhYmx5IGZpbmUgZm9yIG1vc3QgdXNlIGNhc2VzLlwiXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgd2hldGhlciBpbnB1dCB0eXBlPVwibnVtYmVyXCIgaXMgY2FwYWJsZSBvZiByZWNlaXZpbmcgYW5kIGRpc3BsYXlpbmcgbG9jYWxpemVkIG51bWJlcnMsIGUuZy4gd2l0aCBjb21tYSBzZXBhcmF0b3IuXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdsb2NhbGl6ZWRudW1iZXInLCBmdW5jdGlvbigpIHtcbiAgICAvLyB0aGlzIGV4dGVuZHMgb3VyIHRlc3Rpbmcgb2YgaW5wdXRbdHlwZT1udW1iZXJdLCBzbyBib21iIG91dCBpZiB0aGF0J3MgbWlzc2luZ1xuICAgIGlmICghTW9kZXJuaXpyLmlucHV0dHlwZXMubnVtYmVyKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8vIHdlIHJlbHkgb24gY2hlY2tWYWxpZGl0eSBsYXRlciwgc28gYm9tYiBvdXQgZWFybHkgaWYgd2UgZG9uJ3QgaGF2ZSBpdFxuICAgIGlmICghTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uKSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgdmFyIGVsID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGRpZmY7XG4gICAgdmFyIGJvZHkgPSBnZXRCb2R5KCk7XG5cbiAgICB2YXIgcm9vdCA9IChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkb2NFbGVtZW50Lmluc2VydEJlZm9yZShib2R5LCBkb2NFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkIHx8IGRvY0VsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfSgpKTtcbiAgICBlbC5pbm5lckhUTUwgPSAnPGlucHV0IHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIjEuMFwiIHN0ZXA9XCIwLjFcIi8+JztcbiAgICB2YXIgaW5wdXQgPSBlbC5jaGlsZE5vZGVzWzBdO1xuICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGlucHV0LmZvY3VzKCk7XG4gICAgdHJ5IHtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdJbnNlcnRUZXh0JywgZmFsc2UsICcxLDEnKTtcbiAgICB9IGNhdGNoIChlKSB7IC8vIHByZXZlbnQgd2FybmluZ3MgaW4gSUVcbiAgICB9XG4gICAgZGlmZiA9IGlucHV0LnR5cGUgPT09ICdudW1iZXInICYmIGlucHV0LnZhbHVlQXNOdW1iZXIgPT09IDEuMSAmJiBpbnB1dC5jaGVja1ZhbGlkaXR5KCk7XG4gICAgcm9vdC5yZW1vdmVDaGlsZChlbCk7XG4gICAgYm9keS5mYWtlICYmIHJvb3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyb290KTtcbiAgICByZXR1cm4gZGlmZjtcbiAgfSk7XG5cblxuXG4gIC8qKlxuICAgKiBmbkJpbmQgaXMgYSBzdXBlciBzbWFsbCBbYmluZF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRnVuY3Rpb24vYmluZCkgcG9seWZpbGwuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gZm5CaW5kXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gYSBmdW5jdGlvbiB5b3Ugd2FudCB0byBjaGFuZ2UgYHRoaXNgIHJlZmVyZW5jZSB0b1xuICAgKiBAcGFyYW0ge29iamVjdH0gdGhhdCAtIHRoZSBgdGhpc2AgeW91IHdhbnQgdG8gY2FsbCB0aGUgZnVuY3Rpb24gd2l0aFxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb259IFRoZSB3cmFwcGVkIHZlcnNpb24gb2YgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGZuQmluZChmbiwgdGhhdCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHRlc3RET01Qcm9wcyBpcyBhIGdlbmVyaWMgRE9NIHByb3BlcnR5IHRlc3Q7IGlmIGEgYnJvd3NlciBzdXBwb3J0c1xuICAgKiAgIGEgY2VydGFpbiBwcm9wZXJ0eSwgaXQgd29uJ3QgcmV0dXJuIHVuZGVmaW5lZCBmb3IgaXQuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gdGVzdERPTVByb3BzXG4gICAqIEBwYXJhbSB7YXJyYXkuPHN0cmluZz59IHByb3BzIC0gQW4gYXJyYXkgb2YgcHJvcGVydGllcyB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JqIC0gQW4gb2JqZWN0IG9yIEVsZW1lbnQgeW91IHdhbnQgdG8gdXNlIHRvIHRlc3QgdGhlIHBhcmFtZXRlcnMgYWdhaW5cbiAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gZWxlbSAtIEFuIEVsZW1lbnQgdG8gYmluZCB0aGUgcHJvcGVydHkgbG9va3VwIGFnYWluLiBVc2UgYGZhbHNlYCB0byBwcmV2ZW50IHRoZSBjaGVja1xuICAgKi9cbiAgZnVuY3Rpb24gdGVzdERPTVByb3BzKHByb3BzLCBvYmosIGVsZW0pIHtcbiAgICB2YXIgaXRlbTtcblxuICAgIGZvciAodmFyIGkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChwcm9wc1tpXSBpbiBvYmopIHtcblxuICAgICAgICAvLyByZXR1cm4gdGhlIHByb3BlcnR5IG5hbWUgYXMgYSBzdHJpbmdcbiAgICAgICAgaWYgKGVsZW0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlbSA9IG9ialtwcm9wc1tpXV07XG5cbiAgICAgICAgLy8gbGV0J3MgYmluZCBhIGZ1bmN0aW9uXG4gICAgICAgIGlmIChpcyhpdGVtLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgIC8vIGJpbmQgdG8gb2JqIHVubGVzcyBvdmVycmlkZW5cbiAgICAgICAgICByZXR1cm4gZm5CaW5kKGl0ZW0sIGVsZW0gfHwgb2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgdW5ib3VuZCBmdW5jdGlvbiBvciBvYmogb3IgdmFsdWVcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogQ3JlYXRlIG91ciBcIm1vZGVybml6clwiIGVsZW1lbnQgdGhhdCB3ZSBkbyBtb3N0IGZlYXR1cmUgdGVzdHMgb24uXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgbW9kRWxlbSA9IHtcbiAgICBlbGVtOiBjcmVhdGVFbGVtZW50KCdtb2Rlcm5penInKVxuICB9O1xuXG4gIC8vIENsZWFuIHVwIHRoaXMgZWxlbWVudFxuICBNb2Rlcm5penIuX3EucHVzaChmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgbW9kRWxlbS5lbGVtO1xuICB9KTtcblxuICBcblxuICB2YXIgbVN0eWxlID0ge1xuICAgIHN0eWxlOiBtb2RFbGVtLmVsZW0uc3R5bGVcbiAgfTtcblxuICAvLyBraWxsIHJlZiBmb3IgZ2MsIG11c3QgaGFwcGVuIGJlZm9yZSBtb2QuZWxlbSBpcyByZW1vdmVkLCBzbyB3ZSB1bnNoaWZ0IG9uIHRvXG4gIC8vIHRoZSBmcm9udCBvZiB0aGUgcXVldWUuXG4gIE1vZGVybml6ci5fcS51bnNoaWZ0KGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSBtU3R5bGUuc3R5bGU7XG4gIH0pO1xuXG4gIFxuXG4gIC8vIHRlc3RQcm9wcyBpcyBhIGdlbmVyaWMgQ1NTIC8gRE9NIHByb3BlcnR5IHRlc3QuXG5cbiAgLy8gSW4gdGVzdGluZyBzdXBwb3J0IGZvciBhIGdpdmVuIENTUyBwcm9wZXJ0eSwgaXQncyBsZWdpdCB0byB0ZXN0OlxuICAvLyAgICBgZWxlbS5zdHlsZVtzdHlsZU5hbWVdICE9PSB1bmRlZmluZWRgXG4gIC8vIElmIHRoZSBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgaXQgd2lsbCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nLFxuICAvLyBpZiB1bnN1cHBvcnRlZCBpdCB3aWxsIHJldHVybiB1bmRlZmluZWQuXG5cbiAgLy8gV2UnbGwgdGFrZSBhZHZhbnRhZ2Ugb2YgdGhpcyBxdWljayB0ZXN0IGFuZCBza2lwIHNldHRpbmcgYSBzdHlsZVxuICAvLyBvbiBvdXIgbW9kZXJuaXpyIGVsZW1lbnQsIGJ1dCBpbnN0ZWFkIGp1c3QgdGVzdGluZyB1bmRlZmluZWQgdnNcbiAgLy8gZW1wdHkgc3RyaW5nLlxuXG4gIC8vIFByb3BlcnR5IG5hbWVzIGNhbiBiZSBwcm92aWRlZCBpbiBlaXRoZXIgY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2UuXG5cbiAgZnVuY3Rpb24gdGVzdFByb3BzKHByb3BzLCBwcmVmaXhlZCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpIHtcbiAgICBza2lwVmFsdWVUZXN0ID0gaXMoc2tpcFZhbHVlVGVzdCwgJ3VuZGVmaW5lZCcpID8gZmFsc2UgOiBza2lwVmFsdWVUZXN0O1xuXG4gICAgLy8gVHJ5IG5hdGl2ZSBkZXRlY3QgZmlyc3RcbiAgICBpZiAoIWlzKHZhbHVlLCAndW5kZWZpbmVkJykpIHtcbiAgICAgIHZhciByZXN1bHQgPSBuYXRpdmVUZXN0UHJvcHMocHJvcHMsIHZhbHVlKTtcbiAgICAgIGlmICghaXMocmVzdWx0LCAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPdGhlcndpc2UgZG8gaXQgcHJvcGVybHlcbiAgICB2YXIgYWZ0ZXJJbml0LCBpLCBwcm9wc0xlbmd0aCwgcHJvcCwgYmVmb3JlO1xuXG4gICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIHN0eWxlIGVsZW1lbnQsIHRoYXQgbWVhbnMgd2UncmUgcnVubmluZyBhc3luYyBvciBhZnRlclxuICAgIC8vIHRoZSBjb3JlIHRlc3RzLCBzbyB3ZSdsbCBuZWVkIHRvIGNyZWF0ZSBvdXIgb3duIGVsZW1lbnRzIHRvIHVzZVxuXG4gICAgLy8gaW5zaWRlIG9mIGFuIFNWRyBlbGVtZW50LCBpbiBjZXJ0YWluIGJyb3dzZXJzLCB0aGUgYHN0eWxlYCBlbGVtZW50IGlzIG9ubHlcbiAgICAvLyBkZWZpbmVkIGZvciB2YWxpZCB0YWdzLiBUaGVyZWZvcmUsIGlmIGBtb2Rlcm5penJgIGRvZXMgbm90IGhhdmUgb25lLCB3ZVxuICAgIC8vIGZhbGwgYmFjayB0byBhIGxlc3MgdXNlZCBlbGVtZW50IGFuZCBob3BlIGZvciB0aGUgYmVzdC5cbiAgICB2YXIgZWxlbXMgPSBbJ21vZGVybml6cicsICd0c3BhbiddO1xuICAgIHdoaWxlICghbVN0eWxlLnN0eWxlKSB7XG4gICAgICBhZnRlckluaXQgPSB0cnVlO1xuICAgICAgbVN0eWxlLm1vZEVsZW0gPSBjcmVhdGVFbGVtZW50KGVsZW1zLnNoaWZ0KCkpO1xuICAgICAgbVN0eWxlLnN0eWxlID0gbVN0eWxlLm1vZEVsZW0uc3R5bGU7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIHRoZSBvYmplY3RzIGlmIHdlIGNyZWF0ZWQgdGhlbS5cbiAgICBmdW5jdGlvbiBjbGVhbkVsZW1zKCkge1xuICAgICAgaWYgKGFmdGVySW5pdCkge1xuICAgICAgICBkZWxldGUgbVN0eWxlLnN0eWxlO1xuICAgICAgICBkZWxldGUgbVN0eWxlLm1vZEVsZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzTGVuZ3RoOyBpKyspIHtcbiAgICAgIHByb3AgPSBwcm9wc1tpXTtcbiAgICAgIGJlZm9yZSA9IG1TdHlsZS5zdHlsZVtwcm9wXTtcblxuICAgICAgaWYgKGNvbnRhaW5zKHByb3AsICctJykpIHtcbiAgICAgICAgcHJvcCA9IGNzc1RvRE9NKHByb3ApO1xuICAgICAgfVxuXG4gICAgICBpZiAobVN0eWxlLnN0eWxlW3Byb3BdICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAvLyBJZiB2YWx1ZSB0byB0ZXN0IGhhcyBiZWVuIHBhc3NlZCBpbiwgZG8gYSBzZXQtYW5kLWNoZWNrIHRlc3QuXG4gICAgICAgIC8vIDAgKGludGVnZXIpIGlzIGEgdmFsaWQgcHJvcGVydHkgdmFsdWUsIHNvIGNoZWNrIHRoYXQgYHZhbHVlYCBpc24ndFxuICAgICAgICAvLyB1bmRlZmluZWQsIHJhdGhlciB0aGFuIGp1c3QgY2hlY2tpbmcgaXQncyB0cnV0aHkuXG4gICAgICAgIGlmICghc2tpcFZhbHVlVGVzdCAmJiAhaXModmFsdWUsICd1bmRlZmluZWQnKSkge1xuXG4gICAgICAgICAgLy8gTmVlZHMgYSB0cnkgY2F0Y2ggYmxvY2sgYmVjYXVzZSBvZiBvbGQgSUUuIFRoaXMgaXMgc2xvdywgYnV0IHdpbGxcbiAgICAgICAgICAvLyBiZSBhdm9pZGVkIGluIG1vc3QgY2FzZXMgYmVjYXVzZSBgc2tpcFZhbHVlVGVzdGAgd2lsbCBiZSB1c2VkLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtU3R5bGUuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAgICAgLy8gSWYgdGhlIHByb3BlcnR5IHZhbHVlIGhhcyBjaGFuZ2VkLCB3ZSBhc3N1bWUgdGhlIHZhbHVlIHVzZWQgaXNcbiAgICAgICAgICAvLyBzdXBwb3J0ZWQuIElmIGB2YWx1ZWAgaXMgZW1wdHkgc3RyaW5nLCBpdCdsbCBmYWlsIGhlcmUgKGJlY2F1c2VcbiAgICAgICAgICAvLyBpdCBoYXNuJ3QgY2hhbmdlZCksIHdoaWNoIG1hdGNoZXMgaG93IGJyb3dzZXJzIGhhdmUgaW1wbGVtZW50ZWRcbiAgICAgICAgICAvLyBDU1Muc3VwcG9ydHMoKVxuICAgICAgICAgIGlmIChtU3R5bGUuc3R5bGVbcHJvcF0gIT0gYmVmb3JlKSB7XG4gICAgICAgICAgICBjbGVhbkVsZW1zKCk7XG4gICAgICAgICAgICByZXR1cm4gcHJlZml4ZWQgPT0gJ3BmeCcgPyBwcm9wIDogdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRydWUsIG9yIHRoZSBwcm9wZXJ0eSBuYW1lIGlmIHRoaXMgaXMgYVxuICAgICAgICAvLyBgcHJlZml4ZWQoKWAgY2FsbFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjbGVhbkVsZW1zKCk7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeGVkID09ICdwZngnID8gcHJvcCA6IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY2xlYW5FbGVtcygpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogdGVzdFByb3AoKSBpbnZlc3RpZ2F0ZXMgd2hldGhlciBhIGdpdmVuIHN0eWxlIHByb3BlcnR5IGlzIHJlY29nbml6ZWRcbiAgICogUHJvcGVydHkgbmFtZXMgY2FuIGJlIHByb3ZpZGVkIGluIGVpdGhlciBjYW1lbENhc2Ugb3Iga2ViYWItY2FzZS5cbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIudGVzdFByb3BcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnRlc3RQcm9wKClcbiAgICogQG9wdGlvblByb3AgdGVzdFByb3BcbiAgICogQGZ1bmN0aW9uIHRlc3RQcm9wXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gTmFtZSBvZiB0aGUgQ1NTIHByb3BlcnR5IHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIC0gTmFtZSBvZiB0aGUgQ1NTIHZhbHVlIHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VzZVZhbHVlXSAtIFdoZXRoZXIgb3Igbm90IHRvIGNoZWNrIHRoZSB2YWx1ZSBpZiBAc3VwcG9ydHMgaXNuJ3Qgc3VwcG9ydGVkXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBKdXN0IGxpa2UgW3Rlc3RBbGxQcm9wc10oI21vZGVybml6ci10ZXN0YWxscHJvcHMpLCBvbmx5IGl0IGRvZXMgbm90IGNoZWNrIGFueSB2ZW5kb3IgcHJlZml4ZWRcbiAgICogdmVyc2lvbiBvZiB0aGUgc3RyaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhlIHByb3BlcnR5IG5hbWUgbXVzdCBiZSBwcm92aWRlZCBpbiBjYW1lbENhc2UgKGUuZy4gYm94U2l6aW5nIG5vdCBib3gtc2l6aW5nKVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFByb3AoJ3BvaW50ZXJFdmVudHMnKSAgLy8gdHJ1ZVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IGNhbiBhbHNvIHByb3ZpZGUgYSB2YWx1ZSBhcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgdG8gY2hlY2sgaWYgYVxuICAgKiBzcGVjaWZpYyB2YWx1ZSBpcyBzdXBwb3J0ZWRcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RQcm9wKCdwb2ludGVyRXZlbnRzJywgJ25vbmUnKSAvLyB0cnVlXG4gICAqIE1vZGVybml6ci50ZXN0UHJvcCgncG9pbnRlckV2ZW50cycsICdwZW5ndWluJykgLy8gZmFsc2VcbiAgICogYGBgXG4gICAqL1xuXG4gIHZhciB0ZXN0UHJvcCA9IE1vZGVybml6clByb3RvLnRlc3RQcm9wID0gZnVuY3Rpb24ocHJvcCwgdmFsdWUsIHVzZVZhbHVlKSB7XG4gICAgcmV0dXJuIHRlc3RQcm9wcyhbcHJvcF0sIHVuZGVmaW5lZCwgdmFsdWUsIHVzZVZhbHVlKTtcbiAgfTtcbiAgXG5cbiAgLyoqXG4gICAqIHRlc3RQcm9wc0FsbCB0ZXN0cyBhIGxpc3Qgb2YgRE9NIHByb3BlcnRpZXMgd2Ugd2FudCB0byBjaGVjayBhZ2FpbnN0LlxuICAgKiBXZSBzcGVjaWZ5IGxpdGVyYWxseSBBTEwgcG9zc2libGUgKGtub3duIGFuZC9vciBsaWtlbHkpIHByb3BlcnRpZXMgb25cbiAgICogdGhlIGVsZW1lbnQgaW5jbHVkaW5nIHRoZSBub24tdmVuZG9yIHByZWZpeGVkIG9uZSwgZm9yIGZvcndhcmQtXG4gICAqIGNvbXBhdGliaWxpdHkuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gdGVzdFByb3BzQWxsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gQSBzdHJpbmcgb2YgdGhlIHByb3BlcnR5IHRvIHRlc3QgZm9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gW3ByZWZpeGVkXSAtIEFuIG9iamVjdCB0byBjaGVjayB0aGUgcHJlZml4ZWQgcHJvcGVydGllcyBvbi4gVXNlIGEgc3RyaW5nIHRvIHNraXBcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBbZWxlbV0gLSBBbiBlbGVtZW50IHVzZWQgdG8gdGVzdCB0aGUgcHJvcGVydHkgYW5kIHZhbHVlIGFnYWluc3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt2YWx1ZV0gLSBBIHN0cmluZyBvZiBhIGNzcyB2YWx1ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwVmFsdWVUZXN0XSAtIEFuIGJvb2xlYW4gcmVwcmVzZW50aW5nIGlmIHlvdSB3YW50IHRvIHRlc3QgaWYgdmFsdWUgc3RpY2tzIHdoZW4gc2V0XG4gICAqL1xuICBmdW5jdGlvbiB0ZXN0UHJvcHNBbGwocHJvcCwgcHJlZml4ZWQsIGVsZW0sIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG5cbiAgICB2YXIgdWNQcm9wID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSksXG4gICAgcHJvcHMgPSAocHJvcCArICcgJyArIGNzc29tUHJlZml4ZXMuam9pbih1Y1Byb3AgKyAnICcpICsgdWNQcm9wKS5zcGxpdCgnICcpO1xuXG4gICAgLy8gZGlkIHRoZXkgY2FsbCAucHJlZml4ZWQoJ2JveFNpemluZycpIG9yIGFyZSB3ZSBqdXN0IHRlc3RpbmcgYSBwcm9wP1xuICAgIGlmIChpcyhwcmVmaXhlZCwgJ3N0cmluZycpIHx8IGlzKHByZWZpeGVkLCAndW5kZWZpbmVkJykpIHtcbiAgICAgIHJldHVybiB0ZXN0UHJvcHMocHJvcHMsIHByZWZpeGVkLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCk7XG5cbiAgICAgIC8vIG90aGVyd2lzZSwgdGhleSBjYWxsZWQgLnByZWZpeGVkKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCB3aW5kb3dbLCBlbGVtXSlcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcHMgPSAocHJvcCArICcgJyArIChkb21QcmVmaXhlcykuam9pbih1Y1Byb3AgKyAnICcpICsgdWNQcm9wKS5zcGxpdCgnICcpO1xuICAgICAgcmV0dXJuIHRlc3RET01Qcm9wcyhwcm9wcywgcHJlZml4ZWQsIGVsZW0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vZGVybml6ci50ZXN0QWxsUHJvcHMoKSBpbnZlc3RpZ2F0ZXMgd2hldGhlciBhIGdpdmVuIHN0eWxlIHByb3BlcnR5LFxuICAvLyBvciBhbnkgb2YgaXRzIHZlbmRvci1wcmVmaXhlZCB2YXJpYW50cywgaXMgcmVjb2duaXplZFxuICAvL1xuICAvLyBOb3RlIHRoYXQgdGhlIHByb3BlcnR5IG5hbWVzIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIGNhbWVsQ2FzZSB2YXJpYW50LlxuICAvLyBNb2Rlcm5penIudGVzdEFsbFByb3BzKCdib3hTaXppbmcnKVxuICBNb2Rlcm5penJQcm90by50ZXN0QWxsUHJvcHMgPSB0ZXN0UHJvcHNBbGw7XG5cbiAgXG5cbiAgLyoqXG4gICAqIHByZWZpeGVkIHJldHVybnMgdGhlIHByZWZpeGVkIG9yIG5vbnByZWZpeGVkIHByb3BlcnR5IG5hbWUgdmFyaWFudCBvZiB5b3VyIGlucHV0XG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnByZWZpeGVkXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5wcmVmaXhlZCgpXG4gICAqIEBvcHRpb25Qcm9wIHByZWZpeGVkXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBwcmVmaXhlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge29iamVjdH0gW29ial0gLSBBbiBvYmplY3QgdG8gdGVzdCBmb3IgdGhlIHByZWZpeGVkIHByb3BlcnRpZXMgb25cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW2VsZW1dIC0gQW4gZWxlbWVudCB1c2VkIHRvIHRlc3Qgc3BlY2lmaWMgcHJvcGVydGllcyBhZ2FpbnN0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd8ZmFsc2V9IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSAocG9zc2libHkgcHJlZml4ZWQpIHZhbGlkXG4gICAqIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5LCBvciBgZmFsc2VgIHdoZW4gaXQgaXMgdW5zdXBwb3J0ZWQuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIE1vZGVybml6ci5wcmVmaXhlZCB0YWtlcyBhIHN0cmluZyBjc3MgdmFsdWUgaW4gdGhlIERPTSBzdHlsZSBjYW1lbENhc2UgKGFzXG4gICAqIG9wcG9zZWQgdG8gdGhlIGNzcyBzdHlsZSBrZWJhYi1jYXNlKSBmb3JtIGFuZCByZXR1cm5zIHRoZSAocG9zc2libHkgcHJlZml4ZWQpXG4gICAqIHZlcnNpb24gb2YgdGhhdCBwcm9wZXJ0eSB0aGF0IHRoZSBicm93c2VyIGFjdHVhbGx5IHN1cHBvcnRzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaW4gb2xkZXIgRmlyZWZveC4uLlxuICAgKiBgYGBqc1xuICAgKiBwcmVmaXhlZCgnYm94U2l6aW5nJylcbiAgICogYGBgXG4gICAqIHJldHVybnMgJ01vekJveFNpemluZydcbiAgICpcbiAgICogSW4gbmV3ZXIgRmlyZWZveCwgYXMgd2VsbCBhcyBhbnkgb3RoZXIgYnJvd3NlciB0aGF0IHN1cHBvcnQgdGhlIHVucHJlZml4ZWRcbiAgICogdmVyc2lvbiB3b3VsZCBzaW1wbHkgcmV0dXJuIGBib3hTaXppbmdgLiBBbnkgYnJvd3NlciB0aGF0IGRvZXMgbm90IHN1cHBvcnRcbiAgICogdGhlIHByb3BlcnR5IGF0IGFsbCwgaXQgd2lsbCByZXR1cm4gYGZhbHNlYC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgcHJlZml4ZWQgaXMgY2hlY2tlZCBhZ2FpbnN0IGEgRE9NIGVsZW1lbnQuIElmIHlvdSB3YW50IHRvIGNoZWNrXG4gICAqIGZvciBhIHByb3BlcnR5IG9uIGFub3RoZXIgb2JqZWN0LCBqdXN0IHBhc3MgaXQgYXMgYSBzZWNvbmQgYXJndW1lbnRcbiAgICpcbiAgICogYGBganNcbiAgICogdmFyIHJBRiA9IHByZWZpeGVkKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCB3aW5kb3cpO1xuICAgKlxuICAgKiByYWYoZnVuY3Rpb24oKSB7XG4gICAqICByZW5kZXJGdW5jdGlvbigpO1xuICAgKiB9KVxuICAgKiBgYGBcbiAgICpcbiAgICogTm90ZSB0aGF0IHRoaXMgd2lsbCByZXR1cm4gX3RoZSBhY3R1YWwgZnVuY3Rpb25fIC0gbm90IHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICogSWYgeW91IG5lZWQgdGhlIGFjdHVhbCBuYW1lIG9mIHRoZSBwcm9wZXJ0eSwgcGFzcyBpbiBgZmFsc2VgIGFzIGEgdGhpcmQgYXJndW1lbnRcbiAgICpcbiAgICogYGBganNcbiAgICogdmFyIHJBRlByb3AgPSBwcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93LCBmYWxzZSk7XG4gICAqXG4gICAqIHJhZlByb3AgPT09ICdXZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIC8vIGluIG9sZGVyIHdlYmtpdFxuICAgKiBgYGBcbiAgICpcbiAgICogT25lIGNvbW1vbiB1c2UgY2FzZSBmb3IgcHJlZml4ZWQgaXMgaWYgeW91J3JlIHRyeWluZyB0byBkZXRlcm1pbmUgd2hpY2ggdHJhbnNpdGlvblxuICAgKiBlbmQgZXZlbnQgdG8gYmluZCB0bywgeW91IG1pZ2h0IGRvIHNvbWV0aGluZyBsaWtlLi4uXG4gICAqIGBgYGpzXG4gICAqIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XG4gICAqICAgICAnV2Via2l0VHJhbnNpdGlvbicgOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsICogU2FmIDYsIEFuZHJvaWQgQnJvd3NlclxuICAgKiAgICAgJ01velRyYW5zaXRpb24nICAgIDogJ3RyYW5zaXRpb25lbmQnLCAgICAgICAqIG9ubHkgZm9yIEZGIDwgMTVcbiAgICogICAgICd0cmFuc2l0aW9uJyAgICAgICA6ICd0cmFuc2l0aW9uZW5kJyAgICAgICAgKiBJRTEwLCBPcGVyYSwgQ2hyb21lLCBGRiAxNSssIFNhZiA3K1xuICAgKiB9O1xuICAgKlxuICAgKiB2YXIgdHJhbnNFbmRFdmVudE5hbWUgPSB0cmFuc0VuZEV2ZW50TmFtZXNbIE1vZGVybml6ci5wcmVmaXhlZCgndHJhbnNpdGlvbicpIF07XG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCBhIHNpbWlsYXIgbG9va3VwLCBidXQgaW4ga2ViYWItY2FzZSwgeW91IGNhbiB1c2UgW3ByZWZpeGVkQ1NTXSgjbW9kZXJuaXpyLXByZWZpeGVkY3NzKS5cbiAgICovXG5cbiAgdmFyIHByZWZpeGVkID0gTW9kZXJuaXpyUHJvdG8ucHJlZml4ZWQgPSBmdW5jdGlvbihwcm9wLCBvYmosIGVsZW0pIHtcbiAgICBpZiAocHJvcC5pbmRleE9mKCdAJykgPT09IDApIHtcbiAgICAgIHJldHVybiBhdFJ1bGUocHJvcCk7XG4gICAgfVxuXG4gICAgaWYgKHByb3AuaW5kZXhPZignLScpICE9IC0xKSB7XG4gICAgICAvLyBDb252ZXJ0IGtlYmFiLWNhc2UgdG8gY2FtZWxDYXNlXG4gICAgICBwcm9wID0gY3NzVG9ET00ocHJvcCk7XG4gICAgfVxuICAgIGlmICghb2JqKSB7XG4gICAgICByZXR1cm4gdGVzdFByb3BzQWxsKHByb3AsICdwZngnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGVzdGluZyBET00gcHJvcGVydHkgZS5nLiBNb2Rlcm5penIucHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvdykgLy8gJ21velJlcXVlc3RBbmltYXRpb25GcmFtZSdcbiAgICAgIHJldHVybiB0ZXN0UHJvcHNBbGwocHJvcCwgb2JqLCBlbGVtKTtcbiAgICB9XG4gIH07XG5cbiAgXG5cbiAgLyoqXG4gICAqIHByZWZpeGVkQ1NTIGlzIGp1c3QgbGlrZSBbcHJlZml4ZWRdKCNtb2Rlcm5penItcHJlZml4ZWQpLCBidXQgdGhlIHJldHVybmVkIHZhbHVlcyBhcmUgaW5cbiAgICoga2ViYWItY2FzZSAoZS5nLiBgYm94LXNpemluZ2ApIHJhdGhlciB0aGFuIGNhbWVsQ2FzZSAoYm94U2l6aW5nKS5cbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIucHJlZml4ZWRDU1NcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnByZWZpeGVkQ1NTKClcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZWRDU1NcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHByZWZpeGVkQ1NTXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHRlc3QgZm9yXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8ZmFsc2V9IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSAocG9zc2libHkgcHJlZml4ZWQpXG4gICAqIHZhbGlkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5LCBvciBgZmFsc2VgIHdoZW4gaXQgaXMgdW5zdXBwb3J0ZWQuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBNb2Rlcm5penIucHJlZml4ZWRDU1NgIGlzIGxpa2UgYE1vZGVybml6ci5wcmVmaXhlZGAsIGJ1dCByZXR1cm5zIHRoZSByZXN1bHRcbiAgICogaW4gaHlwaGVuYXRlZCBmb3JtXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5wcmVmaXhlZENTUygndHJhbnNpdGlvbicpIC8vICctbW96LXRyYW5zaXRpb24nIGluIG9sZCBGaXJlZm94XG4gICAqIGBgYFxuICAgKlxuICAgKiBTaW5jZSBpdCBpcyBvbmx5IHVzZWZ1bCBmb3IgQ1NTIHN0eWxlIHByb3BlcnRpZXMsIGl0IGNhbiBvbmx5IGJlIHRlc3RlZCBhZ2FpbnN0XG4gICAqIGFuIEhUTUxFbGVtZW50LlxuICAgKlxuICAgKiBQcm9wZXJ0aWVzIGNhbiBiZSBwYXNzZWQgYXMgYm90aCB0aGUgRE9NIHN0eWxlIGNhbWVsQ2FzZSBvciBDU1Mgc3R5bGUga2ViYWItY2FzZS5cbiAgICovXG5cbiAgdmFyIHByZWZpeGVkQ1NTID0gTW9kZXJuaXpyUHJvdG8ucHJlZml4ZWRDU1MgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgdmFyIHByZWZpeGVkUHJvcCA9IHByZWZpeGVkKHByb3ApO1xuICAgIHJldHVybiBwcmVmaXhlZFByb3AgJiYgZG9tVG9DU1MocHJlZml4ZWRQcm9wKTtcbiAgfTtcbiAgXG5cbiAgLyoqXG4gICAqIHRlc3RBbGxQcm9wcyBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBDU1MgcHJvcGVydHkgaXMgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnRlc3RBbGxQcm9wc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIudGVzdEFsbFByb3BzKClcbiAgICogQG9wdGlvblByb3AgdGVzdEFsbFByb3BzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiB0ZXN0QWxsUHJvcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtaW5nIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IChlaXRoZXIgY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2UpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIC0gU3RyaW5nIG9mIHRoZSB2YWx1ZSB0byB0ZXN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBWYWx1ZVRlc3Q9ZmFsc2VdIC0gV2hldGhlciB0byBza2lwIHRlc3RpbmcgdGhhdCB0aGUgdmFsdWUgaXMgc3VwcG9ydGVkIHdoZW4gdXNpbmcgbm9uLW5hdGl2ZSBkZXRlY3Rpb25cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdGVzdEFsbFByb3BzIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIENTUyBwcm9wZXJ0eSwgaW4gc29tZSBwcmVmaXhlZCBmb3JtLFxuICAgKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRlc3RBbGxQcm9wcygnYm94U2l6aW5nJykgIC8vIHRydWVcbiAgICogYGBgXG4gICAqXG4gICAqIEl0IGNhbiBvcHRpb25hbGx5IGJlIGdpdmVuIGEgQ1NTIHZhbHVlIGluIHN0cmluZyBmb3JtIHRvIHRlc3QgaWYgYSBwcm9wZXJ0eVxuICAgKiB2YWx1ZSBpcyB2YWxpZFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0ZXN0QWxsUHJvcHMoJ2Rpc3BsYXknLCAnYmxvY2snKSAvLyB0cnVlXG4gICAqIHRlc3RBbGxQcm9wcygnZGlzcGxheScsICdwZW5ndWluJykgLy8gZmFsc2VcbiAgICogYGBgXG4gICAqXG4gICAqIEEgYm9vbGVhbiBjYW4gYmUgcGFzc2VkIGFzIGEgdGhpcmQgcGFyYW1ldGVyIHRvIHNraXAgdGhlIHZhbHVlIGNoZWNrIHdoZW5cbiAgICogbmF0aXZlIGRldGVjdGlvbiAoQHN1cHBvcnRzKSBpc24ndCBhdmFpbGFibGUuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRlc3RBbGxQcm9wcygnc2hhcGVPdXRzaWRlJywgJ2NvbnRlbnQtYm94JywgdHJ1ZSk7XG4gICAqIGBgYFxuICAgKi9cblxuICBmdW5jdGlvbiB0ZXN0QWxsUHJvcHMocHJvcCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpIHtcbiAgICByZXR1cm4gdGVzdFByb3BzQWxsKHByb3AsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCk7XG4gIH1cbiAgTW9kZXJuaXpyUHJvdG8udGVzdEFsbFByb3BzID0gdGVzdEFsbFByb3BzO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgVHJhbnNmb3Jtc1wiLFxuICBcInByb3BlcnR5XCI6IFwiY3NzdHJhbnNmb3Jtc1wiLFxuICBcImNhbml1c2VcIjogXCJ0cmFuc2Zvcm1zMmRcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zZm9ybXMnLCBmdW5jdGlvbigpIHtcbiAgICAvLyBBbmRyb2lkIDwgMy4wIGlzIGJ1Z2d5LCBzbyB3ZSBzbmlmZiBhbmQgYmxhY2tsaXN0XG4gICAgLy8gaHR0cDovL2dpdC5pby9oSHpMN3dcbiAgICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdBbmRyb2lkIDIuJykgPT09IC0xICYmXG4gICAgICAgICAgIHRlc3RBbGxQcm9wcygndHJhbnNmb3JtJywgJ3NjYWxlKDEpJywgdHJ1ZSk7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zZm9ybXMgM0RcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNzc3RyYW5zZm9ybXMzZFwiLFxuICBcImNhbml1c2VcIjogXCJ0cmFuc2Zvcm1zM2RcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJ3YXJuaW5nc1wiOiBbXG4gICAgXCJDaHJvbWUgbWF5IG9jY2Fzc2lvbmFsbHkgZmFpbCB0aGlzIHRlc3Qgb24gc29tZSBzeXN0ZW1zOyBtb3JlIGluZm86IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMjkwMDRcIlxuICBdXG59XG4hKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnY3NzdHJhbnNmb3JtczNkJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9ICEhdGVzdEFsbFByb3BzKCdwZXJzcGVjdGl2ZScsICcxcHgnLCB0cnVlKTtcbiAgICB2YXIgdXNlUHJlZml4ID0gTW9kZXJuaXpyLl9jb25maWcudXNlUHJlZml4ZXM7XG5cbiAgICAvLyBXZWJraXQncyAzRCB0cmFuc2Zvcm1zIGFyZSBwYXNzZWQgb2ZmIHRvIHRoZSBicm93c2VyJ3Mgb3duIGdyYXBoaWNzIHJlbmRlcmVyLlxuICAgIC8vICAgSXQgd29ya3MgZmluZSBpbiBTYWZhcmkgb24gTGVvcGFyZCBhbmQgU25vdyBMZW9wYXJkLCBidXQgbm90IGluIENocm9tZSBpblxuICAgIC8vICAgc29tZSBjb25kaXRpb25zLiBBcyBhIHJlc3VsdCwgV2Via2l0IHR5cGljYWxseSByZWNvZ25pemVzIHRoZSBzeW50YXggYnV0XG4gICAgLy8gICB3aWxsIHNvbWV0aW1lcyB0aHJvdyBhIGZhbHNlIHBvc2l0aXZlLCB0aHVzIHdlIG11c3QgZG8gYSBtb3JlIHRob3JvdWdoIGNoZWNrOlxuICAgIGlmIChyZXQgJiYgKCF1c2VQcmVmaXggfHwgJ3dlYmtpdFBlcnNwZWN0aXZlJyBpbiBkb2NFbGVtZW50LnN0eWxlKSkge1xuICAgICAgdmFyIG1xO1xuICAgICAgdmFyIGRlZmF1bHRTdHlsZSA9ICcjbW9kZXJuaXpye3dpZHRoOjA7aGVpZ2h0OjB9JztcbiAgICAgIC8vIFVzZSBDU1MgQ29uZGl0aW9uYWwgUnVsZXMgaWYgYXZhaWxhYmxlXG4gICAgICBpZiAoTW9kZXJuaXpyLnN1cHBvcnRzKSB7XG4gICAgICAgIG1xID0gJ0BzdXBwb3J0cyAocGVyc3BlY3RpdmU6IDFweCknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBXZWJraXQgYWxsb3dzIHRoaXMgbWVkaWEgcXVlcnkgdG8gc3VjY2VlZCBvbmx5IGlmIHRoZSBmZWF0dXJlIGlzIGVuYWJsZWQuXG4gICAgICAgIC8vIGBAbWVkaWEgKHRyYW5zZm9ybS0zZCksKC13ZWJraXQtdHJhbnNmb3JtLTNkKXsgLi4uIH1gXG4gICAgICAgIG1xID0gJ0BtZWRpYSAodHJhbnNmb3JtLTNkKSc7XG4gICAgICAgIGlmICh1c2VQcmVmaXgpIHtcbiAgICAgICAgICBtcSArPSAnLCgtd2Via2l0LXRyYW5zZm9ybS0zZCknO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1xICs9ICd7I21vZGVybml6cnt3aWR0aDo3cHg7aGVpZ2h0OjE4cHg7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowfX0nO1xuXG4gICAgICB0ZXN0U3R5bGVzKGRlZmF1bHRTdHlsZSArIG1xLCBmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgIHJldCA9IGVsZW0ub2Zmc2V0V2lkdGggPT09IDcgJiYgZWxlbS5vZmZzZXRIZWlnaHQgPT09IDE4O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgVHJhbnNpdGlvbnNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNzc3RyYW5zaXRpb25zXCIsXG4gIFwiY2FuaXVzZVwiOiBcImNzcy10cmFuc2l0aW9uc1wiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdXG59XG4hKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnY3NzdHJhbnNpdGlvbnMnLCB0ZXN0QWxsUHJvcHMoJ3RyYW5zaXRpb24nLCAnYWxsJywgdHJ1ZSkpO1xuXG5cbiAgLyoqXG4gICAqIGhhc093blByb3AgaXMgYSBzaGltIGZvciBoYXNPd25Qcm9wZXJ0eSB0aGF0IGlzIG5lZWRlZCBmb3IgU2FmYXJpIDIuMCBzdXBwb3J0XG4gICAqXG4gICAqIEBhdXRob3Iga2FuZ2F4XG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gaGFzT3duUHJvcFxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0IC0gVGhlIG9iamVjdCB0byBjaGVjayBmb3IgYSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgLSBUaGUgcHJvcGVydHkgdG8gY2hlY2sgZm9yXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICAvLyBoYXNPd25Qcm9wZXJ0eSBzaGltIGJ5IGthbmdheCBuZWVkZWQgZm9yIFNhZmFyaSAyLjAgc3VwcG9ydFxuICB2YXIgaGFzT3duUHJvcDtcblxuICAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9oYXNPd25Qcm9wZXJ0eSA9ICh7fSkuaGFzT3duUHJvcGVydHk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAvKiB3ZSBoYXZlIG5vIHdheSBvZiB0ZXN0aW5nIElFIDUuNSBvciBzYWZhcmkgMixcbiAgICAgKiBzbyBqdXN0IGFzc3VtZSB0aGUgZWxzZSBnZXRzIGhpdCAqL1xuICAgIGlmICghaXMoX2hhc093blByb3BlcnR5LCAndW5kZWZpbmVkJykgJiYgIWlzKF9oYXNPd25Qcm9wZXJ0eS5jYWxsLCAndW5kZWZpbmVkJykpIHtcbiAgICAgIGhhc093blByb3AgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7XG4gICAgICAgIHJldHVybiBfaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaGFzT3duUHJvcCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgLyogeWVzLCB0aGlzIGNhbiBnaXZlIGZhbHNlIHBvc2l0aXZlcy9uZWdhdGl2ZXMsIGJ1dCBtb3N0IG9mIHRoZSB0aW1lIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhvc2UgKi9cbiAgICAgICAgcmV0dXJuICgocHJvcGVydHkgaW4gb2JqZWN0KSAmJiBpcyhvYmplY3QuY29uc3RydWN0b3IucHJvdG90eXBlW3Byb3BlcnR5XSwgJ3VuZGVmaW5lZCcpKTtcbiAgICAgIH07XG4gICAgfVxuICB9KSgpO1xuXG4gIFxuXG5cbiAgIC8vIF9sIHRyYWNrcyBsaXN0ZW5lcnMgZm9yIGFzeW5jIHRlc3RzLCBhcyB3ZWxsIGFzIHRlc3RzIHRoYXQgZXhlY3V0ZSBhZnRlciB0aGUgaW5pdGlhbCBydW5cbiAgTW9kZXJuaXpyUHJvdG8uX2wgPSB7fTtcblxuICAvKipcbiAgICogTW9kZXJuaXpyLm9uIGlzIGEgd2F5IHRvIGxpc3RlbiBmb3IgdGhlIGNvbXBsZXRpb24gb2YgYXN5bmMgdGVzdHMuIEJlaW5nXG4gICAqIGFzeW5jaHJvbm91cywgdGhleSBtYXkgbm90IGZpbmlzaCBiZWZvcmUgeW91ciBzY3JpcHRzIHJ1bi4gQXMgYSByZXN1bHQgeW91XG4gICAqIHdpbGwgZ2V0IGEgcG9zc2libHkgZmFsc2UgbmVnYXRpdmUgYHVuZGVmaW5lZGAgdmFsdWUuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLm9uXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZSAtIFN0cmluZyBuYW1lIG9mIHRoZSBmZWF0dXJlIGRldGVjdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIENhbGxiYWNrIGZ1bmN0aW9uIHJldHVybmluZyBhIEJvb2xlYW4gLSB0cnVlIGlmIGZlYXR1cmUgaXMgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3RcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLm9uKCdmbGFzaCcsIGZ1bmN0aW9uKCByZXN1bHQgKSB7XG4gICAqICAgaWYgKHJlc3VsdCkge1xuICAgKiAgICAvLyB0aGUgYnJvd3NlciBoYXMgZmxhc2hcbiAgICogICB9IGVsc2Uge1xuICAgKiAgICAgLy8gdGhlIGJyb3dzZXIgZG9lcyBub3QgaGF2ZSBmbGFzaFxuICAgKiAgIH1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cblxuICBNb2Rlcm5penJQcm90by5vbiA9IGZ1bmN0aW9uKGZlYXR1cmUsIGNiKSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBsaXN0IG9mIGxpc3RlbmVycyBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCF0aGlzLl9sW2ZlYXR1cmVdKSB7XG4gICAgICB0aGlzLl9sW2ZlYXR1cmVdID0gW107XG4gICAgfVxuXG4gICAgLy8gUHVzaCB0aGlzIHRlc3Qgb24gdG8gdGhlIGxpc3RlbmVyIGxpc3RcbiAgICB0aGlzLl9sW2ZlYXR1cmVdLnB1c2goY2IpO1xuXG4gICAgLy8gSWYgaXQncyBhbHJlYWR5IGJlZW4gcmVzb2x2ZWQsIHRyaWdnZXIgaXQgb24gbmV4dCB0aWNrXG4gICAgaWYgKE1vZGVybml6ci5oYXNPd25Qcm9wZXJ0eShmZWF0dXJlKSkge1xuICAgICAgLy8gTmV4dCBUaWNrXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBNb2Rlcm5penIuX3RyaWdnZXIoZmVhdHVyZSwgTW9kZXJuaXpyW2ZlYXR1cmVdKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogX3RyaWdnZXIgaXMgdGhlIHByaXZhdGUgZnVuY3Rpb24gdXNlZCB0byBzaWduYWwgdGVzdCBjb21wbGV0aW9uIGFuZCBydW4gYW55XG4gICAqIGNhbGxiYWNrcyByZWdpc3RlcmVkIHRocm91Z2ggW01vZGVybml6ci5vbl0oI21vZGVybml6ci1vbilcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuX3RyaWdnZXJcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBfdHJpZ2dlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZSAtIHN0cmluZyBuYW1lIG9mIHRoZSBmZWF0dXJlIGRldGVjdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufGJvb2xlYW59IFtyZXNdIC0gQSBmZWF0dXJlIGRldGVjdGlvbiBmdW5jdGlvbiwgb3IgdGhlIGJvb2xlYW4gPVxuICAgKiByZXN1bHQgb2YgYSBmZWF0dXJlIGRldGVjdGlvbiBmdW5jdGlvblxuICAgKi9cblxuICBNb2Rlcm5penJQcm90by5fdHJpZ2dlciA9IGZ1bmN0aW9uKGZlYXR1cmUsIHJlcykge1xuICAgIGlmICghdGhpcy5fbFtmZWF0dXJlXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjYnMgPSB0aGlzLl9sW2ZlYXR1cmVdO1xuXG4gICAgLy8gRm9yY2UgYXN5bmNcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGNiO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGNicy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjYiA9IGNic1tpXTtcbiAgICAgICAgY2IocmVzKTtcbiAgICAgIH1cbiAgICB9LCAwKTtcblxuICAgIC8vIERvbid0IHRyaWdnZXIgdGhlc2UgYWdhaW5cbiAgICBkZWxldGUgdGhpcy5fbFtmZWF0dXJlXTtcbiAgfTtcblxuICAvKipcbiAgICogYWRkVGVzdCBhbGxvd3MgeW91IHRvIGRlZmluZSB5b3VyIG93biBmZWF0dXJlIGRldGVjdHMgdGhhdCBhcmUgbm90IGN1cnJlbnRseVxuICAgKiBpbmNsdWRlZCBpbiBNb2Rlcm5penIgKHVuZGVyIHRoZSBjb3ZlcnMgaXQncyB0aGUgZXhhY3Qgc2FtZSBjb2RlIE1vZGVybml6clxuICAgKiB1c2VzIGZvciBpdHMgb3duIFtmZWF0dXJlIGRldGVjdGlvbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL3RyZWUvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cykpLiBKdXN0IGxpa2UgdGhlIG9mZmljYWwgZGV0ZWN0cywgdGhlIHJlc3VsdFxuICAgKiB3aWxsIGJlIGFkZGVkIG9udG8gdGhlIE1vZGVybml6ciBvYmplY3QsIGFzIHdlbGwgYXMgYW4gYXBwcm9wcmlhdGUgY2xhc3NOYW1lIHNldCBvblxuICAgKiB0aGUgaHRtbCBlbGVtZW50IHdoZW4gY29uZmlndXJlZCB0byBkbyBzb1xuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5hZGRUZXN0XG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5hZGRUZXN0KClcbiAgICogQG9wdGlvblByb3AgYWRkVGVzdFxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gYWRkVGVzdFxuICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IGZlYXR1cmUgLSBUaGUgc3RyaW5nIG5hbWUgb2YgdGhlIGZlYXR1cmUgZGV0ZWN0LCBvciBhblxuICAgKiBvYmplY3Qgb2YgZmVhdHVyZSBkZXRlY3QgbmFtZXMgYW5kIHRlc3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFufSB0ZXN0IC0gRnVuY3Rpb24gcmV0dXJuaW5nIHRydWUgaWYgZmVhdHVyZSBpcyBzdXBwb3J0ZWQsXG4gICAqIGZhbHNlIGlmIG5vdC4gT3RoZXJ3aXNlIGEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBmZWF0dXJlIGRldGVjdGlvblxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBUaGUgbW9zdCBjb21tb24gd2F5IG9mIGNyZWF0aW5nIHlvdXIgb3duIGZlYXR1cmUgZGV0ZWN0cyBpcyBieSBjYWxsaW5nXG4gICAqIGBNb2Rlcm5penIuYWRkVGVzdGAgd2l0aCBhIHN0cmluZyAocHJlZmVyYWJseSBqdXN0IGxvd2VyY2FzZSwgd2l0aG91dCBhbnlcbiAgICogcHVuY3R1YXRpb24pLCBhbmQgYSBmdW5jdGlvbiB5b3Ugd2FudCBleGVjdXRlZCB0aGF0IHdpbGwgcmV0dXJuIGEgYm9vbGVhbiByZXN1bHRcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLmFkZFRlc3QoJ2l0c1R1ZXNkYXknLCBmdW5jdGlvbigpIHtcbiAgICogIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICogIHJldHVybiBkLmdldERheSgpID09PSAyO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIFdoZW4gdGhlIGFib3ZlIGlzIHJ1biwgaXQgd2lsbCBzZXQgTW9kZXJuaXpyLml0c3R1ZXNkYXkgdG8gYHRydWVgIHdoZW4gaXQgaXMgdHVlc2RheSxcbiAgICogYW5kIHRvIGBmYWxzZWAgZXZlcnkgb3RoZXIgZGF5IG9mIHRoZSB3ZWVrLiBPbmUgdGhpbmcgdG8gbm90aWNlIGlzIHRoYXQgdGhlIG5hbWVzIG9mXG4gICAqIGZlYXR1cmUgZGV0ZWN0IGZ1bmN0aW9ucyBhcmUgYWx3YXlzIGxvd2VyY2FzZWQgd2hlbiBhZGRlZCB0byB0aGUgTW9kZXJuaXpyIG9iamVjdC4gVGhhdFxuICAgKiBtZWFucyB0aGF0IGBNb2Rlcm5penIuaXRzVHVlc2RheWAgd2lsbCBub3QgZXhpc3QsIGJ1dCBgTW9kZXJuaXpyLml0c3R1ZXNkYXlgIHdpbGwuXG4gICAqXG4gICAqXG4gICAqICBTaW5jZSB3ZSBvbmx5IGxvb2sgYXQgdGhlIHJldHVybmVkIHZhbHVlIGZyb20gYW55IGZlYXR1cmUgZGV0ZWN0aW9uIGZ1bmN0aW9uLFxuICAgKiAgeW91IGRvIG5vdCBuZWVkIHRvIGFjdHVhbGx5IHVzZSBhIGZ1bmN0aW9uLiBGb3Igc2ltcGxlIGRldGVjdGlvbnMsIGp1c3QgcGFzc2luZ1xuICAgKiAgaW4gYSBzdGF0ZW1lbnQgdGhhdCB3aWxsIHJldHVybiBhIGJvb2xlYW4gdmFsdWUgd29ya3MganVzdCBmaW5lLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIuYWRkVGVzdCgnaGFzSnF1ZXJ5JywgJ2pRdWVyeScgaW4gd2luZG93KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEp1c3QgbGlrZSBiZWZvcmUsIHdoZW4gdGhlIGFib3ZlIHJ1bnMgYE1vZGVybml6ci5oYXNqcXVlcnlgIHdpbGwgYmUgdHJ1ZSBpZlxuICAgKiBqUXVlcnkgaGFzIGJlZW4gaW5jbHVkZWQgb24gdGhlIHBhZ2UuIE5vdCB1c2luZyBhIGZ1bmN0aW9uIHNhdmVzIGEgc21hbGwgYW1vdW50XG4gICAqIG9mIG92ZXJoZWFkIGZvciB0aGUgYnJvd3NlciwgYXMgd2VsbCBhcyBtYWtpbmcgeW91ciBjb2RlIG11Y2ggbW9yZSByZWFkYWJsZS5cbiAgICpcbiAgICogRmluYWxseSwgeW91IGFsc28gaGF2ZSB0aGUgYWJpbGl0eSB0byBwYXNzIGluIGFuIG9iamVjdCBvZiBmZWF0dXJlIG5hbWVzIGFuZFxuICAgKiB0aGVpciB0ZXN0cy4gVGhpcyBpcyBoYW5keSBpZiB5b3Ugd2FudCB0byBhZGQgbXVsdGlwbGUgZGV0ZWN0aW9ucyBpbiBvbmUgZ28uXG4gICAqIFRoZSBrZXlzIHNob3VsZCBhbHdheXMgYmUgYSBzdHJpbmcsIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGVpdGhlciBhIGJvb2xlYW4gb3JcbiAgICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbi5cbiAgICpcbiAgICogYGBganNcbiAgICogdmFyIGRldGVjdHMgPSB7XG4gICAqICAnaGFzanF1ZXJ5JzogJ2pRdWVyeScgaW4gd2luZG93LFxuICAgKiAgJ2l0c3R1ZXNkYXknOiBmdW5jdGlvbigpIHtcbiAgICogICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgKiAgICByZXR1cm4gZC5nZXREYXkoKSA9PT0gMjtcbiAgICogIH1cbiAgICogfVxuICAgKlxuICAgKiBNb2Rlcm5penIuYWRkVGVzdChkZXRlY3RzKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFRoZXJlIGlzIHJlYWxseSBubyBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGZpcnN0IG1ldGhvZHMgYW5kIHRoaXMgb25lLCBpdCBpc1xuICAgKiBqdXN0IGEgY29udmVuaWVuY2UgdG8gbGV0IHlvdSB3cml0ZSBtb3JlIHJlYWRhYmxlIGNvZGUuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFkZFRlc3QoZmVhdHVyZSwgdGVzdCkge1xuXG4gICAgaWYgKHR5cGVvZiBmZWF0dXJlID09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZmVhdHVyZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcChmZWF0dXJlLCBrZXkpKSB7XG4gICAgICAgICAgYWRkVGVzdChrZXksIGZlYXR1cmVbIGtleSBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGZlYXR1cmUgPSBmZWF0dXJlLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgZmVhdHVyZU5hbWVTcGxpdCA9IGZlYXR1cmUuc3BsaXQoJy4nKTtcbiAgICAgIHZhciBsYXN0ID0gTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dO1xuXG4gICAgICAvLyBBZ2Fpbiwgd2UgZG9uJ3QgY2hlY2sgZm9yIHBhcmVudCB0ZXN0IGV4aXN0ZW5jZS4gR2V0IHRoYXQgcmlnaHQsIHRob3VnaC5cbiAgICAgIGlmIChmZWF0dXJlTmFtZVNwbGl0Lmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIGxhc3QgPSBsYXN0W2ZlYXR1cmVOYW1lU3BsaXRbMV1dO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGxhc3QgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gd2UncmUgZ29pbmcgdG8gcXVpdCBpZiB5b3UncmUgdHJ5aW5nIHRvIG92ZXJ3cml0ZSBhbiBleGlzdGluZyB0ZXN0XG4gICAgICAgIC8vIGlmIHdlIHdlcmUgdG8gYWxsb3cgaXQsIHdlJ2QgZG8gdGhpczpcbiAgICAgICAgLy8gICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXFxcXGIobm8tKT9cIiArIGZlYXR1cmUgKyBcIlxcXFxiXCIpO1xuICAgICAgICAvLyAgIGRvY0VsZW1lbnQuY2xhc3NOYW1lID0gZG9jRWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSggcmUsICcnICk7XG4gICAgICAgIC8vIGJ1dCwgbm8gcmx5LCBzdHVmZiAnZW0uXG4gICAgICAgIHJldHVybiBNb2Rlcm5penI7XG4gICAgICB9XG5cbiAgICAgIHRlc3QgPSB0eXBlb2YgdGVzdCA9PSAnZnVuY3Rpb24nID8gdGVzdCgpIDogdGVzdDtcblxuICAgICAgLy8gU2V0IHRoZSB2YWx1ZSAodGhpcyBpcyB0aGUgbWFnaWMsIHJpZ2h0IGhlcmUpLlxuICAgICAgaWYgKGZlYXR1cmVOYW1lU3BsaXQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gdGVzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNhc3QgdG8gYSBCb29sZWFuLCBpZiBub3Qgb25lIGFscmVhZHlcbiAgICAgICAgLyoganNoaW50IC1XMDUzICovXG4gICAgICAgIGlmIChNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gJiYgIShNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gaW5zdGFuY2VvZiBCb29sZWFuKSkge1xuICAgICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IG5ldyBCb29sZWFuKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSk7XG4gICAgICAgIH1cblxuICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV1bZmVhdHVyZU5hbWVTcGxpdFsxXV0gPSB0ZXN0O1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgYSBzaW5nbGUgY2xhc3MgKGVpdGhlciBgZmVhdHVyZWAgb3IgYG5vLWZlYXR1cmVgKVxuICAgICAgLyoganNoaW50IC1XMDQxICovXG4gICAgICBzZXRDbGFzc2VzKFsoISF0ZXN0ICYmIHRlc3QgIT0gZmFsc2UgPyAnJyA6ICduby0nKSArIGZlYXR1cmVOYW1lU3BsaXQuam9pbignLScpXSk7XG4gICAgICAvKiBqc2hpbnQgK1cwNDEgKi9cblxuICAgICAgLy8gVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgIE1vZGVybml6ci5fdHJpZ2dlcihmZWF0dXJlLCB0ZXN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gTW9kZXJuaXpyOyAvLyBhbGxvdyBjaGFpbmluZy5cbiAgfVxuXG4gIC8vIEFmdGVyIGFsbCB0aGUgdGVzdHMgYXJlIHJ1biwgYWRkIHNlbGYgdG8gdGhlIE1vZGVybml6ciBwcm90b3R5cGVcbiAgTW9kZXJuaXpyLl9xLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgTW9kZXJuaXpyUHJvdG8uYWRkVGVzdCA9IGFkZFRlc3Q7XG4gIH0pO1xuXG4gIFxuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwic2l6ZXMgYXR0cmlidXRlXCIsXG4gIFwiYXN5bmNcIjogdHJ1ZSxcbiAgXCJwcm9wZXJ0eVwiOiBcInNpemVzXCIsXG4gIFwidGFnc1wiOiBbXCJpbWFnZVwiXSxcbiAgXCJhdXRob3JzXCI6IFtcIk1hdCBNYXJxdWlzXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiU3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9waWN0dXJlLnJlc3BvbnNpdmVpbWFnZXMub3JnLyNwYXJzZS1zaXplcy1hdHRyXCJcbiAgICB9LHtcbiAgICBcIm5hbWVcIjogXCJVc2FnZSBEZXRhaWxzXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL2VyaWNwb3J0aXMuY29tL3Bvc3RzLzIwMTQvc3Jjc2V0LXNpemVzL1wiXG4gICAgfV1cbn1cbiEqL1xuLyogRE9DXG5UZXN0IGZvciB0aGUgYHNpemVzYCBhdHRyaWJ1dGUgb24gaW1hZ2VzXG4qL1xuXG4gIE1vZGVybml6ci5hZGRBc3luY1Rlc3QoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdpZHRoMSwgd2lkdGgyLCB0ZXN0O1xuICAgIHZhciBpbWFnZSA9IGNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIC8vIGluIGEgcGVyZmVjdCB3b3JsZCB0aGlzIHdvdWxkIGJlIHRoZSB0ZXN0Li4uXG4gICAgdmFyIGlzU2l6ZXMgPSAnc2l6ZXMnIGluIGltYWdlO1xuXG4gICAgLy8gLi4uIGJ1dCB3ZSBuZWVkIHRvIGRlYWwgd2l0aCBTYWZhcmkgOS4uLlxuICAgIGlmICghaXNTaXplcyAmJiAoJ3NyY3NldCcgaW4gIGltYWdlKSkge1xuICAgICAgd2lkdGgyID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFnQUJBUEFBQVAvLy93QUFBQ0g1QkFBQUFBQUFMQUFBQUFBQ0FBRUFBQUlDQkFvQU93PT0nO1xuICAgICAgd2lkdGgxID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09JztcblxuICAgICAgdGVzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhZGRUZXN0KCdzaXplcycsIGltYWdlLndpZHRoID09IDIpO1xuICAgICAgfTtcblxuICAgICAgaW1hZ2Uub25sb2FkID0gdGVzdDtcbiAgICAgIGltYWdlLm9uZXJyb3IgPSB0ZXN0O1xuICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdzaXplcycsICc5cHgnKTtcblxuICAgICAgaW1hZ2Uuc3Jjc2V0ID0gd2lkdGgxICsgJyAxdywnICsgd2lkdGgyICsgJyA4dyc7XG4gICAgICBpbWFnZS5zcmMgPSB3aWR0aDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFkZFRlc3QoJ3NpemVzJywgaXNTaXplcyk7XG4gICAgfVxuICB9KTtcblxuXG4gIC8vIFJ1biBlYWNoIHRlc3RcbiAgdGVzdFJ1bm5lcigpO1xuXG4gIC8vIFJlbW92ZSB0aGUgXCJuby1qc1wiIGNsYXNzIGlmIGl0IGV4aXN0c1xuICBzZXRDbGFzc2VzKGNsYXNzZXMpO1xuXG4gIGRlbGV0ZSBNb2Rlcm5penJQcm90by5hZGRUZXN0O1xuICBkZWxldGUgTW9kZXJuaXpyUHJvdG8uYWRkQXN5bmNUZXN0O1xuXG4gIC8vIFJ1biB0aGUgdGhpbmdzIHRoYXQgYXJlIHN1cHBvc2VkIHRvIHJ1biBhZnRlciB0aGUgdGVzdHNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBNb2Rlcm5penIuX3EubGVuZ3RoOyBpKyspIHtcbiAgICBNb2Rlcm5penIuX3FbaV0oKTtcbiAgfVxuXG4gIC8vIExlYWsgTW9kZXJuaXpyIG5hbWVzcGFjZVxuICB3aW5kb3cuTW9kZXJuaXpyID0gTW9kZXJuaXpyO1xuXG5cbjtcblxufSkod2luZG93LCBkb2N1bWVudCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
