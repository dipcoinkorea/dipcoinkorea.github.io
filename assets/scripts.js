var Helpers;!function(t){t.GetRectangle=function(t){var e=t.getBoundingClientRect();return{Top:e.top,Right:e.right,Bottom:e.bottom,Left:e.left}},t.IsOutside=function(t,e){return t.Top<=e.Top||t.Left<=e.Left||t.Right>=e.Right||t.Bottom>=e.Bottom},t.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetOutsideDir=function(t,e){var i=[];return t.Top<=e.Top&&i.push(Direction.Top),t.Left<=e.Left&&i.push(Direction.Left),t.Right>=e.Right&&i.push(Direction.Right),t.Bottom>=e.Bottom&&i.push(Direction.Bottom),i}}(Helpers||(Helpers={}));var Direction;!function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"}(Direction||(Direction={}));var HERO_WIDTH=100,HERO_HEIGHT=130,BASESPEED=.3,Hero=function(){function t(t){var e=this;this.Speed=BASESPEED,this.ChangeDir=function(){var t=Helpers.GetRandomInt(0,e._Direction.length-1);e._ChangeDir(t)},this._ChangeDir=function(t){if(!(0>t||t>=e._Direction.length)){var i=e._Direction[t];switch(i){case Direction.Top:e._Direction[t]=Direction.Bottom;break;case Direction.Bottom:e._Direction[t]=Direction.Top;break;case Direction.Left:e._Direction[t]=Direction.Right;break;case Direction.Right:e._Direction[t]=Direction.Left}}},this.Elt=document.createElement("div"),this.Elt.classList.add("hero"),this.Elt.style.width=HERO_WIDTH+"px",this.Elt.style.height=HERO_HEIGHT+"px",t.appendChild(this.Elt),this.Position={x:50,y:50},this._Direction=[Direction.Top,Direction.Left],this.Move()}return t.prototype.ChangeDirFromCollision=function(t){for(var e=t.length;e--;){var i=t[e],o=this._Direction.indexOf(i);this._ChangeDir(o)}},t.prototype.GoOppositeDir=function(){for(var t=this._Direction.length;t--;)this._ChangeDir(t)},t.prototype.Move=function(){var t=this;this._Direction.forEach(function(e){switch(e){case Direction.Top:t.Position.y=t.Position.y-t.Speed;break;case Direction.Bottom:t.Position.y=t.Position.y+t.Speed;break;case Direction.Left:t.Position.x=t.Position.x-t.Speed;break;case Direction.Right:t.Position.x=t.Position.x+t.Speed}}),this.Elt.style.top=this.Position.y+"%",this.Elt.style.left=this.Position.x+"%"},t}(),Playground;!function(t){var e=document.getElementById("playground");if(e){for(var i=1,o=[],n=Helpers.GetRectangle(e),r=0;i>r;r++)o.push(new Hero(e));var s=function(t){for(var e=0;e<o.length;e++){var i=o[e];i.Move();var r=Helpers.GetRectangle(i.Elt);Helpers.IsOutside(r,n)&&i.ChangeDirFromCollision(Helpers.GetOutsideDir(r,n))}requestAnimationFrame(s)};requestAnimationFrame(s);for(var a=0;a<o.length;a++){var c=o[a];c.Elt.addEventListener("mouseover",function(){c.Speed=3*c.Speed}),c.Elt.addEventListener("mouseout",function(){c.Speed=BASESPEED}),setInterval(function(){Math.random()>.2&&c.ChangeDir()},3e3)}window.addEventListener("resize",function(){n=Helpers.GetRectangle(e)})}}(Playground||(Playground={}));var TUMBLR_URL="http://rickymarou.tumblr.com/api/read/json",POST_PER_PAGE=20,Tumblr;!function(t){var e,i,o=0;t.Init=function(t){i=t,r()};var n=function(){if(4===e.readyState){200!=e.status&&console.log("error");var t=JSON.parse(e.responseText);console.log(t)}},r=function(){e&&e.abort(),e=new XMLHttpRequest,e.onreadystatechange=n,e.open("GET",TUMBLR_URL+"?start="+o+"&num="+POST_PER_PAGE,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-type","application/json"),e.send()}}(Tumblr||(Tumblr={}));var Home;!function(t){var e=document.getElementById("tumblr");e&&Tumblr.Init(e)}(Home||(Home={}));
!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],t=C[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?w[s[0]]=i:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=i),A.push((i?"":"no-")+s.join("-"))}}function o(e){var t=x.className,n=w._config.classPrefix||"";if(T&&(t=t.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?x.className.baseVal=t:x.className=t)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(){var e=t.body;return e||(e=l(T?"svg":"body"),e.fake=!0),e}function f(e,t){return!!~(""+e).indexOf(t)}function d(e,n,r,i){var o,a,s,f,d="modernizr",c=l("div"),p=u();if(parseInt(r,10))for(;r--;)s=l("div"),s.id=i?i[r]:d+(r+1),c.appendChild(s);return o=l("style"),o.type="text/css",o.id="s"+d,(p.fake?p:c).appendChild(o),p.appendChild(c),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),a=n(c,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=f,x.offsetHeight):c.parentNode.removeChild(c),!!a}function c(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(s(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+s(t[i])+":"+r+")");return o=o.join(" or "),d("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function p(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?p(i,n||t):i);return!1}function h(e,t,i,o){function s(){d&&(delete M.style,delete M.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var u=c(e,i);if(!r(u,"undefined"))return u}for(var d,p,m,h,v,g=["modernizr","tspan"];!M.style;)d=!0,M.modElem=l(g.shift()),M.style=M.modElem.style;for(m=e.length,p=0;m>p;p++)if(h=e[p],v=M.style[h],f(h,"-")&&(h=a(h)),M.style[h]!==n){if(o||r(i,"undefined"))return s(),"pfx"==t?h:!0;try{M.style[h]=i}catch(y){}if(M.style[h]!=v)return s(),"pfx"==t?h:!0}return s(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+j.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?h(s,t,i,o):(s=(e+" "+_.join(a+" ")+a).split(" "),m(s,t,n))}function g(e,t,r){return v(e,n,n,t,r)}function y(e,t){if("object"==typeof e)for(var n in e)V(e,n)&&y(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),i=w[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return w;t="function"==typeof t?t():t,1==r.length?w[r[0]]=t:(!w[r[0]]||w[r[0]]instanceof Boolean||(w[r[0]]=new Boolean(w[r[0]])),w[r[0]][r[1]]=t),o([(t&&0!=t?"":"no-")+r.join("-")]),w._trigger(e,t)}return w}var A=[],C=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){C.push({name:e,fn:t,options:n})},addAsyncTest:function(e){C.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w,w.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var E=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=E;var x=t.documentElement;w.addTest("classlist","classList"in x);var T="svg"===x.nodeName.toLowerCase();T||!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=x.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=x.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),x.elements=n+" "+e,u(t)}function o(e){var t=E[e[b]];return t||(t={},w++,e[b]=w,E[w]=t),t}function a(e,n,r){if(n||(n=t),v)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():C.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||A.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function s(e,n){if(e||(e=t),v)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return x.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function u(e){e||(e=t);var r=o(e);return!x.shivCSS||h||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),v||l(e,r),e}function f(e){for(var t,n=e.getElementsByTagName("*"),i=n.length,o=RegExp("^(?:"+r().join("|")+")$","i"),a=[];i--;)t=n[i],o.test(t.nodeName)&&a.push(t.applyElement(d(t)));return a}function d(e){for(var t,n=e.attributes,r=n.length,i=e.ownerDocument.createElement(S+":"+e.nodeName);r--;)t=n[r],t.specified&&i.setAttribute(t.nodeName,t.nodeValue);return i.style.cssText=e.style.cssText,i}function c(e){for(var t,n=e.split("{"),i=n.length,o=RegExp("(^|[\\s,>+~])("+r().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),a="$1"+S+"\\:$2";i--;)t=n[i]=n[i].split("}"),t[t.length-1]=t[t.length-1].replace(o,a),n[i]=t.join("}");return n.join("{")}function p(e){for(var t=e.length;t--;)e[t].removeNode()}function m(e){function t(){clearTimeout(a._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,i,a=o(e),s=e.namespaces,l=e.parentWindow;return!_||e.printShived?e:("undefined"==typeof s[S]&&s.add(S),l.attachEvent("onbeforeprint",function(){t();for(var o,a,s,l=e.styleSheets,u=[],d=l.length,p=Array(d);d--;)p[d]=l[d];for(;s=p.pop();)if(!s.disabled&&T.test(s.media)){try{o=s.imports,a=o.length}catch(m){a=0}for(d=0;a>d;d++)p.push(o[d]);try{u.push(s.cssText)}catch(m){}}u=c(u.reverse().join("")),i=f(e),r=n(e,u)}),l.attachEvent("onafterprint",function(){p(i),clearTimeout(a._removeSheetTimer),a._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var h,v,g="3.7.3",y=e.html5||{},A=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,C=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",w=0,E={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,v=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){h=!0,v=!0}}();var x={elements:y.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:g,shivCSS:y.shivCSS!==!1,supportsUnknownElements:v,shivMethods:y.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:s,addElements:i};e.html5=x,u(t);var T=/^$|\b(?:all|print)\b/,S="html5shiv",_=!v&&function(){var n=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof e.attachEvent)}();x.type+=" print",x.shivPrint=m,m(t),"object"==typeof module&&module.exports&&(module.exports=x)}("undefined"!=typeof e?e:this,t);var S="Moz O ms Webkit",_=b._config.usePrefixes?S.toLowerCase().split(" "):[];b._domPrefixes=_;var N=function(e,t){var n=!1,r=l("div"),i=r.style;if(e in i){var o=_.length;for(i[e]=t,n=i[e];o--&&!n;)i[e]="-"+_[o]+"-"+t,n=i[e]}return""===n&&(n=!1),n};b.prefixedCSSValue=N,w.addTest("canvas",function(){var e=l("canvas");return!(!e.getContext||!e.getContext("2d"))}),w.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",i=0,o=E.length-1;o>i;i++)e=0===i?"to ":"",r+=t+E[i]+"linear-gradient("+e+"left top, #9f9, white);";w._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=l("a"),s=a.style;return s.cssText=r,(""+s.backgroundImage).indexOf("gradient")>-1}),w.addTest("placeholder","placeholder"in l("input")&&"placeholder"in l("textarea")),w.addTest("srcset","srcset"in l("img")),w.addTest("inlinesvg",function(){var e=l("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&e.firstChild&&e.firstChild.namespaceURI)});var k="CSS"in e&&"supports"in e.CSS,P="supportsCSS"in e;w.addTest("supports",k||P);var j=b._config.usePrefixes?S.split(" "):[];b._cssomPrefixes=j;var z=function(t){var r,i=E.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var a=0;i>a;a++){var s=E[a],l=s.toUpperCase()+"_"+r;if(l in o)return"@-"+s.toLowerCase()+"-"+t}return!1};b.atRule=z;var L=b.testStyles=d;w.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",E.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(r,function(e){n=9===e.offsetTop})}return n}),w.addTest("formvalidation",function(){var t=l("form");if(!("checkValidity"in t&&"addEventListener"in t))return!1;if("reportValidity"in t)return!0;var n,r=!1;return w.formvalidationapi=!0,t.addEventListener("submit",function(t){e.opera&&!e.operamini||t.preventDefault(),t.stopPropagation()},!1),t.innerHTML='<input name="modTest" required="required" /><button></button>',L("#modernizr form{position:absolute;top:-99999em}",function(e){e.appendChild(t),n=t.getElementsByTagName("input")[0],n.addEventListener("invalid",function(e){r=!0,e.preventDefault(),e.stopPropagation()},!1),w.formvalidationmessage=!!n.validationMessage,t.getElementsByTagName("button")[0].click()}),r});var B=l("input"),D="search tel url email datetime date month week time datetime-local number range color".split(" "),O={};w.inputtypes=function(e){for(var r,i,o,a=e.length,s="1)",l=0;a>l;l++)B.setAttribute("type",r=e[l]),o="text"!==B.type&&"style"in B,o&&(B.value=s,B.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&B.style.WebkitAppearance!==n?(x.appendChild(B),i=t.defaultView,o=i.getComputedStyle&&"textfield"!==i.getComputedStyle(B,null).WebkitAppearance&&0!==B.offsetHeight,x.removeChild(B)):/^(search|tel)$/.test(r)||(o=/^(url|email)$/.test(r)?B.checkValidity&&B.checkValidity()===!1:B.value!=s)),O[e[l]]=!!o;return O}(D),w.addTest("localizednumber",function(){if(!w.inputtypes.number)return!1;if(!w.formvalidation)return!1;var e,n=l("div"),r=u(),i=function(){return x.insertBefore(r,x.firstElementChild||x.firstChild)}();n.innerHTML='<input type="number" value="1.0" step="0.1"/>';var o=n.childNodes[0];i.appendChild(n),o.focus();try{t.execCommand("InsertText",!1,"1,1")}catch(a){}return e="number"===o.type&&1.1===o.valueAsNumber&&o.checkValidity(),i.removeChild(n),r.fake&&i.parentNode.removeChild(i),e});var $={elem:l("modernizr")};w._q.push(function(){delete $.elem});var M={style:$.elem.style};w._q.unshift(function(){delete M.style});b.testProp=function(e,t,r){return h([e],n,t,r)};b.testAllProps=v;var R=b.prefixed=function(e,t,n){return 0===e.indexOf("@")?z(e):(-1!=e.indexOf("-")&&(e=a(e)),t?v(e,t,n):v(e,"pfx"))};b.prefixedCSS=function(e){var t=R(e);return t&&s(t)};b.testAllProps=g,w.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),w.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=w._config.usePrefixes;if(e&&(!t||"webkitPerspective"in x.style)){var n,r="#modernizr{width:0;height:0}";w.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),w.addTest("csstransitions",g("transition","all",!0));var V;!function(){var e={}.hasOwnProperty;V=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),b._l={},b.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),w.hasOwnProperty(e)&&setTimeout(function(){w._trigger(e,w[e])},0)},b._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},w._q.push(function(){b.addTest=y}),w.addAsyncTest(function(){var e,t,n,r=l("img"),i="sizes"in r;!i&&"srcset"in r?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){y("sizes",2==r.width)},r.onload=n,r.onerror=n,r.setAttribute("sizes","9px"),r.srcset=e+" 1w,"+t+" 8w",r.src=e):y("sizes",i)}),i(),o(A),delete b.addTest,delete b.addAsyncTest;for(var F=0;F<w._q.length;F++)w._q[F]();e.Modernizr=w}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm91dHB1dC5qcyIsImxpYi9tb2Rlcm5penItY3VzdG9tLmpzIl0sIm5hbWVzIjpbIkhlbHBlcnMiLCJHZXRSZWN0YW5nbGUiLCJlbHQiLCJwb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJUb3AiLCJ0b3AiLCJSaWdodCIsInJpZ2h0IiwiQm90dG9tIiwiYm90dG9tIiwiTGVmdCIsImxlZnQiLCJJc091dHNpZGUiLCJyZWN0IiwiY29udGFpbmVyIiwiR2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiR2V0T3V0c2lkZURpciIsInJlc3VsdCIsInB1c2giLCJEaXJlY3Rpb24iLCJIRVJPX1dJRFRIIiwiSEVST19IRUlHSFQiLCJCQVNFU1BFRUQiLCJIZXJvIiwiX3RoaXMiLCJ0aGlzIiwiU3BlZWQiLCJDaGFuZ2VEaXIiLCJyYW5kb21EaXJJbmRleCIsIl9EaXJlY3Rpb24iLCJsZW5ndGgiLCJfQ2hhbmdlRGlyIiwiZGlySW5kZXgiLCJmcm9tIiwiRWx0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImFwcGVuZENoaWxkIiwiUG9zaXRpb24iLCJ4IiwieSIsIk1vdmUiLCJwcm90b3R5cGUiLCJDaGFuZ2VEaXJGcm9tQ29sbGlzaW9uIiwiZnJvbURpcnMiLCJsIiwiaW5kZXhPZiIsIkdvT3Bwb3NpdGVEaXIiLCJmb3JFYWNoIiwiZGlyIiwiUGxheWdyb3VuZCIsIkNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiX1RvdGFsRmFjZXMiLCJfSGVyb2VzIiwiQ29udGFpbmVyUmVjdCIsImkiLCJfTG9vcCIsInRpbWVzdGFtcCIsImoiLCJoZXJvIiwiaGVyb1JlY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJ3aW5kb3ciLCJUVU1CTFJfVVJMIiwiUE9TVF9QRVJfUEFHRSIsIlR1bWJsciIsIl9SZXF1ZXN0IiwiX0NvbnRhaW5lciIsIl9DdXJJbmRleCIsIkluaXQiLCJfR2V0UG9zdHMiLCJfR2V0UG9zdHNSZWFkeVN0YXRlQ2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImFib3J0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJIb21lIiwiX1R1bWJsckNvbnRhaW5lciIsInVuZGVmaW5lZCIsImlzIiwib2JqIiwidHlwZSIsInRlc3RSdW5uZXIiLCJmZWF0dXJlTmFtZXMiLCJmZWF0dXJlIiwiYWxpYXNJZHgiLCJuYW1lSWR4IiwiZmVhdHVyZU5hbWUiLCJmZWF0dXJlTmFtZVNwbGl0IiwiZmVhdHVyZUlkeCIsInRlc3RzIiwiaGFzT3duUHJvcGVydHkiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJvcHRpb25zIiwiYWxpYXNlcyIsImZuIiwic3BsaXQiLCJNb2Rlcm5penIiLCJCb29sZWFuIiwiY2xhc3NlcyIsImpvaW4iLCJzZXRDbGFzc2VzIiwiY2xhc3NOYW1lIiwiZG9jRWxlbWVudCIsImNsYXNzUHJlZml4IiwiX2NvbmZpZyIsImlzU1ZHIiwiYmFzZVZhbCIsImVuYWJsZUpTQ2xhc3MiLCJyZUpTIiwiUmVnRXhwIiwicmVwbGFjZSIsImVuYWJsZUNsYXNzZXMiLCJjc3NUb0RPTSIsInN0ciIsIm0xIiwibTIiLCJ0b1VwcGVyQ2FzZSIsImRvbVRvQ1NTIiwiYXJndW1lbnRzIiwiY3JlYXRlRWxlbWVudE5TIiwiY2FsbCIsImFwcGx5IiwiZ2V0Qm9keSIsImJvZHkiLCJmYWtlIiwiY29udGFpbnMiLCJzdWJzdHIiLCJpbmplY3RFbGVtZW50V2l0aFN0eWxlcyIsInJ1bGUiLCJjYWxsYmFjayIsIm5vZGVzIiwidGVzdG5hbWVzIiwicmV0Iiwibm9kZSIsImRvY092ZXJmbG93IiwibW9kIiwiZGl2IiwicGFyc2VJbnQiLCJpZCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJiYWNrZ3JvdW5kIiwib3ZlcmZsb3ciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJvZmZzZXRIZWlnaHQiLCJuYXRpdmVUZXN0UHJvcHMiLCJwcm9wcyIsInZhbHVlIiwiQ1NTIiwic3VwcG9ydHMiLCJjb25kaXRpb25UZXh0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwiZm5CaW5kIiwidGhhdCIsInRlc3RET01Qcm9wcyIsImVsZW0iLCJpdGVtIiwidGVzdFByb3BzIiwicHJlZml4ZWQiLCJza2lwVmFsdWVUZXN0IiwiY2xlYW5FbGVtcyIsImFmdGVySW5pdCIsIm1TdHlsZSIsIm1vZEVsZW0iLCJwcm9wc0xlbmd0aCIsInByb3AiLCJiZWZvcmUiLCJlbGVtcyIsInNoaWZ0IiwiZSIsInRlc3RQcm9wc0FsbCIsInVjUHJvcCIsImNoYXJBdCIsInNsaWNlIiwiY3Nzb21QcmVmaXhlcyIsInRlc3RBbGxQcm9wcyIsImFkZFRlc3QiLCJ0ZXN0Iiwia2V5IiwiaGFzT3duUHJvcCIsImxhc3QiLCJfdHJpZ2dlciIsIk1vZGVybml6clByb3RvIiwiX3ZlcnNpb24iLCJ1c2VQcmVmaXhlcyIsIl9xIiwib24iLCJjYiIsInNlbGYiLCJzZXRUaW1lb3V0IiwiYWRkQXN5bmNUZXN0IiwiY3JlYXRlU1ZHUmVjdCIsInByZWZpeGVzIiwiX3ByZWZpeGVzIiwiZG9jdW1lbnRFbGVtZW50Iiwibm9kZU5hbWUiLCJhZGRTdHlsZVNoZWV0Iiwib3duZXJEb2N1bWVudCIsInAiLCJwYXJlbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlubmVySFRNTCIsImluc2VydEJlZm9yZSIsImxhc3RDaGlsZCIsImZpcnN0Q2hpbGQiLCJnZXRFbGVtZW50cyIsImVsZW1lbnRzIiwiaHRtbDUiLCJhZGRFbGVtZW50cyIsIm5ld0VsZW1lbnRzIiwic2hpdkRvY3VtZW50IiwiZ2V0RXhwYW5kb0RhdGEiLCJkYXRhIiwiZXhwYW5kb0RhdGEiLCJleHBhbmRvIiwiZXhwYW5JRCIsInN1cHBvcnRzVW5rbm93bkVsZW1lbnRzIiwiY2FjaGUiLCJjbG9uZU5vZGUiLCJzYXZlQ2xvbmVzIiwiY3JlYXRlRWxlbSIsImNhbkhhdmVDaGlsZHJlbiIsInJlU2tpcCIsInRhZ1VybiIsImZyYWciLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY2xvbmUiLCJzaGl2TWV0aG9kcyIsImNyZWF0ZUZyYWciLCJGdW5jdGlvbiIsInNoaXZDU1MiLCJzdXBwb3J0c0h0bWw1U3R5bGVzIiwiaGFzQ1NTIiwiYWRkV3JhcHBlcnMiLCJpbmRleCIsInJlRWxlbWVudHMiLCJhcHBseUVsZW1lbnQiLCJjcmVhdGVXcmFwcGVyIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJ3cmFwcGVyIiwic2hpdk5hbWVzcGFjZSIsInNwZWNpZmllZCIsInNldEF0dHJpYnV0ZSIsIm5vZGVWYWx1ZSIsInNoaXZDc3NUZXh0IiwicGFpciIsInBhcnRzIiwicmVwbGFjZW1lbnQiLCJyZW1vdmVXcmFwcGVycyIsIndyYXBwZXJzIiwicmVtb3ZlTm9kZSIsInNoaXZQcmludCIsInJlbW92ZVNoZWV0IiwiY2xlYXJUaW1lb3V0IiwiX3JlbW92ZVNoZWV0VGltZXIiLCJzaGl2ZWRTaGVldCIsIm5hbWVzcGFjZXMiLCJvd25lcldpbmRvdyIsInBhcmVudFdpbmRvdyIsInN1cHBvcnRzU2hpdmFibGVTaGVldHMiLCJwcmludFNoaXZlZCIsImF0dGFjaEV2ZW50IiwiaW1wb3J0cyIsInNoZWV0IiwiY29sbGVjdGlvbiIsInN0eWxlU2hlZXRzIiwic2hlZXRzIiwiQXJyYXkiLCJwb3AiLCJkaXNhYmxlZCIsInJlTWVkaWEiLCJtZWRpYSIsImVyIiwicmV2ZXJzZSIsInZlcnNpb24iLCJhIiwiY2hpbGROb2RlcyIsImRvY0VsIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9tUHJlZml4ZXMiLCJkb21QcmVmaXhlcyIsIl9kb21QcmVmaXhlcyIsInByZWZpeGVkQ1NTVmFsdWUiLCJnZXRDb250ZXh0IiwiYW5nbGUiLCJzdHIxIiwic3RyMiIsImNzcyIsImxlbiIsImJhY2tncm91bmRJbWFnZSIsIlNWR1JlY3QiLCJuYW1lc3BhY2VVUkkiLCJuZXdTeW50YXgiLCJvbGRTeW50YXgiLCJfY3Nzb21QcmVmaXhlcyIsImF0UnVsZSIsImNzc3J1bGUiLCJDU1NSdWxlIiwicHJlZml4IiwidGhpc1J1bGUiLCJ0ZXN0U3R5bGVzIiwiYm9vbCIsIkRvY3VtZW50VG91Y2giLCJxdWVyeSIsIm9mZnNldFRvcCIsImZvcm0iLCJpbnB1dCIsImludmFsaWRGaXJlZCIsImZvcm12YWxpZGF0aW9uYXBpIiwib3BlcmEiLCJvcGVyYW1pbmkiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImZvcm12YWxpZGF0aW9ubWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xpY2siLCJpbnB1dEVsZW0iLCJpbnB1dHR5cGVzIiwiaW5wdXRzIiwiaW5wdXRFbGVtVHlwZSIsImRlZmF1bHRWaWV3Iiwic21pbGUiLCJXZWJraXRBcHBlYXJhbmNlIiwiY2hlY2tWYWxpZGl0eSIsIm51bWJlciIsImZvcm12YWxpZGF0aW9uIiwiZGlmZiIsImVsIiwicm9vdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZm9jdXMiLCJleGVjQ29tbWFuZCIsInZhbHVlQXNOdW1iZXIiLCJ1bnNoaWZ0IiwidGVzdFByb3AiLCJ1c2VWYWx1ZSIsInByZWZpeGVkQ1NTIiwicHJlZml4ZWRQcm9wIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidXNlUHJlZml4IiwibXEiLCJkZWZhdWx0U3R5bGUiLCJvZmZzZXRXaWR0aCIsIl9oYXNPd25Qcm9wZXJ0eSIsIm9iamVjdCIsInByb3BlcnR5IiwiY29uc3RydWN0b3IiLCJfbCIsInJlcyIsImNicyIsIndpZHRoMSIsIndpZHRoMiIsImltYWdlIiwiaXNTaXplcyIsIm9ubG9hZCIsIm9uZXJyb3IiLCJzcmNzZXQiLCJzcmMiXSwibWFwcGluZ3MiOiJB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UUFBVUEsSUF5QjNCbkYsRUFBVWlHLGFBQWEsV0FDckIsR0FBSW1LLEdBQVFDLEVBQVFqTCxFQUNoQmtMLEVBQVF0VixFQUFjLE9BRXRCdVYsRUFBVSxTQUFXRCxJQUdwQkMsR0FBWSxVQUFhRCxJQUM1QkQsRUFBUyxxRkFDVEQsRUFBUyw2RUFFVGhMLEVBQU8sV0FDTEQsRUFBUSxRQUF3QixHQUFmbUwsRUFBTWxWLFFBR3pCa1YsRUFBTUUsT0FBU3BMLEVBQ2ZrTCxFQUFNRyxRQUFVckwsRUFDaEJrTCxFQUFNaEgsYUFBYSxRQUFTLE9BRTVCZ0gsRUFBTUksT0FBU04sRUFBUyxPQUFTQyxFQUFTLE1BQzFDQyxFQUFNSyxJQUFNUCxHQUVaakwsRUFBUSxRQUFTb0wsS0FNckJ2UixJQUdBb0IsRUFBV0YsU0FFSnVGLEdBQWVOLGNBQ2ZNLEdBQWVRLFlBR3RCLEtBQUssR0FBSXhKLEdBQUksRUFBR0EsRUFBSXVELEVBQVU0RixHQUFHbEwsT0FBUStCLElBQ3ZDdUQsRUFBVTRGLEdBQUduSixJQUlmUyxHQUFPOEMsVUFBWUEsR0FLbEI5QyxPQUFRbkMiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBIZWxwZXJzO1xuKGZ1bmN0aW9uIChIZWxwZXJzKSB7XG4gICAgSGVscGVycy5HZXRSZWN0YW5nbGUgPSBmdW5jdGlvbiAoZWx0KSB7XG4gICAgICAgIHZhciBwb3MgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBUb3A6IHBvcy50b3AsXG4gICAgICAgICAgICBSaWdodDogcG9zLnJpZ2h0LFxuICAgICAgICAgICAgQm90dG9tOiBwb3MuYm90dG9tLFxuICAgICAgICAgICAgTGVmdDogcG9zLmxlZnRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEhlbHBlcnMuSXNPdXRzaWRlID0gZnVuY3Rpb24gKHJlY3QsIGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gKHJlY3QuVG9wIDw9IGNvbnRhaW5lci5Ub3ApXG4gICAgICAgICAgICB8fCAocmVjdC5MZWZ0IDw9IGNvbnRhaW5lci5MZWZ0KVxuICAgICAgICAgICAgfHwgKHJlY3QuUmlnaHQgPj0gY29udGFpbmVyLlJpZ2h0KVxuICAgICAgICAgICAgfHwgKHJlY3QuQm90dG9tID49IGNvbnRhaW5lci5Cb3R0b20pO1xuICAgIH07XG4gICAgSGVscGVycy5HZXRSYW5kb21JbnQgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gICAgfTtcbiAgICBIZWxwZXJzLkdldE91dHNpZGVEaXIgPSBmdW5jdGlvbiAocmVjdCwgY29udGFpbmVyKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKHJlY3QuVG9wIDw9IGNvbnRhaW5lci5Ub3ApXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uVG9wKTtcbiAgICAgICAgaWYgKHJlY3QuTGVmdCA8PSBjb250YWluZXIuTGVmdClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKERpcmVjdGlvbi5MZWZ0KTtcbiAgICAgICAgaWYgKHJlY3QuUmlnaHQgPj0gY29udGFpbmVyLlJpZ2h0KVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLlJpZ2h0KTtcbiAgICAgICAgaWYgKHJlY3QuQm90dG9tID49IGNvbnRhaW5lci5Cb3R0b20pXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uQm90dG9tKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufSkoSGVscGVycyB8fCAoSGVscGVycyA9IHt9KSk7XG52YXIgRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiVG9wXCJdID0gMF0gPSBcIlRvcFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDFdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJCb3R0b21cIl0gPSAyXSA9IFwiQm90dG9tXCI7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxlZnRcIl0gPSAzXSA9IFwiTGVmdFwiO1xufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiSGVscGVycy50c1wiLz5cbnZhciBIRVJPX1dJRFRIID0gMTAwO1xudmFyIEhFUk9fSEVJR0hUID0gMTMwO1xudmFyIEJBU0VTUEVFRCA9IDAuMztcbnZhciBIZXJvID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIZXJvKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLlNwZWVkID0gQkFTRVNQRUVEO1xuICAgICAgICAvL0NoYW5nZXMgb25lIG9mIHRoZSBkaXJlY3Rpb24gKHJhbmRvbWx5IHNlbGVjdGVkKVxuICAgICAgICB0aGlzLkNoYW5nZURpciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5kb21EaXJJbmRleCA9IEhlbHBlcnMuR2V0UmFuZG9tSW50KDAsIF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBfdGhpcy5fQ2hhbmdlRGlyKHJhbmRvbURpckluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fQ2hhbmdlRGlyID0gZnVuY3Rpb24gKGRpckluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZGlySW5kZXggPCAwIHx8IGRpckluZGV4ID49IF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBmcm9tID0gX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF07XG4gICAgICAgICAgICBzd2l0Y2ggKGZyb20pIHtcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5Ub3A6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fRGlyZWN0aW9uW2RpckluZGV4XSA9IERpcmVjdGlvbi5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF0gPSBEaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5FbHQuY2xhc3NMaXN0LmFkZChcImhlcm9cIik7XG4gICAgICAgIHRoaXMuRWx0LnN0eWxlLndpZHRoID0gSEVST19XSURUSCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5FbHQuc3R5bGUuaGVpZ2h0ID0gSEVST19IRUlHSFQgKyBcInB4XCI7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLkVsdCk7XG4gICAgICAgIHRoaXMuUG9zaXRpb24gPSB7IHg6IDUwLCB5OiA1MCB9O1xuICAgICAgICB0aGlzLl9EaXJlY3Rpb24gPSBbRGlyZWN0aW9uLlRvcCwgRGlyZWN0aW9uLkxlZnRdO1xuICAgICAgICB0aGlzLk1vdmUoKTtcbiAgICB9XG4gICAgSGVyby5wcm90b3R5cGUuQ2hhbmdlRGlyRnJvbUNvbGxpc2lvbiA9IGZ1bmN0aW9uIChmcm9tRGlycykge1xuICAgICAgICB2YXIgbCA9IGZyb21EaXJzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgdmFyIGZyb20gPSBmcm9tRGlyc1tsXTtcbiAgICAgICAgICAgIHZhciBkaXJJbmRleCA9IHRoaXMuX0RpcmVjdGlvbi5pbmRleE9mKGZyb20pO1xuICAgICAgICAgICAgdGhpcy5fQ2hhbmdlRGlyKGRpckluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSGVyby5wcm90b3R5cGUuR29PcHBvc2l0ZURpciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGwgPSB0aGlzLl9EaXJlY3Rpb24ubGVuZ3RoO1xuICAgICAgICB3aGlsZSAobC0tKSB7XG4gICAgICAgICAgICB0aGlzLl9DaGFuZ2VEaXIobCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhlcm8ucHJvdG90eXBlLk1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX0RpcmVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChkaXIpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZGlyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uVG9wOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi55ID0gX3RoaXMuUG9zaXRpb24ueSAtIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5Cb3R0b206XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLlBvc2l0aW9uLnkgPSBfdGhpcy5Qb3NpdGlvbi55ICsgX3RoaXMuU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLlBvc2l0aW9uLnggPSBfdGhpcy5Qb3NpdGlvbi54IC0gX3RoaXMuU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlJpZ2h0OlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi54ID0gX3RoaXMuUG9zaXRpb24ueCArIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuRWx0LnN0eWxlLnRvcCA9IHRoaXMuUG9zaXRpb24ueSArIFwiJVwiO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS5sZWZ0ID0gdGhpcy5Qb3NpdGlvbi54ICsgXCIlXCI7XG4gICAgfTtcbiAgICByZXR1cm4gSGVybztcbn0oKSk7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwibGliL2RlZmluaXRpb25zLWN1c3RvbS50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0hlcm8udHNcIi8+XG52YXIgUGxheWdyb3VuZDtcbihmdW5jdGlvbiAoUGxheWdyb3VuZCkge1xuICAgIHZhciBDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXlncm91bmRcIik7XG4gICAgaWYgKENvbnRhaW5lcikge1xuICAgICAgICB2YXIgX1RvdGFsRmFjZXMgPSAxLCBfSGVyb2VzID0gW10sIENvbnRhaW5lclJlY3QgPSBIZWxwZXJzLkdldFJlY3RhbmdsZShDb250YWluZXIpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9Ub3RhbEZhY2VzOyBpKyspIHtcbiAgICAgICAgICAgIF9IZXJvZXMucHVzaChuZXcgSGVybyhDb250YWluZXIpKTtcbiAgICAgICAgfVxuICAgICAgICAvL0V2ZXJ5IGZyYW1lXG4gICAgICAgIHZhciBfTG9vcCA9IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX0hlcm9lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBoZXJvID0gX0hlcm9lc1tqXTtcbiAgICAgICAgICAgICAgICAvL01vdmUgaGVyb1xuICAgICAgICAgICAgICAgIGhlcm8uTW92ZSgpO1xuICAgICAgICAgICAgICAgIC8vSWYgaGVybyBpcyBvdXRzaWRlIGNvbnRhaW5lciwgY2hhbmdlIGl0cyBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICB2YXIgaGVyb1JlY3QgPSBIZWxwZXJzLkdldFJlY3RhbmdsZShoZXJvLkVsdCk7XG4gICAgICAgICAgICAgICAgaWYgKEhlbHBlcnMuSXNPdXRzaWRlKGhlcm9SZWN0LCBDb250YWluZXJSZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICBoZXJvLkNoYW5nZURpckZyb21Db2xsaXNpb24oSGVscGVycy5HZXRPdXRzaWRlRGlyKGhlcm9SZWN0LCBDb250YWluZXJSZWN0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF9Mb29wKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF9Mb29wKTtcbiAgICAgICAgLy9FdmVudHNcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfSGVyb2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvL0lmIG1vdXNlIGlzIG92ZXIgSGVybywgZ28gZmFzdGVyICAgIFxuICAgICAgICAgICAgdmFyIGhlcm8gPSBfSGVyb2VzW2pdO1xuICAgICAgICAgICAgaGVyby5FbHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9oZXJvLkdvT3Bwb3NpdGVEaXIoKTtcbiAgICAgICAgICAgICAgICBoZXJvLlNwZWVkID0gaGVyby5TcGVlZCAqIDM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlcm8uRWx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaGVyby5TcGVlZCA9IEJBU0VTUEVFRDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9SYW5kb21seSBjaGFuZ2UgZGlyZWN0aW9uIGV2ZXJ5IDMgc2VjXG4gICAgICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjIpXG4gICAgICAgICAgICAgICAgICAgIGhlcm8uQ2hhbmdlRGlyKCk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgICAvL1JlY2FsY3VsYXRlIGNvbnRhaW5lciBzaXplIHdoZW4gY2hhbmdpbmcgd2luZG93IHNpemVcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgQ29udGFpbmVyUmVjdCA9IEhlbHBlcnMuR2V0UmVjdGFuZ2xlKENvbnRhaW5lcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKFBsYXlncm91bmQgfHwgKFBsYXlncm91bmQgPSB7fSkpO1xudmFyIFRVTUJMUl9VUkwgPSBcImh0dHA6Ly9yaWNreW1hcm91LnR1bWJsci5jb20vYXBpL3JlYWQvanNvblwiO1xuLy9jb25zdCBUVU1CTFJfVVJMOiBzdHJpbmcgPSBcImh0dHA6Ly9hcGkudHVtYmxyLmNvbS92Mi9ibG9nL3JpY2t5bWFyb3UudHVtYmxyLmNvbS9wb3N0c1wiO1xudmFyIFBPU1RfUEVSX1BBR0UgPSAyMDtcbnZhciBUdW1ibHI7XG4oZnVuY3Rpb24gKFR1bWJscikge1xuICAgIHZhciBfUmVxdWVzdCwgX0NvbnRhaW5lciwgX0xvYWRlciwgX0N1ckluZGV4ID0gMDtcbiAgICBUdW1ibHIuSW5pdCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgX0NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgX0dldFBvc3RzKCk7XG4gICAgfTtcbiAgICB2YXIgX0dldFBvc3RzUmVhZHlTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9SZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChfUmVxdWVzdC5zdGF0dXMgIT0gMjAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UoX1JlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIH07XG4gICAgdmFyIF9HZXRQb3N0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9SZXF1ZXN0KVxuICAgICAgICAgICAgX1JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgX1JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgX1JlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gX0dldFBvc3RzUmVhZHlTdGF0ZUNoYW5nZTtcbiAgICAgICAgX1JlcXVlc3Qub3BlbihcIkdFVFwiLCBUVU1CTFJfVVJMICsgXCI/c3RhcnQ9XCIgKyBfQ3VySW5kZXggKyBcIiZudW09XCIgKyBQT1NUX1BFUl9QQUdFLCB0cnVlKTtcbiAgICAgICAgX1JlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgX1JlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgIF9SZXF1ZXN0LnNlbmQoKTtcbiAgICB9O1xufSkoVHVtYmxyIHx8IChUdW1ibHIgPSB7fSkpO1xudmFyIEhvbWU7XG4oZnVuY3Rpb24gKEhvbWUpIHtcbiAgICB2YXIgX1R1bWJsckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHVtYmxyXCIpO1xuICAgIGlmIChfVHVtYmxyQ29udGFpbmVyKVxuICAgICAgICBUdW1ibHIuSW5pdChfVHVtYmxyQ29udGFpbmVyKTtcbn0pKEhvbWUgfHwgKEhvbWUgPSB7fSkpO1xuIiwiLyohXG4gKiBtb2Rlcm5penIgdjMuMy4xXG4gKiBCdWlsZCBodHRwOi8vbW9kZXJuaXpyLmNvbS9kb3dubG9hZD8tY2FudmFzLWNsYXNzbGlzdC1jc3NncmFkaWVudHMtY3NzdHJhbnNmb3Jtcy1jc3N0cmFuc2Zvcm1zM2QtY3NzdHJhbnNpdGlvbnMtaW5saW5lc3ZnLWxvY2FsaXplZG51bWJlci1wbGFjZWhvbGRlci1zaXplcy1zcmNzZXQtc3ZnLXRvdWNoZXZlbnRzLWRvbXByZWZpeGVzLXByZWZpeGVkLXByZWZpeGVkY3NzLXByZWZpeGVkY3NzdmFsdWUtcHJlZml4ZXMtcHJpbnRzaGl2LXNldGNsYXNzZXMtdGVzdGFsbHByb3BzLXRlc3Rwcm9wLWRvbnRtaW5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpXG4gKiAgRmFydWsgQXRlc1xuICogIFBhdWwgSXJpc2hcbiAqICBBbGV4IFNleHRvblxuICogIFJ5YW4gU2VkZG9uXG4gKiAgUGF0cmljayBLZXR0bmVyXG4gKiAgU3R1IENveFxuICogIFJpY2hhcmQgSGVycmVyYVxuXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbi8qXG4gKiBNb2Rlcm5penIgdGVzdHMgd2hpY2ggbmF0aXZlIENTUzMgYW5kIEhUTUw1IGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlXG4gKiBjdXJyZW50IFVBIGFuZCBtYWtlcyB0aGUgcmVzdWx0cyBhdmFpbGFibGUgdG8geW91IGluIHR3byB3YXlzOiBhcyBwcm9wZXJ0aWVzIG9uXG4gKiBhIGdsb2JhbCBgTW9kZXJuaXpyYCBvYmplY3QsIGFuZCBhcyBjbGFzc2VzIG9uIHRoZSBgPGh0bWw+YCBlbGVtZW50LiBUaGlzXG4gKiBpbmZvcm1hdGlvbiBhbGxvd3MgeW91IHRvIHByb2dyZXNzaXZlbHkgZW5oYW5jZSB5b3VyIHBhZ2VzIHdpdGggYSBncmFudWxhciBsZXZlbFxuICogb2YgY29udHJvbCBvdmVyIHRoZSBleHBlcmllbmNlLlxuKi9cblxuOyhmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpe1xuICB2YXIgY2xhc3NlcyA9IFtdO1xuICBcblxuICB2YXIgdGVzdHMgPSBbXTtcbiAgXG5cbiAgLyoqXG4gICAqXG4gICAqIE1vZGVybml6clByb3RvIGlzIHRoZSBjb25zdHJ1Y3RvciBmb3IgTW9kZXJuaXpyXG4gICAqXG4gICAqIEBjbGFzc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKi9cblxuICB2YXIgTW9kZXJuaXpyUHJvdG8gPSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiwgZHVtbXlcbiAgICBfdmVyc2lvbjogJzMuMy4xJyxcblxuICAgIC8vIEFueSBzZXR0aW5ncyB0aGF0IGRvbid0IHdvcmsgYXMgc2VwYXJhdGUgbW9kdWxlc1xuICAgIC8vIGNhbiBnbyBpbiBoZXJlIGFzIGNvbmZpZ3VyYXRpb24uXG4gICAgX2NvbmZpZzoge1xuICAgICAgJ2NsYXNzUHJlZml4JzogJycsXG4gICAgICAnZW5hYmxlQ2xhc3Nlcyc6IHRydWUsXG4gICAgICAnZW5hYmxlSlNDbGFzcyc6IHRydWUsXG4gICAgICAndXNlUHJlZml4ZXMnOiB0cnVlXG4gICAgfSxcblxuICAgIC8vIFF1ZXVlIG9mIHRlc3RzXG4gICAgX3E6IFtdLFxuXG4gICAgLy8gU3R1YiB0aGVzZSBmb3IgcGVvcGxlIHdobyBhcmUgbGlzdGVuaW5nXG4gICAgb246IGZ1bmN0aW9uKHRlc3QsIGNiKSB7XG4gICAgICAvLyBJIGRvbid0IHJlYWxseSB0aGluayBwZW9wbGUgc2hvdWxkIGRvIHRoaXMsIGJ1dCB3ZSBjYW5cbiAgICAgIC8vIHNhZmUgZ3VhcmQgaXQgYSBiaXQuXG4gICAgICAvLyAtLSBOT1RFOjogdGhpcyBnZXRzIFdBWSBvdmVycmlkZGVuIGluIHNyYy9hZGRUZXN0IGZvciBhY3R1YWwgYXN5bmMgdGVzdHMuXG4gICAgICAvLyBUaGlzIGlzIGluIGNhc2UgcGVvcGxlIGxpc3RlbiB0byBzeW5jaHJvbm91cyB0ZXN0cy4gSSB3b3VsZCBsZWF2ZSBpdCBvdXQsXG4gICAgICAvLyBidXQgdGhlIGNvZGUgdG8gKmRpc2FsbG93KiBzeW5jIHRlc3RzIGluIHRoZSByZWFsIHZlcnNpb24gb2YgdGhpc1xuICAgICAgLy8gZnVuY3Rpb24gaXMgYWN0dWFsbHkgbGFyZ2VyIHRoYW4gdGhpcy5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNiKHNlbGZbdGVzdF0pO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIGFkZFRlc3Q6IGZ1bmN0aW9uKG5hbWUsIGZuLCBvcHRpb25zKSB7XG4gICAgICB0ZXN0cy5wdXNoKHtuYW1lOiBuYW1lLCBmbjogZm4sIG9wdGlvbnM6IG9wdGlvbnN9KTtcbiAgICB9LFxuXG4gICAgYWRkQXN5bmNUZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgdGVzdHMucHVzaCh7bmFtZTogbnVsbCwgZm46IGZufSk7XG4gICAgfVxuICB9O1xuXG4gIFxuXG4gIC8vIEZha2Ugc29tZSBvZiBPYmplY3QuY3JlYXRlIHNvIHdlIGNhbiBmb3JjZSBub24gdGVzdCByZXN1bHRzIHRvIGJlIG5vbiBcIm93blwiIHByb3BlcnRpZXMuXG4gIHZhciBNb2Rlcm5penIgPSBmdW5jdGlvbigpIHt9O1xuICBNb2Rlcm5penIucHJvdG90eXBlID0gTW9kZXJuaXpyUHJvdG87XG5cbiAgLy8gTGVhayBtb2Rlcm5penIgZ2xvYmFsbHkgd2hlbiB5b3UgYHJlcXVpcmVgIGl0IHJhdGhlciB0aGFuIGZvcmNlIGl0IGhlcmUuXG4gIC8vIE92ZXJ3cml0ZSBuYW1lIHNvIGNvbnN0cnVjdG9yIG5hbWUgaXMgbmljZXIgOkRcbiAgTW9kZXJuaXpyID0gbmV3IE1vZGVybml6cigpO1xuXG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIlNWR1wiLFxuICBcInByb3BlcnR5XCI6IFwic3ZnXCIsXG4gIFwiY2FuaXVzZVwiOiBcInN2Z1wiLFxuICBcInRhZ3NcIjogW1wic3ZnXCJdLFxuICBcImF1dGhvcnNcIjogW1wiRXJpayBEYWhsc3Ryb21cIl0sXG4gIFwicG9seWZpbGxzXCI6IFtcbiAgICBcInN2Z3dlYlwiLFxuICAgIFwicmFwaGFlbFwiLFxuICAgIFwiYW1wbGVzZGtcIixcbiAgICBcImNhbnZnXCIsXG4gICAgXCJzdmctYm9pbGVycGxhdGVcIixcbiAgICBcInNpZVwiLFxuICAgIFwiZG9qb2dmeFwiLFxuICAgIFwiZmFicmljanNcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciBTVkcgaW4gYDxlbWJlZD5gIG9yIGA8b2JqZWN0PmAgZWxlbWVudHMuXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdzdmcnLCAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykuY3JlYXRlU1ZHUmVjdCk7XG5cblxuICAvKipcbiAgICogTGlzdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gc2V0IGZvciBjc3MgdGVzdHMuIFNlZSB0aWNrZXQgIzIxXG4gICAqIGh0dHA6Ly9naXQuaW8vdlVHbDRcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuX3ByZWZpeGVzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5fcHJlZml4ZXNcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZXNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogTW9kZXJuaXpyLl9wcmVmaXhlcyBpcyB0aGUgaW50ZXJuYWwgbGlzdCBvZiBwcmVmaXhlcyB0aGF0IHdlIHRlc3QgYWdhaW5zdFxuICAgKiBpbnNpZGUgb2YgdGhpbmdzIGxpa2UgW3ByZWZpeGVkXSgjbW9kZXJuaXpyLXByZWZpeGVkKSBhbmQgW3ByZWZpeGVkQ1NTXSgjLWNvZGUtbW9kZXJuaXpyLXByZWZpeGVkY3NzKS4gSXQgaXMgc2ltcGx5XG4gICAqIGFuIGFycmF5IG9mIGtlYmFiLWNhc2UgdmVuZG9yIHByZWZpeGVzIHlvdSBjYW4gdXNlIHdpdGhpbiB5b3VyIGNvZGUuXG4gICAqXG4gICAqIFNvbWUgY29tbW9uIHVzZSBjYXNlcyBpbmNsdWRlXG4gICAqXG4gICAqIEdlbmVyYXRpbmcgYWxsIHBvc3NpYmxlIHByZWZpeGVkIHZlcnNpb24gb2YgYSBDU1MgcHJvcGVydHlcbiAgICogYGBganNcbiAgICogdmFyIHJ1bGUgPSBNb2Rlcm5penIuX3ByZWZpeGVzLmpvaW4oJ3RyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgJyk7XG4gICAqXG4gICAqIHJ1bGUgPT09ICd0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IHdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG1vei10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG8tdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyBtcy10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7J1xuICAgKiBgYGBcbiAgICpcbiAgICogR2VuZXJhdGluZyBhbGwgcG9zc2libGUgcHJlZml4ZWQgdmVyc2lvbiBvZiBhIENTUyB2YWx1ZVxuICAgKiBgYGBqc1xuICAgKiBydWxlID0gJ2Rpc3BsYXk6JyArICBNb2Rlcm5penIuX3ByZWZpeGVzLmpvaW4oJ2ZsZXg7IGRpc3BsYXk6JykgKyAnZmxleCc7XG4gICAqXG4gICAqIHJ1bGUgPT09ICdkaXNwbGF5OmZsZXg7IGRpc3BsYXk6LXdlYmtpdC1mbGV4OyBkaXNwbGF5Oi1tb3otZmxleDsgZGlzcGxheTotby1mbGV4OyBkaXNwbGF5Oi1tcy1mbGV4OyBkaXNwbGF5OmZsZXgnXG4gICAqIGBgYFxuICAgKi9cblxuICAvLyB3ZSB1c2UgWycnLCcnXSByYXRoZXIgdGhhbiBhbiBlbXB0eSBhcnJheSBpbiBvcmRlciB0byBhbGxvdyBhIHBhdHRlcm4gb2YgLmBqb2luKClgaW5nIHByZWZpeGVzIHRvIHRlc3RcbiAgLy8gdmFsdWVzIGluIGZlYXR1cmUgZGV0ZWN0cyB0byBjb250aW51ZSB0byB3b3JrXG4gIHZhciBwcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gJyAtd2Via2l0LSAtbW96LSAtby0gLW1zLSAnLnNwbGl0KCcgJykgOiBbJycsJyddKTtcblxuICAvLyBleHBvc2UgdGhlc2UgZm9yIHRoZSBwbHVnaW4gQVBJLiBMb29rIGluIHRoZSBzb3VyY2UgZm9yIGhvdyB0byBqb2luKCkgdGhlbSBhZ2FpbnN0IHlvdXIgaW5wdXRcbiAgTW9kZXJuaXpyUHJvdG8uX3ByZWZpeGVzID0gcHJlZml4ZXM7XG5cbiAgXG5cbiAgLyoqXG4gICAqIGlzIHJldHVybnMgYSBib29sZWFuIGlmIHRoZSB0eXBlb2YgYW4gb2JqIGlzIGV4YWN0bHkgdHlwZS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBpc1xuICAgKiBAcGFyYW0geyp9IG9iaiAtIEEgdGhpbmcgd2Ugd2FudCB0byBjaGVjayB0aGUgdHlwZSBvZlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEEgc3RyaW5nIHRvIGNvbXBhcmUgdGhlIHR5cGVvZiBhZ2FpbnN0XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpcyhvYmosIHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gdHlwZTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIFJ1biB0aHJvdWdoIGFsbCB0ZXN0cyBhbmQgZGV0ZWN0IHRoZWlyIHN1cHBvcnQgaW4gdGhlIGN1cnJlbnQgVUEuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiB0ZXN0UnVubmVyKCkge1xuICAgIHZhciBmZWF0dXJlTmFtZXM7XG4gICAgdmFyIGZlYXR1cmU7XG4gICAgdmFyIGFsaWFzSWR4O1xuICAgIHZhciByZXN1bHQ7XG4gICAgdmFyIG5hbWVJZHg7XG4gICAgdmFyIGZlYXR1cmVOYW1lO1xuICAgIHZhciBmZWF0dXJlTmFtZVNwbGl0O1xuXG4gICAgZm9yICh2YXIgZmVhdHVyZUlkeCBpbiB0ZXN0cykge1xuICAgICAgaWYgKHRlc3RzLmhhc093blByb3BlcnR5KGZlYXR1cmVJZHgpKSB7XG4gICAgICAgIGZlYXR1cmVOYW1lcyA9IFtdO1xuICAgICAgICBmZWF0dXJlID0gdGVzdHNbZmVhdHVyZUlkeF07XG4gICAgICAgIC8vIHJ1biB0aGUgdGVzdCwgdGhyb3cgdGhlIHJldHVybiB2YWx1ZSBpbnRvIHRoZSBNb2Rlcm5penIsXG4gICAgICAgIC8vIHRoZW4gYmFzZWQgb24gdGhhdCBib29sZWFuLCBkZWZpbmUgYW4gYXBwcm9wcmlhdGUgY2xhc3NOYW1lXG4gICAgICAgIC8vIGFuZCBwdXNoIGl0IGludG8gYW4gYXJyYXkgb2YgY2xhc3NlcyB3ZSdsbCBqb2luIGxhdGVyLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBuYW1lLCBpdCdzIGFuICdhc3luYycgdGVzdCB0aGF0IGlzIHJ1bixcbiAgICAgICAgLy8gYnV0IG5vdCBkaXJlY3RseSBhZGRlZCB0byB0aGUgb2JqZWN0LiBUaGF0IHNob3VsZFxuICAgICAgICAvLyBiZSBkb25lIHdpdGggYSBwb3N0LXJ1biBhZGRUZXN0IGNhbGwuXG4gICAgICAgIGlmIChmZWF0dXJlLm5hbWUpIHtcbiAgICAgICAgICBmZWF0dXJlTmFtZXMucHVzaChmZWF0dXJlLm5hbWUudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgICAgICBpZiAoZmVhdHVyZS5vcHRpb25zICYmIGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzICYmIGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gQWRkIGFsbCB0aGUgYWxpYXNlcyBpbnRvIHRoZSBuYW1lcyBsaXN0XG4gICAgICAgICAgICBmb3IgKGFsaWFzSWR4ID0gMDsgYWxpYXNJZHggPCBmZWF0dXJlLm9wdGlvbnMuYWxpYXNlcy5sZW5ndGg7IGFsaWFzSWR4KyspIHtcbiAgICAgICAgICAgICAgZmVhdHVyZU5hbWVzLnB1c2goZmVhdHVyZS5vcHRpb25zLmFsaWFzZXNbYWxpYXNJZHhdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgdGVzdCwgb3IgdXNlIHRoZSByYXcgdmFsdWUgaWYgaXQncyBub3QgYSBmdW5jdGlvblxuICAgICAgICByZXN1bHQgPSBpcyhmZWF0dXJlLmZuLCAnZnVuY3Rpb24nKSA/IGZlYXR1cmUuZm4oKSA6IGZlYXR1cmUuZm47XG5cblxuICAgICAgICAvLyBTZXQgZWFjaCBvZiB0aGUgbmFtZXMgb24gdGhlIE1vZGVybml6ciBvYmplY3RcbiAgICAgICAgZm9yIChuYW1lSWR4ID0gMDsgbmFtZUlkeCA8IGZlYXR1cmVOYW1lcy5sZW5ndGg7IG5hbWVJZHgrKykge1xuICAgICAgICAgIGZlYXR1cmVOYW1lID0gZmVhdHVyZU5hbWVzW25hbWVJZHhdO1xuICAgICAgICAgIC8vIFN1cHBvcnQgZG90IHByb3BlcnRpZXMgYXMgc3ViIHRlc3RzLiBXZSBkb24ndCBkbyBjaGVja2luZyB0byBtYWtlIHN1cmVcbiAgICAgICAgICAvLyB0aGF0IHRoZSBpbXBsaWVkIHBhcmVudCB0ZXN0cyBoYXZlIGJlZW4gYWRkZWQuIFlvdSBtdXN0IGNhbGwgdGhlbSBpblxuICAgICAgICAgIC8vIG9yZGVyIChlaXRoZXIgaW4gdGhlIHRlc3QsIG9yIG1ha2UgdGhlIHBhcmVudCB0ZXN0IGEgZGVwZW5kZW5jeSkuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBDYXAgaXQgdG8gVFdPIHRvIG1ha2UgdGhlIGxvZ2ljIHNpbXBsZSBhbmQgYmVjYXVzZSB3aG8gbmVlZHMgdGhhdCBraW5kIG9mIHN1YnRlc3RpbmdcbiAgICAgICAgICAvLyBoYXNodGFnIGZhbW91cyBsYXN0IHdvcmRzXG4gICAgICAgICAgZmVhdHVyZU5hbWVTcGxpdCA9IGZlYXR1cmVOYW1lLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgICBpZiAoZmVhdHVyZU5hbWVTcGxpdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IHJlc3VsdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY2FzdCB0byBhIEJvb2xlYW4sIGlmIG5vdCBvbmUgYWxyZWFkeVxuICAgICAgICAgICAgLyoganNoaW50IC1XMDUzICovXG4gICAgICAgICAgICBpZiAoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dICYmICEoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dIGluc3RhbmNlb2YgQm9vbGVhbikpIHtcbiAgICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gbmV3IEJvb2xlYW4oTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dW2ZlYXR1cmVOYW1lU3BsaXRbMV1dID0gcmVzdWx0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsYXNzZXMucHVzaCgocmVzdWx0ID8gJycgOiAnbm8tJykgKyBmZWF0dXJlTmFtZVNwbGl0LmpvaW4oJy0nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBkb2NFbGVtZW50IGlzIGEgY29udmVuaWVuY2Ugd3JhcHBlciB0byBncmFiIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGRvY3VtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gVGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgZG9jdW1lbnRcbiAgICovXG5cbiAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcImNsYXNzTGlzdFwiLFxuICBcImNhbml1c2VcIjogXCJjbGFzc2xpc3RcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNsYXNzbGlzdFwiLFxuICBcInRhZ3NcIjogW1wiZG9tXCJdLFxuICBcImJ1aWxkZXJBbGlhc2VzXCI6IFtcImRhdGF2aWV3X2FwaVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIk1ETiBEb2NzXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL2VsZW1lbnQuY2xhc3NMaXN0XCJcbiAgfV1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjbGFzc2xpc3QnLCAnY2xhc3NMaXN0JyBpbiBkb2NFbGVtZW50KTtcblxuXG4gIC8qKlxuICAgKiBBIGNvbnZlbmllbmNlIGhlbHBlciB0byBjaGVjayBpZiB0aGUgZG9jdW1lbnQgd2UgYXJlIHJ1bm5pbmcgaW4gaXMgYW4gU1ZHIGRvY3VtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgdmFyIGlzU1ZHID0gZG9jRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3ZnJztcbiAgXG5cbiAgLyoqXG4gICAqIHNldENsYXNzZXMgdGFrZXMgYW4gYXJyYXkgb2YgY2xhc3MgbmFtZXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgcm9vdCBlbGVtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gc2V0Q2xhc3Nlc1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBjbGFzc2VzIC0gQXJyYXkgb2YgY2xhc3MgbmFtZXNcbiAgICovXG5cbiAgLy8gUGFzcyBpbiBhbiBhbmQgYXJyYXkgb2YgY2xhc3MgbmFtZXMsIGUuZy46XG4gIC8vICBbJ25vLXdlYnAnLCAnYm9yZGVycmFkaXVzJywgLi4uXVxuICBmdW5jdGlvbiBzZXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gZG9jRWxlbWVudC5jbGFzc05hbWU7XG4gICAgdmFyIGNsYXNzUHJlZml4ID0gTW9kZXJuaXpyLl9jb25maWcuY2xhc3NQcmVmaXggfHwgJyc7XG5cbiAgICBpZiAoaXNTVkcpIHtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5iYXNlVmFsO1xuICAgIH1cblxuICAgIC8vIENoYW5nZSBgbm8tanNgIHRvIGBqc2AgKGluZGVwZW5kZW50bHkgb2YgdGhlIGBlbmFibGVDbGFzc2VzYCBvcHRpb24pXG4gICAgLy8gSGFuZGxlIGNsYXNzUHJlZml4IG9uIHRoaXMgdG9vXG4gICAgaWYgKE1vZGVybml6ci5fY29uZmlnLmVuYWJsZUpTQ2xhc3MpIHtcbiAgICAgIHZhciByZUpTID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGNsYXNzUHJlZml4ICsgJ25vLWpzKFxcXFxzfCQpJyk7XG4gICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUucmVwbGFjZShyZUpTLCAnJDEnICsgY2xhc3NQcmVmaXggKyAnanMkMicpO1xuICAgIH1cblxuICAgIGlmIChNb2Rlcm5penIuX2NvbmZpZy5lbmFibGVDbGFzc2VzKSB7XG4gICAgICAvLyBBZGQgdGhlIG5ldyBjbGFzc2VzXG4gICAgICBjbGFzc05hbWUgKz0gJyAnICsgY2xhc3NQcmVmaXggKyBjbGFzc2VzLmpvaW4oJyAnICsgY2xhc3NQcmVmaXgpO1xuICAgICAgaXNTVkcgPyBkb2NFbGVtZW50LmNsYXNzTmFtZS5iYXNlVmFsID0gY2xhc3NOYW1lIDogZG9jRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuXG4gIH1cblxuICA7XG5cbi8qKlxuICAqIEBvcHRpb25OYW1lIGh0bWw1cHJpbnRzaGl2XG4gICogQG9wdGlvblByb3AgaHRtbDVwcmludHNoaXZcbiAgKi9cblxuICAvLyBUYWtlIHRoZSBodG1sNSB2YXJpYWJsZSBvdXQgb2YgdGhlIGh0bWw1c2hpdiBzY29wZSBzbyB3ZSBjYW4gcmV0dXJuIGl0LlxuICB2YXIgaHRtbDU7XG4gIGlmICghaXNTVkcpIHtcblxuICAgIC8qKlxuICAgICAqIEBwcmVzZXJ2ZSBIVE1MNSBTaGl2IDMuNy4zIHwgQGFmYXJrYXMgQGpkYWx0b24gQGpvbl9uZWFsIEByZW0gfCBNSVQvR1BMMiBMaWNlbnNlZFxuICAgICAqL1xuICAgIDsoZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCkge1xuICAgICAgLypqc2hpbnQgZXZpbDp0cnVlICovXG4gICAgICAvKiogdmVyc2lvbiAqL1xuICAgICAgdmFyIHZlcnNpb24gPSAnMy43LjMnO1xuXG4gICAgICAvKiogUHJlc2V0IG9wdGlvbnMgKi9cbiAgICAgIHZhciBvcHRpb25zID0gd2luZG93Lmh0bWw1IHx8IHt9O1xuXG4gICAgICAvKiogVXNlZCB0byBza2lwIHByb2JsZW0gZWxlbWVudHMgKi9cbiAgICAgIHZhciByZVNraXAgPSAvXjx8Xig/OmJ1dHRvbnxtYXB8c2VsZWN0fHRleHRhcmVhfG9iamVjdHxpZnJhbWV8b3B0aW9ufG9wdGdyb3VwKSQvaTtcblxuICAgICAgLyoqIE5vdCBhbGwgZWxlbWVudHMgY2FuIGJlIGNsb25lZCBpbiBJRSAqKi9cbiAgICAgIHZhciBzYXZlQ2xvbmVzID0gL14oPzphfGJ8Y29kZXxkaXZ8ZmllbGRzZXR8aDF8aDJ8aDN8aDR8aDV8aDZ8aXxsYWJlbHxsaXxvbHxwfHF8c3BhbnxzdHJvbmd8c3R5bGV8dGFibGV8dGJvZHl8dGR8dGh8dHJ8dWwpJC9pO1xuXG4gICAgICAvKiogRGV0ZWN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgZGVmYXVsdCBodG1sNSBzdHlsZXMgKi9cbiAgICAgIHZhciBzdXBwb3J0c0h0bWw1U3R5bGVzO1xuXG4gICAgICAvKiogTmFtZSBvZiB0aGUgZXhwYW5kbywgdG8gd29yayB3aXRoIG11bHRpcGxlIGRvY3VtZW50cyBvciB0byByZS1zaGl2IG9uZSBkb2N1bWVudCAqL1xuICAgICAgdmFyIGV4cGFuZG8gPSAnX2h0bWw1c2hpdic7XG5cbiAgICAgIC8qKiBUaGUgaWQgZm9yIHRoZSB0aGUgZG9jdW1lbnRzIGV4cGFuZG8gKi9cbiAgICAgIHZhciBleHBhbklEID0gMDtcblxuICAgICAgLyoqIENhY2hlZCBkYXRhIGZvciBlYWNoIGRvY3VtZW50ICovXG4gICAgICB2YXIgZXhwYW5kb0RhdGEgPSB7fTtcblxuICAgICAgLyoqIERldGVjdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIHVua25vd24gZWxlbWVudHMgKi9cbiAgICAgIHZhciBzdXBwb3J0c1Vua25vd25FbGVtZW50cztcblxuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgIGEuaW5uZXJIVE1MID0gJzx4eXo+PC94eXo+JztcbiAgICAgICAgICAvL2lmIHRoZSBoaWRkZW4gcHJvcGVydHkgaXMgaW1wbGVtZW50ZWQgd2UgY2FuIGFzc3VtZSwgdGhhdCB0aGUgYnJvd3NlciBzdXBwb3J0cyBiYXNpYyBIVE1MNSBTdHlsZXNcbiAgICAgICAgICBzdXBwb3J0c0h0bWw1U3R5bGVzID0gKCdoaWRkZW4nIGluIGEpO1xuXG4gICAgICAgICAgc3VwcG9ydHNVbmtub3duRWxlbWVudHMgPSBhLmNoaWxkTm9kZXMubGVuZ3RoID09IDEgfHwgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gYXNzaWduIGEgZmFsc2UgcG9zaXRpdmUgaWYgdW5hYmxlIHRvIHNoaXZcbiAgICAgICAgICAgIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KSgnYScpO1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICB0eXBlb2YgZnJhZy5jbG9uZU5vZGUgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgZnJhZy5jcmVhdGVEb2N1bWVudEZyYWdtZW50ID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY3JlYXRlRWxlbWVudCA9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KCkpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAvLyBhc3NpZ24gYSBmYWxzZSBwb3NpdGl2ZSBpZiBkZXRlY3Rpb24gZmFpbHMgPT4gdW5hYmxlIHRvIHNoaXZcbiAgICAgICAgICBzdXBwb3J0c0h0bWw1U3R5bGVzID0gdHJ1ZTtcbiAgICAgICAgICBzdXBwb3J0c1Vua25vd25FbGVtZW50cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgfSgpKTtcblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIHN0eWxlIHNoZWV0IHdpdGggdGhlIGdpdmVuIENTUyB0ZXh0IGFuZCBhZGRzIGl0IHRvIHRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjc3NUZXh0IFRoZSBDU1MgdGV4dC5cbiAgICAgICAqIEByZXR1cm5zIHtTdHlsZVNoZWV0fSBUaGUgc3R5bGUgZWxlbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYWRkU3R5bGVTaGVldChvd25lckRvY3VtZW50LCBjc3NUZXh0KSB7XG4gICAgICAgIHZhciBwID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyksXG4gICAgICAgICAgcGFyZW50ID0gb3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdIHx8IG93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgIHAuaW5uZXJIVE1MID0gJ3g8c3R5bGU+JyArIGNzc1RleHQgKyAnPC9zdHlsZT4nO1xuICAgICAgICByZXR1cm4gcGFyZW50Lmluc2VydEJlZm9yZShwLmxhc3RDaGlsZCwgcGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGBodG1sNS5lbGVtZW50c2AgYXMgYW4gYXJyYXkuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBvZiBzaGl2ZWQgZWxlbWVudCBub2RlIG5hbWVzLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gaHRtbDUuZWxlbWVudHM7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZWxlbWVudHMgPT0gJ3N0cmluZycgPyBlbGVtZW50cy5zcGxpdCgnICcpIDogZWxlbWVudHM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRXh0ZW5kcyB0aGUgYnVpbHQtaW4gbGlzdCBvZiBodG1sNSBlbGVtZW50c1xuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gbmV3RWxlbWVudHMgd2hpdGVzcGFjZSBzZXBhcmF0ZWQgbGlzdCBvciBhcnJheSBvZiBuZXcgZWxlbWVudCBuYW1lcyB0byBzaGl2XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBjb250ZXh0IGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBhZGRFbGVtZW50cyhuZXdFbGVtZW50cywgb3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBodG1sNS5lbGVtZW50cztcbiAgICAgICAgaWYodHlwZW9mIGVsZW1lbnRzICE9ICdzdHJpbmcnKXtcbiAgICAgICAgICBlbGVtZW50cyA9IGVsZW1lbnRzLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgbmV3RWxlbWVudHMgIT0gJ3N0cmluZycpe1xuICAgICAgICAgIG5ld0VsZW1lbnRzID0gbmV3RWxlbWVudHMuam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIGh0bWw1LmVsZW1lbnRzID0gZWxlbWVudHMgKycgJysgbmV3RWxlbWVudHM7XG4gICAgICAgIHNoaXZEb2N1bWVudChvd25lckRvY3VtZW50KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBkYXRhIGFzc29jaWF0ZWQgdG8gdGhlIGdpdmVuIGRvY3VtZW50XG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3Qgb2YgZGF0YS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgZGF0YSA9IGV4cGFuZG9EYXRhW293bmVyRG9jdW1lbnRbZXhwYW5kb11dO1xuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0ge307XG4gICAgICAgICAgZXhwYW5JRCsrO1xuICAgICAgICAgIG93bmVyRG9jdW1lbnRbZXhwYW5kb10gPSBleHBhbklEO1xuICAgICAgICAgIGV4cGFuZG9EYXRhW2V4cGFuSURdID0gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIGEgc2hpdmVkIGVsZW1lbnQgZm9yIHRoZSBnaXZlbiBub2RlTmFtZSBhbmQgZG9jdW1lbnRcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lIG5hbWUgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGNvbnRleHQgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc2hpdmVkIGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIG93bmVyRG9jdW1lbnQsIGRhdGEpe1xuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICBvd25lckRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3VwcG9ydHNVbmtub3duRWxlbWVudHMpe1xuICAgICAgICAgIHJldHVybiBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9kZTtcblxuICAgICAgICBpZiAoZGF0YS5jYWNoZVtub2RlTmFtZV0pIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jYWNoZVtub2RlTmFtZV0uY2xvbmVOb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2F2ZUNsb25lcy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgICAgIG5vZGUgPSAoZGF0YS5jYWNoZVtub2RlTmFtZV0gPSBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpKS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIGFkZGluZyBzb21lIGVsZW1lbnRzIHRvIGZyYWdtZW50cyBpbiBJRSA8IDkgYmVjYXVzZVxuICAgICAgICAvLyAqIEF0dHJpYnV0ZXMgbGlrZSBgbmFtZWAgb3IgYHR5cGVgIGNhbm5vdCBiZSBzZXQvY2hhbmdlZCBvbmNlIGFuIGVsZW1lbnRcbiAgICAgICAgLy8gICBpcyBpbnNlcnRlZCBpbnRvIGEgZG9jdW1lbnQvZnJhZ21lbnRcbiAgICAgICAgLy8gKiBMaW5rIGVsZW1lbnRzIHdpdGggYHNyY2AgYXR0cmlidXRlcyB0aGF0IGFyZSBpbmFjY2Vzc2libGUsIGFzIHdpdGhcbiAgICAgICAgLy8gICBhIDQwMyByZXNwb25zZSwgd2lsbCBjYXVzZSB0aGUgdGFiL3dpbmRvdyB0byBjcmFzaFxuICAgICAgICAvLyAqIFNjcmlwdCBlbGVtZW50cyBhcHBlbmRlZCB0byBmcmFnbWVudHMgd2lsbCBleGVjdXRlIHdoZW4gdGhlaXIgYHNyY2BcbiAgICAgICAgLy8gICBvciBgdGV4dGAgcHJvcGVydHkgaXMgc2V0XG4gICAgICAgIHJldHVybiBub2RlLmNhbkhhdmVDaGlsZHJlbiAmJiAhcmVTa2lwLnRlc3Qobm9kZU5hbWUpICYmICFub2RlLnRhZ1VybiA/IGRhdGEuZnJhZy5hcHBlbmRDaGlsZChub2RlKSA6IG5vZGU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBhIHNoaXZlZCBEb2N1bWVudEZyYWdtZW50IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBzaGl2ZWQgRG9jdW1lbnRGcmFnbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRGcmFnbWVudChvd25lckRvY3VtZW50LCBkYXRhKXtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmKHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKXtcbiAgICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG4gICAgICAgIHZhciBjbG9uZSA9IGRhdGEuZnJhZy5jbG9uZU5vZGUoKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICBlbGVtcyA9IGdldEVsZW1lbnRzKCksXG4gICAgICAgICAgbCA9IGVsZW1zLmxlbmd0aDtcbiAgICAgICAgZm9yKDtpPGw7aSsrKXtcbiAgICAgICAgICBjbG9uZS5jcmVhdGVFbGVtZW50KGVsZW1zW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgIG1ldGhvZHMgb2YgdGhlIGRvY3VtZW50LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZNZXRob2RzKG93bmVyRG9jdW1lbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLmNhY2hlKSB7XG4gICAgICAgICAgZGF0YS5jYWNoZSA9IHt9O1xuICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbSA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudDtcbiAgICAgICAgICBkYXRhLmNyZWF0ZUZyYWcgPSBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ7XG4gICAgICAgICAgZGF0YS5mcmFnID0gZGF0YS5jcmVhdGVGcmFnKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGVOYW1lKSB7XG4gICAgICAgICAgLy9hYm9ydCBzaGl2XG4gICAgICAgICAgaWYgKCFodG1sNS5zaGl2TWV0aG9kcykge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG5vZGVOYW1lLCBvd25lckRvY3VtZW50LCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBGdW5jdGlvbignaCxmJywgJ3JldHVybiBmdW5jdGlvbigpeycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFyIG49Zi5jbG9uZU5vZGUoKSxjPW4uY3JlYXRlRWxlbWVudDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2guc2hpdk1ldGhvZHMmJignICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yb2xsIHRoZSBgY3JlYXRlRWxlbWVudGAgY2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RWxlbWVudHMoKS5qb2luKCkucmVwbGFjZSgvW1xcd1xcLTpdKy9nLCBmdW5jdGlvbihub2RlTmFtZSkge1xuICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgZGF0YS5mcmFnLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICAgIHJldHVybiAnYyhcIicgKyBub2RlTmFtZSArICdcIiknO1xuICAgICAgICB9KSArXG4gICAgICAgICAgJyk7cmV0dXJuIG59J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkoaHRtbDUsIGRhdGEuZnJhZyk7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gc2hpdi5cbiAgICAgICAqIEByZXR1cm5zIHtEb2N1bWVudH0gVGhlIHNoaXZlZCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdkRvY3VtZW50KG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG5cbiAgICAgICAgaWYgKGh0bWw1LnNoaXZDU1MgJiYgIXN1cHBvcnRzSHRtbDVTdHlsZXMgJiYgIWRhdGEuaGFzQ1NTKSB7XG4gICAgICAgICAgZGF0YS5oYXNDU1MgPSAhIWFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZWN0cyBibG9jayBkaXNwbGF5IG5vdCBkZWZpbmVkIGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcnRpY2xlLGFzaWRlLGRpYWxvZyxmaWdjYXB0aW9uLGZpZ3VyZSxmb290ZXIsaGVhZGVyLGhncm91cCxtYWluLG5hdixzZWN0aW9ue2Rpc3BsYXk6YmxvY2t9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkcyBzdHlsaW5nIG5vdCBwcmVzZW50IGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGVzIG5vbi1yZW5kZXJlZCBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZW1wbGF0ZXtkaXNwbGF5Om5vbmV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKSB7XG4gICAgICAgICAgc2hpdk1ldGhvZHMob3duZXJEb2N1bWVudCwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBgaHRtbDVgIG9iamVjdCBpcyBleHBvc2VkIHNvIHRoYXQgbW9yZSBlbGVtZW50cyBjYW4gYmUgc2hpdmVkIGFuZFxuICAgICAgICogZXhpc3Rpbmcgc2hpdmluZyBjYW4gYmUgZGV0ZWN0ZWQgb24gaWZyYW1lcy5cbiAgICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqXG4gICAgICAgKiAvLyBvcHRpb25zIGNhbiBiZSBjaGFuZ2VkIGJlZm9yZSB0aGUgc2NyaXB0IGlzIGluY2x1ZGVkXG4gICAgICAgKiBodG1sNSA9IHsgJ2VsZW1lbnRzJzogJ21hcmsgc2VjdGlvbicsICdzaGl2Q1NTJzogZmFsc2UsICdzaGl2TWV0aG9kcyc6IGZhbHNlIH07XG4gICAgICAgKi9cbiAgICAgIHZhciBodG1sNSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBub2RlIG5hbWVzIG9mIHRoZSBlbGVtZW50cyB0byBzaGl2LlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQXJyYXl8U3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICAnZWxlbWVudHMnOiBvcHRpb25zLmVsZW1lbnRzIHx8ICdhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gYmRpIGNhbnZhcyBkYXRhIGRhdGFsaXN0IGRldGFpbHMgZGlhbG9nIGZpZ2NhcHRpb24gZmlndXJlIGZvb3RlciBoZWFkZXIgaGdyb3VwIG1haW4gbWFyayBtZXRlciBuYXYgb3V0cHV0IHBpY3R1cmUgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRlbXBsYXRlIHRpbWUgdmlkZW8nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjdXJyZW50IHZlcnNpb24gb2YgaHRtbDVzaGl2XG4gICAgICAgICAqL1xuICAgICAgICAndmVyc2lvbic6IHZlcnNpb24sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBIVE1MNSBzdHlsZSBzaGVldCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICAnc2hpdkNTUyc6IChvcHRpb25zLnNoaXZDU1MgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXMgZXF1YWwgdG8gdHJ1ZSBpZiBhIGJyb3dzZXIgc3VwcG9ydHMgY3JlYXRpbmcgdW5rbm93bi9IVE1MNSBlbGVtZW50c1xuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3N1cHBvcnRzVW5rbm93bkVsZW1lbnRzJzogc3VwcG9ydHNVbmtub3duRWxlbWVudHMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBkb2N1bWVudCdzIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgXG4gICAgICAgICAqIG1ldGhvZHMgc2hvdWxkIGJlIG92ZXJ3cml0dGVuLlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3NoaXZNZXRob2RzJzogKG9wdGlvbnMuc2hpdk1ldGhvZHMgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzdHJpbmcgdG8gZGVzY3JpYmUgdGhlIHR5cGUgb2YgYGh0bWw1YCBvYmplY3QgKFwiZGVmYXVsdFwiIG9yIFwiZGVmYXVsdCBwcmludFwiKS5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgJ3R5cGUnOiAnZGVmYXVsdCcsXG5cbiAgICAgICAgLy8gc2hpdnMgdGhlIGRvY3VtZW50IGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGBodG1sNWAgb2JqZWN0IG9wdGlvbnNcbiAgICAgICAgJ3NoaXZEb2N1bWVudCc6IHNoaXZEb2N1bWVudCxcblxuICAgICAgICAvL2NyZWF0ZXMgYSBzaGl2ZWQgZWxlbWVudFxuICAgICAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50LFxuXG4gICAgICAgIC8vY3JlYXRlcyBhIHNoaXZlZCBkb2N1bWVudEZyYWdtZW50XG4gICAgICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6IGNyZWF0ZURvY3VtZW50RnJhZ21lbnQsXG5cbiAgICAgICAgLy9leHRlbmRzIGxpc3Qgb2YgZWxlbWVudHNcbiAgICAgICAgYWRkRWxlbWVudHM6IGFkZEVsZW1lbnRzXG4gICAgICB9O1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLy8gZXhwb3NlIGh0bWw1XG4gICAgICB3aW5kb3cuaHRtbDUgPSBodG1sNTtcblxuICAgICAgLy8gc2hpdiB0aGUgZG9jdW1lbnRcbiAgICAgIHNoaXZEb2N1bWVudChkb2N1bWVudCk7XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcmludCBTaGl2IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKiogVXNlZCB0byBmaWx0ZXIgbWVkaWEgdHlwZXMgKi9cbiAgICAgIHZhciByZU1lZGlhID0gL14kfFxcYig/OmFsbHxwcmludClcXGIvO1xuXG4gICAgICAvKiogVXNlZCB0byBuYW1lc3BhY2UgcHJpbnRhYmxlIGVsZW1lbnRzICovXG4gICAgICB2YXIgc2hpdk5hbWVzcGFjZSA9ICdodG1sNXNoaXYnO1xuXG4gICAgICAvKiogRGV0ZWN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgc2hpdmFibGUgc3R5bGUgc2hlZXRzICovXG4gICAgICB2YXIgc3VwcG9ydHNTaGl2YWJsZVNoZWV0cyA9ICFzdXBwb3J0c1Vua25vd25FbGVtZW50cyAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGFzc2lnbiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHVuYWJsZSB0byBzaGl2XG4gICAgICAgIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgdHlwZW9mIGRvY3VtZW50Lm5hbWVzcGFjZXMgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2N1bWVudC5wYXJlbnRXaW5kb3cgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2NFbC5hcHBseUVsZW1lbnQgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2NFbC5yZW1vdmVOb2RlID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygd2luZG93LmF0dGFjaEV2ZW50ID09ICd1bmRlZmluZWQnXG4gICAgICAgICk7XG4gICAgICB9KCkpO1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbGwgSFRNTDUgZWxlbWVudHMgaW4gdGhlIGdpdmVuIGRvY3VtZW50IHdpdGggcHJpbnRhYmxlIGVsZW1lbnRzLlxuICAgICAgICogKGVnLiB0aGUgXCJoZWFkZXJcIiBlbGVtZW50IGlzIHdyYXBwZWQgd2l0aCB0aGUgXCJodG1sNXNoaXY6aGVhZGVyXCIgZWxlbWVudClcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgd3JhcHBlcnMgYWRkZWQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGFkZFdyYXBwZXJzKG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIG5vZGUsXG4gICAgICAgIG5vZGVzID0gb3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpLFxuICAgICAgICAgIGluZGV4ID0gbm9kZXMubGVuZ3RoLFxuICAgICAgICAgIHJlRWxlbWVudHMgPSBSZWdFeHAoJ14oPzonICsgZ2V0RWxlbWVudHMoKS5qb2luKCd8JykgKyAnKSQnLCAnaScpLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGVzW2luZGV4XTtcbiAgICAgICAgICBpZiAocmVFbGVtZW50cy50ZXN0KG5vZGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChub2RlLmFwcGx5RWxlbWVudChjcmVhdGVXcmFwcGVyKG5vZGUpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIHByaW50YWJsZSB3cmFwcGVyIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7RWxlbWVudH0gVGhlIHdyYXBwZXIuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZWxlbWVudCkge1xuICAgICAgICB2YXIgbm9kZSxcbiAgICAgICAgbm9kZXMgPSBlbGVtZW50LmF0dHJpYnV0ZXMsXG4gICAgICAgICAgaW5kZXggPSBub2Rlcy5sZW5ndGgsXG4gICAgICAgICAgd3JhcHBlciA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHNoaXZOYW1lc3BhY2UgKyAnOicgKyBlbGVtZW50Lm5vZGVOYW1lKTtcblxuICAgICAgICAvLyBjb3B5IGVsZW1lbnQgYXR0cmlidXRlcyB0byB0aGUgd3JhcHBlclxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIG5vZGUgPSBub2Rlc1tpbmRleF07XG4gICAgICAgICAgbm9kZS5zcGVjaWZpZWQgJiYgd3JhcHBlci5zZXRBdHRyaWJ1dGUobm9kZS5ub2RlTmFtZSwgbm9kZS5ub2RlVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvcHkgZWxlbWVudCBzdHlsZXMgdG8gdGhlIHdyYXBwZXJcbiAgICAgICAgd3JhcHBlci5zdHlsZS5jc3NUZXh0ID0gZWxlbWVudC5zdHlsZS5jc3NUZXh0O1xuICAgICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgZ2l2ZW4gQ1NTIHRleHQuXG4gICAgICAgKiAoZWcuIGhlYWRlcnt9IGJlY29tZXMgaHRtbDVzaGl2XFw6aGVhZGVye30pXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNzc1RleHQgVGhlIENTUyB0ZXh0IHRvIHNoaXYuXG4gICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgc2hpdmVkIENTUyB0ZXh0LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2Q3NzVGV4dChjc3NUZXh0KSB7XG4gICAgICAgIHZhciBwYWlyLFxuICAgICAgICBwYXJ0cyA9IGNzc1RleHQuc3BsaXQoJ3snKSxcbiAgICAgICAgICBpbmRleCA9IHBhcnRzLmxlbmd0aCxcbiAgICAgICAgICByZUVsZW1lbnRzID0gUmVnRXhwKCcoXnxbXFxcXHMsPit+XSkoJyArIGdldEVsZW1lbnRzKCkuam9pbignfCcpICsgJykoPz1bW1xcXFxzLD4rfiMuOl18JCknLCAnZ2knKSxcbiAgICAgICAgICByZXBsYWNlbWVudCA9ICckMScgKyBzaGl2TmFtZXNwYWNlICsgJ1xcXFw6JDInO1xuXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgcGFpciA9IHBhcnRzW2luZGV4XSA9IHBhcnRzW2luZGV4XS5zcGxpdCgnfScpO1xuICAgICAgICAgIHBhaXJbcGFpci5sZW5ndGggLSAxXSA9IHBhaXJbcGFpci5sZW5ndGggLSAxXS5yZXBsYWNlKHJlRWxlbWVudHMsIHJlcGxhY2VtZW50KTtcbiAgICAgICAgICBwYXJ0c1tpbmRleF0gPSBwYWlyLmpvaW4oJ30nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHMuam9pbigneycpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIHdyYXBwZXJzLCBsZWF2aW5nIHRoZSBvcmlnaW5hbCBlbGVtZW50cy5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW1zIHtBcnJheX0gd3JhcHBlcnMgQW4gYXJyYXkgb2YgcHJpbnRhYmxlIHdyYXBwZXJzLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZW1vdmVXcmFwcGVycyh3cmFwcGVycykge1xuICAgICAgICB2YXIgaW5kZXggPSB3cmFwcGVycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgd3JhcHBlcnNbaW5kZXhdLnJlbW92ZU5vZGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHByaW50LlxuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBzaGl2LlxuICAgICAgICogQHJldHVybnMge0RvY3VtZW50fSBUaGUgc2hpdmVkIGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2UHJpbnQob3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgc2hpdmVkU2hlZXQsXG4gICAgICAgIHdyYXBwZXJzLFxuICAgICAgICBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCksXG4gICAgICAgICAgbmFtZXNwYWNlcyA9IG93bmVyRG9jdW1lbnQubmFtZXNwYWNlcyxcbiAgICAgICAgICBvd25lcldpbmRvdyA9IG93bmVyRG9jdW1lbnQucGFyZW50V2luZG93O1xuXG4gICAgICAgIGlmICghc3VwcG9ydHNTaGl2YWJsZVNoZWV0cyB8fCBvd25lckRvY3VtZW50LnByaW50U2hpdmVkKSB7XG4gICAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzW3NoaXZOYW1lc3BhY2VdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbmFtZXNwYWNlcy5hZGQoc2hpdk5hbWVzcGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTaGVldCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5fcmVtb3ZlU2hlZXRUaW1lcik7XG4gICAgICAgICAgaWYgKHNoaXZlZFNoZWV0KSB7XG4gICAgICAgICAgICBzaGl2ZWRTaGVldC5yZW1vdmVOb2RlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGl2ZWRTaGVldD0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIG93bmVyV2luZG93LmF0dGFjaEV2ZW50KCdvbmJlZm9yZXByaW50JywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICByZW1vdmVTaGVldCgpO1xuXG4gICAgICAgICAgdmFyIGltcG9ydHMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIHNoZWV0LFxuICAgICAgICAgIGNvbGxlY3Rpb24gPSBvd25lckRvY3VtZW50LnN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgY3NzVGV4dCA9IFtdLFxuICAgICAgICAgICAgaW5kZXggPSBjb2xsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICAgIHNoZWV0cyA9IEFycmF5KGluZGV4KTtcblxuICAgICAgICAgIC8vIGNvbnZlcnQgc3R5bGVTaGVldHMgY29sbGVjdGlvbiB0byBhbiBhcnJheVxuICAgICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgICBzaGVldHNbaW5kZXhdID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbmNhdCBhbGwgc3R5bGUgc2hlZXQgQ1NTIHRleHRcbiAgICAgICAgICB3aGlsZSAoKHNoZWV0ID0gc2hlZXRzLnBvcCgpKSkge1xuICAgICAgICAgICAgLy8gSUUgZG9lcyBub3QgZW5mb3JjZSBhIHNhbWUgb3JpZ2luIHBvbGljeSBmb3IgZXh0ZXJuYWwgc3R5bGUgc2hlZXRzLi4uXG4gICAgICAgICAgICAvLyBidXQgaGFzIHRyb3VibGUgd2l0aCBzb21lIGR5bmFtaWNhbGx5IGNyZWF0ZWQgc3R5bGVzaGVldHNcbiAgICAgICAgICAgIGlmICghc2hlZXQuZGlzYWJsZWQgJiYgcmVNZWRpYS50ZXN0KHNoZWV0Lm1lZGlhKSkge1xuXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW1wb3J0cyA9IHNoZWV0LmltcG9ydHM7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gaW1wb3J0cy5sZW5ndGg7XG4gICAgICAgICAgICAgIH0gY2F0Y2goZXIpe1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBzaGVldHMucHVzaChpbXBvcnRzW2luZGV4XSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNzc1RleHQucHVzaChzaGVldC5jc3NUZXh0KTtcbiAgICAgICAgICAgICAgfSBjYXRjaChlcil7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHdyYXAgYWxsIEhUTUw1IGVsZW1lbnRzIHdpdGggcHJpbnRhYmxlIGVsZW1lbnRzIGFuZCBhZGQgdGhlIHNoaXZlZCBzdHlsZSBzaGVldFxuICAgICAgICAgIGNzc1RleHQgPSBzaGl2Q3NzVGV4dChjc3NUZXh0LnJldmVyc2UoKS5qb2luKCcnKSk7XG4gICAgICAgICAgd3JhcHBlcnMgPSBhZGRXcmFwcGVycyhvd25lckRvY3VtZW50KTtcbiAgICAgICAgICBzaGl2ZWRTaGVldCA9IGFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCwgY3NzVGV4dCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3duZXJXaW5kb3cuYXR0YWNoRXZlbnQoJ29uYWZ0ZXJwcmludCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHJlbW92ZSB3cmFwcGVycywgbGVhdmluZyB0aGUgb3JpZ2luYWwgZWxlbWVudHMsIGFuZCByZW1vdmUgdGhlIHNoaXZlZCBzdHlsZSBzaGVldFxuICAgICAgICAgIHJlbW92ZVdyYXBwZXJzKHdyYXBwZXJzKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5fcmVtb3ZlU2hlZXRUaW1lcik7XG4gICAgICAgICAgZGF0YS5fcmVtb3ZlU2hlZXRUaW1lciA9IHNldFRpbWVvdXQocmVtb3ZlU2hlZXQsIDUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG93bmVyRG9jdW1lbnQucHJpbnRTaGl2ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudDtcbiAgICAgIH1cblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8vIGV4cG9zZSBBUElcbiAgICAgIGh0bWw1LnR5cGUgKz0gJyBwcmludCc7XG4gICAgICBodG1sNS5zaGl2UHJpbnQgPSBzaGl2UHJpbnQ7XG5cbiAgICAgIC8vIHNoaXYgZm9yIHByaW50XG4gICAgICBzaGl2UHJpbnQoZG9jdW1lbnQpO1xuXG4gICAgICBpZih0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBodG1sNTtcbiAgICAgIH1cblxuICAgIH0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGRvY3VtZW50KSk7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIElmIHRoZSBicm93c2VycyBmb2xsb3cgdGhlIHNwZWMsIHRoZW4gdGhleSB3b3VsZCBleHBvc2UgdmVuZG9yLXNwZWNpZmljIHN0eWxlIGFzOlxuICAgKiAgIGVsZW0uc3R5bGUuV2Via2l0Qm9yZGVyUmFkaXVzXG4gICAqIGluc3RlYWQgb2Ygc29tZXRoaW5nIGxpa2UgdGhlIGZvbGxvd2luZywgd2hpY2ggd291bGQgYmUgdGVjaG5pY2FsbHkgaW5jb3JyZWN0OlxuICAgKiAgIGVsZW0uc3R5bGUud2Via2l0Qm9yZGVyUmFkaXVzXG5cbiAgICogV2Via2l0IGdob3N0cyB0aGVpciBwcm9wZXJ0aWVzIGluIGxvd2VyY2FzZSBidXQgT3BlcmEgJiBNb3ogZG8gbm90LlxuICAgKiBNaWNyb3NvZnQgdXNlcyBhIGxvd2VyY2FzZSBgbXNgIGluc3RlYWQgb2YgdGhlIGNvcnJlY3QgYE1zYCBpbiBJRTgrXG4gICAqICAgZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDgvMDMvMTAvMjEuNDguMTAvXG5cbiAgICogTW9yZSBoZXJlOiBnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzL2lzc3VlLzIxXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmVuZG9yLXNwZWNpZmljIHN0eWxlIHByb3BlcnRpZXNcbiAgICovXG5cbiAgdmFyIG9tUHJlZml4ZXMgPSAnTW96IE8gbXMgV2Via2l0JztcbiAgXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgSmF2YVNjcmlwdCBET00gdmFsdWVzIHVzZWQgZm9yIHRlc3RzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl9kb21QcmVmaXhlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuX2RvbVByZWZpeGVzXG4gICAqIEBvcHRpb25Qcm9wIGRvbVByZWZpeGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyBbX3ByZWZpeGVzXSgjbW9kZXJuaXpyLV9wcmVmaXhlcyksIGJ1dCByYXRoZXJcbiAgICogdGhhbiBrZWJhYi1jYXNlIHByb3BlcnRpZXMsIGFsbCBwcm9wZXJ0aWVzIGFyZSB0aGVpciBDYXBpdGFsaXplZCB2YXJpYW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgPT09IFsgXCJNb3pcIiwgXCJPXCIsIFwibXNcIiwgXCJXZWJraXRcIiBdO1xuICAgKiBgYGBcbiAgICovXG5cbiAgdmFyIGRvbVByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyBvbVByZWZpeGVzLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKSA6IFtdKTtcbiAgTW9kZXJuaXpyUHJvdG8uX2RvbVByZWZpeGVzID0gZG9tUHJlZml4ZXM7XG4gIFxuXG4gIC8qKlxuICAgKiBjc3NUb0RPTSB0YWtlcyBhIGtlYmFiLWNhc2Ugc3RyaW5nIGFuZCBjb252ZXJ0cyBpdCB0byBjYW1lbENhc2VcbiAgICogZS5nLiBib3gtc2l6aW5nIC0+IGJveFNpemluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNzc1RvRE9NXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gU3RyaW5nIG5hbWUgb2Yga2ViYWItY2FzZSBwcm9wIHdlIHdhbnQgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY2FtZWxDYXNlIHZlcnNpb24gb2YgdGhlIHN1cHBsaWVkIG5hbWVcbiAgICovXG5cbiAgZnVuY3Rpb24gY3NzVG9ET00obmFtZSkge1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UoLyhbYS16XSktKFthLXpdKS9nLCBmdW5jdGlvbihzdHIsIG0xLCBtMikge1xuICAgICAgcmV0dXJuIG0xICsgbTIudG9VcHBlckNhc2UoKTtcbiAgICB9KS5yZXBsYWNlKC9eLS8sICcnKTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIGRvbVRvQ1NTIHRha2VzIGEgY2FtZWxDYXNlIHN0cmluZyBhbmQgY29udmVydHMgaXQgdG8ga2ViYWItY2FzZVxuICAgKiBlLmcuIGJveFNpemluZyAtPiBib3gtc2l6aW5nXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gZG9tVG9DU1NcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBTdHJpbmcgbmFtZSBvZiBjYW1lbENhc2UgcHJvcCB3ZSB3YW50IHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGtlYmFiLWNhc2UgdmVyc2lvbiBvZiB0aGUgc3VwcGxpZWQgbmFtZVxuICAgKi9cblxuICBmdW5jdGlvbiBkb21Ub0NTUyhuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbihzdHIsIG0xKSB7XG4gICAgICByZXR1cm4gJy0nICsgbTEudG9Mb3dlckNhc2UoKTtcbiAgICB9KS5yZXBsYWNlKC9ebXMtLywgJy1tcy0nKTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIGNyZWF0ZUVsZW1lbnQgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBkb2N1bWVudC5jcmVhdGVFbGVtZW50LiBTaW5jZSB3ZVxuICAgKiB1c2UgY3JlYXRlRWxlbWVudCBhbGwgb3ZlciB0aGUgcGxhY2UsIHRoaXMgYWxsb3dzIGZvciAoc2xpZ2h0bHkpIHNtYWxsZXIgY29kZVxuICAgKiBhcyB3ZWxsIGFzIGFic3RyYWN0aW5nIGF3YXkgaXNzdWVzIHdpdGggY3JlYXRpbmcgZWxlbWVudHMgaW4gY29udGV4dHMgb3RoZXIgdGhhblxuICAgKiBIVE1MIGRvY3VtZW50cyAoZS5nLiBTVkcgZG9jdW1lbnRzKS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBjcmVhdGVFbGVtZW50XG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBBbiBIVE1MIG9yIFNWRyBlbGVtZW50XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIGlzIHRoZSBjYXNlIGluIElFNywgd2hlcmUgdGhlIHR5cGUgb2YgY3JlYXRlRWxlbWVudCBpcyBcIm9iamVjdFwiLlxuICAgICAgLy8gRm9yIHRoaXMgcmVhc29uLCB3ZSBjYW5ub3QgY2FsbCBhcHBseSgpIGFzIE9iamVjdCBpcyBub3QgYSBGdW5jdGlvbi5cbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIGlmIChpc1NWRykge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUy5jYWxsKGRvY3VtZW50LCAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBhcmd1bWVudHNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5hcHBseShkb2N1bWVudCwgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHByZWZpeGVkQ1NTVmFsdWUgaXMgYSB3YXkgdGVzdCBmb3IgcHJlZml4ZWQgY3NzIHByb3BlcnRpZXMgKGUuZy4gZGlzcGxheTogLXdlYmtpdC1mbGV4KVxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlKClcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZWRDU1NWYWx1ZVxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gcHJlZml4ZWRDU1NWYWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBTdHJpbmcgdmFsdWUgb2YgdGhlIG5vbiBwcmVmaXhlZCB2ZXJzaW9uIG9mIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2YWxpZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWVgIGlzIGEgd2F5IHRlc3QgZm9yIHByZWZpeGVkIGNzcyBwcm9wZXJ0aWVzIChlLmcuIGRpc3BsYXk6IC13ZWJraXQtZmxleClcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWUoJ2JhY2tncm91bmQnLCAnbGluZWFyLWdyYWRpZW50KGxlZnQsIHJlZCwgcmVkKScpXG4gICAqIGBgYFxuICAgKlxuICAgKi9cblxuICB2YXIgcHJlZml4ZWRDU1NWYWx1ZSA9IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgIHZhciBlbGVtID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuICAgIGlmIChwcm9wIGluIHN0eWxlKSB7XG4gICAgICB2YXIgaSA9IGRvbVByZWZpeGVzLmxlbmd0aDtcblxuICAgICAgc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgIHJlc3VsdCA9IHN0eWxlW3Byb3BdO1xuXG4gICAgICB3aGlsZSAoaS0tICYmICFyZXN1bHQpIHtcbiAgICAgICAgc3R5bGVbcHJvcF0gPSAnLScgKyBkb21QcmVmaXhlc1tpXSArICctJyArIHZhbHVlO1xuICAgICAgICByZXN1bHQgPSBzdHlsZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSAnJykge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBNb2Rlcm5penJQcm90by5wcmVmaXhlZENTU1ZhbHVlID0gcHJlZml4ZWRDU1NWYWx1ZTtcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ2FudmFzXCIsXG4gIFwicHJvcGVydHlcIjogXCJjYW52YXNcIixcbiAgXCJjYW5pdXNlXCI6IFwiY2FudmFzXCIsXG4gIFwidGFnc1wiOiBbXCJjYW52YXNcIiwgXCJncmFwaGljc1wiXSxcbiAgXCJwb2x5ZmlsbHNcIjogW1wiZmxhc2hjYW52YXNcIiwgXCJleGNhbnZhc1wiLCBcInNsY2FudmFzXCIsIFwiZnhjYW52YXNcIl1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHN1cHBvcnQgZm9yIHRoZSBgPGNhbnZhcz5gIGVsZW1lbnQgZm9yIDJEIGRyYXdpbmcuXG4qL1xuXG4gIC8vIE9uIHRoZSBTNjAgYW5kIEJCIFN0b3JtLCBnZXRDb250ZXh0IGV4aXN0cywgYnV0IGFsd2F5cyByZXR1cm5zIHVuZGVmaW5lZFxuICAvLyBzbyB3ZSBhY3R1YWxseSBoYXZlIHRvIGNhbGwgZ2V0Q29udGV4dCgpIHRvIHZlcmlmeVxuICAvLyBnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzL2lzc3VlLzk3L1xuICBNb2Rlcm5penIuYWRkVGVzdCgnY2FudmFzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW0gPSBjcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICByZXR1cm4gISEoZWxlbS5nZXRDb250ZXh0ICYmIGVsZW0uZ2V0Q29udGV4dCgnMmQnKSk7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIEdyYWRpZW50c1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtZ3JhZGllbnRzXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3NncmFkaWVudHNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJrbm93bkJ1Z3NcIjogW1wiRmFsc2UtcG9zaXRpdmVzIG9uIHdlYk9TIChodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvMjAyKVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIldlYmtpdCBHcmFkaWVudCBTeW50YXhcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3dlYmtpdC5vcmcvYmxvZy8xNzUvaW50cm9kdWNpbmctY3NzLWdyYWRpZW50cy9cIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJMaW5lYXIgR3JhZGllbnQgU3ludGF4XCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2xpbmVhci1ncmFkaWVudFwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIlczQyBHcmFkaWVudCBTcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy1pbWFnZXMtMy8jZ3JhZGllbnRzXCJcbiAgfV1cbn1cbiEqL1xuXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc2dyYWRpZW50cycsIGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHN0cjEgPSAnYmFja2dyb3VuZC1pbWFnZTonO1xuICAgIHZhciBzdHIyID0gJ2dyYWRpZW50KGxpbmVhcixsZWZ0IHRvcCxyaWdodCBib3R0b20sZnJvbSgjOWY5KSx0byh3aGl0ZSkpOyc7XG4gICAgdmFyIGNzcyA9ICcnO1xuICAgIHZhciBhbmdsZTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcmVmaXhlcy5sZW5ndGggLSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFuZ2xlID0gKGkgPT09IDAgPyAndG8gJyA6ICcnKTtcbiAgICAgIGNzcyArPSBzdHIxICsgcHJlZml4ZXNbaV0gKyAnbGluZWFyLWdyYWRpZW50KCcgKyBhbmdsZSArICdsZWZ0IHRvcCwgIzlmOSwgd2hpdGUpOyc7XG4gICAgfVxuXG4gICAgaWYgKE1vZGVybml6ci5fY29uZmlnLnVzZVByZWZpeGVzKSB7XG4gICAgLy8gbGVnYWN5IHdlYmtpdCBzeW50YXggKEZJWE1FOiByZW1vdmUgd2hlbiBzeW50YXggbm90IGluIHVzZSBhbnltb3JlKVxuICAgICAgY3NzICs9IHN0cjEgKyAnLXdlYmtpdC0nICsgc3RyMjtcbiAgICB9XG5cbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuICAgIHN0eWxlLmNzc1RleHQgPSBjc3M7XG5cbiAgICAvLyBJRTYgcmV0dXJucyB1bmRlZmluZWQgc28gY2FzdCB0byBzdHJpbmdcbiAgICByZXR1cm4gKCcnICsgc3R5bGUuYmFja2dyb3VuZEltYWdlKS5pbmRleE9mKCdncmFkaWVudCcpID4gLTE7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwicGxhY2Vob2xkZXIgYXR0cmlidXRlXCIsXG4gIFwicHJvcGVydHlcIjogXCJwbGFjZWhvbGRlclwiLFxuICBcInRhZ3NcIjogW1wiZm9ybXNcIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiZm9ybXNfcGxhY2Vob2xkZXJcIl1cbn1cbiEqL1xuLyogRE9DXG5UZXN0cyBmb3IgcGxhY2Vob2xkZXIgYXR0cmlidXRlIGluIGlucHV0cyBhbmQgdGV4dGFyZWFzXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdwbGFjZWhvbGRlcicsICgncGxhY2Vob2xkZXInIGluIGNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgJiYgJ3BsYWNlaG9sZGVyJyBpbiBjcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpKSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJzcmNzZXQgYXR0cmlidXRlXCIsXG4gIFwicHJvcGVydHlcIjogXCJzcmNzZXRcIixcbiAgXCJ0YWdzXCI6IFtcImltYWdlXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiU21hc2hpbmcgTWFnYXppbmUgQXJ0aWNsZVwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FQTkdcIlxuICAgIH0se1xuICAgIFwibmFtZVwiOiBcIkdlbmVyYXRlIG11bHRpLXJlc29sdXRpb24gaW1hZ2VzIGZvciBzcmNzZXQgd2l0aCBHcnVudFwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vYWRkeW9zbWFuaS5jb20vYmxvZy9nZW5lcmF0ZS1tdWx0aS1yZXNvbHV0aW9uLWltYWdlcy1mb3Itc3Jjc2V0LXdpdGgtZ3J1bnQvXCJcbiAgICB9XVxufVxuISovXG4vKiBET0NcblRlc3QgZm9yIHRoZSBzcmNzZXQgYXR0cmlidXRlIG9mIGltYWdlc1xuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnc3Jjc2V0JywgJ3NyY3NldCcgaW4gY3JlYXRlRWxlbWVudCgnaW1nJykpO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiSW5saW5lIFNWR1wiLFxuICBcInByb3BlcnR5XCI6IFwiaW5saW5lc3ZnXCIsXG4gIFwiY2FuaXVzZVwiOiBcInN2Zy1odG1sNVwiLFxuICBcInRhZ3NcIjogW1wic3ZnXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiVGVzdCBwYWdlXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9wYXVsaXJpc2guY29tL2RlbW8vaW5saW5lLXN2Z1wiXG4gIH0sIHtcbiAgICBcIm5hbWVcIjogXCJUZXN0IHBhZ2UgYW5kIHJlc3VsdHNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2NvZGVwZW4uaW8vZWx0b25tZXNxdWl0YS9mdWxsL0dnWGJ2by9cIlxuICB9XSxcbiAgXCJwb2x5ZmlsbHNcIjogW1wiaW5saW5lLXN2Zy1wb2x5ZmlsbFwiXSxcbiAgXCJrbm93bkJ1Z3NcIjogW1wiRmFsc2UgbmVnYXRpdmUgb24gc29tZSBDaHJvbWlhIGJyb3dzZXJzLlwiXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgaW5saW5lIFNWRyBpbiBIVE1MIChub3Qgd2l0aGluIFhIVE1MKS5cbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2lubGluZXN2ZycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gJzxzdmcvPic7XG4gICAgcmV0dXJuICh0eXBlb2YgU1ZHUmVjdCAhPSAndW5kZWZpbmVkJyAmJiBkaXYuZmlyc3RDaGlsZCAmJiBkaXYuZmlyc3RDaGlsZC5uYW1lc3BhY2VVUkkpID09ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFN1cHBvcnRzXCIsXG4gIFwicHJvcGVydHlcIjogXCJzdXBwb3J0c1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtZmVhdHVyZXF1ZXJpZXNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJidWlsZGVyQWxpYXNlc1wiOiBbXCJjc3Nfc3VwcG9ydHNcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJXMyBTcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzMy1jb25kaXRpb25hbC8jYXQtc3VwcG9ydHNcIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJSZWxhdGVkIEdpdGh1YiBJc3N1ZVwiLFxuICAgIFwiaHJlZlwiOiBcImdpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvNjQ4XCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiVzMgSW5mb1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2NzczMtY29uZGl0aW9uYWwvI3RoZS1jc3NzdXBwb3J0c3J1bGUtaW50ZXJmYWNlXCJcbiAgfV1cbn1cbiEqL1xuXG4gIHZhciBuZXdTeW50YXggPSAnQ1NTJyBpbiB3aW5kb3cgJiYgJ3N1cHBvcnRzJyBpbiB3aW5kb3cuQ1NTO1xuICB2YXIgb2xkU3ludGF4ID0gJ3N1cHBvcnRzQ1NTJyBpbiB3aW5kb3c7XG4gIE1vZGVybml6ci5hZGRUZXN0KCdzdXBwb3J0cycsIG5ld1N5bnRheCB8fCBvbGRTeW50YXgpO1xuXG5cbiAgLyoqXG4gICAqIGdldEJvZHkgcmV0dXJucyB0aGUgYm9keSBvZiBhIGRvY3VtZW50LCBvciBhbiBlbGVtZW50IHRoYXQgY2FuIHN0YW5kIGluIGZvclxuICAgKiB0aGUgYm9keSBpZiBhIHJlYWwgYm9keSBkb2VzIG5vdCBleGlzdFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGdldEJvZHlcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IFJldHVybnMgdGhlIHJlYWwgYm9keSBvZiBhIGRvY3VtZW50LCBvciBhblxuICAgKiBhcnRpZmljaWFsbHkgY3JlYXRlZCBlbGVtZW50IHRoYXQgc3RhbmRzIGluIGZvciB0aGUgYm9keVxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRCb2R5KCkge1xuICAgIC8vIEFmdGVyIHBhZ2UgbG9hZCBpbmplY3RpbmcgYSBmYWtlIGJvZHkgZG9lc24ndCB3b3JrIHNvIGNoZWNrIGlmIGJvZHkgZXhpc3RzXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgaWYgKCFib2R5KSB7XG4gICAgICAvLyBDYW4ndCB1c2UgdGhlIHJlYWwgYm9keSBjcmVhdGUgYSBmYWtlIG9uZS5cbiAgICAgIGJvZHkgPSBjcmVhdGVFbGVtZW50KGlzU1ZHID8gJ3N2ZycgOiAnYm9keScpO1xuICAgICAgYm9keS5mYWtlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9keTtcbiAgfVxuXG4gIDtcblxuICB2YXIgY3Nzb21QcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gb21QcmVmaXhlcy5zcGxpdCgnICcpIDogW10pO1xuICBNb2Rlcm5penJQcm90by5fY3Nzb21QcmVmaXhlcyA9IGNzc29tUHJlZml4ZXM7XG4gIFxuXG4gIC8qKlxuICAgKiBhdFJ1bGUgcmV0dXJucyBhIGdpdmVuIENTUyBwcm9wZXJ0eSBhdC1ydWxlIChlZyBAa2V5ZnJhbWVzKSwgcG9zc2libHkgaW5cbiAgICogc29tZSBwcmVmaXhlZCBmb3JtLCBvciBmYWxzZSwgaW4gdGhlIGNhc2Ugb2YgYW4gdW5zdXBwb3J0ZWQgcnVsZVxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5hdFJ1bGVcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLmF0UnVsZSgpXG4gICAqIEBvcHRpb25Qcm9wIGF0UnVsZVxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gYXRSdWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWUgb2YgdGhlIEAtcnVsZSB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGJvb2xlYW59IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSAocG9zc2libHkgcHJlZml4ZWQpXG4gICAqIHZhbGlkIHZlcnNpb24gb2YgdGhlIEAtcnVsZSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiAgdmFyIGtleWZyYW1lcyA9IE1vZGVybml6ci5hdFJ1bGUoJ0BrZXlmcmFtZXMnKTtcbiAgICpcbiAgICogIGlmIChrZXlmcmFtZXMpIHtcbiAgICogICAgLy8ga2V5ZnJhbWVzIGFyZSBzdXBwb3J0ZWRcbiAgICogICAgLy8gY291bGQgYmUgYEAtd2Via2l0LWtleWZyYW1lc2Agb3IgYEBrZXlmcmFtZXNgXG4gICAqICB9IGVsc2Uge1xuICAgKiAgICAvLyBrZXlmcmFtZXMgPT09IGBmYWxzZWBcbiAgICogIH1cbiAgICogYGBgXG4gICAqXG4gICAqL1xuXG4gIHZhciBhdFJ1bGUgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgdmFyIGxlbmd0aCA9IHByZWZpeGVzLmxlbmd0aDtcbiAgICB2YXIgY3NzcnVsZSA9IHdpbmRvdy5DU1NSdWxlO1xuICAgIHZhciBydWxlO1xuXG4gICAgaWYgKHR5cGVvZiBjc3NydWxlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoIXByb3ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgbGl0ZXJhbCBAIGZyb20gYmVnaW5uaW5nIG9mIHByb3ZpZGVkIHByb3BlcnR5XG4gICAgcHJvcCA9IHByb3AucmVwbGFjZSgvXkAvLCAnJyk7XG5cbiAgICAvLyBDU1NSdWxlcyB1c2UgdW5kZXJzY29yZXMgaW5zdGVhZCBvZiBkYXNoZXNcbiAgICBydWxlID0gcHJvcC5yZXBsYWNlKC8tL2csICdfJykudG9VcHBlckNhc2UoKSArICdfUlVMRSc7XG5cbiAgICBpZiAocnVsZSBpbiBjc3NydWxlKSB7XG4gICAgICByZXR1cm4gJ0AnICsgcHJvcDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBwcmVmaXhlcyBnaXZlcyB1cyBzb21ldGhpbmcgbGlrZSAtby0sIGFuZCB3ZSB3YW50IE9fXG4gICAgICB2YXIgcHJlZml4ID0gcHJlZml4ZXNbaV07XG4gICAgICB2YXIgdGhpc1J1bGUgPSBwcmVmaXgudG9VcHBlckNhc2UoKSArICdfJyArIHJ1bGU7XG5cbiAgICAgIGlmICh0aGlzUnVsZSBpbiBjc3NydWxlKSB7XG4gICAgICAgIHJldHVybiAnQC0nICsgcHJlZml4LnRvTG93ZXJDYXNlKCkgKyAnLScgKyBwcm9wO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBNb2Rlcm5penJQcm90by5hdFJ1bGUgPSBhdFJ1bGU7XG5cbiAgXG5cblxuICAvKipcbiAgICogY29udGFpbnMgY2hlY2tzIHRvIHNlZSBpZiBhIHN0cmluZyBjb250YWlucyBhbm90aGVyIHN0cmluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNvbnRhaW5zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHdlIHdhbnQgdG8gY2hlY2sgZm9yIHN1YnN0cmluZ3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnN0ciAtIFRoZSBzdWJzdHJpbmcgd2Ugd2FudCB0byBzZWFyY2ggdGhlIGZpcnN0IHN0cmluZyBmb3JcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHN0ciwgc3Vic3RyKSB7XG4gICAgcmV0dXJuICEhfignJyArIHN0cikuaW5kZXhPZihzdWJzdHIpO1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiBpbmplY3RFbGVtZW50V2l0aFN0eWxlcyBpbmplY3RzIGFuIGVsZW1lbnQgd2l0aCBzdHlsZSBlbGVtZW50IGFuZCBzb21lIENTUyBydWxlc1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlIC0gU3RyaW5nIHJlcHJlc2VudGluZyBhIGNzcyBydWxlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gdGVzdCB0aGUgaW5qZWN0ZWQgZWxlbWVudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW25vZGVzXSAtIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBub2RlcyB5b3Ugd2FudCBpbmplY3RlZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbdGVzdG5hbWVzXSAtIEFuIGFycmF5IG9mIHN0cmluZ3MgdGhhdCBhcmUgdXNlZCBhcyBpZHMgZm9yIHRoZSBhZGRpdGlvbmFsIG5vZGVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpbmplY3RFbGVtZW50V2l0aFN0eWxlcyhydWxlLCBjYWxsYmFjaywgbm9kZXMsIHRlc3RuYW1lcykge1xuICAgIHZhciBtb2QgPSAnbW9kZXJuaXpyJztcbiAgICB2YXIgc3R5bGU7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgbm9kZTtcbiAgICB2YXIgZG9jT3ZlcmZsb3c7XG4gICAgdmFyIGRpdiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBib2R5ID0gZ2V0Qm9keSgpO1xuXG4gICAgaWYgKHBhcnNlSW50KG5vZGVzLCAxMCkpIHtcbiAgICAgIC8vIEluIG9yZGVyIG5vdCB0byBnaXZlIGZhbHNlIHBvc2l0aXZlcyB3ZSBjcmVhdGUgYSBub2RlIGZvciBlYWNoIHRlc3RcbiAgICAgIC8vIFRoaXMgYWxzbyBhbGxvd3MgdGhlIG1ldGhvZCB0byBzY2FsZSBmb3IgdW5zcGVjaWZpZWQgdXNlc1xuICAgICAgd2hpbGUgKG5vZGVzLS0pIHtcbiAgICAgICAgbm9kZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBub2RlLmlkID0gdGVzdG5hbWVzID8gdGVzdG5hbWVzW25vZGVzXSA6IG1vZCArIChub2RlcyArIDEpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3R5bGUgPSBjcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgIHN0eWxlLmlkID0gJ3MnICsgbW9kO1xuXG4gICAgLy8gSUU2IHdpbGwgZmFsc2UgcG9zaXRpdmUgb24gc29tZSB0ZXN0cyBkdWUgdG8gdGhlIHN0eWxlIGVsZW1lbnQgaW5zaWRlIHRoZSB0ZXN0IGRpdiBzb21laG93IGludGVyZmVyaW5nIG9mZnNldEhlaWdodCwgc28gaW5zZXJ0IGl0IGludG8gYm9keSBvciBmYWtlYm9keS5cbiAgICAvLyBPcGVyYSB3aWxsIGFjdCBhbGwgcXVpcmt5IHdoZW4gaW5qZWN0aW5nIGVsZW1lbnRzIGluIGRvY3VtZW50RWxlbWVudCB3aGVuIHBhZ2UgaXMgc2VydmVkIGFzIHhtbCwgbmVlZHMgZmFrZWJvZHkgdG9vLiAjMjcwXG4gICAgKCFib2R5LmZha2UgPyBkaXYgOiBib2R5KS5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJ1bGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGUpKTtcbiAgICB9XG4gICAgZGl2LmlkID0gbW9kO1xuXG4gICAgaWYgKGJvZHkuZmFrZSkge1xuICAgICAgLy9hdm9pZCBjcmFzaGluZyBJRTgsIGlmIGJhY2tncm91bmQgaW1hZ2UgaXMgdXNlZFxuICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7XG4gICAgICAvL1NhZmFyaSA1LjEzLzUuMS40IE9TWCBzdG9wcyBsb2FkaW5nIGlmIDo6LXdlYmtpdC1zY3JvbGxiYXIgaXMgdXNlZCBhbmQgc2Nyb2xsYmFycyBhcmUgdmlzaWJsZVxuICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgZG9jT3ZlcmZsb3cgPSBkb2NFbGVtZW50LnN0eWxlLm92ZXJmbG93O1xuICAgICAgZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgZG9jRWxlbWVudC5hcHBlbmRDaGlsZChib2R5KTtcbiAgICB9XG5cbiAgICByZXQgPSBjYWxsYmFjayhkaXYsIHJ1bGUpO1xuICAgIC8vIElmIHRoaXMgaXMgZG9uZSBhZnRlciBwYWdlIGxvYWQgd2UgZG9uJ3Qgd2FudCB0byByZW1vdmUgdGhlIGJvZHkgc28gY2hlY2sgaWYgYm9keSBleGlzdHNcbiAgICBpZiAoYm9keS5mYWtlKSB7XG4gICAgICBib2R5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYm9keSk7XG4gICAgICBkb2NFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gZG9jT3ZlcmZsb3c7XG4gICAgICAvLyBUcmlnZ2VyIGxheW91dCBzbyBraW5ldGljIHNjcm9sbGluZyBpc24ndCBkaXNhYmxlZCBpbiBpT1M2K1xuICAgICAgZG9jRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhcmV0O1xuXG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHRlc3RTdHlsZXMgaW5qZWN0cyBhbiBlbGVtZW50IHdpdGggc3R5bGUgZWxlbWVudCBhbmQgc29tZSBDU1MgcnVsZXNcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIudGVzdFN0eWxlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIudGVzdFN0eWxlcygpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RTdHlsZXNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHRlc3RTdHlsZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGUgLSBTdHJpbmcgcmVwcmVzZW50aW5nIGEgY3NzIHJ1bGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byB0ZXN0IHRoZSBpbmplY3RlZCBlbGVtZW50XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbm9kZXNdIC0gQW4gaW50ZWdlciByZXByZXNlbnRpbmcgdGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIG5vZGVzIHlvdSB3YW50IGluamVjdGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IFt0ZXN0bmFtZXNdIC0gQW4gYXJyYXkgb2Ygc3RyaW5ncyB0aGF0IGFyZSB1c2VkIGFzIGlkcyBmb3IgdGhlIGFkZGl0aW9uYWwgbm9kZXNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBNb2Rlcm5penIudGVzdFN0eWxlc2AgdGFrZXMgYSBDU1MgcnVsZSBhbmQgaW5qZWN0cyBpdCBvbnRvIHRoZSBjdXJyZW50IHBhZ2VcbiAgICogYWxvbmcgd2l0aCAocG9zc2libHkgbXVsdGlwbGUpIERPTSBlbGVtZW50cy4gVGhpcyBsZXRzIHlvdSBjaGVjayBmb3IgZmVhdHVyZXNcbiAgICogdGhhdCBjYW4gbm90IGJlIGRldGVjdGVkIGJ5IHNpbXBseSBjaGVja2luZyB0aGUgW0lETF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Nb3ppbGxhL0RldmVsb3Blcl9ndWlkZS9JbnRlcmZhY2VfZGV2ZWxvcG1lbnRfZ3VpZGUvSURMX2ludGVyZmFjZV9ydWxlcykuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjbW9kZXJuaXpyIHsgd2lkdGg6IDlweDsgY29sb3I6IHBhcGF5YXdoaXA7IH0nLCBmdW5jdGlvbihlbGVtLCBydWxlKSB7XG4gICAqICAgLy8gZWxlbSBpcyB0aGUgZmlyc3QgRE9NIG5vZGUgaW4gdGhlIHBhZ2UgKGJ5IGRlZmF1bHQgI21vZGVybml6cilcbiAgICogICAvLyBydWxlIGlzIHRoZSBmaXJzdCBhcmd1bWVudCB5b3Ugc3VwcGxpZWQgLSB0aGUgQ1NTIHJ1bGUgaW4gc3RyaW5nIGZvcm1cbiAgICpcbiAgICogICBhZGRUZXN0KCd3aWR0aHdvcmtzJywgZWxlbS5zdHlsZS53aWR0aCA9PT0gJzlweCcpXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91ciB0ZXN0IHJlcXVpcmVzIG11bHRpcGxlIG5vZGVzLCB5b3UgY2FuIGluY2x1ZGUgYSB0aGlyZCBhcmd1bWVudFxuICAgKiBpbmRpY2F0aW5nIGhvdyBtYW55IGFkZGl0aW9uYWwgZGl2IGVsZW1lbnRzIHRvIGluY2x1ZGUgb24gdGhlIHBhZ2UuIFRoZVxuICAgKiBhZGRpdGlvbmFsIG5vZGVzIGFyZSBpbmplY3RlZCBhcyBjaGlsZHJlbiBvZiB0aGUgYGVsZW1gIHRoYXQgaXMgcmV0dXJuZWQgYXNcbiAgICogdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RTdHlsZXMoJyNtb2Rlcm5penIge3dpZHRoOiAxcHh9OyAjbW9kZXJuaXpyMiB7d2lkdGg6IDJweH0nLCBmdW5jdGlvbihlbGVtKSB7XG4gICAqICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVybml6cicpLnN0eWxlLndpZHRoID09PSAnMXB4JzsgLy8gdHJ1ZVxuICAgKiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5penIyJykuc3R5bGUud2lkdGggPT09ICcycHgnOyAvLyB0cnVlXG4gICAqICAgZWxlbS5maXJzdENoaWxkID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuaXpyMicpOyAvLyB0cnVlXG4gICAqIH0sIDEpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgYWxsIG9mIHRoZSBhZGRpdGlvbmFsIGVsZW1lbnRzIGhhdmUgYW4gSUQgb2YgYG1vZGVybml6cltuXWAsIHdoZXJlXG4gICAqIGBuYCBpcyBpdHMgaW5kZXggKGUuZy4gdGhlIGZpcnN0IGFkZGl0aW9uYWwsIHNlY29uZCBvdmVyYWxsIGlzIGAjbW9kZXJuaXpyMmAsXG4gICAqIHRoZSBzZWNvbmQgYWRkaXRpb25hbCBpcyBgI21vZGVybml6cjNgLCBldGMuKS5cbiAgICogSWYgeW91IHdhbnQgdG8gaGF2ZSBtb3JlIG1lYW5pbmdmdWwgSURzIGZvciB5b3VyIGZ1bmN0aW9uLCB5b3UgY2FuIHByb3ZpZGVcbiAgICogdGhlbSBhcyB0aGUgZm91cnRoIGFyZ3VtZW50LCBhcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjZm9vIHt3aWR0aDogMTBweH07ICNiYXIge2hlaWdodDogMjBweH0nLCBmdW5jdGlvbihlbGVtKSB7XG4gICAqICAgZWxlbS5maXJzdENoaWxkID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9vJyk7IC8vIHRydWVcbiAgICogICBlbGVtLmxhc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcicpOyAvLyB0cnVlXG4gICAqIH0sIDIsIFsnZm9vJywgJ2JhciddKTtcbiAgICogYGBgXG4gICAqXG4gICAqL1xuXG4gIHZhciB0ZXN0U3R5bGVzID0gTW9kZXJuaXpyUHJvdG8udGVzdFN0eWxlcyA9IGluamVjdEVsZW1lbnRXaXRoU3R5bGVzO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInRvdWNoZXZlbnRzXCIsXG4gIFwiY2FuaXVzZVwiIDogXCJ0b3VjaFwiLFxuICBcInRhZ3NcIjogW1wibWVkaWFcIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHMgc3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELXRvdWNoLWV2ZW50cy0yMDEzMDEyNC9cIlxuICB9XSxcbiAgXCJ3YXJuaW5nc1wiOiBbXG4gICAgXCJJbmRpY2F0ZXMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIFRvdWNoIEV2ZW50cyBzcGVjLCBhbmQgZG9lcyBub3QgbmVjZXNzYXJpbHkgcmVmbGVjdCBhIHRvdWNoc2NyZWVuIGRldmljZVwiXG4gIF0sXG4gIFwia25vd25CdWdzXCI6IFtcbiAgICBcIkZhbHNlLXBvc2l0aXZlIG9uIHNvbWUgY29uZmlndXJhdGlvbnMgb2YgTm9raWEgTjkwMFwiLFxuICAgIFwiRmFsc2UtcG9zaXRpdmUgb24gc29tZSBCbGFja0JlcnJ5IDYuMCBidWlsZHMg4oCTIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy8zNzIjaXNzdWVjb21tZW50LTMxMTI2OTVcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuSW5kaWNhdGVzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBXM0MgVG91Y2ggRXZlbnRzIEFQSS5cblxuVGhpcyAqZG9lcyBub3QqIG5lY2Vzc2FyaWx5IHJlZmxlY3QgYSB0b3VjaHNjcmVlbiBkZXZpY2U6XG5cbiogT2xkZXIgdG91Y2hzY3JlZW4gZGV2aWNlcyBvbmx5IGVtdWxhdGUgbW91c2UgZXZlbnRzXG4qIE1vZGVybiBJRSB0b3VjaCBkZXZpY2VzIGltcGxlbWVudCB0aGUgUG9pbnRlciBFdmVudHMgQVBJIGluc3RlYWQ6IHVzZSBgTW9kZXJuaXpyLnBvaW50ZXJldmVudHNgIHRvIGRldGVjdCBzdXBwb3J0IGZvciB0aGF0XG4qIFNvbWUgYnJvd3NlcnMgJiBPUyBzZXR1cHMgbWF5IGVuYWJsZSB0b3VjaCBBUElzIHdoZW4gbm8gdG91Y2hzY3JlZW4gaXMgY29ubmVjdGVkXG4qIEZ1dHVyZSBicm93c2VycyBtYXkgaW1wbGVtZW50IG90aGVyIGV2ZW50IG1vZGVscyBmb3IgdG91Y2ggaW50ZXJhY3Rpb25zXG5cblNlZSB0aGlzIGFydGljbGU6IFtZb3UgQ2FuJ3QgRGV0ZWN0IEEgVG91Y2hzY3JlZW5dKGh0dHA6Ly93d3cuc3R1Y294LmNvbS9ibG9nL3lvdS1jYW50LWRldGVjdC1hLXRvdWNoc2NyZWVuLykuXG5cbkl0J3MgcmVjb21tZW5kZWQgdG8gYmluZCBib3RoIG1vdXNlIGFuZCB0b3VjaC9wb2ludGVyIGV2ZW50cyBzaW11bHRhbmVvdXNseSDigJMgc2VlIFt0aGlzIEhUTUw1IFJvY2tzIHR1dG9yaWFsXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL21vYmlsZS90b3VjaGFuZG1vdXNlLykuXG5cblRoaXMgdGVzdCB3aWxsIGFsc28gcmV0dXJuIGB0cnVlYCBmb3IgRmlyZWZveCA0IE11bHRpdG91Y2ggc3VwcG9ydC5cbiovXG5cbiAgLy8gQ2hyb21lIChkZXNrdG9wKSB1c2VkIHRvIGxpZSBhYm91dCBpdHMgc3VwcG9ydCBvbiB0aGlzLCBidXQgdGhhdCBoYXMgc2luY2UgYmVlbiByZWN0aWZpZWQ6IGh0dHA6Ly9jcmJ1Zy5jb20vMzY0MTVcbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3RvdWNoZXZlbnRzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvb2w7XG4gICAgaWYgKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaCkge1xuICAgICAgYm9vbCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluY2x1ZGUgdGhlICdoZWFydHonIGFzIGEgd2F5IHRvIGhhdmUgYSBub24gbWF0Y2hpbmcgTVEgdG8gaGVscCB0ZXJtaW5hdGUgdGhlIGpvaW5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0LmlvL3Z6bkZIXG4gICAgICB2YXIgcXVlcnkgPSBbJ0BtZWRpYSAoJywgcHJlZml4ZXMuam9pbigndG91Y2gtZW5hYmxlZCksKCcpLCAnaGVhcnR6JywgJyknLCAneyNtb2Rlcm5penJ7dG9wOjlweDtwb3NpdGlvbjphYnNvbHV0ZX19J10uam9pbignJyk7XG4gICAgICB0ZXN0U3R5bGVzKHF1ZXJ5LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGJvb2wgPSBub2RlLm9mZnNldFRvcCA9PT0gOTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYm9vbDtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJGb3JtIFZhbGlkYXRpb25cIixcbiAgXCJwcm9wZXJ0eVwiOiBcImZvcm12YWxpZGF0aW9uXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiLCBcInZhbGlkYXRpb25cIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiZm9ybXNfdmFsaWRhdGlvblwiXVxufVxuISovXG4vKiBET0NcblRoaXMgaW1wbGVtZW50YXRpb24gb25seSB0ZXN0cyBzdXBwb3J0IGZvciBpbnRlcmFjdGl2ZSBmb3JtIHZhbGlkYXRpb24uXG5UbyBjaGVjayB2YWxpZGF0aW9uIGZvciBhIHNwZWNpZmljIHR5cGUgb3IgYSBzcGVjaWZpYyBvdGhlciBjb25zdHJhaW50LFxudGhlIHRlc3QgY2FuIGJlIGNvbWJpbmVkOlxuXG4tIGBNb2Rlcm5penIuaW5wdXR0eXBlcy5udW1iZXIgJiYgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uYCAoYnJvd3NlciBzdXBwb3J0cyByYW5nZU92ZXJmbG93LCB0eXBlTWlzbWF0Y2ggZXRjLiBmb3IgdHlwZT1udW1iZXIpXG4tIGBNb2Rlcm5penIuaW5wdXQucmVxdWlyZWQgJiYgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uYCAoYnJvd3NlciBzdXBwb3J0cyB2YWx1ZU1pc3NpbmcpXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdmb3JtdmFsaWRhdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBmb3JtID0gY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIGlmICghKCdjaGVja1ZhbGlkaXR5JyBpbiBmb3JtKSB8fCAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBmb3JtKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoJ3JlcG9ydFZhbGlkaXR5JyBpbiBmb3JtKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGludmFsaWRGaXJlZCA9IGZhbHNlO1xuICAgIHZhciBpbnB1dDtcblxuICAgIE1vZGVybml6ci5mb3JtdmFsaWRhdGlvbmFwaSA9ICB0cnVlO1xuXG4gICAgLy8gUHJldmVudCBmb3JtIGZyb20gYmVpbmcgc3VibWl0dGVkXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBPbGQgUHJlc3RvIGJhc2VkIE9wZXJhIGRvZXMgbm90IHZhbGlkYXRlIGZvcm0sIGlmIHN1Ym1pdCBpcyBwcmV2ZW50ZWRcbiAgICAgIC8vIGFsdGhvdWdoIE9wZXJhIE1pbmkgc2VydmVycyB1c2UgbmV3ZXIgUHJlc3RvLlxuICAgICAgaWYgKCF3aW5kb3cub3BlcmEgfHwgd2luZG93Lm9wZXJhbWluaSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIC8vIENhbGxpbmcgZm9ybS5zdWJtaXQoKSBkb2Vzbid0IHRyaWdnZXIgaW50ZXJhY3RpdmUgdmFsaWRhdGlvbixcbiAgICAvLyB1c2UgYSBzdWJtaXQgYnV0dG9uIGluc3RlYWRcbiAgICAvL29sZGVyIG9wZXJhIGJyb3dzZXJzIG5lZWQgYSBuYW1lIGF0dHJpYnV0ZVxuICAgIGZvcm0uaW5uZXJIVE1MID0gJzxpbnB1dCBuYW1lPVwibW9kVGVzdFwiIHJlcXVpcmVkPVwicmVxdWlyZWRcIiAvPjxidXR0b24+PC9idXR0b24+JztcblxuICAgIHRlc3RTdHlsZXMoJyNtb2Rlcm5penIgZm9ybXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTk5OTk5ZW19JywgZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgaW5wdXQgPSBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdO1xuXG4gICAgICAvLyBSZWNvcmQgd2hldGhlciBcImludmFsaWRcIiBldmVudCBpcyBmaXJlZFxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW52YWxpZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaW52YWxpZEZpcmVkID0gdHJ1ZTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAvL09wZXJhIGRvZXMgbm90IGZ1bGx5IHN1cHBvcnQgdGhlIHZhbGlkYXRpb25NZXNzYWdlIHByb3BlcnR5XG4gICAgICBNb2Rlcm5penIuZm9ybXZhbGlkYXRpb25tZXNzYWdlID0gISFpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcblxuICAgICAgLy8gU3VibWl0IGZvcm0gYnkgY2xpY2tpbmcgc3VibWl0IGJ1dHRvblxuICAgICAgZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYnV0dG9uJylbMF0uY2xpY2soKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnZhbGlkRmlyZWQ7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqIG5hdGl2ZVRlc3RQcm9wcyBhbGxvd3MgZm9yIHVzIHRvIHVzZSBuYXRpdmUgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb25hbGl0eSBpZiBhdmFpbGFibGUuXG4gICAqIHNvbWUgcHJlZml4ZWQgZm9ybSwgb3IgZmFsc2UsIGluIHRoZSBjYXNlIG9mIGFuIHVuc3VwcG9ydGVkIHJ1bGVcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBuYXRpdmVUZXN0UHJvcHNcbiAgICogQHBhcmFtIHthcnJheX0gcHJvcHMgLSBBbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIHdlIHdhbnQgdG8gY2hlY2sgdmlhIEBzdXBwb3J0c1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnx1bmRlZmluZWR9IEEgYm9vbGVhbiB3aGVuIEBzdXBwb3J0cyBleGlzdHMsIHVuZGVmaW5lZCBvdGhlcndpc2VcbiAgICovXG5cbiAgLy8gQWNjZXB0cyBhIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgYW5kIGEgc2luZ2xlIHZhbHVlXG4gIC8vIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgbmF0aXZlIGRldGVjdGlvbiBub3QgYXZhaWxhYmxlXG4gIGZ1bmN0aW9uIG5hdGl2ZVRlc3RQcm9wcyhwcm9wcywgdmFsdWUpIHtcbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcbiAgICAvLyBTdGFydCB3aXRoIHRoZSBKUyBBUEk6IGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29uZGl0aW9uYWwvI3RoZS1jc3MtaW50ZXJmYWNlXG4gICAgaWYgKCdDU1MnIGluIHdpbmRvdyAmJiAnc3VwcG9ydHMnIGluIHdpbmRvdy5DU1MpIHtcbiAgICAgIC8vIFRyeSBldmVyeSBwcmVmaXhlZCB2YXJpYW50IG9mIHRoZSBwcm9wZXJ0eVxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAod2luZG93LkNTUy5zdXBwb3J0cyhkb21Ub0NTUyhwcm9wc1tpXSksIHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSBmYWxsIGJhY2sgdG8gYXQtcnVsZSAoZm9yIE9wZXJhIDEyLngpXG4gICAgZWxzZSBpZiAoJ0NTU1N1cHBvcnRzUnVsZScgaW4gd2luZG93KSB7XG4gICAgICAvLyBCdWlsZCBhIGNvbmRpdGlvbiBzdHJpbmcgZm9yIGV2ZXJ5IHByZWZpeGVkIHZhcmlhbnRcbiAgICAgIHZhciBjb25kaXRpb25UZXh0ID0gW107XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbmRpdGlvblRleHQucHVzaCgnKCcgKyBkb21Ub0NTUyhwcm9wc1tpXSkgKyAnOicgKyB2YWx1ZSArICcpJyk7XG4gICAgICB9XG4gICAgICBjb25kaXRpb25UZXh0ID0gY29uZGl0aW9uVGV4dC5qb2luKCcgb3IgJyk7XG4gICAgICByZXR1cm4gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMoJ0BzdXBwb3J0cyAoJyArIGNvbmRpdGlvblRleHQgKyAnKSB7ICNtb2Rlcm5penIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfScsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkucG9zaXRpb24gPT0gJ2Fic29sdXRlJztcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIDtcblxuICAvKipcbiAgICogc2luY2Ugd2UgaGF2ZSBhIGZhaXJseSBsYXJnZSBudW1iZXIgb2YgaW5wdXQgdGVzdHMgdGhhdCBkb24ndCBtdXRhdGUgdGhlIGlucHV0XG4gICAqIHdlIGNyZWF0ZSBhIHNpbmdsZSBlbGVtZW50IHRoYXQgY2FuIGJlIHNoYXJlZCB3aXRoIGFsbCBvZiB0aG9zZSB0ZXN0cyBmb3IgYVxuICAgKiBtaW5vciBwZXJmIGJvb3N0XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7SFRNTElucHV0RWxlbWVudH1cbiAgICovXG4gIHZhciBpbnB1dEVsZW0gPSBjcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJGb3JtIGlucHV0IHR5cGVzXCIsXG4gIFwicHJvcGVydHlcIjogXCJpbnB1dHR5cGVzXCIsXG4gIFwiY2FuaXVzZVwiOiBcImZvcm1zXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiXSxcbiAgXCJhdXRob3JzXCI6IFtcIk1pa2UgVGF5bG9yXCJdLFxuICBcInBvbHlmaWxsc1wiOiBbXG4gICAgXCJqcXVlcnl0b29sc1wiLFxuICAgIFwid2Vic2hpbXNcIixcbiAgICBcImg1ZlwiLFxuICAgIFwid2ViZm9ybXMyXCIsXG4gICAgXCJud3hmb3Jtc1wiLFxuICAgIFwiZmRzbGlkZXJcIixcbiAgICBcImh0bWw1c2xpZGVyXCIsXG4gICAgXCJnYWxsZXJ5aHRtbDVmb3Jtc1wiLFxuICAgIFwianNjb2xvclwiLFxuICAgIFwiaHRtbDVmb3Jtc2hpbVwiLFxuICAgIFwic2VsZWN0ZWRvcHRpb25zanNcIixcbiAgICBcImZvcm12YWxpZGF0aW9uanNcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciBIVE1MNSBmb3JtIGlucHV0IHR5cGVzIGFuZCBleHBvc2VzIEJvb2xlYW4gc3VicHJvcGVydGllcyB3aXRoIHRoZSByZXN1bHRzOlxuXG5gYGBqYXZhc2NyaXB0XG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5jb2xvclxuTW9kZXJuaXpyLmlucHV0dHlwZXMuZGF0ZVxuTW9kZXJuaXpyLmlucHV0dHlwZXMuZGF0ZXRpbWVcbk1vZGVybml6ci5pbnB1dHR5cGVzWydkYXRldGltZS1sb2NhbCddXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5lbWFpbFxuTW9kZXJuaXpyLmlucHV0dHlwZXMubW9udGhcbk1vZGVybml6ci5pbnB1dHR5cGVzLm51bWJlclxuTW9kZXJuaXpyLmlucHV0dHlwZXMucmFuZ2Vcbk1vZGVybml6ci5pbnB1dHR5cGVzLnNlYXJjaFxuTW9kZXJuaXpyLmlucHV0dHlwZXMudGVsXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy50aW1lXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy51cmxcbk1vZGVybml6ci5pbnB1dHR5cGVzLndlZWtcbmBgYFxuKi9cblxuICAvLyBSdW4gdGhyb3VnaCBIVE1MNSdzIG5ldyBpbnB1dCB0eXBlcyB0byBzZWUgaWYgdGhlIFVBIHVuZGVyc3RhbmRzIGFueS5cbiAgLy8gICBUaGlzIGlzIHB1dCBiZWhpbmQgdGhlIHRlc3RzIHJ1bmxvb3AgYmVjYXVzZSBpdCBkb2Vzbid0IHJldHVybiBhXG4gIC8vICAgdHJ1ZS9mYWxzZSBsaWtlIGFsbCB0aGUgb3RoZXIgdGVzdHM7IGluc3RlYWQsIGl0IHJldHVybnMgYW4gb2JqZWN0XG4gIC8vICAgY29udGFpbmluZyBlYWNoIGlucHV0IHR5cGUgd2l0aCBpdHMgY29ycmVzcG9uZGluZyB0cnVlL2ZhbHNlIHZhbHVlXG5cbiAgLy8gQmlnIHRoYW5rcyB0byBAbWlrZXRheWxyIGZvciB0aGUgaHRtbDUgZm9ybXMgZXhwZXJ0aXNlLiBtaWtldGF5bHIuY29tL1xuICB2YXIgaW5wdXR0eXBlcyA9ICdzZWFyY2ggdGVsIHVybCBlbWFpbCBkYXRldGltZSBkYXRlIG1vbnRoIHdlZWsgdGltZSBkYXRldGltZS1sb2NhbCBudW1iZXIgcmFuZ2UgY29sb3InLnNwbGl0KCcgJyk7XG4gIHZhciBpbnB1dHMgPSB7fTtcblxuICBNb2Rlcm5penIuaW5wdXR0eXBlcyA9IChmdW5jdGlvbihwcm9wcykge1xuICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHNtaWxlID0gJzEpJztcbiAgICB2YXIgaW5wdXRFbGVtVHlwZTtcbiAgICB2YXIgZGVmYXVsdFZpZXc7XG4gICAgdmFyIGJvb2w7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgIGlucHV0RWxlbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCBpbnB1dEVsZW1UeXBlID0gcHJvcHNbaV0pO1xuICAgICAgYm9vbCA9IGlucHV0RWxlbS50eXBlICE9PSAndGV4dCcgJiYgJ3N0eWxlJyBpbiBpbnB1dEVsZW07XG5cbiAgICAgIC8vIFdlIGZpcnN0IGNoZWNrIHRvIHNlZSBpZiB0aGUgdHlwZSB3ZSBnaXZlIGl0IHN0aWNrcy4uXG4gICAgICAvLyBJZiB0aGUgdHlwZSBkb2VzLCB3ZSBmZWVkIGl0IGEgdGV4dHVhbCB2YWx1ZSwgd2hpY2ggc2hvdWxkbid0IGJlIHZhbGlkLlxuICAgICAgLy8gSWYgdGhlIHZhbHVlIGRvZXNuJ3Qgc3RpY2ssIHdlIGtub3cgdGhlcmUncyBpbnB1dCBzYW5pdGl6YXRpb24gd2hpY2ggaW5mZXJzIGEgY3VzdG9tIFVJXG4gICAgICBpZiAoYm9vbCkge1xuXG4gICAgICAgIGlucHV0RWxlbS52YWx1ZSAgICAgICAgID0gc21pbGU7XG4gICAgICAgIGlucHV0RWxlbS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuOyc7XG5cbiAgICAgICAgaWYgKC9ecmFuZ2UkLy50ZXN0KGlucHV0RWxlbVR5cGUpICYmIGlucHV0RWxlbS5zdHlsZS5XZWJraXRBcHBlYXJhbmNlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgIGRvY0VsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXRFbGVtKTtcbiAgICAgICAgICBkZWZhdWx0VmlldyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG4gICAgICAgICAgLy8gU2FmYXJpIDItNCBhbGxvd3MgdGhlIHNtaWxleSBhcyBhIHZhbHVlLCBkZXNwaXRlIG1ha2luZyBhIHNsaWRlclxuICAgICAgICAgIGJvb2wgPSAgZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSAmJlxuICAgICAgICAgICAgZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShpbnB1dEVsZW0sIG51bGwpLldlYmtpdEFwcGVhcmFuY2UgIT09ICd0ZXh0ZmllbGQnICYmXG4gICAgICAgICAgICAvLyBNb2JpbGUgYW5kcm9pZCB3ZWIgYnJvd3NlciBoYXMgZmFsc2UgcG9zaXRpdmUsIHNvIG11c3RcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBoZWlnaHQgdG8gc2VlIGlmIHRoZSB3aWRnZXQgaXMgYWN0dWFsbHkgdGhlcmUuXG4gICAgICAgICAgICAoaW5wdXRFbGVtLm9mZnNldEhlaWdodCAhPT0gMCk7XG5cbiAgICAgICAgICBkb2NFbGVtZW50LnJlbW92ZUNoaWxkKGlucHV0RWxlbSk7XG5cbiAgICAgICAgfSBlbHNlIGlmICgvXihzZWFyY2h8dGVsKSQvLnRlc3QoaW5wdXRFbGVtVHlwZSkpIHtcbiAgICAgICAgICAvLyBTcGVjIGRvZXNuJ3QgZGVmaW5lIGFueSBzcGVjaWFsIHBhcnNpbmcgb3IgZGV0ZWN0YWJsZSBVSVxuICAgICAgICAgIC8vICAgYmVoYXZpb3JzIHNvIHdlIHBhc3MgdGhlc2UgdGhyb3VnaCBhcyB0cnVlXG5cbiAgICAgICAgICAvLyBJbnRlcmVzdGluZ2x5LCBvcGVyYSBmYWlscyB0aGUgZWFybGllciB0ZXN0LCBzbyBpdCBkb2Vzbid0XG4gICAgICAgICAgLy8gIGV2ZW4gbWFrZSBpdCBoZXJlLlxuXG4gICAgICAgIH0gZWxzZSBpZiAoL14odXJsfGVtYWlsKSQvLnRlc3QoaW5wdXRFbGVtVHlwZSkpIHtcbiAgICAgICAgICAvLyBSZWFsIHVybCBhbmQgZW1haWwgc3VwcG9ydCBjb21lcyB3aXRoIHByZWJha2VkIHZhbGlkYXRpb24uXG4gICAgICAgICAgYm9vbCA9IGlucHV0RWxlbS5jaGVja1ZhbGlkaXR5ICYmIGlucHV0RWxlbS5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVwZ3JhZGVkIGlucHV0IGNvbXBvbnRlbnQgcmVqZWN0cyB0aGUgOikgdGV4dCwgd2UgZ290IGEgd2lubmVyXG4gICAgICAgICAgYm9vbCA9IGlucHV0RWxlbS52YWx1ZSAhPSBzbWlsZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbnB1dHNbIHByb3BzW2ldIF0gPSAhIWJvb2w7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dHM7XG4gIH0pKGlucHV0dHlwZXMpO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiaW5wdXRbdHlwZT1cXFwibnVtYmVyXFxcIl0gTG9jYWxpemF0aW9uXCIsXG4gIFwicHJvcGVydHlcIjogXCJsb2NhbGl6ZWRudW1iZXJcIixcbiAgXCJ0YWdzXCI6IFtcImZvcm1zXCIsIFwibG9jYWxpemF0aW9uXCIsIFwiYXR0cmlidXRlXCJdLFxuICBcImF1dGhvcnNcIjogW1wiUGV0ZXIgSmFuZXNcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJXZWJraXQgQnVnIFRyYWNrZXIgTGlzdGluZ1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD00MjQ4NFwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIkJhc2VkIG9uIFRoaXNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3RyYWMud2Via2l0Lm9yZy9icm93c2VyL3RydW5rL0xheW91dFRlc3RzL2Zhc3QvZm9ybXMvc2NyaXB0LXRlc3RzL2lucHV0LW51bWJlci1rZXlvcGVyYXRpb24uanM/cmV2PTgwMDk2I0w5XCJcbiAgfV0sXG4gIFwia25vd25CdWdzXCI6IFtcIk9ubHkgZXZlciByZXR1cm5zIHRydWUgaWYgdGhlIGJyb3dzZXIvT1MgaXMgY29uZmlndXJlZCB0byB1c2UgY29tbWEgYXMgYSBkZWNpbWFsIHNlcGFyYXRvci4gVGhpcyBpcyBwcm9iYWJseSBmaW5lIGZvciBtb3N0IHVzZSBjYXNlcy5cIl1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHdoZXRoZXIgaW5wdXQgdHlwZT1cIm51bWJlclwiIGlzIGNhcGFibGUgb2YgcmVjZWl2aW5nIGFuZCBkaXNwbGF5aW5nIGxvY2FsaXplZCBudW1iZXJzLCBlLmcuIHdpdGggY29tbWEgc2VwYXJhdG9yLlxuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnbG9jYWxpemVkbnVtYmVyJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gdGhpcyBleHRlbmRzIG91ciB0ZXN0aW5nIG9mIGlucHV0W3R5cGU9bnVtYmVyXSwgc28gYm9tYiBvdXQgaWYgdGhhdCdzIG1pc3NpbmdcbiAgICBpZiAoIU1vZGVybml6ci5pbnB1dHR5cGVzLm51bWJlcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyB3ZSByZWx5IG9uIGNoZWNrVmFsaWRpdHkgbGF0ZXIsIHNvIGJvbWIgb3V0IGVhcmx5IGlmIHdlIGRvbid0IGhhdmUgaXRcbiAgICBpZiAoIU1vZGVybml6ci5mb3JtdmFsaWRhdGlvbikgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIHZhciBlbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBkaWZmO1xuICAgIHZhciBib2R5ID0gZ2V0Qm9keSgpO1xuXG4gICAgdmFyIHJvb3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZG9jRWxlbWVudC5pbnNlcnRCZWZvcmUoYm9keSwgZG9jRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCB8fCBkb2NFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH0oKSk7XG4gICAgZWwuaW5uZXJIVE1MID0gJzxpbnB1dCB0eXBlPVwibnVtYmVyXCIgdmFsdWU9XCIxLjBcIiBzdGVwPVwiMC4xXCIvPic7XG4gICAgdmFyIGlucHV0ID0gZWwuY2hpbGROb2Rlc1swXTtcbiAgICByb290LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpbnB1dC5mb2N1cygpO1xuICAgIHRyeSB7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnSW5zZXJ0VGV4dCcsIGZhbHNlLCAnMSwxJyk7XG4gICAgfSBjYXRjaCAoZSkgeyAvLyBwcmV2ZW50IHdhcm5pbmdzIGluIElFXG4gICAgfVxuICAgIGRpZmYgPSBpbnB1dC50eXBlID09PSAnbnVtYmVyJyAmJiBpbnB1dC52YWx1ZUFzTnVtYmVyID09PSAxLjEgJiYgaW5wdXQuY2hlY2tWYWxpZGl0eSgpO1xuICAgIHJvb3QucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIGJvZHkuZmFrZSAmJiByb290LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocm9vdCk7XG4gICAgcmV0dXJuIGRpZmY7XG4gIH0pO1xuXG5cblxuICAvKipcbiAgICogZm5CaW5kIGlzIGEgc3VwZXIgc21hbGwgW2JpbmRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uL2JpbmQpIHBvbHlmaWxsLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGZuQmluZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIGEgZnVuY3Rpb24geW91IHdhbnQgdG8gY2hhbmdlIGB0aGlzYCByZWZlcmVuY2UgdG9cbiAgICogQHBhcmFtIHtvYmplY3R9IHRoYXQgLSB0aGUgYHRoaXNgIHlvdSB3YW50IHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGhcbiAgICogQHJldHVybnMge2Z1bmN0aW9ufSBUaGUgd3JhcHBlZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBmdW5jdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiBmbkJpbmQoZm4sIHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiB0ZXN0RE9NUHJvcHMgaXMgYSBnZW5lcmljIERPTSBwcm9wZXJ0eSB0ZXN0OyBpZiBhIGJyb3dzZXIgc3VwcG9ydHNcbiAgICogICBhIGNlcnRhaW4gcHJvcGVydHksIGl0IHdvbid0IHJldHVybiB1bmRlZmluZWQgZm9yIGl0LlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHRlc3RET01Qcm9wc1xuICAgKiBAcGFyYW0ge2FycmF5LjxzdHJpbmc+fSBwcm9wcyAtIEFuIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIEFuIG9iamVjdCBvciBFbGVtZW50IHlvdSB3YW50IHRvIHVzZSB0byB0ZXN0IHRoZSBwYXJhbWV0ZXJzIGFnYWluXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxvYmplY3R9IGVsZW0gLSBBbiBFbGVtZW50IHRvIGJpbmQgdGhlIHByb3BlcnR5IGxvb2t1cCBhZ2Fpbi4gVXNlIGBmYWxzZWAgdG8gcHJldmVudCB0aGUgY2hlY2tcbiAgICovXG4gIGZ1bmN0aW9uIHRlc3RET01Qcm9wcyhwcm9wcywgb2JqLCBlbGVtKSB7XG4gICAgdmFyIGl0ZW07XG5cbiAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7XG4gICAgICBpZiAocHJvcHNbaV0gaW4gb2JqKSB7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9wZXJ0eSBuYW1lIGFzIGEgc3RyaW5nXG4gICAgICAgIGlmIChlbGVtID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBwcm9wc1tpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW0gPSBvYmpbcHJvcHNbaV1dO1xuXG4gICAgICAgIC8vIGxldCdzIGJpbmQgYSBmdW5jdGlvblxuICAgICAgICBpZiAoaXMoaXRlbSwgJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAvLyBiaW5kIHRvIG9iaiB1bmxlc3Mgb3ZlcnJpZGVuXG4gICAgICAgICAgcmV0dXJuIGZuQmluZChpdGVtLCBlbGVtIHx8IG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gdGhlIHVuYm91bmQgZnVuY3Rpb24gb3Igb2JqIG9yIHZhbHVlXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBvdXIgXCJtb2Rlcm5penJcIiBlbGVtZW50IHRoYXQgd2UgZG8gbW9zdCBmZWF0dXJlIHRlc3RzIG9uLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICovXG5cbiAgdmFyIG1vZEVsZW0gPSB7XG4gICAgZWxlbTogY3JlYXRlRWxlbWVudCgnbW9kZXJuaXpyJylcbiAgfTtcblxuICAvLyBDbGVhbiB1cCB0aGlzIGVsZW1lbnRcbiAgTW9kZXJuaXpyLl9xLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIG1vZEVsZW0uZWxlbTtcbiAgfSk7XG5cbiAgXG5cbiAgdmFyIG1TdHlsZSA9IHtcbiAgICBzdHlsZTogbW9kRWxlbS5lbGVtLnN0eWxlXG4gIH07XG5cbiAgLy8ga2lsbCByZWYgZm9yIGdjLCBtdXN0IGhhcHBlbiBiZWZvcmUgbW9kLmVsZW0gaXMgcmVtb3ZlZCwgc28gd2UgdW5zaGlmdCBvbiB0b1xuICAvLyB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlLlxuICBNb2Rlcm5penIuX3EudW5zaGlmdChmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgbVN0eWxlLnN0eWxlO1xuICB9KTtcblxuICBcblxuICAvLyB0ZXN0UHJvcHMgaXMgYSBnZW5lcmljIENTUyAvIERPTSBwcm9wZXJ0eSB0ZXN0LlxuXG4gIC8vIEluIHRlc3Rpbmcgc3VwcG9ydCBmb3IgYSBnaXZlbiBDU1MgcHJvcGVydHksIGl0J3MgbGVnaXQgdG8gdGVzdDpcbiAgLy8gICAgYGVsZW0uc3R5bGVbc3R5bGVOYW1lXSAhPT0gdW5kZWZpbmVkYFxuICAvLyBJZiB0aGUgcHJvcGVydHkgaXMgc3VwcG9ydGVkIGl0IHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZyxcbiAgLy8gaWYgdW5zdXBwb3J0ZWQgaXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkLlxuXG4gIC8vIFdlJ2xsIHRha2UgYWR2YW50YWdlIG9mIHRoaXMgcXVpY2sgdGVzdCBhbmQgc2tpcCBzZXR0aW5nIGEgc3R5bGVcbiAgLy8gb24gb3VyIG1vZGVybml6ciBlbGVtZW50LCBidXQgaW5zdGVhZCBqdXN0IHRlc3RpbmcgdW5kZWZpbmVkIHZzXG4gIC8vIGVtcHR5IHN0cmluZy5cblxuICAvLyBQcm9wZXJ0eSBuYW1lcyBjYW4gYmUgcHJvdmlkZWQgaW4gZWl0aGVyIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlLlxuXG4gIGZ1bmN0aW9uIHRlc3RQcm9wcyhwcm9wcywgcHJlZml4ZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG4gICAgc2tpcFZhbHVlVGVzdCA9IGlzKHNraXBWYWx1ZVRlc3QsICd1bmRlZmluZWQnKSA/IGZhbHNlIDogc2tpcFZhbHVlVGVzdDtcblxuICAgIC8vIFRyeSBuYXRpdmUgZGV0ZWN0IGZpcnN0XG4gICAgaWYgKCFpcyh2YWx1ZSwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmF0aXZlVGVzdFByb3BzKHByb3BzLCB2YWx1ZSk7XG4gICAgICBpZiAoIWlzKHJlc3VsdCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlIGRvIGl0IHByb3Blcmx5XG4gICAgdmFyIGFmdGVySW5pdCwgaSwgcHJvcHNMZW5ndGgsIHByb3AsIGJlZm9yZTtcblxuICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBzdHlsZSBlbGVtZW50LCB0aGF0IG1lYW5zIHdlJ3JlIHJ1bm5pbmcgYXN5bmMgb3IgYWZ0ZXJcbiAgICAvLyB0aGUgY29yZSB0ZXN0cywgc28gd2UnbGwgbmVlZCB0byBjcmVhdGUgb3VyIG93biBlbGVtZW50cyB0byB1c2VcblxuICAgIC8vIGluc2lkZSBvZiBhbiBTVkcgZWxlbWVudCwgaW4gY2VydGFpbiBicm93c2VycywgdGhlIGBzdHlsZWAgZWxlbWVudCBpcyBvbmx5XG4gICAgLy8gZGVmaW5lZCBmb3IgdmFsaWQgdGFncy4gVGhlcmVmb3JlLCBpZiBgbW9kZXJuaXpyYCBkb2VzIG5vdCBoYXZlIG9uZSwgd2VcbiAgICAvLyBmYWxsIGJhY2sgdG8gYSBsZXNzIHVzZWQgZWxlbWVudCBhbmQgaG9wZSBmb3IgdGhlIGJlc3QuXG4gICAgdmFyIGVsZW1zID0gWydtb2Rlcm5penInLCAndHNwYW4nXTtcbiAgICB3aGlsZSAoIW1TdHlsZS5zdHlsZSkge1xuICAgICAgYWZ0ZXJJbml0ID0gdHJ1ZTtcbiAgICAgIG1TdHlsZS5tb2RFbGVtID0gY3JlYXRlRWxlbWVudChlbGVtcy5zaGlmdCgpKTtcbiAgICAgIG1TdHlsZS5zdHlsZSA9IG1TdHlsZS5tb2RFbGVtLnN0eWxlO1xuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0aGUgb2JqZWN0cyBpZiB3ZSBjcmVhdGVkIHRoZW0uXG4gICAgZnVuY3Rpb24gY2xlYW5FbGVtcygpIHtcbiAgICAgIGlmIChhZnRlckluaXQpIHtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5zdHlsZTtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5tb2RFbGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wc0xlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBiZWZvcmUgPSBtU3R5bGUuc3R5bGVbcHJvcF07XG5cbiAgICAgIGlmIChjb250YWlucyhwcm9wLCAnLScpKSB7XG4gICAgICAgIHByb3AgPSBjc3NUb0RPTShwcm9wKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1TdHlsZS5zdHlsZVtwcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgLy8gSWYgdmFsdWUgdG8gdGVzdCBoYXMgYmVlbiBwYXNzZWQgaW4sIGRvIGEgc2V0LWFuZC1jaGVjayB0ZXN0LlxuICAgICAgICAvLyAwIChpbnRlZ2VyKSBpcyBhIHZhbGlkIHByb3BlcnR5IHZhbHVlLCBzbyBjaGVjayB0aGF0IGB2YWx1ZWAgaXNuJ3RcbiAgICAgICAgLy8gdW5kZWZpbmVkLCByYXRoZXIgdGhhbiBqdXN0IGNoZWNraW5nIGl0J3MgdHJ1dGh5LlxuICAgICAgICBpZiAoIXNraXBWYWx1ZVRlc3QgJiYgIWlzKHZhbHVlLCAndW5kZWZpbmVkJykpIHtcblxuICAgICAgICAgIC8vIE5lZWRzIGEgdHJ5IGNhdGNoIGJsb2NrIGJlY2F1c2Ugb2Ygb2xkIElFLiBUaGlzIGlzIHNsb3csIGJ1dCB3aWxsXG4gICAgICAgICAgLy8gYmUgYXZvaWRlZCBpbiBtb3N0IGNhc2VzIGJlY2F1c2UgYHNraXBWYWx1ZVRlc3RgIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbVN0eWxlLnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBoYXMgY2hhbmdlZCwgd2UgYXNzdW1lIHRoZSB2YWx1ZSB1c2VkIGlzXG4gICAgICAgICAgLy8gc3VwcG9ydGVkLiBJZiBgdmFsdWVgIGlzIGVtcHR5IHN0cmluZywgaXQnbGwgZmFpbCBoZXJlIChiZWNhdXNlXG4gICAgICAgICAgLy8gaXQgaGFzbid0IGNoYW5nZWQpLCB3aGljaCBtYXRjaGVzIGhvdyBicm93c2VycyBoYXZlIGltcGxlbWVudGVkXG4gICAgICAgICAgLy8gQ1NTLnN1cHBvcnRzKClcbiAgICAgICAgICBpZiAobVN0eWxlLnN0eWxlW3Byb3BdICE9IGJlZm9yZSkge1xuICAgICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVkID09ICdwZngnID8gcHJvcCA6IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IHJldHVybiB0cnVlLCBvciB0aGUgcHJvcGVydHkgbmFtZSBpZiB0aGlzIGlzIGFcbiAgICAgICAgLy8gYHByZWZpeGVkKClgIGNhbGxcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgIHJldHVybiBwcmVmaXhlZCA9PSAncGZ4JyA/IHByb3AgOiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNsZWFuRWxlbXMoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHRlc3RQcm9wKCkgaW52ZXN0aWdhdGVzIHdoZXRoZXIgYSBnaXZlbiBzdHlsZSBwcm9wZXJ0eSBpcyByZWNvZ25pemVkXG4gICAqIFByb3BlcnR5IG5hbWVzIGNhbiBiZSBwcm92aWRlZCBpbiBlaXRoZXIgY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2UuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnRlc3RQcm9wXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci50ZXN0UHJvcCgpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RQcm9wXG4gICAqIEBmdW5jdGlvbiB0ZXN0UHJvcFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIE5hbWUgb2YgdGhlIENTUyBwcm9wZXJ0eSB0byBjaGVja1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSAtIE5hbWUgb2YgdGhlIENTUyB2YWx1ZSB0byBjaGVja1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt1c2VWYWx1ZV0gLSBXaGV0aGVyIG9yIG5vdCB0byBjaGVjayB0aGUgdmFsdWUgaWYgQHN1cHBvcnRzIGlzbid0IHN1cHBvcnRlZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSnVzdCBsaWtlIFt0ZXN0QWxsUHJvcHNdKCNtb2Rlcm5penItdGVzdGFsbHByb3BzKSwgb25seSBpdCBkb2VzIG5vdCBjaGVjayBhbnkgdmVuZG9yIHByZWZpeGVkXG4gICAqIHZlcnNpb24gb2YgdGhlIHN0cmluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IHRoZSBwcm9wZXJ0eSBuYW1lIG11c3QgYmUgcHJvdmlkZWQgaW4gY2FtZWxDYXNlIChlLmcuIGJveFNpemluZyBub3QgYm94LXNpemluZylcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RQcm9wKCdwb2ludGVyRXZlbnRzJykgIC8vIHRydWVcbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGEgdmFsdWUgYXMgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHRvIGNoZWNrIGlmIGFcbiAgICogc3BlY2lmaWMgdmFsdWUgaXMgc3VwcG9ydGVkXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0UHJvcCgncG9pbnRlckV2ZW50cycsICdub25lJykgLy8gdHJ1ZVxuICAgKiBNb2Rlcm5penIudGVzdFByb3AoJ3BvaW50ZXJFdmVudHMnLCAncGVuZ3VpbicpIC8vIGZhbHNlXG4gICAqIGBgYFxuICAgKi9cblxuICB2YXIgdGVzdFByb3AgPSBNb2Rlcm5penJQcm90by50ZXN0UHJvcCA9IGZ1bmN0aW9uKHByb3AsIHZhbHVlLCB1c2VWYWx1ZSkge1xuICAgIHJldHVybiB0ZXN0UHJvcHMoW3Byb3BdLCB1bmRlZmluZWQsIHZhbHVlLCB1c2VWYWx1ZSk7XG4gIH07XG4gIFxuXG4gIC8qKlxuICAgKiB0ZXN0UHJvcHNBbGwgdGVzdHMgYSBsaXN0IG9mIERPTSBwcm9wZXJ0aWVzIHdlIHdhbnQgdG8gY2hlY2sgYWdhaW5zdC5cbiAgICogV2Ugc3BlY2lmeSBsaXRlcmFsbHkgQUxMIHBvc3NpYmxlIChrbm93biBhbmQvb3IgbGlrZWx5KSBwcm9wZXJ0aWVzIG9uXG4gICAqIHRoZSBlbGVtZW50IGluY2x1ZGluZyB0aGUgbm9uLXZlbmRvciBwcmVmaXhlZCBvbmUsIGZvciBmb3J3YXJkLVxuICAgKiBjb21wYXRpYmlsaXR5LlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHRlc3RQcm9wc0FsbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIEEgc3RyaW5nIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IFtwcmVmaXhlZF0gLSBBbiBvYmplY3QgdG8gY2hlY2sgdGhlIHByZWZpeGVkIHByb3BlcnRpZXMgb24uIFVzZSBhIHN0cmluZyB0byBza2lwXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gW2VsZW1dIC0gQW4gZWxlbWVudCB1c2VkIHRvIHRlc3QgdGhlIHByb3BlcnR5IGFuZCB2YWx1ZSBhZ2FpbnN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIC0gQSBzdHJpbmcgb2YgYSBjc3MgdmFsdWVcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFZhbHVlVGVzdF0gLSBBbiBib29sZWFuIHJlcHJlc2VudGluZyBpZiB5b3Ugd2FudCB0byB0ZXN0IGlmIHZhbHVlIHN0aWNrcyB3aGVuIHNldFxuICAgKi9cbiAgZnVuY3Rpb24gdGVzdFByb3BzQWxsKHByb3AsIHByZWZpeGVkLCBlbGVtLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuXG4gICAgdmFyIHVjUHJvcCA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpLFxuICAgIHByb3BzID0gKHByb3AgKyAnICcgKyBjc3NvbVByZWZpeGVzLmpvaW4odWNQcm9wICsgJyAnKSArIHVjUHJvcCkuc3BsaXQoJyAnKTtcblxuICAgIC8vIGRpZCB0aGV5IGNhbGwgLnByZWZpeGVkKCdib3hTaXppbmcnKSBvciBhcmUgd2UganVzdCB0ZXN0aW5nIGEgcHJvcD9cbiAgICBpZiAoaXMocHJlZml4ZWQsICdzdHJpbmcnKSB8fCBpcyhwcmVmaXhlZCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICByZXR1cm4gdGVzdFByb3BzKHByb3BzLCBwcmVmaXhlZCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpO1xuXG4gICAgICAvLyBvdGhlcndpc2UsIHRoZXkgY2FsbGVkIC5wcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93WywgZWxlbV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHByb3BzID0gKHByb3AgKyAnICcgKyAoZG9tUHJlZml4ZXMpLmpvaW4odWNQcm9wICsgJyAnKSArIHVjUHJvcCkuc3BsaXQoJyAnKTtcbiAgICAgIHJldHVybiB0ZXN0RE9NUHJvcHMocHJvcHMsIHByZWZpeGVkLCBlbGVtKTtcbiAgICB9XG4gIH1cblxuICAvLyBNb2Rlcm5penIudGVzdEFsbFByb3BzKCkgaW52ZXN0aWdhdGVzIHdoZXRoZXIgYSBnaXZlbiBzdHlsZSBwcm9wZXJ0eSxcbiAgLy8gb3IgYW55IG9mIGl0cyB2ZW5kb3ItcHJlZml4ZWQgdmFyaWFudHMsIGlzIHJlY29nbml6ZWRcbiAgLy9cbiAgLy8gTm90ZSB0aGF0IHRoZSBwcm9wZXJ0eSBuYW1lcyBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSBjYW1lbENhc2UgdmFyaWFudC5cbiAgLy8gTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygnYm94U2l6aW5nJylcbiAgTW9kZXJuaXpyUHJvdG8udGVzdEFsbFByb3BzID0gdGVzdFByb3BzQWxsO1xuXG4gIFxuXG4gIC8qKlxuICAgKiBwcmVmaXhlZCByZXR1cm5zIHRoZSBwcmVmaXhlZCBvciBub25wcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIHZhcmlhbnQgb2YgeW91ciBpbnB1dFxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5wcmVmaXhlZFxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIucHJlZml4ZWQoKVxuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlZFxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gcHJlZml4ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvYmpdIC0gQW4gb2JqZWN0IHRvIHRlc3QgZm9yIHRoZSBwcmVmaXhlZCBwcm9wZXJ0aWVzIG9uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtlbGVtXSAtIEFuIGVsZW1lbnQgdXNlZCB0byB0ZXN0IHNwZWNpZmljIHByb3BlcnRpZXMgYWdhaW5zdFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKSB2YWxpZFxuICAgKiB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBNb2Rlcm5penIucHJlZml4ZWQgdGFrZXMgYSBzdHJpbmcgY3NzIHZhbHVlIGluIHRoZSBET00gc3R5bGUgY2FtZWxDYXNlIChhc1xuICAgKiBvcHBvc2VkIHRvIHRoZSBjc3Mgc3R5bGUga2ViYWItY2FzZSkgZm9ybSBhbmQgcmV0dXJucyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2ZXJzaW9uIG9mIHRoYXQgcHJvcGVydHkgdGhhdCB0aGUgYnJvd3NlciBhY3R1YWxseSBzdXBwb3J0cy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGluIG9sZGVyIEZpcmVmb3guLi5cbiAgICogYGBganNcbiAgICogcHJlZml4ZWQoJ2JveFNpemluZycpXG4gICAqIGBgYFxuICAgKiByZXR1cm5zICdNb3pCb3hTaXppbmcnXG4gICAqXG4gICAqIEluIG5ld2VyIEZpcmVmb3gsIGFzIHdlbGwgYXMgYW55IG90aGVyIGJyb3dzZXIgdGhhdCBzdXBwb3J0IHRoZSB1bnByZWZpeGVkXG4gICAqIHZlcnNpb24gd291bGQgc2ltcGx5IHJldHVybiBgYm94U2l6aW5nYC4gQW55IGJyb3dzZXIgdGhhdCBkb2VzIG5vdCBzdXBwb3J0XG4gICAqIHRoZSBwcm9wZXJ0eSBhdCBhbGwsIGl0IHdpbGwgcmV0dXJuIGBmYWxzZWAuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHByZWZpeGVkIGlzIGNoZWNrZWQgYWdhaW5zdCBhIERPTSBlbGVtZW50LiBJZiB5b3Ugd2FudCB0byBjaGVja1xuICAgKiBmb3IgYSBwcm9wZXJ0eSBvbiBhbm90aGVyIG9iamVjdCwganVzdCBwYXNzIGl0IGFzIGEgc2Vjb25kIGFyZ3VtZW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciByQUYgPSBwcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93KTtcbiAgICpcbiAgICogcmFmKGZ1bmN0aW9uKCkge1xuICAgKiAgcmVuZGVyRnVuY3Rpb24oKTtcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIF90aGUgYWN0dWFsIGZ1bmN0aW9uXyAtIG5vdCB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqIElmIHlvdSBuZWVkIHRoZSBhY3R1YWwgbmFtZSBvZiB0aGUgcHJvcGVydHksIHBhc3MgaW4gYGZhbHNlYCBhcyBhIHRoaXJkIGFyZ3VtZW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciByQUZQcm9wID0gcHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvdywgZmFsc2UpO1xuICAgKlxuICAgKiByYWZQcm9wID09PSAnV2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lJyAvLyBpbiBvbGRlciB3ZWJraXRcbiAgICogYGBgXG4gICAqXG4gICAqIE9uZSBjb21tb24gdXNlIGNhc2UgZm9yIHByZWZpeGVkIGlzIGlmIHlvdSdyZSB0cnlpbmcgdG8gZGV0ZXJtaW5lIHdoaWNoIHRyYW5zaXRpb25cbiAgICogZW5kIGV2ZW50IHRvIGJpbmQgdG8sIHlvdSBtaWdodCBkbyBzb21ldGhpbmcgbGlrZS4uLlxuICAgKiBgYGBqc1xuICAgKiB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xuICAgKiAgICAgJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCAqIFNhZiA2LCBBbmRyb2lkIEJyb3dzZXJcbiAgICogICAgICdNb3pUcmFuc2l0aW9uJyAgICA6ICd0cmFuc2l0aW9uZW5kJywgICAgICAgKiBvbmx5IGZvciBGRiA8IDE1XG4gICAqICAgICAndHJhbnNpdGlvbicgICAgICAgOiAndHJhbnNpdGlvbmVuZCcgICAgICAgICogSUUxMCwgT3BlcmEsIENocm9tZSwgRkYgMTUrLCBTYWYgNytcbiAgICogfTtcbiAgICpcbiAgICogdmFyIHRyYW5zRW5kRXZlbnROYW1lID0gdHJhbnNFbmRFdmVudE5hbWVzWyBNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zaXRpb24nKSBdO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91IHdhbnQgYSBzaW1pbGFyIGxvb2t1cCwgYnV0IGluIGtlYmFiLWNhc2UsIHlvdSBjYW4gdXNlIFtwcmVmaXhlZENTU10oI21vZGVybml6ci1wcmVmaXhlZGNzcykuXG4gICAqL1xuXG4gIHZhciBwcmVmaXhlZCA9IE1vZGVybml6clByb3RvLnByZWZpeGVkID0gZnVuY3Rpb24ocHJvcCwgb2JqLCBlbGVtKSB7XG4gICAgaWYgKHByb3AuaW5kZXhPZignQCcpID09PSAwKSB7XG4gICAgICByZXR1cm4gYXRSdWxlKHByb3ApO1xuICAgIH1cblxuICAgIGlmIChwcm9wLmluZGV4T2YoJy0nKSAhPSAtMSkge1xuICAgICAgLy8gQ29udmVydCBrZWJhYi1jYXNlIHRvIGNhbWVsQ2FzZVxuICAgICAgcHJvcCA9IGNzc1RvRE9NKHByb3ApO1xuICAgIH1cbiAgICBpZiAoIW9iaikge1xuICAgICAgcmV0dXJuIHRlc3RQcm9wc0FsbChwcm9wLCAncGZ4Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3RpbmcgRE9NIHByb3BlcnR5IGUuZy4gTW9kZXJuaXpyLnByZWZpeGVkKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCB3aW5kb3cpIC8vICdtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXG4gICAgICByZXR1cm4gdGVzdFByb3BzQWxsKHByb3AsIG9iaiwgZWxlbSk7XG4gICAgfVxuICB9O1xuXG4gIFxuXG4gIC8qKlxuICAgKiBwcmVmaXhlZENTUyBpcyBqdXN0IGxpa2UgW3ByZWZpeGVkXSgjbW9kZXJuaXpyLXByZWZpeGVkKSwgYnV0IHRoZSByZXR1cm5lZCB2YWx1ZXMgYXJlIGluXG4gICAqIGtlYmFiLWNhc2UgKGUuZy4gYGJveC1zaXppbmdgKSByYXRoZXIgdGhhbiBjYW1lbENhc2UgKGJveFNpemluZykuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnByZWZpeGVkQ1NTXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5wcmVmaXhlZENTUygpXG4gICAqIEBvcHRpb25Qcm9wIHByZWZpeGVkQ1NTXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBwcmVmaXhlZENTU1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2YWxpZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnByZWZpeGVkQ1NTYCBpcyBsaWtlIGBNb2Rlcm5penIucHJlZml4ZWRgLCBidXQgcmV0dXJucyB0aGUgcmVzdWx0XG4gICAqIGluIGh5cGhlbmF0ZWQgZm9ybVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIucHJlZml4ZWRDU1MoJ3RyYW5zaXRpb24nKSAvLyAnLW1vei10cmFuc2l0aW9uJyBpbiBvbGQgRmlyZWZveFxuICAgKiBgYGBcbiAgICpcbiAgICogU2luY2UgaXQgaXMgb25seSB1c2VmdWwgZm9yIENTUyBzdHlsZSBwcm9wZXJ0aWVzLCBpdCBjYW4gb25seSBiZSB0ZXN0ZWQgYWdhaW5zdFxuICAgKiBhbiBIVE1MRWxlbWVudC5cbiAgICpcbiAgICogUHJvcGVydGllcyBjYW4gYmUgcGFzc2VkIGFzIGJvdGggdGhlIERPTSBzdHlsZSBjYW1lbENhc2Ugb3IgQ1NTIHN0eWxlIGtlYmFiLWNhc2UuXG4gICAqL1xuXG4gIHZhciBwcmVmaXhlZENTUyA9IE1vZGVybml6clByb3RvLnByZWZpeGVkQ1NTID0gZnVuY3Rpb24ocHJvcCkge1xuICAgIHZhciBwcmVmaXhlZFByb3AgPSBwcmVmaXhlZChwcm9wKTtcbiAgICByZXR1cm4gcHJlZml4ZWRQcm9wICYmIGRvbVRvQ1NTKHByZWZpeGVkUHJvcCk7XG4gIH07XG4gIFxuXG4gIC8qKlxuICAgKiB0ZXN0QWxsUHJvcHMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBpbiB0aGUgYnJvd3NlclxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci50ZXN0QWxsUHJvcHNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RBbGxQcm9wc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gdGVzdEFsbFByb3BzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWluZyB0aGUgcHJvcGVydHkgdG8gdGVzdCAoZWl0aGVyIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSAtIFN0cmluZyBvZiB0aGUgdmFsdWUgdG8gdGVzdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwVmFsdWVUZXN0PWZhbHNlXSAtIFdoZXRoZXIgdG8gc2tpcCB0ZXN0aW5nIHRoYXQgdGhlIHZhbHVlIGlzIHN1cHBvcnRlZCB3aGVuIHVzaW5nIG5vbi1uYXRpdmUgZGV0ZWN0aW9uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHRlc3RBbGxQcm9wcyBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBDU1MgcHJvcGVydHksIGluIHNvbWUgcHJlZml4ZWQgZm9ybSxcbiAgICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0ZXN0QWxsUHJvcHMoJ2JveFNpemluZycpICAvLyB0cnVlXG4gICAqIGBgYFxuICAgKlxuICAgKiBJdCBjYW4gb3B0aW9uYWxseSBiZSBnaXZlbiBhIENTUyB2YWx1ZSBpbiBzdHJpbmcgZm9ybSB0byB0ZXN0IGlmIGEgcHJvcGVydHlcbiAgICogdmFsdWUgaXMgdmFsaWRcbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdkaXNwbGF5JywgJ2Jsb2NrJykgLy8gdHJ1ZVxuICAgKiB0ZXN0QWxsUHJvcHMoJ2Rpc3BsYXknLCAncGVuZ3VpbicpIC8vIGZhbHNlXG4gICAqIGBgYFxuICAgKlxuICAgKiBBIGJvb2xlYW4gY2FuIGJlIHBhc3NlZCBhcyBhIHRoaXJkIHBhcmFtZXRlciB0byBza2lwIHRoZSB2YWx1ZSBjaGVjayB3aGVuXG4gICAqIG5hdGl2ZSBkZXRlY3Rpb24gKEBzdXBwb3J0cykgaXNuJ3QgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0ZXN0QWxsUHJvcHMoJ3NoYXBlT3V0c2lkZScsICdjb250ZW50LWJveCcsIHRydWUpO1xuICAgKiBgYGBcbiAgICovXG5cbiAgZnVuY3Rpb24gdGVzdEFsbFByb3BzKHByb3AsIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG4gICAgcmV0dXJuIHRlc3RQcm9wc0FsbChwcm9wLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpO1xuICB9XG4gIE1vZGVybml6clByb3RvLnRlc3RBbGxQcm9wcyA9IHRlc3RBbGxQcm9wcztcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zZm9ybXNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNzc3RyYW5zZm9ybXNcIixcbiAgXCJjYW5pdXNlXCI6IFwidHJhbnNmb3JtczJkXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3N0cmFuc2Zvcm1zJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gQW5kcm9pZCA8IDMuMCBpcyBidWdneSwgc28gd2Ugc25pZmYgYW5kIGJsYWNrbGlzdFxuICAgIC8vIGh0dHA6Ly9naXQuaW8vaEh6TDd3XG4gICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCAyLicpID09PSAtMSAmJlxuICAgICAgICAgICB0ZXN0QWxsUHJvcHMoJ3RyYW5zZm9ybScsICdzY2FsZSgxKScsIHRydWUpO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBUcmFuc2Zvcm1zIDNEXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2Zvcm1zM2RcIixcbiAgXCJjYW5pdXNlXCI6IFwidHJhbnNmb3JtczNkXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl0sXG4gIFwid2FybmluZ3NcIjogW1xuICAgIFwiQ2hyb21lIG1heSBvY2Nhc3Npb25hbGx5IGZhaWwgdGhpcyB0ZXN0IG9uIHNvbWUgc3lzdGVtczsgbW9yZSBpbmZvOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTI5MDA0XCJcbiAgXVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zZm9ybXMzZCcsIGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSAhIXRlc3RBbGxQcm9wcygncGVyc3BlY3RpdmUnLCAnMXB4JywgdHJ1ZSk7XG4gICAgdmFyIHVzZVByZWZpeCA9IE1vZGVybml6ci5fY29uZmlnLnVzZVByZWZpeGVzO1xuXG4gICAgLy8gV2Via2l0J3MgM0QgdHJhbnNmb3JtcyBhcmUgcGFzc2VkIG9mZiB0byB0aGUgYnJvd3NlcidzIG93biBncmFwaGljcyByZW5kZXJlci5cbiAgICAvLyAgIEl0IHdvcmtzIGZpbmUgaW4gU2FmYXJpIG9uIExlb3BhcmQgYW5kIFNub3cgTGVvcGFyZCwgYnV0IG5vdCBpbiBDaHJvbWUgaW5cbiAgICAvLyAgIHNvbWUgY29uZGl0aW9ucy4gQXMgYSByZXN1bHQsIFdlYmtpdCB0eXBpY2FsbHkgcmVjb2duaXplcyB0aGUgc3ludGF4IGJ1dFxuICAgIC8vICAgd2lsbCBzb21ldGltZXMgdGhyb3cgYSBmYWxzZSBwb3NpdGl2ZSwgdGh1cyB3ZSBtdXN0IGRvIGEgbW9yZSB0aG9yb3VnaCBjaGVjazpcbiAgICBpZiAocmV0ICYmICghdXNlUHJlZml4IHx8ICd3ZWJraXRQZXJzcGVjdGl2ZScgaW4gZG9jRWxlbWVudC5zdHlsZSkpIHtcbiAgICAgIHZhciBtcTtcbiAgICAgIHZhciBkZWZhdWx0U3R5bGUgPSAnI21vZGVybml6cnt3aWR0aDowO2hlaWdodDowfSc7XG4gICAgICAvLyBVc2UgQ1NTIENvbmRpdGlvbmFsIFJ1bGVzIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKE1vZGVybml6ci5zdXBwb3J0cykge1xuICAgICAgICBtcSA9ICdAc3VwcG9ydHMgKHBlcnNwZWN0aXZlOiAxcHgpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgV2Via2l0IGFsbG93cyB0aGlzIG1lZGlhIHF1ZXJ5IHRvIHN1Y2NlZWQgb25seSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkLlxuICAgICAgICAvLyBgQG1lZGlhICh0cmFuc2Zvcm0tM2QpLCgtd2Via2l0LXRyYW5zZm9ybS0zZCl7IC4uLiB9YFxuICAgICAgICBtcSA9ICdAbWVkaWEgKHRyYW5zZm9ybS0zZCknO1xuICAgICAgICBpZiAodXNlUHJlZml4KSB7XG4gICAgICAgICAgbXEgKz0gJywoLXdlYmtpdC10cmFuc2Zvcm0tM2QpJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtcSArPSAneyNtb2Rlcm5penJ7d2lkdGg6N3B4O2hlaWdodDoxOHB4O21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MH19JztcblxuICAgICAgdGVzdFN0eWxlcyhkZWZhdWx0U3R5bGUgKyBtcSwgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICByZXQgPSBlbGVtLm9mZnNldFdpZHRoID09PSA3ICYmIGVsZW0ub2Zmc2V0SGVpZ2h0ID09PSAxODtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zaXRpb25zXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2l0aW9uc1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtdHJhbnNpdGlvbnNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zaXRpb25zJywgdGVzdEFsbFByb3BzKCd0cmFuc2l0aW9uJywgJ2FsbCcsIHRydWUpKTtcblxuXG4gIC8qKlxuICAgKiBoYXNPd25Qcm9wIGlzIGEgc2hpbSBmb3IgaGFzT3duUHJvcGVydHkgdGhhdCBpcyBuZWVkZWQgZm9yIFNhZmFyaSAyLjAgc3VwcG9ydFxuICAgKlxuICAgKiBAYXV0aG9yIGthbmdheFxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGhhc093blByb3BcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCAtIFRoZSBvYmplY3QgdG8gY2hlY2sgZm9yIGEgcHJvcGVydHlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IC0gVGhlIHByb3BlcnR5IHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgLy8gaGFzT3duUHJvcGVydHkgc2hpbSBieSBrYW5nYXggbmVlZGVkIGZvciBTYWZhcmkgMi4wIHN1cHBvcnRcbiAgdmFyIGhhc093blByb3A7XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBfaGFzT3duUHJvcGVydHkgPSAoe30pLmhhc093blByb3BlcnR5O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgLyogd2UgaGF2ZSBubyB3YXkgb2YgdGVzdGluZyBJRSA1LjUgb3Igc2FmYXJpIDIsXG4gICAgICogc28ganVzdCBhc3N1bWUgdGhlIGVsc2UgZ2V0cyBoaXQgKi9cbiAgICBpZiAoIWlzKF9oYXNPd25Qcm9wZXJ0eSwgJ3VuZGVmaW5lZCcpICYmICFpcyhfaGFzT3duUHJvcGVydHkuY2FsbCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICBoYXNPd25Qcm9wID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgICAgICByZXR1cm4gX2hhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhhc093blByb3AgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IC8qIHllcywgdGhpcyBjYW4gZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMvbmVnYXRpdmVzLCBidXQgbW9zdCBvZiB0aGUgdGltZSB3ZSBkb24ndCBjYXJlIGFib3V0IHRob3NlICovXG4gICAgICAgIHJldHVybiAoKHByb3BlcnR5IGluIG9iamVjdCkgJiYgaXMob2JqZWN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZVtwcm9wZXJ0eV0sICd1bmRlZmluZWQnKSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSkoKTtcblxuICBcblxuXG4gICAvLyBfbCB0cmFja3MgbGlzdGVuZXJzIGZvciBhc3luYyB0ZXN0cywgYXMgd2VsbCBhcyB0ZXN0cyB0aGF0IGV4ZWN1dGUgYWZ0ZXIgdGhlIGluaXRpYWwgcnVuXG4gIE1vZGVybml6clByb3RvLl9sID0ge307XG5cbiAgLyoqXG4gICAqIE1vZGVybml6ci5vbiBpcyBhIHdheSB0byBsaXN0ZW4gZm9yIHRoZSBjb21wbGV0aW9uIG9mIGFzeW5jIHRlc3RzLiBCZWluZ1xuICAgKiBhc3luY2hyb25vdXMsIHRoZXkgbWF5IG5vdCBmaW5pc2ggYmVmb3JlIHlvdXIgc2NyaXB0cyBydW4uIEFzIGEgcmVzdWx0IHlvdVxuICAgKiB3aWxsIGdldCBhIHBvc3NpYmx5IGZhbHNlIG5lZ2F0aXZlIGB1bmRlZmluZWRgIHZhbHVlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5vblxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBTdHJpbmcgbmFtZSBvZiB0aGUgZmVhdHVyZSBkZXRlY3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgLSBDYWxsYmFjayBmdW5jdGlvbiByZXR1cm5pbmcgYSBCb29sZWFuIC0gdHJ1ZSBpZiBmZWF0dXJlIGlzIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90XG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5vbignZmxhc2gnLCBmdW5jdGlvbiggcmVzdWx0ICkge1xuICAgKiAgIGlmIChyZXN1bHQpIHtcbiAgICogICAgLy8gdGhlIGJyb3dzZXIgaGFzIGZsYXNoXG4gICAqICAgfSBlbHNlIHtcbiAgICogICAgIC8vIHRoZSBicm93c2VyIGRvZXMgbm90IGhhdmUgZmxhc2hcbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG5cbiAgTW9kZXJuaXpyUHJvdG8ub24gPSBmdW5jdGlvbihmZWF0dXJlLCBjYikge1xuICAgIC8vIENyZWF0ZSB0aGUgbGlzdCBvZiBsaXN0ZW5lcnMgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghdGhpcy5fbFtmZWF0dXJlXSkge1xuICAgICAgdGhpcy5fbFtmZWF0dXJlXSA9IFtdO1xuICAgIH1cblxuICAgIC8vIFB1c2ggdGhpcyB0ZXN0IG9uIHRvIHRoZSBsaXN0ZW5lciBsaXN0XG4gICAgdGhpcy5fbFtmZWF0dXJlXS5wdXNoKGNiKTtcblxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBiZWVuIHJlc29sdmVkLCB0cmlnZ2VyIGl0IG9uIG5leHQgdGlja1xuICAgIGlmIChNb2Rlcm5penIuaGFzT3duUHJvcGVydHkoZmVhdHVyZSkpIHtcbiAgICAgIC8vIE5leHQgVGlja1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgTW9kZXJuaXpyLl90cmlnZ2VyKGZlYXR1cmUsIE1vZGVybml6cltmZWF0dXJlXSk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIF90cmlnZ2VyIGlzIHRoZSBwcml2YXRlIGZ1bmN0aW9uIHVzZWQgdG8gc2lnbmFsIHRlc3QgY29tcGxldGlvbiBhbmQgcnVuIGFueVxuICAgKiBjYWxsYmFja3MgcmVnaXN0ZXJlZCB0aHJvdWdoIFtNb2Rlcm5penIub25dKCNtb2Rlcm5penItb24pXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl90cmlnZ2VyXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gX3RyaWdnZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgbmFtZSBvZiB0aGUgZmVhdHVyZSBkZXRlY3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFufSBbcmVzXSAtIEEgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb24sIG9yIHRoZSBib29sZWFuID1cbiAgICogcmVzdWx0IG9mIGEgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb25cbiAgICovXG5cbiAgTW9kZXJuaXpyUHJvdG8uX3RyaWdnZXIgPSBmdW5jdGlvbihmZWF0dXJlLCByZXMpIHtcbiAgICBpZiAoIXRoaXMuX2xbZmVhdHVyZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY2JzID0gdGhpcy5fbFtmZWF0dXJlXTtcblxuICAgIC8vIEZvcmNlIGFzeW5jXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBjYjtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2IgPSBjYnNbaV07XG4gICAgICAgIGNiKHJlcyk7XG4gICAgICB9XG4gICAgfSwgMCk7XG5cbiAgICAvLyBEb24ndCB0cmlnZ2VyIHRoZXNlIGFnYWluXG4gICAgZGVsZXRlIHRoaXMuX2xbZmVhdHVyZV07XG4gIH07XG5cbiAgLyoqXG4gICAqIGFkZFRlc3QgYWxsb3dzIHlvdSB0byBkZWZpbmUgeW91ciBvd24gZmVhdHVyZSBkZXRlY3RzIHRoYXQgYXJlIG5vdCBjdXJyZW50bHlcbiAgICogaW5jbHVkZWQgaW4gTW9kZXJuaXpyICh1bmRlciB0aGUgY292ZXJzIGl0J3MgdGhlIGV4YWN0IHNhbWUgY29kZSBNb2Rlcm5penJcbiAgICogdXNlcyBmb3IgaXRzIG93biBbZmVhdHVyZSBkZXRlY3Rpb25zXShodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci90cmVlL21hc3Rlci9mZWF0dXJlLWRldGVjdHMpKS4gSnVzdCBsaWtlIHRoZSBvZmZpY2FsIGRldGVjdHMsIHRoZSByZXN1bHRcbiAgICogd2lsbCBiZSBhZGRlZCBvbnRvIHRoZSBNb2Rlcm5penIgb2JqZWN0LCBhcyB3ZWxsIGFzIGFuIGFwcHJvcHJpYXRlIGNsYXNzTmFtZSBzZXQgb25cbiAgICogdGhlIGh0bWwgZWxlbWVudCB3aGVuIGNvbmZpZ3VyZWQgdG8gZG8gc29cbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuYWRkVGVzdFxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuYWRkVGVzdCgpXG4gICAqIEBvcHRpb25Qcm9wIGFkZFRlc3RcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIGFkZFRlc3RcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBmZWF0dXJlIC0gVGhlIHN0cmluZyBuYW1lIG9mIHRoZSBmZWF0dXJlIGRldGVjdCwgb3IgYW5cbiAgICogb2JqZWN0IG9mIGZlYXR1cmUgZGV0ZWN0IG5hbWVzIGFuZCB0ZXN0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbn0gdGVzdCAtIEZ1bmN0aW9uIHJldHVybmluZyB0cnVlIGlmIGZlYXR1cmUgaXMgc3VwcG9ydGVkLFxuICAgKiBmYWxzZSBpZiBub3QuIE90aGVyd2lzZSBhIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgZmVhdHVyZSBkZXRlY3Rpb25cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogVGhlIG1vc3QgY29tbW9uIHdheSBvZiBjcmVhdGluZyB5b3VyIG93biBmZWF0dXJlIGRldGVjdHMgaXMgYnkgY2FsbGluZ1xuICAgKiBgTW9kZXJuaXpyLmFkZFRlc3RgIHdpdGggYSBzdHJpbmcgKHByZWZlcmFibHkganVzdCBsb3dlcmNhc2UsIHdpdGhvdXQgYW55XG4gICAqIHB1bmN0dWF0aW9uKSwgYW5kIGEgZnVuY3Rpb24geW91IHdhbnQgZXhlY3V0ZWQgdGhhdCB3aWxsIHJldHVybiBhIGJvb2xlYW4gcmVzdWx0XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5hZGRUZXN0KCdpdHNUdWVzZGF5JywgZnVuY3Rpb24oKSB7XG4gICAqICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAqICByZXR1cm4gZC5nZXREYXkoKSA9PT0gMjtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBXaGVuIHRoZSBhYm92ZSBpcyBydW4sIGl0IHdpbGwgc2V0IE1vZGVybml6ci5pdHN0dWVzZGF5IHRvIGB0cnVlYCB3aGVuIGl0IGlzIHR1ZXNkYXksXG4gICAqIGFuZCB0byBgZmFsc2VgIGV2ZXJ5IG90aGVyIGRheSBvZiB0aGUgd2Vlay4gT25lIHRoaW5nIHRvIG5vdGljZSBpcyB0aGF0IHRoZSBuYW1lcyBvZlxuICAgKiBmZWF0dXJlIGRldGVjdCBmdW5jdGlvbnMgYXJlIGFsd2F5cyBsb3dlcmNhc2VkIHdoZW4gYWRkZWQgdG8gdGhlIE1vZGVybml6ciBvYmplY3QuIFRoYXRcbiAgICogbWVhbnMgdGhhdCBgTW9kZXJuaXpyLml0c1R1ZXNkYXlgIHdpbGwgbm90IGV4aXN0LCBidXQgYE1vZGVybml6ci5pdHN0dWVzZGF5YCB3aWxsLlxuICAgKlxuICAgKlxuICAgKiAgU2luY2Ugd2Ugb25seSBsb29rIGF0IHRoZSByZXR1cm5lZCB2YWx1ZSBmcm9tIGFueSBmZWF0dXJlIGRldGVjdGlvbiBmdW5jdGlvbixcbiAgICogIHlvdSBkbyBub3QgbmVlZCB0byBhY3R1YWxseSB1c2UgYSBmdW5jdGlvbi4gRm9yIHNpbXBsZSBkZXRlY3Rpb25zLCBqdXN0IHBhc3NpbmdcbiAgICogIGluIGEgc3RhdGVtZW50IHRoYXQgd2lsbCByZXR1cm4gYSBib29sZWFuIHZhbHVlIHdvcmtzIGp1c3QgZmluZS5cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLmFkZFRlc3QoJ2hhc0pxdWVyeScsICdqUXVlcnknIGluIHdpbmRvdyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBKdXN0IGxpa2UgYmVmb3JlLCB3aGVuIHRoZSBhYm92ZSBydW5zIGBNb2Rlcm5penIuaGFzanF1ZXJ5YCB3aWxsIGJlIHRydWUgaWZcbiAgICogalF1ZXJ5IGhhcyBiZWVuIGluY2x1ZGVkIG9uIHRoZSBwYWdlLiBOb3QgdXNpbmcgYSBmdW5jdGlvbiBzYXZlcyBhIHNtYWxsIGFtb3VudFxuICAgKiBvZiBvdmVyaGVhZCBmb3IgdGhlIGJyb3dzZXIsIGFzIHdlbGwgYXMgbWFraW5nIHlvdXIgY29kZSBtdWNoIG1vcmUgcmVhZGFibGUuXG4gICAqXG4gICAqIEZpbmFsbHksIHlvdSBhbHNvIGhhdmUgdGhlIGFiaWxpdHkgdG8gcGFzcyBpbiBhbiBvYmplY3Qgb2YgZmVhdHVyZSBuYW1lcyBhbmRcbiAgICogdGhlaXIgdGVzdHMuIFRoaXMgaXMgaGFuZHkgaWYgeW91IHdhbnQgdG8gYWRkIG11bHRpcGxlIGRldGVjdGlvbnMgaW4gb25lIGdvLlxuICAgKiBUaGUga2V5cyBzaG91bGQgYWx3YXlzIGJlIGEgc3RyaW5nLCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBlaXRoZXIgYSBib29sZWFuIG9yXG4gICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciBkZXRlY3RzID0ge1xuICAgKiAgJ2hhc2pxdWVyeSc6ICdqUXVlcnknIGluIHdpbmRvdyxcbiAgICogICdpdHN0dWVzZGF5JzogZnVuY3Rpb24oKSB7XG4gICAqICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICogICAgcmV0dXJuIGQuZ2V0RGF5KCkgPT09IDI7XG4gICAqICB9XG4gICAqIH1cbiAgICpcbiAgICogTW9kZXJuaXpyLmFkZFRlc3QoZGV0ZWN0cyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGVyZSBpcyByZWFsbHkgbm8gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBmaXJzdCBtZXRob2RzIGFuZCB0aGlzIG9uZSwgaXQgaXNcbiAgICoganVzdCBhIGNvbnZlbmllbmNlIHRvIGxldCB5b3Ugd3JpdGUgbW9yZSByZWFkYWJsZSBjb2RlLlxuICAgKi9cblxuICBmdW5jdGlvbiBhZGRUZXN0KGZlYXR1cmUsIHRlc3QpIHtcblxuICAgIGlmICh0eXBlb2YgZmVhdHVyZSA9PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIGZlYXR1cmUpIHtcbiAgICAgICAgaWYgKGhhc093blByb3AoZmVhdHVyZSwga2V5KSkge1xuICAgICAgICAgIGFkZFRlc3Qoa2V5LCBmZWF0dXJlWyBrZXkgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuXG4gICAgICBmZWF0dXJlID0gZmVhdHVyZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIGZlYXR1cmVOYW1lU3BsaXQgPSBmZWF0dXJlLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgbGFzdCA9IE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXTtcblxuICAgICAgLy8gQWdhaW4sIHdlIGRvbid0IGNoZWNrIGZvciBwYXJlbnQgdGVzdCBleGlzdGVuY2UuIEdldCB0aGF0IHJpZ2h0LCB0aG91Z2guXG4gICAgICBpZiAoZmVhdHVyZU5hbWVTcGxpdC5sZW5ndGggPT0gMikge1xuICAgICAgICBsYXN0ID0gbGFzdFtmZWF0dXJlTmFtZVNwbGl0WzFdXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBsYXN0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIHdlJ3JlIGdvaW5nIHRvIHF1aXQgaWYgeW91J3JlIHRyeWluZyB0byBvdmVyd3JpdGUgYW4gZXhpc3RpbmcgdGVzdFxuICAgICAgICAvLyBpZiB3ZSB3ZXJlIHRvIGFsbG93IGl0LCB3ZSdkIGRvIHRoaXM6XG4gICAgICAgIC8vICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIlxcXFxiKG5vLSk/XCIgKyBmZWF0dXJlICsgXCJcXFxcYlwiKTtcbiAgICAgICAgLy8gICBkb2NFbGVtZW50LmNsYXNzTmFtZSA9IGRvY0VsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoIHJlLCAnJyApO1xuICAgICAgICAvLyBidXQsIG5vIHJseSwgc3R1ZmYgJ2VtLlxuICAgICAgICByZXR1cm4gTW9kZXJuaXpyO1xuICAgICAgfVxuXG4gICAgICB0ZXN0ID0gdHlwZW9mIHRlc3QgPT0gJ2Z1bmN0aW9uJyA/IHRlc3QoKSA6IHRlc3Q7XG5cbiAgICAgIC8vIFNldCB0aGUgdmFsdWUgKHRoaXMgaXMgdGhlIG1hZ2ljLCByaWdodCBoZXJlKS5cbiAgICAgIGlmIChmZWF0dXJlTmFtZVNwbGl0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IHRlc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjYXN0IHRvIGEgQm9vbGVhbiwgaWYgbm90IG9uZSBhbHJlYWR5XG4gICAgICAgIC8qIGpzaGludCAtVzA1MyAqL1xuICAgICAgICBpZiAoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dICYmICEoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dIGluc3RhbmNlb2YgQm9vbGVhbikpIHtcbiAgICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gPSBuZXcgQm9vbGVhbihNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dW2ZlYXR1cmVOYW1lU3BsaXRbMV1dID0gdGVzdDtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IGEgc2luZ2xlIGNsYXNzIChlaXRoZXIgYGZlYXR1cmVgIG9yIGBuby1mZWF0dXJlYClcbiAgICAgIC8qIGpzaGludCAtVzA0MSAqL1xuICAgICAgc2V0Q2xhc3NlcyhbKCEhdGVzdCAmJiB0ZXN0ICE9IGZhbHNlID8gJycgOiAnbm8tJykgKyBmZWF0dXJlTmFtZVNwbGl0LmpvaW4oJy0nKV0pO1xuICAgICAgLyoganNoaW50ICtXMDQxICovXG5cbiAgICAgIC8vIFRyaWdnZXIgdGhlIGV2ZW50XG4gICAgICBNb2Rlcm5penIuX3RyaWdnZXIoZmVhdHVyZSwgdGVzdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1vZGVybml6cjsgLy8gYWxsb3cgY2hhaW5pbmcuXG4gIH1cblxuICAvLyBBZnRlciBhbGwgdGhlIHRlc3RzIGFyZSBydW4sIGFkZCBzZWxmIHRvIHRoZSBNb2Rlcm5penIgcHJvdG90eXBlXG4gIE1vZGVybml6ci5fcS5wdXNoKGZ1bmN0aW9uKCkge1xuICAgIE1vZGVybml6clByb3RvLmFkZFRlc3QgPSBhZGRUZXN0O1xuICB9KTtcblxuICBcblxuLyohXG57XG4gIFwibmFtZVwiOiBcInNpemVzIGF0dHJpYnV0ZVwiLFxuICBcImFzeW5jXCI6IHRydWUsXG4gIFwicHJvcGVydHlcIjogXCJzaXplc1wiLFxuICBcInRhZ3NcIjogW1wiaW1hZ2VcIl0sXG4gIFwiYXV0aG9yc1wiOiBbXCJNYXQgTWFycXVpc1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlNwZWNcIixcbiAgICBcImhyZWZcIjogXCJodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy8jcGFyc2Utc2l6ZXMtYXR0clwiXG4gICAgfSx7XG4gICAgXCJuYW1lXCI6IFwiVXNhZ2UgRGV0YWlsc1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9lcmljcG9ydGlzLmNvbS9wb3N0cy8yMDE0L3NyY3NldC1zaXplcy9cIlxuICAgIH1dXG59XG4hKi9cbi8qIERPQ1xuVGVzdCBmb3IgdGhlIGBzaXplc2AgYXR0cmlidXRlIG9uIGltYWdlc1xuKi9cblxuICBNb2Rlcm5penIuYWRkQXN5bmNUZXN0KGZ1bmN0aW9uKCkge1xuICAgIHZhciB3aWR0aDEsIHdpZHRoMiwgdGVzdDtcbiAgICB2YXIgaW1hZ2UgPSBjcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAvLyBpbiBhIHBlcmZlY3Qgd29ybGQgdGhpcyB3b3VsZCBiZSB0aGUgdGVzdC4uLlxuICAgIHZhciBpc1NpemVzID0gJ3NpemVzJyBpbiBpbWFnZTtcblxuICAgIC8vIC4uLiBidXQgd2UgbmVlZCB0byBkZWFsIHdpdGggU2FmYXJpIDkuLi5cbiAgICBpZiAoIWlzU2l6ZXMgJiYgKCdzcmNzZXQnIGluICBpbWFnZSkpIHtcbiAgICAgIHdpZHRoMiA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBZ0FCQVBBQUFQLy8vd0FBQUNINUJBQUFBQUFBTEFBQUFBQUNBQUVBQUFJQ0JBb0FPdz09JztcbiAgICAgIHdpZHRoMSA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PSc7XG5cbiAgICAgIHRlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYWRkVGVzdCgnc2l6ZXMnLCBpbWFnZS53aWR0aCA9PSAyKTtcbiAgICAgIH07XG5cbiAgICAgIGltYWdlLm9ubG9hZCA9IHRlc3Q7XG4gICAgICBpbWFnZS5vbmVycm9yID0gdGVzdDtcbiAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc2l6ZXMnLCAnOXB4Jyk7XG5cbiAgICAgIGltYWdlLnNyY3NldCA9IHdpZHRoMSArICcgMXcsJyArIHdpZHRoMiArICcgOHcnO1xuICAgICAgaW1hZ2Uuc3JjID0gd2lkdGgxO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRUZXN0KCdzaXplcycsIGlzU2l6ZXMpO1xuICAgIH1cbiAgfSk7XG5cblxuICAvLyBSdW4gZWFjaCB0ZXN0XG4gIHRlc3RSdW5uZXIoKTtcblxuICAvLyBSZW1vdmUgdGhlIFwibm8tanNcIiBjbGFzcyBpZiBpdCBleGlzdHNcbiAgc2V0Q2xhc3NlcyhjbGFzc2VzKTtcblxuICBkZWxldGUgTW9kZXJuaXpyUHJvdG8uYWRkVGVzdDtcbiAgZGVsZXRlIE1vZGVybml6clByb3RvLmFkZEFzeW5jVGVzdDtcblxuICAvLyBSdW4gdGhlIHRoaW5ncyB0aGF0IGFyZSBzdXBwb3NlZCB0byBydW4gYWZ0ZXIgdGhlIHRlc3RzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTW9kZXJuaXpyLl9xLmxlbmd0aDsgaSsrKSB7XG4gICAgTW9kZXJuaXpyLl9xW2ldKCk7XG4gIH1cblxuICAvLyBMZWFrIE1vZGVybml6ciBuYW1lc3BhY2VcbiAgd2luZG93Lk1vZGVybml6ciA9IE1vZGVybml6cjtcblxuXG47XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
