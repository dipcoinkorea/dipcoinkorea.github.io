var Helpers;!function(t){t.GetRectangle=function(t){var e=t.getBoundingClientRect();return{Top:e.top,Right:e.right,Bottom:e.bottom,Left:e.left}},t.IsOutside=function(t,e){return t.Top<=e.Top||t.Left<=e.Left||t.Right>=e.Right||t.Bottom>=e.Bottom},t.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetOutsideDir=function(t,e){var i=[];return t.Top<=e.Top&&i.push(Direction.Top),t.Left<=e.Left&&i.push(Direction.Left),t.Right>=e.Right&&i.push(Direction.Right),t.Bottom>=e.Bottom&&i.push(Direction.Bottom),i}}(Helpers||(Helpers={}));var Direction;!function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"}(Direction||(Direction={}));var HERO_WIDTH=161,HERO_HEIGHT=209,BASESPEED=.3,Hero=function(){function t(t){var e=this;this.Speed=BASESPEED,this.ChangeDir=function(){var t=Helpers.GetRandomInt(0,e._Direction.length-1);e._ChangeDir(t)},this._ChangeDir=function(t){if(!(0>t||t>=e._Direction.length)){var i=e._Direction[t];switch(i){case Direction.Top:e._Direction[t]=Direction.Bottom;break;case Direction.Bottom:e._Direction[t]=Direction.Top;break;case Direction.Left:e._Direction[t]=Direction.Right;break;case Direction.Right:e._Direction[t]=Direction.Left}}},this.Elt=document.createElement("a"),this.Elt.setAttribute("href","home.html"),this.Elt.classList.add("hero"),this.Elt.style.width=HERO_WIDTH+"px",this.Elt.style.height=HERO_HEIGHT+"px",t.appendChild(this.Elt),this.Position={x:50,y:50},this._Direction=[Direction.Top,Direction.Left],this.Move()}return t.prototype.ChangeDirFromCollision=function(t){for(var e=t.length;e--;){var i=t[e],n=this._Direction.indexOf(i);this._ChangeDir(n)}},t.prototype.GoOppositeDir=function(){for(var t=this._Direction.length;t--;)this._ChangeDir(t)},t.prototype.Move=function(){var t=this;this._Direction.forEach(function(e){switch(e){case Direction.Top:t.Position.y=t.Position.y-t.Speed;break;case Direction.Bottom:t.Position.y=t.Position.y+t.Speed;break;case Direction.Left:t.Position.x=t.Position.x-t.Speed;break;case Direction.Right:t.Position.x=t.Position.x+t.Speed}}),this.Elt.style.top=this.Position.y+"%",this.Elt.style.left=this.Position.x+"%"},t}(),Playground;!function(t){var e=document.getElementById("playground");if(e){for(var i=1,n=[],o=Helpers.GetRectangle(e),r=0;i>r;r++)n.push(new Hero(e));var a=function(t){for(var e=0;e<n.length;e++){var i=n[e];i.Move();var r=Helpers.GetRectangle(i.Elt);Helpers.IsOutside(r,o)&&i.ChangeDirFromCollision(Helpers.GetOutsideDir(r,o))}requestAnimationFrame(a)};requestAnimationFrame(a);for(var s=0;s<n.length;s++){var c=n[s];c.Elt.addEventListener("mouseover",function(){c.Speed=3*c.Speed}),c.Elt.addEventListener("mouseout",function(){c.Speed=BASESPEED}),setInterval(function(){Math.random()>.2&&c.ChangeDir()},3e3)}window.addEventListener("resize",function(){o=Helpers.GetRectangle(e)})}}(Playground||(Playground={}));var TUMBLR_REQ_URL="http://rickymarou.tumblr.com/api/read/json",POST_PER_PAGE=10,Tumblr;!function(t){var e,i=0;t.Init=function(t){e=t,a()};var n=function(t){var e=document.createElement("article"),i=document.createElement("header"),n=document.createElement("h3"),o=document.createElement("time"),r=document.createElement("div");return e.classList.add("tumblr-post"),i.classList.add("tumblr-post-header"),e.appendChild(i),o.innerHTML=t.Date,i.appendChild(o),n.classList.add("tumblr-post-title"),n.innerHTML=t.Title,i.appendChild(n),r.classList.add("tumblr-post-text"),r.innerHTML=t.Text,e.appendChild(r),e},o=function(t,e){for(var i="",n=0;n<e.length;n++){var o=e[n];i+=t[o]?t[o]:""}return i},r=function(){for(var t=window.tumblr_api_read.posts,r=0;r<t.length;r++){var a=t[r];e.appendChild(n({Date:o(a,["date-gmt"]),Text:o(a,["photo-caption","regular-body"]),Title:o(a,["regular-title"]),Type:o(a,["type"])})),i++}},a=function(){var t=document.getElementById("tumblr-data");null!=t&&t.parentElement.removeChild(t),t=document.createElement("script"),t.id="tumblr-data",t.setAttribute("type","text/javascript"),t.setAttribute("src",TUMBLR_REQ_URL+"?start="+i+"&num="+POST_PER_PAGE),t.addEventListener("load",r),document.body.appendChild(t)}}(Tumblr||(Tumblr={}));var Home;!function(t){var e=document.getElementById("tumblr");e&&Tumblr.Init(e)}(Home||(Home={}));
!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],t=C[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?w[s[0]]=i:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=i),A.push((i?"":"no-")+s.join("-"))}}function o(e){var t=x.className,n=w._config.classPrefix||"";if(T&&(t=t.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?x.className.baseVal=t:x.className=t)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(){var e=t.body;return e||(e=l(T?"svg":"body"),e.fake=!0),e}function f(e,t){return!!~(""+e).indexOf(t)}function d(e,n,r,i){var o,a,s,f,d="modernizr",c=l("div"),p=u();if(parseInt(r,10))for(;r--;)s=l("div"),s.id=i?i[r]:d+(r+1),c.appendChild(s);return o=l("style"),o.type="text/css",o.id="s"+d,(p.fake?p:c).appendChild(o),p.appendChild(c),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),a=n(c,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=f,x.offsetHeight):c.parentNode.removeChild(c),!!a}function c(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(s(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+s(t[i])+":"+r+")");return o=o.join(" or "),d("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function p(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?p(i,n||t):i);return!1}function h(e,t,i,o){function s(){d&&(delete M.style,delete M.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var u=c(e,i);if(!r(u,"undefined"))return u}for(var d,p,m,h,v,g=["modernizr","tspan"];!M.style;)d=!0,M.modElem=l(g.shift()),M.style=M.modElem.style;for(m=e.length,p=0;m>p;p++)if(h=e[p],v=M.style[h],f(h,"-")&&(h=a(h)),M.style[h]!==n){if(o||r(i,"undefined"))return s(),"pfx"==t?h:!0;try{M.style[h]=i}catch(y){}if(M.style[h]!=v)return s(),"pfx"==t?h:!0}return s(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+j.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?h(s,t,i,o):(s=(e+" "+_.join(a+" ")+a).split(" "),m(s,t,n))}function g(e,t,r){return v(e,n,n,t,r)}function y(e,t){if("object"==typeof e)for(var n in e)V(e,n)&&y(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),i=w[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return w;t="function"==typeof t?t():t,1==r.length?w[r[0]]=t:(!w[r[0]]||w[r[0]]instanceof Boolean||(w[r[0]]=new Boolean(w[r[0]])),w[r[0]][r[1]]=t),o([(t&&0!=t?"":"no-")+r.join("-")]),w._trigger(e,t)}return w}var A=[],C=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){C.push({name:e,fn:t,options:n})},addAsyncTest:function(e){C.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w,w.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var E=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=E;var x=t.documentElement;w.addTest("classlist","classList"in x);var T="svg"===x.nodeName.toLowerCase();T||!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=x.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=x.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),x.elements=n+" "+e,u(t)}function o(e){var t=E[e[b]];return t||(t={},w++,e[b]=w,E[w]=t),t}function a(e,n,r){if(n||(n=t),v)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():C.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||A.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function s(e,n){if(e||(e=t),v)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return x.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function u(e){e||(e=t);var r=o(e);return!x.shivCSS||h||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),v||l(e,r),e}function f(e){for(var t,n=e.getElementsByTagName("*"),i=n.length,o=RegExp("^(?:"+r().join("|")+")$","i"),a=[];i--;)t=n[i],o.test(t.nodeName)&&a.push(t.applyElement(d(t)));return a}function d(e){for(var t,n=e.attributes,r=n.length,i=e.ownerDocument.createElement(S+":"+e.nodeName);r--;)t=n[r],t.specified&&i.setAttribute(t.nodeName,t.nodeValue);return i.style.cssText=e.style.cssText,i}function c(e){for(var t,n=e.split("{"),i=n.length,o=RegExp("(^|[\\s,>+~])("+r().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),a="$1"+S+"\\:$2";i--;)t=n[i]=n[i].split("}"),t[t.length-1]=t[t.length-1].replace(o,a),n[i]=t.join("}");return n.join("{")}function p(e){for(var t=e.length;t--;)e[t].removeNode()}function m(e){function t(){clearTimeout(a._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,i,a=o(e),s=e.namespaces,l=e.parentWindow;return!_||e.printShived?e:("undefined"==typeof s[S]&&s.add(S),l.attachEvent("onbeforeprint",function(){t();for(var o,a,s,l=e.styleSheets,u=[],d=l.length,p=Array(d);d--;)p[d]=l[d];for(;s=p.pop();)if(!s.disabled&&T.test(s.media)){try{o=s.imports,a=o.length}catch(m){a=0}for(d=0;a>d;d++)p.push(o[d]);try{u.push(s.cssText)}catch(m){}}u=c(u.reverse().join("")),i=f(e),r=n(e,u)}),l.attachEvent("onafterprint",function(){p(i),clearTimeout(a._removeSheetTimer),a._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var h,v,g="3.7.3",y=e.html5||{},A=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,C=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",w=0,E={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,v=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){h=!0,v=!0}}();var x={elements:y.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:g,shivCSS:y.shivCSS!==!1,supportsUnknownElements:v,shivMethods:y.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:s,addElements:i};e.html5=x,u(t);var T=/^$|\b(?:all|print)\b/,S="html5shiv",_=!v&&function(){var n=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof e.attachEvent)}();x.type+=" print",x.shivPrint=m,m(t),"object"==typeof module&&module.exports&&(module.exports=x)}("undefined"!=typeof e?e:this,t);var S="Moz O ms Webkit",_=b._config.usePrefixes?S.toLowerCase().split(" "):[];b._domPrefixes=_;var N=function(e,t){var n=!1,r=l("div"),i=r.style;if(e in i){var o=_.length;for(i[e]=t,n=i[e];o--&&!n;)i[e]="-"+_[o]+"-"+t,n=i[e]}return""===n&&(n=!1),n};b.prefixedCSSValue=N,w.addTest("canvas",function(){var e=l("canvas");return!(!e.getContext||!e.getContext("2d"))}),w.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",i=0,o=E.length-1;o>i;i++)e=0===i?"to ":"",r+=t+E[i]+"linear-gradient("+e+"left top, #9f9, white);";w._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=l("a"),s=a.style;return s.cssText=r,(""+s.backgroundImage).indexOf("gradient")>-1}),w.addTest("placeholder","placeholder"in l("input")&&"placeholder"in l("textarea")),w.addTest("srcset","srcset"in l("img")),w.addTest("inlinesvg",function(){var e=l("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&e.firstChild&&e.firstChild.namespaceURI)});var k="CSS"in e&&"supports"in e.CSS,P="supportsCSS"in e;w.addTest("supports",k||P);var j=b._config.usePrefixes?S.split(" "):[];b._cssomPrefixes=j;var z=function(t){var r,i=E.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var a=0;i>a;a++){var s=E[a],l=s.toUpperCase()+"_"+r;if(l in o)return"@-"+s.toLowerCase()+"-"+t}return!1};b.atRule=z;var L=b.testStyles=d;w.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",E.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(r,function(e){n=9===e.offsetTop})}return n}),w.addTest("formvalidation",function(){var t=l("form");if(!("checkValidity"in t&&"addEventListener"in t))return!1;if("reportValidity"in t)return!0;var n,r=!1;return w.formvalidationapi=!0,t.addEventListener("submit",function(t){e.opera&&!e.operamini||t.preventDefault(),t.stopPropagation()},!1),t.innerHTML='<input name="modTest" required="required" /><button></button>',L("#modernizr form{position:absolute;top:-99999em}",function(e){e.appendChild(t),n=t.getElementsByTagName("input")[0],n.addEventListener("invalid",function(e){r=!0,e.preventDefault(),e.stopPropagation()},!1),w.formvalidationmessage=!!n.validationMessage,t.getElementsByTagName("button")[0].click()}),r});var B=l("input"),D="search tel url email datetime date month week time datetime-local number range color".split(" "),O={};w.inputtypes=function(e){for(var r,i,o,a=e.length,s="1)",l=0;a>l;l++)B.setAttribute("type",r=e[l]),o="text"!==B.type&&"style"in B,o&&(B.value=s,B.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&B.style.WebkitAppearance!==n?(x.appendChild(B),i=t.defaultView,o=i.getComputedStyle&&"textfield"!==i.getComputedStyle(B,null).WebkitAppearance&&0!==B.offsetHeight,x.removeChild(B)):/^(search|tel)$/.test(r)||(o=/^(url|email)$/.test(r)?B.checkValidity&&B.checkValidity()===!1:B.value!=s)),O[e[l]]=!!o;return O}(D),w.addTest("localizednumber",function(){if(!w.inputtypes.number)return!1;if(!w.formvalidation)return!1;var e,n=l("div"),r=u(),i=function(){return x.insertBefore(r,x.firstElementChild||x.firstChild)}();n.innerHTML='<input type="number" value="1.0" step="0.1"/>';var o=n.childNodes[0];i.appendChild(n),o.focus();try{t.execCommand("InsertText",!1,"1,1")}catch(a){}return e="number"===o.type&&1.1===o.valueAsNumber&&o.checkValidity(),i.removeChild(n),r.fake&&i.parentNode.removeChild(i),e});var $={elem:l("modernizr")};w._q.push(function(){delete $.elem});var M={style:$.elem.style};w._q.unshift(function(){delete M.style});b.testProp=function(e,t,r){return h([e],n,t,r)};b.testAllProps=v;var R=b.prefixed=function(e,t,n){return 0===e.indexOf("@")?z(e):(-1!=e.indexOf("-")&&(e=a(e)),t?v(e,t,n):v(e,"pfx"))};b.prefixedCSS=function(e){var t=R(e);return t&&s(t)};b.testAllProps=g,w.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),w.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=w._config.usePrefixes;if(e&&(!t||"webkitPerspective"in x.style)){var n,r="#modernizr{width:0;height:0}";w.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),w.addTest("csstransitions",g("transition","all",!0));var V;!function(){var e={}.hasOwnProperty;V=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),b._l={},b.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),w.hasOwnProperty(e)&&setTimeout(function(){w._trigger(e,w[e])},0)},b._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},w._q.push(function(){b.addTest=y}),w.addAsyncTest(function(){var e,t,n,r=l("img"),i="sizes"in r;!i&&"srcset"in r?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){y("sizes",2==r.width)},r.onload=n,r.onerror=n,r.setAttribute("sizes","9px"),r.srcset=e+" 1w,"+t+" 8w",r.src=e):y("sizes",i)}),i(),o(A),delete b.addTest,delete b.addAsyncTest;for(var F=0;F<w._q.length;F++)w._q[F]();e.Modernizr=w}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm91dHB1dC5qcyIsImxpYi9tb2Rlcm5penItY3VzdG9tLmpzIl0sIm5hbWVzIjpbIkhlbHBlcnMiLCJHZXRSZWN0YW5nbGUiLCJlbHQiLCJwb3MiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJUb3AiLCJ0b3AiLCJSaWdodCIsInJpZ2h0IiwiQm90dG9tIiwiYm90dG9tIiwiTGVmdCIsImxlZnQiLCJJc091dHNpZGUiLCJyZWN0IiwiY29udGFpbmVyIiwiR2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiR2V0T3V0c2lkZURpciIsInJlc3VsdCIsInB1c2giLCJEaXJlY3Rpb24iLCJIRVJPX1dJRFRIIiwiSEVST19IRUlHSFQiLCJCQVNFU1BFRUQiLCJIZXJvIiwiX3RoaXMiLCJ0aGlzIiwiU3BlZWQiLCJDaGFuZ2VEaXIiLCJyYW5kb21EaXJJbmRleCIsIl9EaXJlY3Rpb24iLCJsZW5ndGgiLCJfQ2hhbmdlRGlyIiwiZGlySW5kZXgiLCJmcm9tIiwiRWx0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImFwcGVuZENoaWxkIiwiUG9zaXRpb24iLCJ4IiwieSIsIk1vdmUiLCJwcm90b3R5cGUiLCJDaGFuZ2VEaXJGcm9tQ29sbGlzaW9uIiwiZnJvbURpcnMiLCJsIiwiaW5kZXhPZiIsIkdvT3Bwb3NpdGVEaXIiLCJmb3JFYWNoIiwiZGlyIiwiUGxheWdyb3VuZCIsIkNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiX1RvdGFsRmFjZXMiLCJfSGVyb2VzIiwiQ29udGFpbmVyUmVjdCIsImkiLCJfTG9vcCIsInRpbWVzdGFtcCIsImoiLCJoZXJvIiwiaGVyb1JlY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJ3aW5kb3ciLCJUVU1CTFJfUkVRX1VSTCIsIlBPU1RfUEVSX1BBR0UiLCJUdW1ibHIiLCJfQ29udGFpbmVyIiwiX0N1ckluZGV4IiwiSW5pdCIsIl9HZXRQb3N0cyIsIl9CdWlsZFBvc3QiLCJwb3N0IiwicG9zdEhlYWRlciIsInBvc3RUaXRsZUVMdCIsInBvc3REYXRlRWx0IiwicG9zdFRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiRGF0ZSIsIlRpdGxlIiwiVGV4dCIsIl9JbXBvcnRWYWx1ZSIsIm9iaiIsInByb3BlcnRpZXMiLCJwcm9wIiwiX1Bvc3RzTG9hZGVkIiwicG9zdHMiLCJUeXBlIiwic2NyaXB0VGFnIiwicGFyZW50RWxlbWVudCIsInJlbW92ZUNoaWxkIiwiaWQiLCJib2R5IiwiSG9tZSIsIl9UdW1ibHJDb250YWluZXIiLCJ1bmRlZmluZWQiLCJpcyIsInR5cGUiLCJ0ZXN0UnVubmVyIiwiZmVhdHVyZU5hbWVzIiwiZmVhdHVyZSIsImFsaWFzSWR4IiwibmFtZUlkeCIsImZlYXR1cmVOYW1lIiwiZmVhdHVyZU5hbWVTcGxpdCIsImZlYXR1cmVJZHgiLCJ0ZXN0cyIsImhhc093blByb3BlcnR5IiwibmFtZSIsInRvTG93ZXJDYXNlIiwib3B0aW9ucyIsImFsaWFzZXMiLCJmbiIsInNwbGl0IiwiTW9kZXJuaXpyIiwiQm9vbGVhbiIsImNsYXNzZXMiLCJqb2luIiwic2V0Q2xhc3NlcyIsImNsYXNzTmFtZSIsImRvY0VsZW1lbnQiLCJjbGFzc1ByZWZpeCIsIl9jb25maWciLCJpc1NWRyIsImJhc2VWYWwiLCJlbmFibGVKU0NsYXNzIiwicmVKUyIsIlJlZ0V4cCIsInJlcGxhY2UiLCJlbmFibGVDbGFzc2VzIiwiY3NzVG9ET00iLCJzdHIiLCJtMSIsIm0yIiwidG9VcHBlckNhc2UiLCJkb21Ub0NTUyIsImFyZ3VtZW50cyIsImNyZWF0ZUVsZW1lbnROUyIsImNhbGwiLCJhcHBseSIsImdldEJvZHkiLCJmYWtlIiwiY29udGFpbnMiLCJzdWJzdHIiLCJpbmplY3RFbGVtZW50V2l0aFN0eWxlcyIsInJ1bGUiLCJjYWxsYmFjayIsIm5vZGVzIiwidGVzdG5hbWVzIiwicmV0Iiwibm9kZSIsImRvY092ZXJmbG93IiwibW9kIiwiZGl2IiwicGFyc2VJbnQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYmFja2dyb3VuZCIsIm92ZXJmbG93IiwicGFyZW50Tm9kZSIsIm9mZnNldEhlaWdodCIsIm5hdGl2ZVRlc3RQcm9wcyIsInByb3BzIiwidmFsdWUiLCJDU1MiLCJzdXBwb3J0cyIsImNvbmRpdGlvblRleHQiLCJnZXRDb21wdXRlZFN0eWxlIiwicG9zaXRpb24iLCJmbkJpbmQiLCJ0aGF0IiwidGVzdERPTVByb3BzIiwiZWxlbSIsIml0ZW0iLCJ0ZXN0UHJvcHMiLCJwcmVmaXhlZCIsInNraXBWYWx1ZVRlc3QiLCJjbGVhbkVsZW1zIiwiYWZ0ZXJJbml0IiwibVN0eWxlIiwibW9kRWxlbSIsInByb3BzTGVuZ3RoIiwiYmVmb3JlIiwiZWxlbXMiLCJzaGlmdCIsImUiLCJ0ZXN0UHJvcHNBbGwiLCJ1Y1Byb3AiLCJjaGFyQXQiLCJzbGljZSIsImNzc29tUHJlZml4ZXMiLCJ0ZXN0QWxsUHJvcHMiLCJhZGRUZXN0IiwidGVzdCIsImtleSIsImhhc093blByb3AiLCJsYXN0IiwiX3RyaWdnZXIiLCJNb2Rlcm5penJQcm90byIsIl92ZXJzaW9uIiwidXNlUHJlZml4ZXMiLCJfcSIsIm9uIiwiY2IiLCJzZWxmIiwic2V0VGltZW91dCIsImFkZEFzeW5jVGVzdCIsImNyZWF0ZVNWR1JlY3QiLCJwcmVmaXhlcyIsIl9wcmVmaXhlcyIsImRvY3VtZW50RWxlbWVudCIsIm5vZGVOYW1lIiwiYWRkU3R5bGVTaGVldCIsIm93bmVyRG9jdW1lbnQiLCJwIiwicGFyZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbnNlcnRCZWZvcmUiLCJsYXN0Q2hpbGQiLCJmaXJzdENoaWxkIiwiZ2V0RWxlbWVudHMiLCJlbGVtZW50cyIsImh0bWw1IiwiYWRkRWxlbWVudHMiLCJuZXdFbGVtZW50cyIsInNoaXZEb2N1bWVudCIsImdldEV4cGFuZG9EYXRhIiwiZGF0YSIsImV4cGFuZG9EYXRhIiwiZXhwYW5kbyIsImV4cGFuSUQiLCJzdXBwb3J0c1Vua25vd25FbGVtZW50cyIsImNhY2hlIiwiY2xvbmVOb2RlIiwic2F2ZUNsb25lcyIsImNyZWF0ZUVsZW0iLCJjYW5IYXZlQ2hpbGRyZW4iLCJyZVNraXAiLCJ0YWdVcm4iLCJmcmFnIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNsb25lIiwic2hpdk1ldGhvZHMiLCJjcmVhdGVGcmFnIiwiRnVuY3Rpb24iLCJzaGl2Q1NTIiwic3VwcG9ydHNIdG1sNVN0eWxlcyIsImhhc0NTUyIsImFkZFdyYXBwZXJzIiwiaW5kZXgiLCJyZUVsZW1lbnRzIiwiYXBwbHlFbGVtZW50IiwiY3JlYXRlV3JhcHBlciIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwid3JhcHBlciIsInNoaXZOYW1lc3BhY2UiLCJzcGVjaWZpZWQiLCJub2RlVmFsdWUiLCJzaGl2Q3NzVGV4dCIsInBhaXIiLCJwYXJ0cyIsInJlcGxhY2VtZW50IiwicmVtb3ZlV3JhcHBlcnMiLCJ3cmFwcGVycyIsInJlbW92ZU5vZGUiLCJzaGl2UHJpbnQiLCJyZW1vdmVTaGVldCIsImNsZWFyVGltZW91dCIsIl9yZW1vdmVTaGVldFRpbWVyIiwic2hpdmVkU2hlZXQiLCJuYW1lc3BhY2VzIiwib3duZXJXaW5kb3ciLCJwYXJlbnRXaW5kb3ciLCJzdXBwb3J0c1NoaXZhYmxlU2hlZXRzIiwicHJpbnRTaGl2ZWQiLCJhdHRhY2hFdmVudCIsImltcG9ydHMiLCJzaGVldCIsImNvbGxlY3Rpb24iLCJzdHlsZVNoZWV0cyIsInNoZWV0cyIsIkFycmF5IiwicG9wIiwiZGlzYWJsZWQiLCJyZU1lZGlhIiwibWVkaWEiLCJlciIsInJldmVyc2UiLCJ2ZXJzaW9uIiwiYSIsImNoaWxkTm9kZXMiLCJkb2NFbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJvbVByZWZpeGVzIiwiZG9tUHJlZml4ZXMiLCJfZG9tUHJlZml4ZXMiLCJwcmVmaXhlZENTU1ZhbHVlIiwiZ2V0Q29udGV4dCIsImFuZ2xlIiwic3RyMSIsInN0cjIiLCJjc3MiLCJsZW4iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJTVkdSZWN0IiwibmFtZXNwYWNlVVJJIiwibmV3U3ludGF4Iiwib2xkU3ludGF4IiwiX2Nzc29tUHJlZml4ZXMiLCJhdFJ1bGUiLCJjc3NydWxlIiwiQ1NTUnVsZSIsInByZWZpeCIsInRoaXNSdWxlIiwidGVzdFN0eWxlcyIsImJvb2wiLCJEb2N1bWVudFRvdWNoIiwicXVlcnkiLCJvZmZzZXRUb3AiLCJmb3JtIiwiaW5wdXQiLCJpbnZhbGlkRmlyZWQiLCJmb3JtdmFsaWRhdGlvbmFwaSIsIm9wZXJhIiwib3BlcmFtaW5pIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJmb3JtdmFsaWRhdGlvbm1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsaWNrIiwiaW5wdXRFbGVtIiwiaW5wdXR0eXBlcyIsImlucHV0cyIsImlucHV0RWxlbVR5cGUiLCJkZWZhdWx0VmlldyIsInNtaWxlIiwiV2Via2l0QXBwZWFyYW5jZSIsImNoZWNrVmFsaWRpdHkiLCJudW1iZXIiLCJmb3JtdmFsaWRhdGlvbiIsImRpZmYiLCJlbCIsInJvb3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImZvY3VzIiwiZXhlY0NvbW1hbmQiLCJ2YWx1ZUFzTnVtYmVyIiwidW5zaGlmdCIsInRlc3RQcm9wIiwidXNlVmFsdWUiLCJwcmVmaXhlZENTUyIsInByZWZpeGVkUHJvcCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInVzZVByZWZpeCIsIm1xIiwiZGVmYXVsdFN0eWxlIiwib2Zmc2V0V2lkdGgiLCJfaGFzT3duUHJvcGVydHkiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwiX2wiLCJyZXMiLCJjYnMiLCJ3aWR0aDEiLCJ3aWR0aDIiLCJpbWFnZSIsImlzU2l6ZXMiLCJvbmxvYWQiLCJvbmVycm9yIiwic3Jjc2V0Iiwic3JjIl0sIm1hcHBpbmdzIjoiQUFBQSxH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LEVBQVF0VixFQUFjLE9BRXRCdVYsRUFBVSxTQUFXRCxJQUdwQkMsR0FBWSxVQUFhRCxJQUM1QkQsRUFBUyxxRkFDVEQsRUFBUyw2RUFFVDlLLEVBQU8sV0FDTEQsRUFBUSxRQUF3QixHQUFmaUwsRUFBTWpWLFFBR3pCaVYsRUFBTUUsT0FBU2xMLEVBQ2ZnTCxFQUFNRyxRQUFVbkwsRUFDaEJnTCxFQUFNclYsYUFBYSxRQUFTLE9BRTVCcVYsRUFBTUksT0FBU04sRUFBUyxPQUFTQyxFQUFTLE1BQzFDQyxFQUFNSyxJQUFNUCxHQUVaL0ssRUFBUSxRQUFTa0wsS0FNckJqUixJQUdBb0IsRUFBV0YsU0FFSm1GLEdBQWVOLGNBQ2ZNLEdBQWVRLFlBR3RCLEtBQUssR0FBSXpKLEdBQUksRUFBR0EsRUFBSTRELEVBQVV3RixHQUFHcEwsT0FBUWdDLElBQ3ZDNEQsRUFBVXdGLEdBQUdwSixJQUlmUyxHQUFPbUQsVUFBWUEsR0FLbEJuRCxPQUFRcEMiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBIZWxwZXJzO1xuKGZ1bmN0aW9uIChIZWxwZXJzKSB7XG4gICAgSGVscGVycy5HZXRSZWN0YW5nbGUgPSBmdW5jdGlvbiAoZWx0KSB7XG4gICAgICAgIHZhciBwb3MgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBUb3A6IHBvcy50b3AsXG4gICAgICAgICAgICBSaWdodDogcG9zLnJpZ2h0LFxuICAgICAgICAgICAgQm90dG9tOiBwb3MuYm90dG9tLFxuICAgICAgICAgICAgTGVmdDogcG9zLmxlZnRcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEhlbHBlcnMuSXNPdXRzaWRlID0gZnVuY3Rpb24gKHJlY3QsIGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gKHJlY3QuVG9wIDw9IGNvbnRhaW5lci5Ub3ApXG4gICAgICAgICAgICB8fCAocmVjdC5MZWZ0IDw9IGNvbnRhaW5lci5MZWZ0KVxuICAgICAgICAgICAgfHwgKHJlY3QuUmlnaHQgPj0gY29udGFpbmVyLlJpZ2h0KVxuICAgICAgICAgICAgfHwgKHJlY3QuQm90dG9tID49IGNvbnRhaW5lci5Cb3R0b20pO1xuICAgIH07XG4gICAgSGVscGVycy5HZXRSYW5kb21JbnQgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gICAgfTtcbiAgICBIZWxwZXJzLkdldE91dHNpZGVEaXIgPSBmdW5jdGlvbiAocmVjdCwgY29udGFpbmVyKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKHJlY3QuVG9wIDw9IGNvbnRhaW5lci5Ub3ApXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uVG9wKTtcbiAgICAgICAgaWYgKHJlY3QuTGVmdCA8PSBjb250YWluZXIuTGVmdClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKERpcmVjdGlvbi5MZWZ0KTtcbiAgICAgICAgaWYgKHJlY3QuUmlnaHQgPj0gY29udGFpbmVyLlJpZ2h0KVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLlJpZ2h0KTtcbiAgICAgICAgaWYgKHJlY3QuQm90dG9tID49IGNvbnRhaW5lci5Cb3R0b20pXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uQm90dG9tKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufSkoSGVscGVycyB8fCAoSGVscGVycyA9IHt9KSk7XG52YXIgRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiVG9wXCJdID0gMF0gPSBcIlRvcFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDFdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJCb3R0b21cIl0gPSAyXSA9IFwiQm90dG9tXCI7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxlZnRcIl0gPSAzXSA9IFwiTGVmdFwiO1xufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiSGVscGVycy50c1wiLz5cbnZhciBIRVJPX1dJRFRIID0gMTYxO1xudmFyIEhFUk9fSEVJR0hUID0gMjA5O1xudmFyIEJBU0VTUEVFRCA9IDAuMztcbnZhciBIZXJvID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIZXJvKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLlNwZWVkID0gQkFTRVNQRUVEO1xuICAgICAgICAvL0NoYW5nZXMgb25lIG9mIHRoZSBkaXJlY3Rpb24gKHJhbmRvbWx5IHNlbGVjdGVkKVxuICAgICAgICB0aGlzLkNoYW5nZURpciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5kb21EaXJJbmRleCA9IEhlbHBlcnMuR2V0UmFuZG9tSW50KDAsIF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBfdGhpcy5fQ2hhbmdlRGlyKHJhbmRvbURpckluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fQ2hhbmdlRGlyID0gZnVuY3Rpb24gKGRpckluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZGlySW5kZXggPCAwIHx8IGRpckluZGV4ID49IF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBmcm9tID0gX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF07XG4gICAgICAgICAgICBzd2l0Y2ggKGZyb20pIHtcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5Ub3A6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fRGlyZWN0aW9uW2RpckluZGV4XSA9IERpcmVjdGlvbi5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF0gPSBEaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIHRoaXMuRWx0LnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCJob21lLmh0bWxcIik7XG4gICAgICAgIHRoaXMuRWx0LmNsYXNzTGlzdC5hZGQoXCJoZXJvXCIpO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS53aWR0aCA9IEhFUk9fV0lEVEggKyBcInB4XCI7XG4gICAgICAgIHRoaXMuRWx0LnN0eWxlLmhlaWdodCA9IEhFUk9fSEVJR0hUICsgXCJweFwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5FbHQpO1xuICAgICAgICB0aGlzLlBvc2l0aW9uID0geyB4OiA1MCwgeTogNTAgfTtcbiAgICAgICAgdGhpcy5fRGlyZWN0aW9uID0gW0RpcmVjdGlvbi5Ub3AsIERpcmVjdGlvbi5MZWZ0XTtcbiAgICAgICAgdGhpcy5Nb3ZlKCk7XG4gICAgfVxuICAgIEhlcm8ucHJvdG90eXBlLkNoYW5nZURpckZyb21Db2xsaXNpb24gPSBmdW5jdGlvbiAoZnJvbURpcnMpIHtcbiAgICAgICAgdmFyIGwgPSBmcm9tRGlycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgICAgIHZhciBmcm9tID0gZnJvbURpcnNbbF07XG4gICAgICAgICAgICB2YXIgZGlySW5kZXggPSB0aGlzLl9EaXJlY3Rpb24uaW5kZXhPZihmcm9tKTtcbiAgICAgICAgICAgIHRoaXMuX0NoYW5nZURpcihkaXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhlcm8ucHJvdG90eXBlLkdvT3Bwb3NpdGVEaXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsID0gdGhpcy5fRGlyZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgdGhpcy5fQ2hhbmdlRGlyKGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIZXJvLnByb3RvdHlwZS5Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLl9EaXJlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRpcikge1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlRvcDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueSA9IF90aGlzLlBvc2l0aW9uLnkgLSBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi55ID0gX3RoaXMuUG9zaXRpb24ueSArIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5MZWZ0OlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi54ID0gX3RoaXMuUG9zaXRpb24ueCAtIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueCA9IF90aGlzLlBvc2l0aW9uLnggKyBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS50b3AgPSB0aGlzLlBvc2l0aW9uLnkgKyBcIiVcIjtcbiAgICAgICAgdGhpcy5FbHQuc3R5bGUubGVmdCA9IHRoaXMuUG9zaXRpb24ueCArIFwiJVwiO1xuICAgIH07XG4gICAgcmV0dXJuIEhlcm87XG59KCkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9IZXJvLnRzXCIvPlxudmFyIFBsYXlncm91bmQ7XG4oZnVuY3Rpb24gKFBsYXlncm91bmQpIHtcbiAgICB2YXIgQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5Z3JvdW5kXCIpO1xuICAgIGlmIChDb250YWluZXIpIHtcbiAgICAgICAgdmFyIF9Ub3RhbEZhY2VzID0gMSwgX0hlcm9lcyA9IFtdLCBDb250YWluZXJSZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoQ29udGFpbmVyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfVG90YWxGYWNlczsgaSsrKSB7XG4gICAgICAgICAgICBfSGVyb2VzLnB1c2gobmV3IEhlcm8oQ29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9FdmVyeSBmcmFtZVxuICAgICAgICB2YXIgX0xvb3AgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9IZXJvZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVybyA9IF9IZXJvZXNbal07XG4gICAgICAgICAgICAgICAgLy9Nb3ZlIGhlcm9cbiAgICAgICAgICAgICAgICBoZXJvLk1vdmUoKTtcbiAgICAgICAgICAgICAgICAvL0lmIGhlcm8gaXMgb3V0c2lkZSBjb250YWluZXIsIGNoYW5nZSBpdHMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgdmFyIGhlcm9SZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoaGVyby5FbHQpO1xuICAgICAgICAgICAgICAgIGlmIChIZWxwZXJzLklzT3V0c2lkZShoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVyby5DaGFuZ2VEaXJGcm9tQ29sbGlzaW9uKEhlbHBlcnMuR2V0T3V0c2lkZURpcihoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIC8vRXZlbnRzXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX0hlcm9lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy9JZiBtb3VzZSBpcyBvdmVyIEhlcm8sIGdvIGZhc3RlciAgICBcbiAgICAgICAgICAgIHZhciBoZXJvID0gX0hlcm9lc1tqXTtcbiAgICAgICAgICAgIGhlcm8uRWx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vaGVyby5Hb09wcG9zaXRlRGlyKCk7XG4gICAgICAgICAgICAgICAgaGVyby5TcGVlZCA9IGhlcm8uU3BlZWQgKiAzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZXJvLkVsdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGhlcm8uU3BlZWQgPSBCQVNFU1BFRUQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vUmFuZG9tbHkgY2hhbmdlIGRpcmVjdGlvbiBldmVyeSAzIHNlY1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC4yKVxuICAgICAgICAgICAgICAgICAgICBoZXJvLkNoYW5nZURpcigpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9SZWNhbGN1bGF0ZSBjb250YWluZXIgc2l6ZSB3aGVuIGNoYW5naW5nIHdpbmRvdyBzaXplXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIENvbnRhaW5lclJlY3QgPSBIZWxwZXJzLkdldFJlY3RhbmdsZShDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG59KShQbGF5Z3JvdW5kIHx8IChQbGF5Z3JvdW5kID0ge30pKTtcbnZhciBUVU1CTFJfUkVRX1VSTCA9IFwiaHR0cDpcIiArIFwiLy9yaWNreW1hcm91LnR1bWJsci5jb20vYXBpL3JlYWQvanNvblwiO1xudmFyIFBPU1RfUEVSX1BBR0UgPSAxMDtcbnZhciBUdW1ibHI7XG4oZnVuY3Rpb24gKFR1bWJscikge1xuICAgIHZhciBfQ29udGFpbmVyLCBfTG9hZGVyLCBfQ3VySW5kZXggPSAwO1xuICAgIFR1bWJsci5Jbml0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICBfQ29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICBfR2V0UG9zdHMoKTtcbiAgICB9O1xuICAgIHZhciBfQnVpbGRQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhcnRpY2xlXCIpLCBwb3N0SGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhlYWRlclwiKSwgcG9zdFRpdGxlRUx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpLCBwb3N0RGF0ZUVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aW1lXCIpLCBwb3N0VGV4dENvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInR1bWJsci1wb3N0XCIpO1xuICAgICAgICBwb3N0SGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJ0dW1ibHItcG9zdC1oZWFkZXJcIik7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3N0SGVhZGVyKTtcbiAgICAgICAgcG9zdERhdGVFbHQuaW5uZXJIVE1MID0gcG9zdC5EYXRlO1xuICAgICAgICBwb3N0SGVhZGVyLmFwcGVuZENoaWxkKHBvc3REYXRlRWx0KTtcbiAgICAgICAgcG9zdFRpdGxlRUx0LmNsYXNzTGlzdC5hZGQoXCJ0dW1ibHItcG9zdC10aXRsZVwiKTtcbiAgICAgICAgcG9zdFRpdGxlRUx0LmlubmVySFRNTCA9IHBvc3QuVGl0bGU7XG4gICAgICAgIHBvc3RIZWFkZXIuYXBwZW5kQ2hpbGQocG9zdFRpdGxlRUx0KTtcbiAgICAgICAgcG9zdFRleHRDb250ZW50LmNsYXNzTGlzdC5hZGQoXCJ0dW1ibHItcG9zdC10ZXh0XCIpO1xuICAgICAgICBwb3N0VGV4dENvbnRlbnQuaW5uZXJIVE1MID0gcG9zdC5UZXh0O1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9zdFRleHRDb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9O1xuICAgIHZhciBfSW1wb3J0VmFsdWUgPSBmdW5jdGlvbiAob2JqLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wID0gcHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBvYmpbcHJvcF0gPyBvYmpbcHJvcF0gOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICB2YXIgX1Bvc3RzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zdHMgPSB3aW5kb3dbXCJ0dW1ibHJfYXBpX3JlYWRcIl0ucG9zdHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG4gICAgICAgICAgICBfQ29udGFpbmVyLmFwcGVuZENoaWxkKF9CdWlsZFBvc3Qoe1xuICAgICAgICAgICAgICAgIERhdGU6IF9JbXBvcnRWYWx1ZShwb3N0LCBbXCJkYXRlLWdtdFwiXSksXG4gICAgICAgICAgICAgICAgVGV4dDogX0ltcG9ydFZhbHVlKHBvc3QsIFtcInBob3RvLWNhcHRpb25cIiwgXCJyZWd1bGFyLWJvZHlcIl0pLFxuICAgICAgICAgICAgICAgIFRpdGxlOiBfSW1wb3J0VmFsdWUocG9zdCwgW1wicmVndWxhci10aXRsZVwiXSksXG4gICAgICAgICAgICAgICAgVHlwZTogX0ltcG9ydFZhbHVlKHBvc3QsIFtcInR5cGVcIl0pXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBfQ3VySW5kZXgrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy9Ob3QgdXNpbmcgWE1MSFRUUFJlcXVlc3QgYmVjYXVzZSBvZiBDT1JTIDooLlxuICAgIHZhciBfR2V0UG9zdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInR1bWJsci1kYXRhXCIpO1xuICAgICAgICBpZiAoc2NyaXB0VGFnICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjcmlwdFRhZy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHNjcmlwdFRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgc2NyaXB0VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0VGFnLmlkID0gXCJ0dW1ibHItZGF0YVwiO1xuICAgICAgICBzY3JpcHRUYWcuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZShcInNyY1wiLCBUVU1CTFJfUkVRX1VSTCArIFwiP3N0YXJ0PVwiICsgX0N1ckluZGV4ICsgXCImbnVtPVwiICsgUE9TVF9QRVJfUEFHRSk7XG4gICAgICAgIHNjcmlwdFRhZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBfUG9zdHNMb2FkZWQpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdFRhZyk7XG4gICAgfTtcbn0pKFR1bWJsciB8fCAoVHVtYmxyID0ge30pKTtcbnZhciBIb21lO1xuKGZ1bmN0aW9uIChIb21lKSB7XG4gICAgdmFyIF9UdW1ibHJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInR1bWJsclwiKTtcbiAgICBpZiAoX1R1bWJsckNvbnRhaW5lcilcbiAgICAgICAgVHVtYmxyLkluaXQoX1R1bWJsckNvbnRhaW5lcik7XG59KShIb21lIHx8IChIb21lID0ge30pKTtcbiIsIi8qIVxuICogbW9kZXJuaXpyIHYzLjMuMVxuICogQnVpbGQgaHR0cDovL21vZGVybml6ci5jb20vZG93bmxvYWQ/LWNhbnZhcy1jbGFzc2xpc3QtY3NzZ3JhZGllbnRzLWNzc3RyYW5zZm9ybXMtY3NzdHJhbnNmb3JtczNkLWNzc3RyYW5zaXRpb25zLWlubGluZXN2Zy1sb2NhbGl6ZWRudW1iZXItcGxhY2Vob2xkZXItc2l6ZXMtc3Jjc2V0LXN2Zy10b3VjaGV2ZW50cy1kb21wcmVmaXhlcy1wcmVmaXhlZC1wcmVmaXhlZGNzcy1wcmVmaXhlZGNzc3ZhbHVlLXByZWZpeGVzLXByaW50c2hpdi1zZXRjbGFzc2VzLXRlc3RhbGxwcm9wcy10ZXN0cHJvcC1kb250bWluXG4gKlxuICogQ29weXJpZ2h0IChjKVxuICogIEZhcnVrIEF0ZXNcbiAqICBQYXVsIElyaXNoXG4gKiAgQWxleCBTZXh0b25cbiAqICBSeWFuIFNlZGRvblxuICogIFBhdHJpY2sgS2V0dG5lclxuICogIFN0dSBDb3hcbiAqICBSaWNoYXJkIEhlcnJlcmFcblxuICogTUlUIExpY2Vuc2VcbiAqL1xuXG4vKlxuICogTW9kZXJuaXpyIHRlc3RzIHdoaWNoIG5hdGl2ZSBDU1MzIGFuZCBIVE1MNSBmZWF0dXJlcyBhcmUgYXZhaWxhYmxlIGluIHRoZVxuICogY3VycmVudCBVQSBhbmQgbWFrZXMgdGhlIHJlc3VsdHMgYXZhaWxhYmxlIHRvIHlvdSBpbiB0d28gd2F5czogYXMgcHJvcGVydGllcyBvblxuICogYSBnbG9iYWwgYE1vZGVybml6cmAgb2JqZWN0LCBhbmQgYXMgY2xhc3NlcyBvbiB0aGUgYDxodG1sPmAgZWxlbWVudC4gVGhpc1xuICogaW5mb3JtYXRpb24gYWxsb3dzIHlvdSB0byBwcm9ncmVzc2l2ZWx5IGVuaGFuY2UgeW91ciBwYWdlcyB3aXRoIGEgZ3JhbnVsYXIgbGV2ZWxcbiAqIG9mIGNvbnRyb2wgb3ZlciB0aGUgZXhwZXJpZW5jZS5cbiovXG5cbjsoZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKXtcbiAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgXG5cbiAgdmFyIHRlc3RzID0gW107XG4gIFxuXG4gIC8qKlxuICAgKlxuICAgKiBNb2Rlcm5penJQcm90byBpcyB0aGUgY29uc3RydWN0b3IgZm9yIE1vZGVybml6clxuICAgKlxuICAgKiBAY2xhc3NcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICovXG5cbiAgdmFyIE1vZGVybml6clByb3RvID0ge1xuICAgIC8vIFRoZSBjdXJyZW50IHZlcnNpb24sIGR1bW15XG4gICAgX3ZlcnNpb246ICczLjMuMScsXG5cbiAgICAvLyBBbnkgc2V0dGluZ3MgdGhhdCBkb24ndCB3b3JrIGFzIHNlcGFyYXRlIG1vZHVsZXNcbiAgICAvLyBjYW4gZ28gaW4gaGVyZSBhcyBjb25maWd1cmF0aW9uLlxuICAgIF9jb25maWc6IHtcbiAgICAgICdjbGFzc1ByZWZpeCc6ICcnLFxuICAgICAgJ2VuYWJsZUNsYXNzZXMnOiB0cnVlLFxuICAgICAgJ2VuYWJsZUpTQ2xhc3MnOiB0cnVlLFxuICAgICAgJ3VzZVByZWZpeGVzJzogdHJ1ZVxuICAgIH0sXG5cbiAgICAvLyBRdWV1ZSBvZiB0ZXN0c1xuICAgIF9xOiBbXSxcblxuICAgIC8vIFN0dWIgdGhlc2UgZm9yIHBlb3BsZSB3aG8gYXJlIGxpc3RlbmluZ1xuICAgIG9uOiBmdW5jdGlvbih0ZXN0LCBjYikge1xuICAgICAgLy8gSSBkb24ndCByZWFsbHkgdGhpbmsgcGVvcGxlIHNob3VsZCBkbyB0aGlzLCBidXQgd2UgY2FuXG4gICAgICAvLyBzYWZlIGd1YXJkIGl0IGEgYml0LlxuICAgICAgLy8gLS0gTk9URTo6IHRoaXMgZ2V0cyBXQVkgb3ZlcnJpZGRlbiBpbiBzcmMvYWRkVGVzdCBmb3IgYWN0dWFsIGFzeW5jIHRlc3RzLlxuICAgICAgLy8gVGhpcyBpcyBpbiBjYXNlIHBlb3BsZSBsaXN0ZW4gdG8gc3luY2hyb25vdXMgdGVzdHMuIEkgd291bGQgbGVhdmUgaXQgb3V0LFxuICAgICAgLy8gYnV0IHRoZSBjb2RlIHRvICpkaXNhbGxvdyogc3luYyB0ZXN0cyBpbiB0aGUgcmVhbCB2ZXJzaW9uIG9mIHRoaXNcbiAgICAgIC8vIGZ1bmN0aW9uIGlzIGFjdHVhbGx5IGxhcmdlciB0aGFuIHRoaXMuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBjYihzZWxmW3Rlc3RdKTtcbiAgICAgIH0sIDApO1xuICAgIH0sXG5cbiAgICBhZGRUZXN0OiBmdW5jdGlvbihuYW1lLCBmbiwgb3B0aW9ucykge1xuICAgICAgdGVzdHMucHVzaCh7bmFtZTogbmFtZSwgZm46IGZuLCBvcHRpb25zOiBvcHRpb25zfSk7XG4gICAgfSxcblxuICAgIGFkZEFzeW5jVGVzdDogZnVuY3Rpb24oZm4pIHtcbiAgICAgIHRlc3RzLnB1c2goe25hbWU6IG51bGwsIGZuOiBmbn0pO1xuICAgIH1cbiAgfTtcblxuICBcblxuICAvLyBGYWtlIHNvbWUgb2YgT2JqZWN0LmNyZWF0ZSBzbyB3ZSBjYW4gZm9yY2Ugbm9uIHRlc3QgcmVzdWx0cyB0byBiZSBub24gXCJvd25cIiBwcm9wZXJ0aWVzLlxuICB2YXIgTW9kZXJuaXpyID0gZnVuY3Rpb24oKSB7fTtcbiAgTW9kZXJuaXpyLnByb3RvdHlwZSA9IE1vZGVybml6clByb3RvO1xuXG4gIC8vIExlYWsgbW9kZXJuaXpyIGdsb2JhbGx5IHdoZW4geW91IGByZXF1aXJlYCBpdCByYXRoZXIgdGhhbiBmb3JjZSBpdCBoZXJlLlxuICAvLyBPdmVyd3JpdGUgbmFtZSBzbyBjb25zdHJ1Y3RvciBuYW1lIGlzIG5pY2VyIDpEXG4gIE1vZGVybml6ciA9IG5ldyBNb2Rlcm5penIoKTtcblxuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJTVkdcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInN2Z1wiLFxuICBcImNhbml1c2VcIjogXCJzdmdcIixcbiAgXCJ0YWdzXCI6IFtcInN2Z1wiXSxcbiAgXCJhdXRob3JzXCI6IFtcIkVyaWsgRGFobHN0cm9tXCJdLFxuICBcInBvbHlmaWxsc1wiOiBbXG4gICAgXCJzdmd3ZWJcIixcbiAgICBcInJhcGhhZWxcIixcbiAgICBcImFtcGxlc2RrXCIsXG4gICAgXCJjYW52Z1wiLFxuICAgIFwic3ZnLWJvaWxlcnBsYXRlXCIsXG4gICAgXCJzaWVcIixcbiAgICBcImRvam9nZnhcIixcbiAgICBcImZhYnJpY2pzXCJcbiAgXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgU1ZHIGluIGA8ZW1iZWQ+YCBvciBgPG9iamVjdD5gIGVsZW1lbnRzLlxuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnc3ZnJywgISFkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiYgISFkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpLmNyZWF0ZVNWR1JlY3QpO1xuXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIHNldCBmb3IgY3NzIHRlc3RzLiBTZWUgdGlja2V0ICMyMVxuICAgKiBodHRwOi8vZ2l0LmlvL3ZVR2w0XG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl9wcmVmaXhlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuX3ByZWZpeGVzXG4gICAqIEBvcHRpb25Qcm9wIHByZWZpeGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIE1vZGVybml6ci5fcHJlZml4ZXMgaXMgdGhlIGludGVybmFsIGxpc3Qgb2YgcHJlZml4ZXMgdGhhdCB3ZSB0ZXN0IGFnYWluc3RcbiAgICogaW5zaWRlIG9mIHRoaW5ncyBsaWtlIFtwcmVmaXhlZF0oI21vZGVybml6ci1wcmVmaXhlZCkgYW5kIFtwcmVmaXhlZENTU10oIy1jb2RlLW1vZGVybml6ci1wcmVmaXhlZGNzcykuIEl0IGlzIHNpbXBseVxuICAgKiBhbiBhcnJheSBvZiBrZWJhYi1jYXNlIHZlbmRvciBwcmVmaXhlcyB5b3UgY2FuIHVzZSB3aXRoaW4geW91ciBjb2RlLlxuICAgKlxuICAgKiBTb21lIGNvbW1vbiB1c2UgY2FzZXMgaW5jbHVkZVxuICAgKlxuICAgKiBHZW5lcmF0aW5nIGFsbCBwb3NzaWJsZSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgQ1NTIHByb3BlcnR5XG4gICAqIGBgYGpzXG4gICAqIHZhciBydWxlID0gTW9kZXJuaXpyLl9wcmVmaXhlcy5qb2luKCd0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7ICcpO1xuICAgKlxuICAgKiBydWxlID09PSAndHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyB3ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyBtb3otdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyBvLXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgbXMtdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOydcbiAgICogYGBgXG4gICAqXG4gICAqIEdlbmVyYXRpbmcgYWxsIHBvc3NpYmxlIHByZWZpeGVkIHZlcnNpb24gb2YgYSBDU1MgdmFsdWVcbiAgICogYGBganNcbiAgICogcnVsZSA9ICdkaXNwbGF5OicgKyAgTW9kZXJuaXpyLl9wcmVmaXhlcy5qb2luKCdmbGV4OyBkaXNwbGF5OicpICsgJ2ZsZXgnO1xuICAgKlxuICAgKiBydWxlID09PSAnZGlzcGxheTpmbGV4OyBkaXNwbGF5Oi13ZWJraXQtZmxleDsgZGlzcGxheTotbW96LWZsZXg7IGRpc3BsYXk6LW8tZmxleDsgZGlzcGxheTotbXMtZmxleDsgZGlzcGxheTpmbGV4J1xuICAgKiBgYGBcbiAgICovXG5cbiAgLy8gd2UgdXNlIFsnJywnJ10gcmF0aGVyIHRoYW4gYW4gZW1wdHkgYXJyYXkgaW4gb3JkZXIgdG8gYWxsb3cgYSBwYXR0ZXJuIG9mIC5gam9pbigpYGluZyBwcmVmaXhlcyB0byB0ZXN0XG4gIC8vIHZhbHVlcyBpbiBmZWF0dXJlIGRldGVjdHMgdG8gY29udGludWUgdG8gd29ya1xuICB2YXIgcHJlZml4ZXMgPSAoTW9kZXJuaXpyUHJvdG8uX2NvbmZpZy51c2VQcmVmaXhlcyA/ICcgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gJy5zcGxpdCgnICcpIDogWycnLCcnXSk7XG5cbiAgLy8gZXhwb3NlIHRoZXNlIGZvciB0aGUgcGx1Z2luIEFQSS4gTG9vayBpbiB0aGUgc291cmNlIGZvciBob3cgdG8gam9pbigpIHRoZW0gYWdhaW5zdCB5b3VyIGlucHV0XG4gIE1vZGVybml6clByb3RvLl9wcmVmaXhlcyA9IHByZWZpeGVzO1xuXG4gIFxuXG4gIC8qKlxuICAgKiBpcyByZXR1cm5zIGEgYm9vbGVhbiBpZiB0aGUgdHlwZW9mIGFuIG9iaiBpcyBleGFjdGx5IHR5cGUuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gaXNcbiAgICogQHBhcmFtIHsqfSBvYmogLSBBIHRoaW5nIHdlIHdhbnQgdG8gY2hlY2sgdGhlIHR5cGUgb2ZcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBBIHN0cmluZyB0byBjb21wYXJlIHRoZSB0eXBlb2YgYWdhaW5zdFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXMob2JqLCB0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IHR5cGU7XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBSdW4gdGhyb3VnaCBhbGwgdGVzdHMgYW5kIGRldGVjdCB0aGVpciBzdXBwb3J0IGluIHRoZSBjdXJyZW50IFVBLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICovXG5cbiAgZnVuY3Rpb24gdGVzdFJ1bm5lcigpIHtcbiAgICB2YXIgZmVhdHVyZU5hbWVzO1xuICAgIHZhciBmZWF0dXJlO1xuICAgIHZhciBhbGlhc0lkeDtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHZhciBuYW1lSWR4O1xuICAgIHZhciBmZWF0dXJlTmFtZTtcbiAgICB2YXIgZmVhdHVyZU5hbWVTcGxpdDtcblxuICAgIGZvciAodmFyIGZlYXR1cmVJZHggaW4gdGVzdHMpIHtcbiAgICAgIGlmICh0ZXN0cy5oYXNPd25Qcm9wZXJ0eShmZWF0dXJlSWR4KSkge1xuICAgICAgICBmZWF0dXJlTmFtZXMgPSBbXTtcbiAgICAgICAgZmVhdHVyZSA9IHRlc3RzW2ZlYXR1cmVJZHhdO1xuICAgICAgICAvLyBydW4gdGhlIHRlc3QsIHRocm93IHRoZSByZXR1cm4gdmFsdWUgaW50byB0aGUgTW9kZXJuaXpyLFxuICAgICAgICAvLyB0aGVuIGJhc2VkIG9uIHRoYXQgYm9vbGVhbiwgZGVmaW5lIGFuIGFwcHJvcHJpYXRlIGNsYXNzTmFtZVxuICAgICAgICAvLyBhbmQgcHVzaCBpdCBpbnRvIGFuIGFycmF5IG9mIGNsYXNzZXMgd2UnbGwgam9pbiBsYXRlci5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gbmFtZSwgaXQncyBhbiAnYXN5bmMnIHRlc3QgdGhhdCBpcyBydW4sXG4gICAgICAgIC8vIGJ1dCBub3QgZGlyZWN0bHkgYWRkZWQgdG8gdGhlIG9iamVjdC4gVGhhdCBzaG91bGRcbiAgICAgICAgLy8gYmUgZG9uZSB3aXRoIGEgcG9zdC1ydW4gYWRkVGVzdCBjYWxsLlxuICAgICAgICBpZiAoZmVhdHVyZS5uYW1lKSB7XG4gICAgICAgICAgZmVhdHVyZU5hbWVzLnB1c2goZmVhdHVyZS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICAgICAgaWYgKGZlYXR1cmUub3B0aW9ucyAmJiBmZWF0dXJlLm9wdGlvbnMuYWxpYXNlcyAmJiBmZWF0dXJlLm9wdGlvbnMuYWxpYXNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEFkZCBhbGwgdGhlIGFsaWFzZXMgaW50byB0aGUgbmFtZXMgbGlzdFxuICAgICAgICAgICAgZm9yIChhbGlhc0lkeCA9IDA7IGFsaWFzSWR4IDwgZmVhdHVyZS5vcHRpb25zLmFsaWFzZXMubGVuZ3RoOyBhbGlhc0lkeCsrKSB7XG4gICAgICAgICAgICAgIGZlYXR1cmVOYW1lcy5wdXNoKGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzW2FsaWFzSWR4XS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gdGhlIHRlc3QsIG9yIHVzZSB0aGUgcmF3IHZhbHVlIGlmIGl0J3Mgbm90IGEgZnVuY3Rpb25cbiAgICAgICAgcmVzdWx0ID0gaXMoZmVhdHVyZS5mbiwgJ2Z1bmN0aW9uJykgPyBmZWF0dXJlLmZuKCkgOiBmZWF0dXJlLmZuO1xuXG5cbiAgICAgICAgLy8gU2V0IGVhY2ggb2YgdGhlIG5hbWVzIG9uIHRoZSBNb2Rlcm5penIgb2JqZWN0XG4gICAgICAgIGZvciAobmFtZUlkeCA9IDA7IG5hbWVJZHggPCBmZWF0dXJlTmFtZXMubGVuZ3RoOyBuYW1lSWR4KyspIHtcbiAgICAgICAgICBmZWF0dXJlTmFtZSA9IGZlYXR1cmVOYW1lc1tuYW1lSWR4XTtcbiAgICAgICAgICAvLyBTdXBwb3J0IGRvdCBwcm9wZXJ0aWVzIGFzIHN1YiB0ZXN0cy4gV2UgZG9uJ3QgZG8gY2hlY2tpbmcgdG8gbWFrZSBzdXJlXG4gICAgICAgICAgLy8gdGhhdCB0aGUgaW1wbGllZCBwYXJlbnQgdGVzdHMgaGF2ZSBiZWVuIGFkZGVkLiBZb3UgbXVzdCBjYWxsIHRoZW0gaW5cbiAgICAgICAgICAvLyBvcmRlciAoZWl0aGVyIGluIHRoZSB0ZXN0LCBvciBtYWtlIHRoZSBwYXJlbnQgdGVzdCBhIGRlcGVuZGVuY3kpLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gQ2FwIGl0IHRvIFRXTyB0byBtYWtlIHRoZSBsb2dpYyBzaW1wbGUgYW5kIGJlY2F1c2Ugd2hvIG5lZWRzIHRoYXQga2luZCBvZiBzdWJ0ZXN0aW5nXG4gICAgICAgICAgLy8gaGFzaHRhZyBmYW1vdXMgbGFzdCB3b3Jkc1xuICAgICAgICAgIGZlYXR1cmVOYW1lU3BsaXQgPSBmZWF0dXJlTmFtZS5zcGxpdCgnLicpO1xuXG4gICAgICAgICAgaWYgKGZlYXR1cmVOYW1lU3BsaXQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gPSByZXN1bHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNhc3QgdG8gYSBCb29sZWFuLCBpZiBub3Qgb25lIGFscmVhZHlcbiAgICAgICAgICAgIC8qIGpzaGludCAtVzA1MyAqL1xuICAgICAgICAgICAgaWYgKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSAmJiAhKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSBpbnN0YW5jZW9mIEJvb2xlYW4pKSB7XG4gICAgICAgICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IG5ldyBCb29sZWFuKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXVtmZWF0dXJlTmFtZVNwbGl0WzFdXSA9IHJlc3VsdDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjbGFzc2VzLnB1c2goKHJlc3VsdCA/ICcnIDogJ25vLScpICsgZmVhdHVyZU5hbWVTcGxpdC5qb2luKCctJykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIDtcblxuICAvKipcbiAgICogZG9jRWxlbWVudCBpcyBhIGNvbnZlbmllbmNlIHdyYXBwZXIgdG8gZ3JhYiB0aGUgcm9vdCBlbGVtZW50IG9mIHRoZSBkb2N1bWVudFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IFRoZSByb290IGVsZW1lbnQgb2YgdGhlIGRvY3VtZW50XG4gICAqL1xuXG4gIHZhciBkb2NFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJjbGFzc0xpc3RcIixcbiAgXCJjYW5pdXNlXCI6IFwiY2xhc3NsaXN0XCIsXG4gIFwicHJvcGVydHlcIjogXCJjbGFzc2xpc3RcIixcbiAgXCJ0YWdzXCI6IFtcImRvbVwiXSxcbiAgXCJidWlsZGVyQWxpYXNlc1wiOiBbXCJkYXRhdmlld19hcGlcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJNRE4gRG9jc1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS9lbGVtZW50LmNsYXNzTGlzdFwiXG4gIH1dXG59XG4hKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnY2xhc3NsaXN0JywgJ2NsYXNzTGlzdCcgaW4gZG9jRWxlbWVudCk7XG5cblxuICAvKipcbiAgICogQSBjb252ZW5pZW5jZSBoZWxwZXIgdG8gY2hlY2sgaWYgdGhlIGRvY3VtZW50IHdlIGFyZSBydW5uaW5nIGluIGlzIGFuIFNWRyBkb2N1bWVudFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBpc1NWRyA9IGRvY0VsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3N2Zyc7XG4gIFxuXG4gIC8qKlxuICAgKiBzZXRDbGFzc2VzIHRha2VzIGFuIGFycmF5IG9mIGNsYXNzIG5hbWVzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIHJvb3QgZWxlbWVudFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHNldENsYXNzZXNcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2xhc3NlcyAtIEFycmF5IG9mIGNsYXNzIG5hbWVzXG4gICAqL1xuXG4gIC8vIFBhc3MgaW4gYW4gYW5kIGFycmF5IG9mIGNsYXNzIG5hbWVzLCBlLmcuOlxuICAvLyAgWyduby13ZWJwJywgJ2JvcmRlcnJhZGl1cycsIC4uLl1cbiAgZnVuY3Rpb24gc2V0Q2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGRvY0VsZW1lbnQuY2xhc3NOYW1lO1xuICAgIHZhciBjbGFzc1ByZWZpeCA9IE1vZGVybml6ci5fY29uZmlnLmNsYXNzUHJlZml4IHx8ICcnO1xuXG4gICAgaWYgKGlzU1ZHKSB7XG4gICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuYmFzZVZhbDtcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgYG5vLWpzYCB0byBganNgIChpbmRlcGVuZGVudGx5IG9mIHRoZSBgZW5hYmxlQ2xhc3Nlc2Agb3B0aW9uKVxuICAgIC8vIEhhbmRsZSBjbGFzc1ByZWZpeCBvbiB0aGlzIHRvb1xuICAgIGlmIChNb2Rlcm5penIuX2NvbmZpZy5lbmFibGVKU0NsYXNzKSB7XG4gICAgICB2YXIgcmVKUyA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBjbGFzc1ByZWZpeCArICduby1qcyhcXFxcc3wkKScpO1xuICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnJlcGxhY2UocmVKUywgJyQxJyArIGNsYXNzUHJlZml4ICsgJ2pzJDInKTtcbiAgICB9XG5cbiAgICBpZiAoTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlQ2xhc3Nlcykge1xuICAgICAgLy8gQWRkIHRoZSBuZXcgY2xhc3Nlc1xuICAgICAgY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzUHJlZml4ICsgY2xhc3Nlcy5qb2luKCcgJyArIGNsYXNzUHJlZml4KTtcbiAgICAgIGlzU1ZHID8gZG9jRWxlbWVudC5jbGFzc05hbWUuYmFzZVZhbCA9IGNsYXNzTmFtZSA6IGRvY0VsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIH1cblxuICB9XG5cbiAgO1xuXG4vKipcbiAgKiBAb3B0aW9uTmFtZSBodG1sNXByaW50c2hpdlxuICAqIEBvcHRpb25Qcm9wIGh0bWw1cHJpbnRzaGl2XG4gICovXG5cbiAgLy8gVGFrZSB0aGUgaHRtbDUgdmFyaWFibGUgb3V0IG9mIHRoZSBodG1sNXNoaXYgc2NvcGUgc28gd2UgY2FuIHJldHVybiBpdC5cbiAgdmFyIGh0bWw1O1xuICBpZiAoIWlzU1ZHKSB7XG5cbiAgICAvKipcbiAgICAgKiBAcHJlc2VydmUgSFRNTDUgU2hpdiAzLjcuMyB8IEBhZmFya2FzIEBqZGFsdG9uIEBqb25fbmVhbCBAcmVtIHwgTUlUL0dQTDIgTGljZW5zZWRcbiAgICAgKi9cbiAgICA7KGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgICAgIC8qanNoaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgLyoqIHZlcnNpb24gKi9cbiAgICAgIHZhciB2ZXJzaW9uID0gJzMuNy4zJztcblxuICAgICAgLyoqIFByZXNldCBvcHRpb25zICovXG4gICAgICB2YXIgb3B0aW9ucyA9IHdpbmRvdy5odG1sNSB8fCB7fTtcblxuICAgICAgLyoqIFVzZWQgdG8gc2tpcCBwcm9ibGVtIGVsZW1lbnRzICovXG4gICAgICB2YXIgcmVTa2lwID0gL148fF4oPzpidXR0b258bWFwfHNlbGVjdHx0ZXh0YXJlYXxvYmplY3R8aWZyYW1lfG9wdGlvbnxvcHRncm91cCkkL2k7XG5cbiAgICAgIC8qKiBOb3QgYWxsIGVsZW1lbnRzIGNhbiBiZSBjbG9uZWQgaW4gSUUgKiovXG4gICAgICB2YXIgc2F2ZUNsb25lcyA9IC9eKD86YXxifGNvZGV8ZGl2fGZpZWxkc2V0fGgxfGgyfGgzfGg0fGg1fGg2fGl8bGFiZWx8bGl8b2x8cHxxfHNwYW58c3Ryb25nfHN0eWxlfHRhYmxlfHRib2R5fHRkfHRofHRyfHVsKSQvaTtcblxuICAgICAgLyoqIERldGVjdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIGRlZmF1bHQgaHRtbDUgc3R5bGVzICovXG4gICAgICB2YXIgc3VwcG9ydHNIdG1sNVN0eWxlcztcblxuICAgICAgLyoqIE5hbWUgb2YgdGhlIGV4cGFuZG8sIHRvIHdvcmsgd2l0aCBtdWx0aXBsZSBkb2N1bWVudHMgb3IgdG8gcmUtc2hpdiBvbmUgZG9jdW1lbnQgKi9cbiAgICAgIHZhciBleHBhbmRvID0gJ19odG1sNXNoaXYnO1xuXG4gICAgICAvKiogVGhlIGlkIGZvciB0aGUgdGhlIGRvY3VtZW50cyBleHBhbmRvICovXG4gICAgICB2YXIgZXhwYW5JRCA9IDA7XG5cbiAgICAgIC8qKiBDYWNoZWQgZGF0YSBmb3IgZWFjaCBkb2N1bWVudCAqL1xuICAgICAgdmFyIGV4cGFuZG9EYXRhID0ge307XG5cbiAgICAgIC8qKiBEZXRlY3Qgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyB1bmtub3duIGVsZW1lbnRzICovXG4gICAgICB2YXIgc3VwcG9ydHNVbmtub3duRWxlbWVudHM7XG5cbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICBhLmlubmVySFRNTCA9ICc8eHl6PjwveHl6Pic7XG4gICAgICAgICAgLy9pZiB0aGUgaGlkZGVuIHByb3BlcnR5IGlzIGltcGxlbWVudGVkIHdlIGNhbiBhc3N1bWUsIHRoYXQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgYmFzaWMgSFRNTDUgU3R5bGVzXG4gICAgICAgICAgc3VwcG9ydHNIdG1sNVN0eWxlcyA9ICgnaGlkZGVuJyBpbiBhKTtcblxuICAgICAgICAgIHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzID0gYS5jaGlsZE5vZGVzLmxlbmd0aCA9PSAxIHx8IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGFzc2lnbiBhIGZhbHNlIHBvc2l0aXZlIGlmIHVuYWJsZSB0byBzaGl2XG4gICAgICAgICAgICAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCkoJ2EnKTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY2xvbmVOb2RlID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBmcmFnLmNyZWF0ZUVsZW1lbnQgPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSgpKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgLy8gYXNzaWduIGEgZmFsc2UgcG9zaXRpdmUgaWYgZGV0ZWN0aW9uIGZhaWxzID0+IHVuYWJsZSB0byBzaGl2XG4gICAgICAgICAgc3VwcG9ydHNIdG1sNVN0eWxlcyA9IHRydWU7XG4gICAgICAgICAgc3VwcG9ydHNVbmtub3duRWxlbWVudHMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgIH0oKSk7XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzdHlsZSBzaGVldCB3aXRoIHRoZSBnaXZlbiBDU1MgdGV4dCBhbmQgYWRkcyBpdCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY3NzVGV4dCBUaGUgQ1NTIHRleHQuXG4gICAgICAgKiBAcmV0dXJucyB7U3R5bGVTaGVldH0gVGhlIHN0eWxlIGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCwgY3NzVGV4dCkge1xuICAgICAgICB2YXIgcCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuICAgICAgICAgIHBhcmVudCA9IG93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSB8fCBvd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBwLmlubmVySFRNTCA9ICd4PHN0eWxlPicgKyBjc3NUZXh0ICsgJzwvc3R5bGU+JztcbiAgICAgICAgcmV0dXJuIHBhcmVudC5pbnNlcnRCZWZvcmUocC5sYXN0Q2hpbGQsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBgaHRtbDUuZWxlbWVudHNgIGFzIGFuIGFycmF5LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgb2Ygc2hpdmVkIGVsZW1lbnQgbm9kZSBuYW1lcy5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudHMoKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGh0bWw1LmVsZW1lbnRzO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnRzID09ICdzdHJpbmcnID8gZWxlbWVudHMuc3BsaXQoJyAnKSA6IGVsZW1lbnRzO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEV4dGVuZHMgdGhlIGJ1aWx0LWluIGxpc3Qgb2YgaHRtbDUgZWxlbWVudHNcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl9IG5ld0VsZW1lbnRzIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb3IgYXJyYXkgb2YgbmV3IGVsZW1lbnQgbmFtZXMgdG8gc2hpdlxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYWRkRWxlbWVudHMobmV3RWxlbWVudHMsIG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gaHRtbDUuZWxlbWVudHM7XG4gICAgICAgIGlmKHR5cGVvZiBlbGVtZW50cyAhPSAnc3RyaW5nJyl7XG4gICAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIG5ld0VsZW1lbnRzICE9ICdzdHJpbmcnKXtcbiAgICAgICAgICBuZXdFbGVtZW50cyA9IG5ld0VsZW1lbnRzLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgICAgICBodG1sNS5lbGVtZW50cyA9IGVsZW1lbnRzICsnICcrIG5ld0VsZW1lbnRzO1xuICAgICAgICBzaGl2RG9jdW1lbnQob3duZXJEb2N1bWVudCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgZGF0YSBhc3NvY2lhdGVkIHRvIHRoZSBnaXZlbiBkb2N1bWVudFxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAgICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IG9mIGRhdGEuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBleHBhbmRvRGF0YVtvd25lckRvY3VtZW50W2V4cGFuZG9dXTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgIGV4cGFuSUQrKztcbiAgICAgICAgICBvd25lckRvY3VtZW50W2V4cGFuZG9dID0gZXhwYW5JRDtcbiAgICAgICAgICBleHBhbmRvRGF0YVtleHBhbklEXSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBhIHNoaXZlZCBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gbm9kZU5hbWUgYW5kIGRvY3VtZW50XG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZSBuYW1lIG9mIHRoZSBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBjb250ZXh0IGRvY3VtZW50LlxuICAgICAgICogQHJldHVybnMge09iamVjdH0gVGhlIHNoaXZlZCBlbGVtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KG5vZGVOYW1lLCBvd25lckRvY3VtZW50LCBkYXRhKXtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmKHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKXtcbiAgICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vZGU7XG5cbiAgICAgICAgaWYgKGRhdGEuY2FjaGVbbm9kZU5hbWVdKSB7XG4gICAgICAgICAgbm9kZSA9IGRhdGEuY2FjaGVbbm9kZU5hbWVdLmNsb25lTm9kZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNhdmVDbG9uZXMudGVzdChub2RlTmFtZSkpIHtcbiAgICAgICAgICBub2RlID0gKGRhdGEuY2FjaGVbbm9kZU5hbWVdID0gZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKSkuY2xvbmVOb2RlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZSA9IGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdm9pZCBhZGRpbmcgc29tZSBlbGVtZW50cyB0byBmcmFnbWVudHMgaW4gSUUgPCA5IGJlY2F1c2VcbiAgICAgICAgLy8gKiBBdHRyaWJ1dGVzIGxpa2UgYG5hbWVgIG9yIGB0eXBlYCBjYW5ub3QgYmUgc2V0L2NoYW5nZWQgb25jZSBhbiBlbGVtZW50XG4gICAgICAgIC8vICAgaXMgaW5zZXJ0ZWQgaW50byBhIGRvY3VtZW50L2ZyYWdtZW50XG4gICAgICAgIC8vICogTGluayBlbGVtZW50cyB3aXRoIGBzcmNgIGF0dHJpYnV0ZXMgdGhhdCBhcmUgaW5hY2Nlc3NpYmxlLCBhcyB3aXRoXG4gICAgICAgIC8vICAgYSA0MDMgcmVzcG9uc2UsIHdpbGwgY2F1c2UgdGhlIHRhYi93aW5kb3cgdG8gY3Jhc2hcbiAgICAgICAgLy8gKiBTY3JpcHQgZWxlbWVudHMgYXBwZW5kZWQgdG8gZnJhZ21lbnRzIHdpbGwgZXhlY3V0ZSB3aGVuIHRoZWlyIGBzcmNgXG4gICAgICAgIC8vICAgb3IgYHRleHRgIHByb3BlcnR5IGlzIHNldFxuICAgICAgICByZXR1cm4gbm9kZS5jYW5IYXZlQ2hpbGRyZW4gJiYgIXJlU2tpcC50ZXN0KG5vZGVOYW1lKSAmJiAhbm9kZS50YWdVcm4gPyBkYXRhLmZyYWcuYXBwZW5kQ2hpbGQobm9kZSkgOiBub2RlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIHJldHVybnMgYSBzaGl2ZWQgRG9jdW1lbnRGcmFnbWVudCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50XG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGNvbnRleHQgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc2hpdmVkIERvY3VtZW50RnJhZ21lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQob3duZXJEb2N1bWVudCwgZGF0YSl7XG4gICAgICAgIGlmICghb3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIG93bmVyRG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZihzdXBwb3J0c1Vua25vd25FbGVtZW50cyl7XG4gICAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGRhdGEgPSBkYXRhIHx8IGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpO1xuICAgICAgICB2YXIgY2xvbmUgPSBkYXRhLmZyYWcuY2xvbmVOb2RlKCksXG4gICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgZWxlbXMgPSBnZXRFbGVtZW50cygpLFxuICAgICAgICAgIGwgPSBlbGVtcy5sZW5ndGg7XG4gICAgICAgIGZvcig7aTxsO2krKyl7XG4gICAgICAgICAgY2xvbmUuY3JlYXRlRWxlbWVudChlbGVtc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBgY3JlYXRlRWxlbWVudGAgYW5kIGBjcmVhdGVEb2N1bWVudEZyYWdtZW50YCBtZXRob2RzIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fERvY3VtZW50RnJhZ21lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgb2YgdGhlIGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2TWV0aG9kcyhvd25lckRvY3VtZW50LCBkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YS5jYWNoZSkge1xuICAgICAgICAgIGRhdGEuY2FjaGUgPSB7fTtcbiAgICAgICAgICBkYXRhLmNyZWF0ZUVsZW0gPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ7XG4gICAgICAgICAgZGF0YS5jcmVhdGVGcmFnID0gb3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50O1xuICAgICAgICAgIGRhdGEuZnJhZyA9IGRhdGEuY3JlYXRlRnJhZygpO1xuICAgICAgICB9XG5cblxuICAgICAgICBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihub2RlTmFtZSkge1xuICAgICAgICAgIC8vYWJvcnQgc2hpdlxuICAgICAgICAgIGlmICghaHRtbDUuc2hpdk1ldGhvZHMpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChub2RlTmFtZSwgb3duZXJEb2N1bWVudCwgZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgb3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50ID0gRnVuY3Rpb24oJ2gsZicsICdyZXR1cm4gZnVuY3Rpb24oKXsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhciBuPWYuY2xvbmVOb2RlKCksYz1uLmNyZWF0ZUVsZW1lbnQ7JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoLnNoaXZNZXRob2RzJiYoJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVucm9sbCB0aGUgYGNyZWF0ZUVsZW1lbnRgIGNhbGxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEVsZW1lbnRzKCkuam9pbigpLnJlcGxhY2UoL1tcXHdcXC06XSsvZywgZnVuY3Rpb24obm9kZU5hbWUpIHtcbiAgICAgICAgICBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpO1xuICAgICAgICAgIGRhdGEuZnJhZy5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcbiAgICAgICAgICByZXR1cm4gJ2MoXCInICsgbm9kZU5hbWUgKyAnXCIpJztcbiAgICAgICAgfSkgK1xuICAgICAgICAgICcpO3JldHVybiBufSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKGh0bWw1LCBkYXRhLmZyYWcpO1xuICAgICAgfVxuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHNoaXYuXG4gICAgICAgKiBAcmV0dXJucyB7RG9jdW1lbnR9IFRoZSBzaGl2ZWQgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZEb2N1bWVudChvd25lckRvY3VtZW50KSB7XG4gICAgICAgIGlmICghb3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIG93bmVyRG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YSA9IGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpO1xuXG4gICAgICAgIGlmIChodG1sNS5zaGl2Q1NTICYmICFzdXBwb3J0c0h0bWw1U3R5bGVzICYmICFkYXRhLmhhc0NTUykge1xuICAgICAgICAgIGRhdGEuaGFzQ1NTID0gISFhZGRTdHlsZVNoZWV0KG93bmVyRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVjdHMgYmxvY2sgZGlzcGxheSBub3QgZGVmaW5lZCBpbiBJRTYvNy84LzlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXJ0aWNsZSxhc2lkZSxkaWFsb2csZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGhlYWRlcixoZ3JvdXAsbWFpbixuYXYsc2VjdGlvbntkaXNwbGF5OmJsb2NrfScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZHMgc3R5bGluZyBub3QgcHJlc2VudCBpbiBJRTYvNy84LzlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFya3tiYWNrZ3JvdW5kOiNGRjA7Y29sb3I6IzAwMH0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRlcyBub24tcmVuZGVyZWQgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGVtcGxhdGV7ZGlzcGxheTpub25lfSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdXBwb3J0c1Vua25vd25FbGVtZW50cykge1xuICAgICAgICAgIHNoaXZNZXRob2RzKG93bmVyRG9jdW1lbnQsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvd25lckRvY3VtZW50O1xuICAgICAgfVxuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgYGh0bWw1YCBvYmplY3QgaXMgZXhwb3NlZCBzbyB0aGF0IG1vcmUgZWxlbWVudHMgY2FuIGJlIHNoaXZlZCBhbmRcbiAgICAgICAqIGV4aXN0aW5nIHNoaXZpbmcgY2FuIGJlIGRldGVjdGVkIG9uIGlmcmFtZXMuXG4gICAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKlxuICAgICAgICogLy8gb3B0aW9ucyBjYW4gYmUgY2hhbmdlZCBiZWZvcmUgdGhlIHNjcmlwdCBpcyBpbmNsdWRlZFxuICAgICAgICogaHRtbDUgPSB7ICdlbGVtZW50cyc6ICdtYXJrIHNlY3Rpb24nLCAnc2hpdkNTUyc6IGZhbHNlLCAnc2hpdk1ldGhvZHMnOiBmYWxzZSB9O1xuICAgICAgICovXG4gICAgICB2YXIgaHRtbDUgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Ygbm9kZSBuYW1lcyBvZiB0aGUgZWxlbWVudHMgdG8gc2hpdi5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIEFycmF5fFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgJ2VsZW1lbnRzJzogb3B0aW9ucy5lbGVtZW50cyB8fCAnYWJiciBhcnRpY2xlIGFzaWRlIGF1ZGlvIGJkaSBjYW52YXMgZGF0YSBkYXRhbGlzdCBkZXRhaWxzIGRpYWxvZyBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgaGVhZGVyIGhncm91cCBtYWluIG1hcmsgbWV0ZXIgbmF2IG91dHB1dCBwaWN0dXJlIHByb2dyZXNzIHNlY3Rpb24gc3VtbWFyeSB0ZW1wbGF0ZSB0aW1lIHZpZGVvJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY3VycmVudCB2ZXJzaW9uIG9mIGh0bWw1c2hpdlxuICAgICAgICAgKi9cbiAgICAgICAgJ3ZlcnNpb24nOiB2ZXJzaW9uLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgSFRNTDUgc3R5bGUgc2hlZXQgc2hvdWxkIGJlIGluc2VydGVkLlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3NoaXZDU1MnOiAob3B0aW9ucy5zaGl2Q1NTICE9PSBmYWxzZSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElzIGVxdWFsIHRvIHRydWUgaWYgYSBicm93c2VyIHN1cHBvcnRzIGNyZWF0aW5nIHVua25vd24vSFRNTDUgZWxlbWVudHNcbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgICdzdXBwb3J0c1Vua25vd25FbGVtZW50cyc6IHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZG9jdW1lbnQncyBgY3JlYXRlRWxlbWVudGAgYW5kIGBjcmVhdGVEb2N1bWVudEZyYWdtZW50YFxuICAgICAgICAgKiBtZXRob2RzIHNob3VsZCBiZSBvdmVyd3JpdHRlbi5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIEJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgICdzaGl2TWV0aG9kcyc6IChvcHRpb25zLnNoaXZNZXRob2RzICE9PSBmYWxzZSksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc3RyaW5nIHRvIGRlc2NyaWJlIHRoZSB0eXBlIG9mIGBodG1sNWAgb2JqZWN0IChcImRlZmF1bHRcIiBvciBcImRlZmF1bHQgcHJpbnRcIikuXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgICd0eXBlJzogJ2RlZmF1bHQnLFxuXG4gICAgICAgIC8vIHNoaXZzIHRoZSBkb2N1bWVudCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBgaHRtbDVgIG9iamVjdCBvcHRpb25zXG4gICAgICAgICdzaGl2RG9jdW1lbnQnOiBzaGl2RG9jdW1lbnQsXG5cbiAgICAgICAgLy9jcmVhdGVzIGEgc2hpdmVkIGVsZW1lbnRcbiAgICAgICAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcblxuICAgICAgICAvL2NyZWF0ZXMgYSBzaGl2ZWQgZG9jdW1lbnRGcmFnbWVudFxuICAgICAgICBjcmVhdGVEb2N1bWVudEZyYWdtZW50OiBjcmVhdGVEb2N1bWVudEZyYWdtZW50LFxuXG4gICAgICAgIC8vZXh0ZW5kcyBsaXN0IG9mIGVsZW1lbnRzXG4gICAgICAgIGFkZEVsZW1lbnRzOiBhZGRFbGVtZW50c1xuICAgICAgfTtcblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8vIGV4cG9zZSBodG1sNVxuICAgICAgd2luZG93Lmh0bWw1ID0gaHRtbDU7XG5cbiAgICAgIC8vIHNoaXYgdGhlIGRvY3VtZW50XG4gICAgICBzaGl2RG9jdW1lbnQoZG9jdW1lbnQpO1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gUHJpbnQgU2hpdiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqIFVzZWQgdG8gZmlsdGVyIG1lZGlhIHR5cGVzICovXG4gICAgICB2YXIgcmVNZWRpYSA9IC9eJHxcXGIoPzphbGx8cHJpbnQpXFxiLztcblxuICAgICAgLyoqIFVzZWQgdG8gbmFtZXNwYWNlIHByaW50YWJsZSBlbGVtZW50cyAqL1xuICAgICAgdmFyIHNoaXZOYW1lc3BhY2UgPSAnaHRtbDVzaGl2JztcblxuICAgICAgLyoqIERldGVjdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIHNoaXZhYmxlIHN0eWxlIHNoZWV0cyAqL1xuICAgICAgdmFyIHN1cHBvcnRzU2hpdmFibGVTaGVldHMgPSAhc3VwcG9ydHNVbmtub3duRWxlbWVudHMgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBhc3NpZ24gYSBmYWxzZSBuZWdhdGl2ZSBpZiB1bmFibGUgdG8gc2hpdlxuICAgICAgICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJldHVybiAhKFxuICAgICAgICAgIHR5cGVvZiBkb2N1bWVudC5uYW1lc3BhY2VzID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQucGFyZW50V2luZG93ID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgZG9jRWwuYXBwbHlFbGVtZW50ID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgZG9jRWwucmVtb3ZlTm9kZSA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5hdHRhY2hFdmVudCA9PSAndW5kZWZpbmVkJ1xuICAgICAgICApO1xuICAgICAgfSgpKTtcblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogV3JhcHMgYWxsIEhUTUw1IGVsZW1lbnRzIGluIHRoZSBnaXZlbiBkb2N1bWVudCB3aXRoIHByaW50YWJsZSBlbGVtZW50cy5cbiAgICAgICAqIChlZy4gdGhlIFwiaGVhZGVyXCIgZWxlbWVudCBpcyB3cmFwcGVkIHdpdGggdGhlIFwiaHRtbDVzaGl2OmhlYWRlclwiIGVsZW1lbnQpXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEFuIGFycmF5IHdyYXBwZXJzIGFkZGVkLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBhZGRXcmFwcGVycyhvd25lckRvY3VtZW50KSB7XG4gICAgICAgIHZhciBub2RlLFxuICAgICAgICBub2RlcyA9IG93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSxcbiAgICAgICAgICBpbmRleCA9IG5vZGVzLmxlbmd0aCxcbiAgICAgICAgICByZUVsZW1lbnRzID0gUmVnRXhwKCdeKD86JyArIGdldEVsZW1lbnRzKCkuam9pbignfCcpICsgJykkJywgJ2knKSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIG5vZGUgPSBub2Rlc1tpbmRleF07XG4gICAgICAgICAgaWYgKHJlRWxlbWVudHMudGVzdChub2RlLm5vZGVOYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobm9kZS5hcHBseUVsZW1lbnQoY3JlYXRlV3JhcHBlcihub2RlKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBwcmludGFibGUgd3JhcHBlciBmb3IgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50LlxuICAgICAgICogQHJldHVybnMge0VsZW1lbnR9IFRoZSB3cmFwcGVyLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBjcmVhdGVXcmFwcGVyKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIG5vZGUsXG4gICAgICAgIG5vZGVzID0gZWxlbWVudC5hdHRyaWJ1dGVzLFxuICAgICAgICAgIGluZGV4ID0gbm9kZXMubGVuZ3RoLFxuICAgICAgICAgIHdyYXBwZXIgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChzaGl2TmFtZXNwYWNlICsgJzonICsgZWxlbWVudC5ub2RlTmFtZSk7XG5cbiAgICAgICAgLy8gY29weSBlbGVtZW50IGF0dHJpYnV0ZXMgdG8gdGhlIHdyYXBwZXJcbiAgICAgICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgICAgICBub2RlID0gbm9kZXNbaW5kZXhdO1xuICAgICAgICAgIG5vZGUuc3BlY2lmaWVkICYmIHdyYXBwZXIuc2V0QXR0cmlidXRlKG5vZGUubm9kZU5hbWUsIG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjb3B5IGVsZW1lbnQgc3R5bGVzIHRvIHRoZSB3cmFwcGVyXG4gICAgICAgIHdyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IGVsZW1lbnQuc3R5bGUuY3NzVGV4dDtcbiAgICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGdpdmVuIENTUyB0ZXh0LlxuICAgICAgICogKGVnLiBoZWFkZXJ7fSBiZWNvbWVzIGh0bWw1c2hpdlxcOmhlYWRlcnt9KVxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjc3NUZXh0IFRoZSBDU1MgdGV4dCB0byBzaGl2LlxuICAgICAgICogQHJldHVybnMge1N0cmluZ30gVGhlIHNoaXZlZCBDU1MgdGV4dC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdkNzc1RleHQoY3NzVGV4dCkge1xuICAgICAgICB2YXIgcGFpcixcbiAgICAgICAgcGFydHMgPSBjc3NUZXh0LnNwbGl0KCd7JyksXG4gICAgICAgICAgaW5kZXggPSBwYXJ0cy5sZW5ndGgsXG4gICAgICAgICAgcmVFbGVtZW50cyA9IFJlZ0V4cCgnKF58W1xcXFxzLD4rfl0pKCcgKyBnZXRFbGVtZW50cygpLmpvaW4oJ3wnKSArICcpKD89W1tcXFxccyw+K34jLjpdfCQpJywgJ2dpJyksXG4gICAgICAgICAgcmVwbGFjZW1lbnQgPSAnJDEnICsgc2hpdk5hbWVzcGFjZSArICdcXFxcOiQyJztcblxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIHBhaXIgPSBwYXJ0c1tpbmRleF0gPSBwYXJ0c1tpbmRleF0uc3BsaXQoJ30nKTtcbiAgICAgICAgICBwYWlyW3BhaXIubGVuZ3RoIC0gMV0gPSBwYWlyW3BhaXIubGVuZ3RoIC0gMV0ucmVwbGFjZShyZUVsZW1lbnRzLCByZXBsYWNlbWVudCk7XG4gICAgICAgICAgcGFydHNbaW5kZXhdID0gcGFpci5qb2luKCd9Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJ3snKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiB3cmFwcGVycywgbGVhdmluZyB0aGUgb3JpZ2luYWwgZWxlbWVudHMuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtcyB7QXJyYXl9IHdyYXBwZXJzIEFuIGFycmF5IG9mIHByaW50YWJsZSB3cmFwcGVycy5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVtb3ZlV3JhcHBlcnMod3JhcHBlcnMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gd3JhcHBlcnMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIHdyYXBwZXJzW2luZGV4XS5yZW1vdmVOb2RlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGdpdmVuIGRvY3VtZW50IGZvciBwcmludC5cbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gc2hpdi5cbiAgICAgICAqIEByZXR1cm5zIHtEb2N1bWVudH0gVGhlIHNoaXZlZCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdlByaW50KG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHNoaXZlZFNoZWV0LFxuICAgICAgICB3cmFwcGVycyxcbiAgICAgICAgZGF0YSA9IGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpLFxuICAgICAgICAgIG5hbWVzcGFjZXMgPSBvd25lckRvY3VtZW50Lm5hbWVzcGFjZXMsXG4gICAgICAgICAgb3duZXJXaW5kb3cgPSBvd25lckRvY3VtZW50LnBhcmVudFdpbmRvdztcblxuICAgICAgICBpZiAoIXN1cHBvcnRzU2hpdmFibGVTaGVldHMgfHwgb3duZXJEb2N1bWVudC5wcmludFNoaXZlZCkge1xuICAgICAgICAgIHJldHVybiBvd25lckRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlc1tzaGl2TmFtZXNwYWNlXSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG5hbWVzcGFjZXMuYWRkKHNoaXZOYW1lc3BhY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU2hlZXQoKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGEuX3JlbW92ZVNoZWV0VGltZXIpO1xuICAgICAgICAgIGlmIChzaGl2ZWRTaGVldCkge1xuICAgICAgICAgICAgc2hpdmVkU2hlZXQucmVtb3ZlTm9kZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hpdmVkU2hlZXQ9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBvd25lcldpbmRvdy5hdHRhY2hFdmVudCgnb25iZWZvcmVwcmludCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgcmVtb3ZlU2hlZXQoKTtcblxuICAgICAgICAgIHZhciBpbXBvcnRzLFxuICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICBzaGVldCxcbiAgICAgICAgICBjb2xsZWN0aW9uID0gb3duZXJEb2N1bWVudC5zdHlsZVNoZWV0cyxcbiAgICAgICAgICAgIGNzc1RleHQgPSBbXSxcbiAgICAgICAgICAgIGluZGV4ID0gY29sbGVjdGlvbi5sZW5ndGgsXG4gICAgICAgICAgICBzaGVldHMgPSBBcnJheShpbmRleCk7XG5cbiAgICAgICAgICAvLyBjb252ZXJ0IHN0eWxlU2hlZXRzIGNvbGxlY3Rpb24gdG8gYW4gYXJyYXlcbiAgICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgICAgc2hlZXRzW2luZGV4XSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjb25jYXQgYWxsIHN0eWxlIHNoZWV0IENTUyB0ZXh0XG4gICAgICAgICAgd2hpbGUgKChzaGVldCA9IHNoZWV0cy5wb3AoKSkpIHtcbiAgICAgICAgICAgIC8vIElFIGRvZXMgbm90IGVuZm9yY2UgYSBzYW1lIG9yaWdpbiBwb2xpY3kgZm9yIGV4dGVybmFsIHN0eWxlIHNoZWV0cy4uLlxuICAgICAgICAgICAgLy8gYnV0IGhhcyB0cm91YmxlIHdpdGggc29tZSBkeW5hbWljYWxseSBjcmVhdGVkIHN0eWxlc2hlZXRzXG4gICAgICAgICAgICBpZiAoIXNoZWV0LmRpc2FibGVkICYmIHJlTWVkaWEudGVzdChzaGVldC5tZWRpYSkpIHtcblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGltcG9ydHMgPSBzaGVldC5pbXBvcnRzO1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGltcG9ydHMubGVuZ3RoO1xuICAgICAgICAgICAgICB9IGNhdGNoKGVyKXtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSAwO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgc2hlZXRzLnB1c2goaW1wb3J0c1tpbmRleF0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjc3NUZXh0LnB1c2goc2hlZXQuY3NzVGV4dCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2goZXIpe31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB3cmFwIGFsbCBIVE1MNSBlbGVtZW50cyB3aXRoIHByaW50YWJsZSBlbGVtZW50cyBhbmQgYWRkIHRoZSBzaGl2ZWQgc3R5bGUgc2hlZXRcbiAgICAgICAgICBjc3NUZXh0ID0gc2hpdkNzc1RleHQoY3NzVGV4dC5yZXZlcnNlKCkuam9pbignJykpO1xuICAgICAgICAgIHdyYXBwZXJzID0gYWRkV3JhcHBlcnMob3duZXJEb2N1bWVudCk7XG4gICAgICAgICAgc2hpdmVkU2hlZXQgPSBhZGRTdHlsZVNoZWV0KG93bmVyRG9jdW1lbnQsIGNzc1RleHQpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG93bmVyV2luZG93LmF0dGFjaEV2ZW50KCdvbmFmdGVycHJpbnQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyByZW1vdmUgd3JhcHBlcnMsIGxlYXZpbmcgdGhlIG9yaWdpbmFsIGVsZW1lbnRzLCBhbmQgcmVtb3ZlIHRoZSBzaGl2ZWQgc3R5bGUgc2hlZXRcbiAgICAgICAgICByZW1vdmVXcmFwcGVycyh3cmFwcGVycyk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGEuX3JlbW92ZVNoZWV0VGltZXIpO1xuICAgICAgICAgIGRhdGEuX3JlbW92ZVNoZWV0VGltZXIgPSBzZXRUaW1lb3V0KHJlbW92ZVNoZWV0LCA1MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBvd25lckRvY3VtZW50LnByaW50U2hpdmVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvLyBleHBvc2UgQVBJXG4gICAgICBodG1sNS50eXBlICs9ICcgcHJpbnQnO1xuICAgICAgaHRtbDUuc2hpdlByaW50ID0gc2hpdlByaW50O1xuXG4gICAgICAvLyBzaGl2IGZvciBwcmludFxuICAgICAgc2hpdlByaW50KGRvY3VtZW50KTtcblxuICAgICAgaWYodHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyl7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gaHRtbDU7XG4gICAgICB9XG5cbiAgICB9KHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBkb2N1bWVudCkpO1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgYnJvd3NlcnMgZm9sbG93IHRoZSBzcGVjLCB0aGVuIHRoZXkgd291bGQgZXhwb3NlIHZlbmRvci1zcGVjaWZpYyBzdHlsZSBhczpcbiAgICogICBlbGVtLnN0eWxlLldlYmtpdEJvcmRlclJhZGl1c1xuICAgKiBpbnN0ZWFkIG9mIHNvbWV0aGluZyBsaWtlIHRoZSBmb2xsb3dpbmcsIHdoaWNoIHdvdWxkIGJlIHRlY2huaWNhbGx5IGluY29ycmVjdDpcbiAgICogICBlbGVtLnN0eWxlLndlYmtpdEJvcmRlclJhZGl1c1xuXG4gICAqIFdlYmtpdCBnaG9zdHMgdGhlaXIgcHJvcGVydGllcyBpbiBsb3dlcmNhc2UgYnV0IE9wZXJhICYgTW96IGRvIG5vdC5cbiAgICogTWljcm9zb2Z0IHVzZXMgYSBsb3dlcmNhc2UgYG1zYCBpbnN0ZWFkIG9mIHRoZSBjb3JyZWN0IGBNc2AgaW4gSUU4K1xuICAgKiAgIGVyaWsuZWFlLm5ldC9hcmNoaXZlcy8yMDA4LzAzLzEwLzIxLjQ4LjEwL1xuXG4gICAqIE1vcmUgaGVyZTogZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy9pc3N1ZS8yMVxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZlbmRvci1zcGVjaWZpYyBzdHlsZSBwcm9wZXJ0aWVzXG4gICAqL1xuXG4gIHZhciBvbVByZWZpeGVzID0gJ01veiBPIG1zIFdlYmtpdCc7XG4gIFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIEphdmFTY3JpcHQgRE9NIHZhbHVlcyB1c2VkIGZvciB0ZXN0c1xuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5fZG9tUHJlZml4ZXNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLl9kb21QcmVmaXhlc1xuICAgKiBAb3B0aW9uUHJvcCBkb21QcmVmaXhlc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBNb2Rlcm5penIuX2RvbVByZWZpeGVzIGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgW19wcmVmaXhlc10oI21vZGVybml6ci1fcHJlZml4ZXMpLCBidXQgcmF0aGVyXG4gICAqIHRoYW4ga2ViYWItY2FzZSBwcm9wZXJ0aWVzLCBhbGwgcHJvcGVydGllcyBhcmUgdGhlaXIgQ2FwaXRhbGl6ZWQgdmFyaWFudFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIuX2RvbVByZWZpeGVzID09PSBbIFwiTW96XCIsIFwiT1wiLCBcIm1zXCIsIFwiV2Via2l0XCIgXTtcbiAgICogYGBgXG4gICAqL1xuXG4gIHZhciBkb21QcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gb21QcmVmaXhlcy50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykgOiBbXSk7XG4gIE1vZGVybml6clByb3RvLl9kb21QcmVmaXhlcyA9IGRvbVByZWZpeGVzO1xuICBcblxuICAvKipcbiAgICogY3NzVG9ET00gdGFrZXMgYSBrZWJhYi1jYXNlIHN0cmluZyBhbmQgY29udmVydHMgaXQgdG8gY2FtZWxDYXNlXG4gICAqIGUuZy4gYm94LXNpemluZyAtPiBib3hTaXppbmdcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBjc3NUb0RPTVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFN0cmluZyBuYW1lIG9mIGtlYmFiLWNhc2UgcHJvcCB3ZSB3YW50IHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGNhbWVsQ2FzZSB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBuYW1lXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNzc1RvRE9NKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC8oW2Etel0pLShbYS16XSkvZywgZnVuY3Rpb24oc3RyLCBtMSwgbTIpIHtcbiAgICAgIHJldHVybiBtMSArIG0yLnRvVXBwZXJDYXNlKCk7XG4gICAgfSkucmVwbGFjZSgvXi0vLCAnJyk7XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBkb21Ub0NTUyB0YWtlcyBhIGNhbWVsQ2FzZSBzdHJpbmcgYW5kIGNvbnZlcnRzIGl0IHRvIGtlYmFiLWNhc2VcbiAgICogZS5nLiBib3hTaXppbmcgLT4gYm94LXNpemluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGRvbVRvQ1NTXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gU3RyaW5nIG5hbWUgb2YgY2FtZWxDYXNlIHByb3Agd2Ugd2FudCB0byBjb252ZXJ0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBrZWJhYi1jYXNlIHZlcnNpb24gb2YgdGhlIHN1cHBsaWVkIG5hbWVcbiAgICovXG5cbiAgZnVuY3Rpb24gZG9tVG9DU1MobmFtZSkge1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24oc3RyLCBtMSkge1xuICAgICAgcmV0dXJuICctJyArIG0xLnRvTG93ZXJDYXNlKCk7XG4gICAgfSkucmVwbGFjZSgvXm1zLS8sICctbXMtJyk7XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBjcmVhdGVFbGVtZW50IGlzIGEgY29udmVuaWVuY2Ugd3JhcHBlciBhcm91bmQgZG9jdW1lbnQuY3JlYXRlRWxlbWVudC4gU2luY2Ugd2VcbiAgICogdXNlIGNyZWF0ZUVsZW1lbnQgYWxsIG92ZXIgdGhlIHBsYWNlLCB0aGlzIGFsbG93cyBmb3IgKHNsaWdodGx5KSBzbWFsbGVyIGNvZGVcbiAgICogYXMgd2VsbCBhcyBhYnN0cmFjdGluZyBhd2F5IGlzc3VlcyB3aXRoIGNyZWF0aW5nIGVsZW1lbnRzIGluIGNvbnRleHRzIG90aGVyIHRoYW5cbiAgICogSFRNTCBkb2N1bWVudHMgKGUuZy4gU1ZHIGRvY3VtZW50cykuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gY3JlYXRlRWxlbWVudFxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gQW4gSFRNTCBvciBTVkcgZWxlbWVudFxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KCkge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gVGhpcyBpcyB0aGUgY2FzZSBpbiBJRTcsIHdoZXJlIHRoZSB0eXBlIG9mIGNyZWF0ZUVsZW1lbnQgaXMgXCJvYmplY3RcIi5cbiAgICAgIC8vIEZvciB0aGlzIHJlYXNvbiwgd2UgY2Fubm90IGNhbGwgYXBwbHkoKSBhcyBPYmplY3QgaXMgbm90IGEgRnVuY3Rpb24uXG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChhcmd1bWVudHNbMF0pO1xuICAgIH0gZWxzZSBpZiAoaXNTVkcpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMuY2FsbChkb2N1bWVudCwgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgYXJndW1lbnRzWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkoZG9jdW1lbnQsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiBwcmVmaXhlZENTU1ZhbHVlIGlzIGEgd2F5IHRlc3QgZm9yIHByZWZpeGVkIGNzcyBwcm9wZXJ0aWVzIChlLmcuIGRpc3BsYXk6IC13ZWJraXQtZmxleClcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIucHJlZml4ZWRDU1NWYWx1ZVxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIucHJlZml4ZWRDU1NWYWx1ZSgpXG4gICAqIEBvcHRpb25Qcm9wIHByZWZpeGVkQ1NTVmFsdWVcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHByZWZpeGVkQ1NTVmFsdWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gU3RyaW5nIHZhbHVlIG9mIHRoZSBub24gcHJlZml4ZWQgdmVyc2lvbiBvZiB0aGUgdmFsdWUgeW91IHdhbnQgdG8gdGVzdCBmb3JcbiAgICogQHJldHVybnMge3N0cmluZ3xmYWxzZX0gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIChwb3NzaWJseSBwcmVmaXhlZClcbiAgICogdmFsaWQgdmVyc2lvbiBvZiB0aGUgcHJvcGVydHksIG9yIGBmYWxzZWAgd2hlbiBpdCBpcyB1bnN1cHBvcnRlZC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlYCBpcyBhIHdheSB0ZXN0IGZvciBwcmVmaXhlZCBjc3MgcHJvcGVydGllcyAoZS5nLiBkaXNwbGF5OiAtd2Via2l0LWZsZXgpXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlKCdiYWNrZ3JvdW5kJywgJ2xpbmVhci1ncmFkaWVudChsZWZ0LCByZWQsIHJlZCknKVxuICAgKiBgYGBcbiAgICpcbiAgICovXG5cbiAgdmFyIHByZWZpeGVkQ1NTVmFsdWUgPSBmdW5jdGlvbihwcm9wLCB2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cbiAgICBpZiAocHJvcCBpbiBzdHlsZSkge1xuICAgICAgdmFyIGkgPSBkb21QcmVmaXhlcy5sZW5ndGg7XG5cbiAgICAgIHN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICByZXN1bHQgPSBzdHlsZVtwcm9wXTtcblxuICAgICAgd2hpbGUgKGktLSAmJiAhcmVzdWx0KSB7XG4gICAgICAgIHN0eWxlW3Byb3BdID0gJy0nICsgZG9tUHJlZml4ZXNbaV0gKyAnLScgKyB2YWx1ZTtcbiAgICAgICAgcmVzdWx0ID0gc3R5bGVbcHJvcF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdCA9PT0gJycpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgTW9kZXJuaXpyUHJvdG8ucHJlZml4ZWRDU1NWYWx1ZSA9IHByZWZpeGVkQ1NTVmFsdWU7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNhbnZhc1wiLFxuICBcInByb3BlcnR5XCI6IFwiY2FudmFzXCIsXG4gIFwiY2FuaXVzZVwiOiBcImNhbnZhc1wiLFxuICBcInRhZ3NcIjogW1wiY2FudmFzXCIsIFwiZ3JhcGhpY3NcIl0sXG4gIFwicG9seWZpbGxzXCI6IFtcImZsYXNoY2FudmFzXCIsIFwiZXhjYW52YXNcIiwgXCJzbGNhbnZhc1wiLCBcImZ4Y2FudmFzXCJdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciB0aGUgYDxjYW52YXM+YCBlbGVtZW50IGZvciAyRCBkcmF3aW5nLlxuKi9cblxuICAvLyBPbiB0aGUgUzYwIGFuZCBCQiBTdG9ybSwgZ2V0Q29udGV4dCBleGlzdHMsIGJ1dCBhbHdheXMgcmV0dXJucyB1bmRlZmluZWRcbiAgLy8gc28gd2UgYWN0dWFsbHkgaGF2ZSB0byBjYWxsIGdldENvbnRleHQoKSB0byB2ZXJpZnlcbiAgLy8gZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy9pc3N1ZS85Ny9cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2NhbnZhcycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtID0gY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgcmV0dXJuICEhKGVsZW0uZ2V0Q29udGV4dCAmJiBlbGVtLmdldENvbnRleHQoJzJkJykpO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBHcmFkaWVudHNcIixcbiAgXCJjYW5pdXNlXCI6IFwiY3NzLWdyYWRpZW50c1wiLFxuICBcInByb3BlcnR5XCI6IFwiY3NzZ3JhZGllbnRzXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl0sXG4gIFwia25vd25CdWdzXCI6IFtcIkZhbHNlLXBvc2l0aXZlcyBvbiB3ZWJPUyAoaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzLzIwMilcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJXZWJraXQgR3JhZGllbnQgU3ludGF4XCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvMTc1L2ludHJvZHVjaW5nLWNzcy1ncmFkaWVudHMvXCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiTGluZWFyIEdyYWRpZW50IFN5bnRheFwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9saW5lYXItZ3JhZGllbnRcIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJXM0MgR3JhZGllbnQgU3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtaW1hZ2VzLTMvI2dyYWRpZW50c1wiXG4gIH1dXG59XG4hKi9cblxuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3NncmFkaWVudHMnLCBmdW5jdGlvbigpIHtcblxuICAgIHZhciBzdHIxID0gJ2JhY2tncm91bmQtaW1hZ2U6JztcbiAgICB2YXIgc3RyMiA9ICdncmFkaWVudChsaW5lYXIsbGVmdCB0b3AscmlnaHQgYm90dG9tLGZyb20oIzlmOSksdG8od2hpdGUpKTsnO1xuICAgIHZhciBjc3MgPSAnJztcbiAgICB2YXIgYW5nbGU7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcHJlZml4ZXMubGVuZ3RoIC0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhbmdsZSA9IChpID09PSAwID8gJ3RvICcgOiAnJyk7XG4gICAgICBjc3MgKz0gc3RyMSArIHByZWZpeGVzW2ldICsgJ2xpbmVhci1ncmFkaWVudCgnICsgYW5nbGUgKyAnbGVmdCB0b3AsICM5ZjksIHdoaXRlKTsnO1xuICAgIH1cblxuICAgIGlmIChNb2Rlcm5penIuX2NvbmZpZy51c2VQcmVmaXhlcykge1xuICAgIC8vIGxlZ2FjeSB3ZWJraXQgc3ludGF4IChGSVhNRTogcmVtb3ZlIHdoZW4gc3ludGF4IG5vdCBpbiB1c2UgYW55bW9yZSlcbiAgICAgIGNzcyArPSBzdHIxICsgJy13ZWJraXQtJyArIHN0cjI7XG4gICAgfVxuXG4gICAgdmFyIGVsZW0gPSBjcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcbiAgICBzdHlsZS5jc3NUZXh0ID0gY3NzO1xuXG4gICAgLy8gSUU2IHJldHVybnMgdW5kZWZpbmVkIHNvIGNhc3QgdG8gc3RyaW5nXG4gICAgcmV0dXJuICgnJyArIHN0eWxlLmJhY2tncm91bmRJbWFnZSkuaW5kZXhPZignZ3JhZGllbnQnKSA+IC0xO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcInBsYWNlaG9sZGVyIGF0dHJpYnV0ZVwiLFxuICBcInByb3BlcnR5XCI6IFwicGxhY2Vob2xkZXJcIixcbiAgXCJ0YWdzXCI6IFtcImZvcm1zXCIsIFwiYXR0cmlidXRlXCJdLFxuICBcImJ1aWxkZXJBbGlhc2VzXCI6IFtcImZvcm1zX3BsYWNlaG9sZGVyXCJdXG59XG4hKi9cbi8qIERPQ1xuVGVzdHMgZm9yIHBsYWNlaG9sZGVyIGF0dHJpYnV0ZSBpbiBpbnB1dHMgYW5kIHRleHRhcmVhc1xuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgncGxhY2Vob2xkZXInLCAoJ3BsYWNlaG9sZGVyJyBpbiBjcmVhdGVFbGVtZW50KCdpbnB1dCcpICYmICdwbGFjZWhvbGRlcicgaW4gY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKSkpO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwic3Jjc2V0IGF0dHJpYnV0ZVwiLFxuICBcInByb3BlcnR5XCI6IFwic3Jjc2V0XCIsXG4gIFwidGFnc1wiOiBbXCJpbWFnZVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlNtYXNoaW5nIE1hZ2F6aW5lIEFydGljbGVcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BUE5HXCJcbiAgICB9LHtcbiAgICBcIm5hbWVcIjogXCJHZW5lcmF0ZSBtdWx0aS1yZXNvbHV0aW9uIGltYWdlcyBmb3Igc3Jjc2V0IHdpdGggR3J1bnRcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2FkZHlvc21hbmkuY29tL2Jsb2cvZ2VuZXJhdGUtbXVsdGktcmVzb2x1dGlvbi1pbWFnZXMtZm9yLXNyY3NldC13aXRoLWdydW50L1wiXG4gICAgfV1cbn1cbiEqL1xuLyogRE9DXG5UZXN0IGZvciB0aGUgc3Jjc2V0IGF0dHJpYnV0ZSBvZiBpbWFnZXNcbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3NyY3NldCcsICdzcmNzZXQnIGluIGNyZWF0ZUVsZW1lbnQoJ2ltZycpKTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIklubGluZSBTVkdcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImlubGluZXN2Z1wiLFxuICBcImNhbml1c2VcIjogXCJzdmctaHRtbDVcIixcbiAgXCJ0YWdzXCI6IFtcInN2Z1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlRlc3QgcGFnZVwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vcGF1bGlyaXNoLmNvbS9kZW1vL2lubGluZS1zdmdcIlxuICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiVGVzdCBwYWdlIGFuZCByZXN1bHRzXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9jb2RlcGVuLmlvL2VsdG9ubWVzcXVpdGEvZnVsbC9HZ1hidm8vXCJcbiAgfV0sXG4gIFwicG9seWZpbGxzXCI6IFtcImlubGluZS1zdmctcG9seWZpbGxcIl0sXG4gIFwia25vd25CdWdzXCI6IFtcIkZhbHNlIG5lZ2F0aXZlIG9uIHNvbWUgQ2hyb21pYSBicm93c2Vycy5cIl1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHN1cHBvcnQgZm9yIGlubGluZSBTVkcgaW4gSFRNTCAobm90IHdpdGhpbiBYSFRNTCkuXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdpbmxpbmVzdmcnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGl2ID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmlubmVySFRNTCA9ICc8c3ZnLz4nO1xuICAgIHJldHVybiAodHlwZW9mIFNWR1JlY3QgIT0gJ3VuZGVmaW5lZCcgJiYgZGl2LmZpcnN0Q2hpbGQgJiYgZGl2LmZpcnN0Q2hpbGQubmFtZXNwYWNlVVJJKSA9PSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBTdXBwb3J0c1wiLFxuICBcInByb3BlcnR5XCI6IFwic3VwcG9ydHNcIixcbiAgXCJjYW5pdXNlXCI6IFwiY3NzLWZlYXR1cmVxdWVyaWVzXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiY3NzX3N1cHBvcnRzXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiVzMgU3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2NzczMtY29uZGl0aW9uYWwvI2F0LXN1cHBvcnRzXCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiUmVsYXRlZCBHaXRodWIgSXNzdWVcIixcbiAgICBcImhyZWZcIjogXCJnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzLzY0OFwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIlczIEluZm9cIixcbiAgICBcImhyZWZcIjogXCJodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MzLWNvbmRpdGlvbmFsLyN0aGUtY3Nzc3VwcG9ydHNydWxlLWludGVyZmFjZVwiXG4gIH1dXG59XG4hKi9cblxuICB2YXIgbmV3U3ludGF4ID0gJ0NTUycgaW4gd2luZG93ICYmICdzdXBwb3J0cycgaW4gd2luZG93LkNTUztcbiAgdmFyIG9sZFN5bnRheCA9ICdzdXBwb3J0c0NTUycgaW4gd2luZG93O1xuICBNb2Rlcm5penIuYWRkVGVzdCgnc3VwcG9ydHMnLCBuZXdTeW50YXggfHwgb2xkU3ludGF4KTtcblxuXG4gIC8qKlxuICAgKiBnZXRCb2R5IHJldHVybnMgdGhlIGJvZHkgb2YgYSBkb2N1bWVudCwgb3IgYW4gZWxlbWVudCB0aGF0IGNhbiBzdGFuZCBpbiBmb3JcbiAgICogdGhlIGJvZHkgaWYgYSByZWFsIGJvZHkgZG9lcyBub3QgZXhpc3RcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBnZXRCb2R5XG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBSZXR1cm5zIHRoZSByZWFsIGJvZHkgb2YgYSBkb2N1bWVudCwgb3IgYW5cbiAgICogYXJ0aWZpY2lhbGx5IGNyZWF0ZWQgZWxlbWVudCB0aGF0IHN0YW5kcyBpbiBmb3IgdGhlIGJvZHlcbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0Qm9keSgpIHtcbiAgICAvLyBBZnRlciBwYWdlIGxvYWQgaW5qZWN0aW5nIGEgZmFrZSBib2R5IGRvZXNuJ3Qgd29yayBzbyBjaGVjayBpZiBib2R5IGV4aXN0c1xuICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICAgIGlmICghYm9keSkge1xuICAgICAgLy8gQ2FuJ3QgdXNlIHRoZSByZWFsIGJvZHkgY3JlYXRlIGEgZmFrZSBvbmUuXG4gICAgICBib2R5ID0gY3JlYXRlRWxlbWVudChpc1NWRyA/ICdzdmcnIDogJ2JvZHknKTtcbiAgICAgIGJvZHkuZmFrZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICA7XG5cbiAgdmFyIGNzc29tUHJlZml4ZXMgPSAoTW9kZXJuaXpyUHJvdG8uX2NvbmZpZy51c2VQcmVmaXhlcyA/IG9tUHJlZml4ZXMuc3BsaXQoJyAnKSA6IFtdKTtcbiAgTW9kZXJuaXpyUHJvdG8uX2Nzc29tUHJlZml4ZXMgPSBjc3NvbVByZWZpeGVzO1xuICBcblxuICAvKipcbiAgICogYXRSdWxlIHJldHVybnMgYSBnaXZlbiBDU1MgcHJvcGVydHkgYXQtcnVsZSAoZWcgQGtleWZyYW1lcyksIHBvc3NpYmx5IGluXG4gICAqIHNvbWUgcHJlZml4ZWQgZm9ybSwgb3IgZmFsc2UsIGluIHRoZSBjYXNlIG9mIGFuIHVuc3VwcG9ydGVkIHJ1bGVcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuYXRSdWxlXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5hdFJ1bGUoKVxuICAgKiBAb3B0aW9uUHJvcCBhdFJ1bGVcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIGF0UnVsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBALXJ1bGUgdG8gdGVzdCBmb3JcbiAgICogQHJldHVybnMge3N0cmluZ3xib29sZWFufSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2YWxpZCB2ZXJzaW9uIG9mIHRoZSBALXJ1bGUsIG9yIGBmYWxzZWAgd2hlbiBpdCBpcyB1bnN1cHBvcnRlZC5cbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogIHZhciBrZXlmcmFtZXMgPSBNb2Rlcm5penIuYXRSdWxlKCdAa2V5ZnJhbWVzJyk7XG4gICAqXG4gICAqICBpZiAoa2V5ZnJhbWVzKSB7XG4gICAqICAgIC8vIGtleWZyYW1lcyBhcmUgc3VwcG9ydGVkXG4gICAqICAgIC8vIGNvdWxkIGJlIGBALXdlYmtpdC1rZXlmcmFtZXNgIG9yIGBAa2V5ZnJhbWVzYFxuICAgKiAgfSBlbHNlIHtcbiAgICogICAgLy8ga2V5ZnJhbWVzID09PSBgZmFsc2VgXG4gICAqICB9XG4gICAqIGBgYFxuICAgKlxuICAgKi9cblxuICB2YXIgYXRSdWxlID0gZnVuY3Rpb24ocHJvcCkge1xuICAgIHZhciBsZW5ndGggPSBwcmVmaXhlcy5sZW5ndGg7XG4gICAgdmFyIGNzc3J1bGUgPSB3aW5kb3cuQ1NTUnVsZTtcbiAgICB2YXIgcnVsZTtcblxuICAgIGlmICh0eXBlb2YgY3NzcnVsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKCFwcm9wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGxpdGVyYWwgQCBmcm9tIGJlZ2lubmluZyBvZiBwcm92aWRlZCBwcm9wZXJ0eVxuICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL15ALywgJycpO1xuXG4gICAgLy8gQ1NTUnVsZXMgdXNlIHVuZGVyc2NvcmVzIGluc3RlYWQgb2YgZGFzaGVzXG4gICAgcnVsZSA9IHByb3AucmVwbGFjZSgvLS9nLCAnXycpLnRvVXBwZXJDYXNlKCkgKyAnX1JVTEUnO1xuXG4gICAgaWYgKHJ1bGUgaW4gY3NzcnVsZSkge1xuICAgICAgcmV0dXJuICdAJyArIHByb3A7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgLy8gcHJlZml4ZXMgZ2l2ZXMgdXMgc29tZXRoaW5nIGxpa2UgLW8tLCBhbmQgd2Ugd2FudCBPX1xuICAgICAgdmFyIHByZWZpeCA9IHByZWZpeGVzW2ldO1xuICAgICAgdmFyIHRoaXNSdWxlID0gcHJlZml4LnRvVXBwZXJDYXNlKCkgKyAnXycgKyBydWxlO1xuXG4gICAgICBpZiAodGhpc1J1bGUgaW4gY3NzcnVsZSkge1xuICAgICAgICByZXR1cm4gJ0AtJyArIHByZWZpeC50b0xvd2VyQ2FzZSgpICsgJy0nICsgcHJvcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgTW9kZXJuaXpyUHJvdG8uYXRSdWxlID0gYXRSdWxlO1xuXG4gIFxuXG5cbiAgLyoqXG4gICAqIGNvbnRhaW5zIGNoZWNrcyB0byBzZWUgaWYgYSBzdHJpbmcgY29udGFpbnMgYW5vdGhlciBzdHJpbmdcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBjb250YWluc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB3ZSB3YW50IHRvIGNoZWNrIGZvciBzdWJzdHJpbmdzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzdHIgLSBUaGUgc3Vic3RyaW5nIHdlIHdhbnQgdG8gc2VhcmNoIHRoZSBmaXJzdCBzdHJpbmcgZm9yXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBjb250YWlucyhzdHIsIHN1YnN0cikge1xuICAgIHJldHVybiAhIX4oJycgKyBzdHIpLmluZGV4T2Yoc3Vic3RyKTtcbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMgaW5qZWN0cyBhbiBlbGVtZW50IHdpdGggc3R5bGUgZWxlbWVudCBhbmQgc29tZSBDU1MgcnVsZXNcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBpbmplY3RFbGVtZW50V2l0aFN0eWxlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZSAtIFN0cmluZyByZXByZXNlbnRpbmcgYSBjc3MgcnVsZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIHRlc3QgdGhlIGluamVjdGVkIGVsZW1lbnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtub2Rlc10gLSBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgbm9kZXMgeW91IHdhbnQgaW5qZWN0ZWRcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3Rlc3RuYW1lc10gLSBBbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgYXJlIHVzZWQgYXMgaWRzIGZvciB0aGUgYWRkaXRpb25hbCBub2Rlc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMocnVsZSwgY2FsbGJhY2ssIG5vZGVzLCB0ZXN0bmFtZXMpIHtcbiAgICB2YXIgbW9kID0gJ21vZGVybml6cic7XG4gICAgdmFyIHN0eWxlO1xuICAgIHZhciByZXQ7XG4gICAgdmFyIG5vZGU7XG4gICAgdmFyIGRvY092ZXJmbG93O1xuICAgIHZhciBkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgYm9keSA9IGdldEJvZHkoKTtcblxuICAgIGlmIChwYXJzZUludChub2RlcywgMTApKSB7XG4gICAgICAvLyBJbiBvcmRlciBub3QgdG8gZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMgd2UgY3JlYXRlIGEgbm9kZSBmb3IgZWFjaCB0ZXN0XG4gICAgICAvLyBUaGlzIGFsc28gYWxsb3dzIHRoZSBtZXRob2QgdG8gc2NhbGUgZm9yIHVuc3BlY2lmaWVkIHVzZXNcbiAgICAgIHdoaWxlIChub2Rlcy0tKSB7XG4gICAgICAgIG5vZGUgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbm9kZS5pZCA9IHRlc3RuYW1lcyA/IHRlc3RuYW1lc1tub2Rlc10gOiBtb2QgKyAobm9kZXMgKyAxKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0eWxlID0gY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcbiAgICBzdHlsZS5pZCA9ICdzJyArIG1vZDtcblxuICAgIC8vIElFNiB3aWxsIGZhbHNlIHBvc2l0aXZlIG9uIHNvbWUgdGVzdHMgZHVlIHRvIHRoZSBzdHlsZSBlbGVtZW50IGluc2lkZSB0aGUgdGVzdCBkaXYgc29tZWhvdyBpbnRlcmZlcmluZyBvZmZzZXRIZWlnaHQsIHNvIGluc2VydCBpdCBpbnRvIGJvZHkgb3IgZmFrZWJvZHkuXG4gICAgLy8gT3BlcmEgd2lsbCBhY3QgYWxsIHF1aXJreSB3aGVuIGluamVjdGluZyBlbGVtZW50cyBpbiBkb2N1bWVudEVsZW1lbnQgd2hlbiBwYWdlIGlzIHNlcnZlZCBhcyB4bWwsIG5lZWRzIGZha2Vib2R5IHRvby4gIzI3MFxuICAgICghYm9keS5mYWtlID8gZGl2IDogYm9keSkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBydWxlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlKSk7XG4gICAgfVxuICAgIGRpdi5pZCA9IG1vZDtcblxuICAgIGlmIChib2R5LmZha2UpIHtcbiAgICAgIC8vYXZvaWQgY3Jhc2hpbmcgSUU4LCBpZiBiYWNrZ3JvdW5kIGltYWdlIGlzIHVzZWRcbiAgICAgIGJvZHkuc3R5bGUuYmFja2dyb3VuZCA9ICcnO1xuICAgICAgLy9TYWZhcmkgNS4xMy81LjEuNCBPU1ggc3RvcHMgbG9hZGluZyBpZiA6Oi13ZWJraXQtc2Nyb2xsYmFyIGlzIHVzZWQgYW5kIHNjcm9sbGJhcnMgYXJlIHZpc2libGVcbiAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIGRvY092ZXJmbG93ID0gZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdztcbiAgICAgIGRvY0VsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIGRvY0VsZW1lbnQuYXBwZW5kQ2hpbGQoYm9keSk7XG4gICAgfVxuXG4gICAgcmV0ID0gY2FsbGJhY2soZGl2LCBydWxlKTtcbiAgICAvLyBJZiB0aGlzIGlzIGRvbmUgYWZ0ZXIgcGFnZSBsb2FkIHdlIGRvbid0IHdhbnQgdG8gcmVtb3ZlIHRoZSBib2R5IHNvIGNoZWNrIGlmIGJvZHkgZXhpc3RzXG4gICAgaWYgKGJvZHkuZmFrZSkge1xuICAgICAgYm9keS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJvZHkpO1xuICAgICAgZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IGRvY092ZXJmbG93O1xuICAgICAgLy8gVHJpZ2dlciBsYXlvdXQgc28ga2luZXRpYyBzY3JvbGxpbmcgaXNuJ3QgZGlzYWJsZWQgaW4gaU9TNitcbiAgICAgIGRvY0VsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgIH1cblxuICAgIHJldHVybiAhIXJldDtcblxuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiB0ZXN0U3R5bGVzIGluamVjdHMgYW4gZWxlbWVudCB3aXRoIHN0eWxlIGVsZW1lbnQgYW5kIHNvbWUgQ1NTIHJ1bGVzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnRlc3RTdHlsZXNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnRlc3RTdHlsZXMoKVxuICAgKiBAb3B0aW9uUHJvcCB0ZXN0U3R5bGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiB0ZXN0U3R5bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlIC0gU3RyaW5nIHJlcHJlc2VudGluZyBhIGNzcyBydWxlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gdGVzdCB0aGUgaW5qZWN0ZWQgZWxlbWVudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW25vZGVzXSAtIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBub2RlcyB5b3Ugd2FudCBpbmplY3RlZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbdGVzdG5hbWVzXSAtIEFuIGFycmF5IG9mIHN0cmluZ3MgdGhhdCBhcmUgdXNlZCBhcyBpZHMgZm9yIHRoZSBhZGRpdGlvbmFsIG5vZGVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnRlc3RTdHlsZXNgIHRha2VzIGEgQ1NTIHJ1bGUgYW5kIGluamVjdHMgaXQgb250byB0aGUgY3VycmVudCBwYWdlXG4gICAqIGFsb25nIHdpdGggKHBvc3NpYmx5IG11bHRpcGxlKSBET00gZWxlbWVudHMuIFRoaXMgbGV0cyB5b3UgY2hlY2sgZm9yIGZlYXR1cmVzXG4gICAqIHRoYXQgY2FuIG5vdCBiZSBkZXRlY3RlZCBieSBzaW1wbHkgY2hlY2tpbmcgdGhlIFtJRExdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvTW96aWxsYS9EZXZlbG9wZXJfZ3VpZGUvSW50ZXJmYWNlX2RldmVsb3BtZW50X2d1aWRlL0lETF9pbnRlcmZhY2VfcnVsZXMpLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFN0eWxlcygnI21vZGVybml6ciB7IHdpZHRoOiA5cHg7IGNvbG9yOiBwYXBheWF3aGlwOyB9JywgZnVuY3Rpb24oZWxlbSwgcnVsZSkge1xuICAgKiAgIC8vIGVsZW0gaXMgdGhlIGZpcnN0IERPTSBub2RlIGluIHRoZSBwYWdlIChieSBkZWZhdWx0ICNtb2Rlcm5penIpXG4gICAqICAgLy8gcnVsZSBpcyB0aGUgZmlyc3QgYXJndW1lbnQgeW91IHN1cHBsaWVkIC0gdGhlIENTUyBydWxlIGluIHN0cmluZyBmb3JtXG4gICAqXG4gICAqICAgYWRkVGVzdCgnd2lkdGh3b3JrcycsIGVsZW0uc3R5bGUud2lkdGggPT09ICc5cHgnKVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIElmIHlvdXIgdGVzdCByZXF1aXJlcyBtdWx0aXBsZSBub2RlcywgeW91IGNhbiBpbmNsdWRlIGEgdGhpcmQgYXJndW1lbnRcbiAgICogaW5kaWNhdGluZyBob3cgbWFueSBhZGRpdGlvbmFsIGRpdiBlbGVtZW50cyB0byBpbmNsdWRlIG9uIHRoZSBwYWdlLiBUaGVcbiAgICogYWRkaXRpb25hbCBub2RlcyBhcmUgaW5qZWN0ZWQgYXMgY2hpbGRyZW4gb2YgdGhlIGBlbGVtYCB0aGF0IGlzIHJldHVybmVkIGFzXG4gICAqIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjbW9kZXJuaXpyIHt3aWR0aDogMXB4fTsgI21vZGVybml6cjIge3dpZHRoOiAycHh9JywgZnVuY3Rpb24oZWxlbSkge1xuICAgKiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5penInKS5zdHlsZS53aWR0aCA9PT0gJzFweCc7IC8vIHRydWVcbiAgICogICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuaXpyMicpLnN0eWxlLndpZHRoID09PSAnMnB4JzsgLy8gdHJ1ZVxuICAgKiAgIGVsZW0uZmlyc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVybml6cjInKTsgLy8gdHJ1ZVxuICAgKiB9LCAxKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIGFsbCBvZiB0aGUgYWRkaXRpb25hbCBlbGVtZW50cyBoYXZlIGFuIElEIG9mIGBtb2Rlcm5penJbbl1gLCB3aGVyZVxuICAgKiBgbmAgaXMgaXRzIGluZGV4IChlLmcuIHRoZSBmaXJzdCBhZGRpdGlvbmFsLCBzZWNvbmQgb3ZlcmFsbCBpcyBgI21vZGVybml6cjJgLFxuICAgKiB0aGUgc2Vjb25kIGFkZGl0aW9uYWwgaXMgYCNtb2Rlcm5penIzYCwgZXRjLikuXG4gICAqIElmIHlvdSB3YW50IHRvIGhhdmUgbW9yZSBtZWFuaW5nZnVsIElEcyBmb3IgeW91ciBmdW5jdGlvbiwgeW91IGNhbiBwcm92aWRlXG4gICAqIHRoZW0gYXMgdGhlIGZvdXJ0aCBhcmd1bWVudCwgYXMgYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFN0eWxlcygnI2ZvbyB7d2lkdGg6IDEwcHh9OyAjYmFyIHtoZWlnaHQ6IDIwcHh9JywgZnVuY3Rpb24oZWxlbSkge1xuICAgKiAgIGVsZW0uZmlyc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbycpOyAvLyB0cnVlXG4gICAqICAgZWxlbS5sYXN0Q2hpbGQgPT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXInKTsgLy8gdHJ1ZVxuICAgKiB9LCAyLCBbJ2ZvbycsICdiYXInXSk7XG4gICAqIGBgYFxuICAgKlxuICAgKi9cblxuICB2YXIgdGVzdFN0eWxlcyA9IE1vZGVybml6clByb3RvLnRlc3RTdHlsZXMgPSBpbmplY3RFbGVtZW50V2l0aFN0eWxlcztcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiVG91Y2ggRXZlbnRzXCIsXG4gIFwicHJvcGVydHlcIjogXCJ0b3VjaGV2ZW50c1wiLFxuICBcImNhbml1c2VcIiA6IFwidG91Y2hcIixcbiAgXCJ0YWdzXCI6IFtcIm1lZGlhXCIsIFwiYXR0cmlidXRlXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiVG91Y2ggRXZlbnRzIHNwZWNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3d3dy53My5vcmcvVFIvMjAxMy9XRC10b3VjaC1ldmVudHMtMjAxMzAxMjQvXCJcbiAgfV0sXG4gIFwid2FybmluZ3NcIjogW1xuICAgIFwiSW5kaWNhdGVzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBUb3VjaCBFdmVudHMgc3BlYywgYW5kIGRvZXMgbm90IG5lY2Vzc2FyaWx5IHJlZmxlY3QgYSB0b3VjaHNjcmVlbiBkZXZpY2VcIlxuICBdLFxuICBcImtub3duQnVnc1wiOiBbXG4gICAgXCJGYWxzZS1wb3NpdGl2ZSBvbiBzb21lIGNvbmZpZ3VyYXRpb25zIG9mIE5va2lhIE45MDBcIixcbiAgICBcIkZhbHNlLXBvc2l0aXZlIG9uIHNvbWUgQmxhY2tCZXJyeSA2LjAgYnVpbGRzIOKAkyBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvMzcyI2lzc3VlY29tbWVudC0zMTEyNjk1XCJcbiAgXVxufVxuISovXG4vKiBET0NcbkluZGljYXRlcyBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgVzNDIFRvdWNoIEV2ZW50cyBBUEkuXG5cblRoaXMgKmRvZXMgbm90KiBuZWNlc3NhcmlseSByZWZsZWN0IGEgdG91Y2hzY3JlZW4gZGV2aWNlOlxuXG4qIE9sZGVyIHRvdWNoc2NyZWVuIGRldmljZXMgb25seSBlbXVsYXRlIG1vdXNlIGV2ZW50c1xuKiBNb2Rlcm4gSUUgdG91Y2ggZGV2aWNlcyBpbXBsZW1lbnQgdGhlIFBvaW50ZXIgRXZlbnRzIEFQSSBpbnN0ZWFkOiB1c2UgYE1vZGVybml6ci5wb2ludGVyZXZlbnRzYCB0byBkZXRlY3Qgc3VwcG9ydCBmb3IgdGhhdFxuKiBTb21lIGJyb3dzZXJzICYgT1Mgc2V0dXBzIG1heSBlbmFibGUgdG91Y2ggQVBJcyB3aGVuIG5vIHRvdWNoc2NyZWVuIGlzIGNvbm5lY3RlZFxuKiBGdXR1cmUgYnJvd3NlcnMgbWF5IGltcGxlbWVudCBvdGhlciBldmVudCBtb2RlbHMgZm9yIHRvdWNoIGludGVyYWN0aW9uc1xuXG5TZWUgdGhpcyBhcnRpY2xlOiBbWW91IENhbid0IERldGVjdCBBIFRvdWNoc2NyZWVuXShodHRwOi8vd3d3LnN0dWNveC5jb20vYmxvZy95b3UtY2FudC1kZXRlY3QtYS10b3VjaHNjcmVlbi8pLlxuXG5JdCdzIHJlY29tbWVuZGVkIHRvIGJpbmQgYm90aCBtb3VzZSBhbmQgdG91Y2gvcG9pbnRlciBldmVudHMgc2ltdWx0YW5lb3VzbHkg4oCTIHNlZSBbdGhpcyBIVE1MNSBSb2NrcyB0dXRvcmlhbF0oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi9tb2JpbGUvdG91Y2hhbmRtb3VzZS8pLlxuXG5UaGlzIHRlc3Qgd2lsbCBhbHNvIHJldHVybiBgdHJ1ZWAgZm9yIEZpcmVmb3ggNCBNdWx0aXRvdWNoIHN1cHBvcnQuXG4qL1xuXG4gIC8vIENocm9tZSAoZGVza3RvcCkgdXNlZCB0byBsaWUgYWJvdXQgaXRzIHN1cHBvcnQgb24gdGhpcywgYnV0IHRoYXQgaGFzIHNpbmNlIGJlZW4gcmVjdGlmaWVkOiBodHRwOi8vY3JidWcuY29tLzM2NDE1XG4gIE1vZGVybml6ci5hZGRUZXN0KCd0b3VjaGV2ZW50cycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBib29sO1xuICAgIGlmICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gpIHtcbiAgICAgIGJvb2wgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbmNsdWRlIHRoZSAnaGVhcnR6JyBhcyBhIHdheSB0byBoYXZlIGEgbm9uIG1hdGNoaW5nIE1RIHRvIGhlbHAgdGVybWluYXRlIHRoZSBqb2luXG4gICAgICAvLyBodHRwczovL2dpdC5pby92em5GSFxuICAgICAgdmFyIHF1ZXJ5ID0gWydAbWVkaWEgKCcsIHByZWZpeGVzLmpvaW4oJ3RvdWNoLWVuYWJsZWQpLCgnKSwgJ2hlYXJ0eicsICcpJywgJ3sjbW9kZXJuaXpye3RvcDo5cHg7cG9zaXRpb246YWJzb2x1dGV9fSddLmpvaW4oJycpO1xuICAgICAgdGVzdFN0eWxlcyhxdWVyeSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBib29sID0gbm9kZS5vZmZzZXRUb3AgPT09IDk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGJvb2w7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiRm9ybSBWYWxpZGF0aW9uXCIsXG4gIFwicHJvcGVydHlcIjogXCJmb3JtdmFsaWRhdGlvblwiLFxuICBcInRhZ3NcIjogW1wiZm9ybXNcIiwgXCJ2YWxpZGF0aW9uXCIsIFwiYXR0cmlidXRlXCJdLFxuICBcImJ1aWxkZXJBbGlhc2VzXCI6IFtcImZvcm1zX3ZhbGlkYXRpb25cIl1cbn1cbiEqL1xuLyogRE9DXG5UaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgdGVzdHMgc3VwcG9ydCBmb3IgaW50ZXJhY3RpdmUgZm9ybSB2YWxpZGF0aW9uLlxuVG8gY2hlY2sgdmFsaWRhdGlvbiBmb3IgYSBzcGVjaWZpYyB0eXBlIG9yIGEgc3BlY2lmaWMgb3RoZXIgY29uc3RyYWludCxcbnRoZSB0ZXN0IGNhbiBiZSBjb21iaW5lZDpcblxuLSBgTW9kZXJuaXpyLmlucHV0dHlwZXMubnVtYmVyICYmIE1vZGVybml6ci5mb3JtdmFsaWRhdGlvbmAgKGJyb3dzZXIgc3VwcG9ydHMgcmFuZ2VPdmVyZmxvdywgdHlwZU1pc21hdGNoIGV0Yy4gZm9yIHR5cGU9bnVtYmVyKVxuLSBgTW9kZXJuaXpyLmlucHV0LnJlcXVpcmVkICYmIE1vZGVybml6ci5mb3JtdmFsaWRhdGlvbmAgKGJyb3dzZXIgc3VwcG9ydHMgdmFsdWVNaXNzaW5nKVxuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnZm9ybXZhbGlkYXRpb24nLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgZm9ybSA9IGNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBpZiAoISgnY2hlY2tWYWxpZGl0eScgaW4gZm9ybSkgfHwgISgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gZm9ybSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCdyZXBvcnRWYWxpZGl0eScgaW4gZm9ybSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBpbnZhbGlkRmlyZWQgPSBmYWxzZTtcbiAgICB2YXIgaW5wdXQ7XG5cbiAgICBNb2Rlcm5penIuZm9ybXZhbGlkYXRpb25hcGkgPSAgdHJ1ZTtcblxuICAgIC8vIFByZXZlbnQgZm9ybSBmcm9tIGJlaW5nIHN1Ym1pdHRlZFxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZSkge1xuICAgICAgLy8gT2xkIFByZXN0byBiYXNlZCBPcGVyYSBkb2VzIG5vdCB2YWxpZGF0ZSBmb3JtLCBpZiBzdWJtaXQgaXMgcHJldmVudGVkXG4gICAgICAvLyBhbHRob3VnaCBPcGVyYSBNaW5pIHNlcnZlcnMgdXNlIG5ld2VyIFByZXN0by5cbiAgICAgIGlmICghd2luZG93Lm9wZXJhIHx8IHdpbmRvdy5vcGVyYW1pbmkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyBDYWxsaW5nIGZvcm0uc3VibWl0KCkgZG9lc24ndCB0cmlnZ2VyIGludGVyYWN0aXZlIHZhbGlkYXRpb24sXG4gICAgLy8gdXNlIGEgc3VibWl0IGJ1dHRvbiBpbnN0ZWFkXG4gICAgLy9vbGRlciBvcGVyYSBicm93c2VycyBuZWVkIGEgbmFtZSBhdHRyaWJ1dGVcbiAgICBmb3JtLmlubmVySFRNTCA9ICc8aW5wdXQgbmFtZT1cIm1vZFRlc3RcIiByZXF1aXJlZD1cInJlcXVpcmVkXCIgLz48YnV0dG9uPjwvYnV0dG9uPic7XG5cbiAgICB0ZXN0U3R5bGVzKCcjbW9kZXJuaXpyIGZvcm17cG9zaXRpb246YWJzb2x1dGU7dG9wOi05OTk5OWVtfScsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgIGlucHV0ID0gZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXTtcblxuICAgICAgLy8gUmVjb3JkIHdoZXRoZXIgXCJpbnZhbGlkXCIgZXZlbnQgaXMgZmlyZWRcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ludmFsaWQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGludmFsaWRGaXJlZCA9IHRydWU7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgLy9PcGVyYSBkb2VzIG5vdCBmdWxseSBzdXBwb3J0IHRoZSB2YWxpZGF0aW9uTWVzc2FnZSBwcm9wZXJ0eVxuICAgICAgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9ubWVzc2FnZSA9ICEhaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG5cbiAgICAgIC8vIFN1Ym1pdCBmb3JtIGJ5IGNsaWNraW5nIHN1Ym1pdCBidXR0b25cbiAgICAgIGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2J1dHRvbicpWzBdLmNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW52YWxpZEZpcmVkO1xuICB9KTtcblxuXG4gIC8qKlxuICAgKiBuYXRpdmVUZXN0UHJvcHMgYWxsb3dzIGZvciB1cyB0byB1c2UgbmF0aXZlIGZlYXR1cmUgZGV0ZWN0aW9uIGZ1bmN0aW9uYWxpdHkgaWYgYXZhaWxhYmxlLlxuICAgKiBzb21lIHByZWZpeGVkIGZvcm0sIG9yIGZhbHNlLCBpbiB0aGUgY2FzZSBvZiBhbiB1bnN1cHBvcnRlZCBydWxlXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gbmF0aXZlVGVzdFByb3BzXG4gICAqIEBwYXJhbSB7YXJyYXl9IHByb3BzIC0gQW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSB3ZSB3YW50IHRvIGNoZWNrIHZpYSBAc3VwcG9ydHNcbiAgICogQHJldHVybnMge2Jvb2xlYW58dW5kZWZpbmVkfSBBIGJvb2xlYW4gd2hlbiBAc3VwcG9ydHMgZXhpc3RzLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gICAqL1xuXG4gIC8vIEFjY2VwdHMgYSBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBhIHNpbmdsZSB2YWx1ZVxuICAvLyBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIG5hdGl2ZSBkZXRlY3Rpb24gbm90IGF2YWlsYWJsZVxuICBmdW5jdGlvbiBuYXRpdmVUZXN0UHJvcHMocHJvcHMsIHZhbHVlKSB7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgLy8gU3RhcnQgd2l0aCB0aGUgSlMgQVBJOiBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLWNvbmRpdGlvbmFsLyN0aGUtY3NzLWludGVyZmFjZVxuICAgIGlmICgnQ1NTJyBpbiB3aW5kb3cgJiYgJ3N1cHBvcnRzJyBpbiB3aW5kb3cuQ1NTKSB7XG4gICAgICAvLyBUcnkgZXZlcnkgcHJlZml4ZWQgdmFyaWFudCBvZiB0aGUgcHJvcGVydHlcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKHdpbmRvdy5DU1Muc3VwcG9ydHMoZG9tVG9DU1MocHJvcHNbaV0pLCB2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2UgZmFsbCBiYWNrIHRvIGF0LXJ1bGUgKGZvciBPcGVyYSAxMi54KVxuICAgIGVsc2UgaWYgKCdDU1NTdXBwb3J0c1J1bGUnIGluIHdpbmRvdykge1xuICAgICAgLy8gQnVpbGQgYSBjb25kaXRpb24gc3RyaW5nIGZvciBldmVyeSBwcmVmaXhlZCB2YXJpYW50XG4gICAgICB2YXIgY29uZGl0aW9uVGV4dCA9IFtdO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25kaXRpb25UZXh0LnB1c2goJygnICsgZG9tVG9DU1MocHJvcHNbaV0pICsgJzonICsgdmFsdWUgKyAnKScpO1xuICAgICAgfVxuICAgICAgY29uZGl0aW9uVGV4dCA9IGNvbmRpdGlvblRleHQuam9pbignIG9yICcpO1xuICAgICAgcmV0dXJuIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzKCdAc3VwcG9ydHMgKCcgKyBjb25kaXRpb25UZXh0ICsgJykgeyAjbW9kZXJuaXpyIHsgcG9zaXRpb246IGFic29sdXRlOyB9IH0nLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLnBvc2l0aW9uID09ICdhYnNvbHV0ZSc7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIHNpbmNlIHdlIGhhdmUgYSBmYWlybHkgbGFyZ2UgbnVtYmVyIG9mIGlucHV0IHRlc3RzIHRoYXQgZG9uJ3QgbXV0YXRlIHRoZSBpbnB1dFxuICAgKiB3ZSBjcmVhdGUgYSBzaW5nbGUgZWxlbWVudCB0aGF0IGNhbiBiZSBzaGFyZWQgd2l0aCBhbGwgb2YgdGhvc2UgdGVzdHMgZm9yIGFcbiAgICogbWlub3IgcGVyZiBib29zdFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHJldHVybnMge0hUTUxJbnB1dEVsZW1lbnR9XG4gICAqL1xuICB2YXIgaW5wdXRFbGVtID0gY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiRm9ybSBpbnB1dCB0eXBlc1wiLFxuICBcInByb3BlcnR5XCI6IFwiaW5wdXR0eXBlc1wiLFxuICBcImNhbml1c2VcIjogXCJmb3Jtc1wiLFxuICBcInRhZ3NcIjogW1wiZm9ybXNcIl0sXG4gIFwiYXV0aG9yc1wiOiBbXCJNaWtlIFRheWxvclwiXSxcbiAgXCJwb2x5ZmlsbHNcIjogW1xuICAgIFwianF1ZXJ5dG9vbHNcIixcbiAgICBcIndlYnNoaW1zXCIsXG4gICAgXCJoNWZcIixcbiAgICBcIndlYmZvcm1zMlwiLFxuICAgIFwibnd4Zm9ybXNcIixcbiAgICBcImZkc2xpZGVyXCIsXG4gICAgXCJodG1sNXNsaWRlclwiLFxuICAgIFwiZ2FsbGVyeWh0bWw1Zm9ybXNcIixcbiAgICBcImpzY29sb3JcIixcbiAgICBcImh0bWw1Zm9ybXNoaW1cIixcbiAgICBcInNlbGVjdGVkb3B0aW9uc2pzXCIsXG4gICAgXCJmb3JtdmFsaWRhdGlvbmpzXCJcbiAgXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgSFRNTDUgZm9ybSBpbnB1dCB0eXBlcyBhbmQgZXhwb3NlcyBCb29sZWFuIHN1YnByb3BlcnRpZXMgd2l0aCB0aGUgcmVzdWx0czpcblxuYGBgamF2YXNjcmlwdFxuTW9kZXJuaXpyLmlucHV0dHlwZXMuY29sb3Jcbk1vZGVybml6ci5pbnB1dHR5cGVzLmRhdGVcbk1vZGVybml6ci5pbnB1dHR5cGVzLmRhdGV0aW1lXG5Nb2Rlcm5penIuaW5wdXR0eXBlc1snZGF0ZXRpbWUtbG9jYWwnXVxuTW9kZXJuaXpyLmlucHV0dHlwZXMuZW1haWxcbk1vZGVybml6ci5pbnB1dHR5cGVzLm1vbnRoXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5udW1iZXJcbk1vZGVybml6ci5pbnB1dHR5cGVzLnJhbmdlXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5zZWFyY2hcbk1vZGVybml6ci5pbnB1dHR5cGVzLnRlbFxuTW9kZXJuaXpyLmlucHV0dHlwZXMudGltZVxuTW9kZXJuaXpyLmlucHV0dHlwZXMudXJsXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy53ZWVrXG5gYGBcbiovXG5cbiAgLy8gUnVuIHRocm91Z2ggSFRNTDUncyBuZXcgaW5wdXQgdHlwZXMgdG8gc2VlIGlmIHRoZSBVQSB1bmRlcnN0YW5kcyBhbnkuXG4gIC8vICAgVGhpcyBpcyBwdXQgYmVoaW5kIHRoZSB0ZXN0cyBydW5sb29wIGJlY2F1c2UgaXQgZG9lc24ndCByZXR1cm4gYVxuICAvLyAgIHRydWUvZmFsc2UgbGlrZSBhbGwgdGhlIG90aGVyIHRlc3RzOyBpbnN0ZWFkLCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICAvLyAgIGNvbnRhaW5pbmcgZWFjaCBpbnB1dCB0eXBlIHdpdGggaXRzIGNvcnJlc3BvbmRpbmcgdHJ1ZS9mYWxzZSB2YWx1ZVxuXG4gIC8vIEJpZyB0aGFua3MgdG8gQG1pa2V0YXlsciBmb3IgdGhlIGh0bWw1IGZvcm1zIGV4cGVydGlzZS4gbWlrZXRheWxyLmNvbS9cbiAgdmFyIGlucHV0dHlwZXMgPSAnc2VhcmNoIHRlbCB1cmwgZW1haWwgZGF0ZXRpbWUgZGF0ZSBtb250aCB3ZWVrIHRpbWUgZGF0ZXRpbWUtbG9jYWwgbnVtYmVyIHJhbmdlIGNvbG9yJy5zcGxpdCgnICcpO1xuICB2YXIgaW5wdXRzID0ge307XG5cbiAgTW9kZXJuaXpyLmlucHV0dHlwZXMgPSAoZnVuY3Rpb24ocHJvcHMpIHtcbiAgICB2YXIgbGVuID0gcHJvcHMubGVuZ3RoO1xuICAgIHZhciBzbWlsZSA9ICcxKSc7XG4gICAgdmFyIGlucHV0RWxlbVR5cGU7XG4gICAgdmFyIGRlZmF1bHRWaWV3O1xuICAgIHZhciBib29sO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICBpbnB1dEVsZW0uc2V0QXR0cmlidXRlKCd0eXBlJywgaW5wdXRFbGVtVHlwZSA9IHByb3BzW2ldKTtcbiAgICAgIGJvb2wgPSBpbnB1dEVsZW0udHlwZSAhPT0gJ3RleHQnICYmICdzdHlsZScgaW4gaW5wdXRFbGVtO1xuXG4gICAgICAvLyBXZSBmaXJzdCBjaGVjayB0byBzZWUgaWYgdGhlIHR5cGUgd2UgZ2l2ZSBpdCBzdGlja3MuLlxuICAgICAgLy8gSWYgdGhlIHR5cGUgZG9lcywgd2UgZmVlZCBpdCBhIHRleHR1YWwgdmFsdWUsIHdoaWNoIHNob3VsZG4ndCBiZSB2YWxpZC5cbiAgICAgIC8vIElmIHRoZSB2YWx1ZSBkb2Vzbid0IHN0aWNrLCB3ZSBrbm93IHRoZXJlJ3MgaW5wdXQgc2FuaXRpemF0aW9uIHdoaWNoIGluZmVycyBhIGN1c3RvbSBVSVxuICAgICAgaWYgKGJvb2wpIHtcblxuICAgICAgICBpbnB1dEVsZW0udmFsdWUgICAgICAgICA9IHNtaWxlO1xuICAgICAgICBpbnB1dEVsZW0uc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjphYnNvbHV0ZTt2aXNpYmlsaXR5OmhpZGRlbjsnO1xuXG4gICAgICAgIGlmICgvXnJhbmdlJC8udGVzdChpbnB1dEVsZW1UeXBlKSAmJiBpbnB1dEVsZW0uc3R5bGUuV2Via2l0QXBwZWFyYW5jZSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICBkb2NFbGVtZW50LmFwcGVuZENoaWxkKGlucHV0RWxlbSk7XG4gICAgICAgICAgZGVmYXVsdFZpZXcgPSBkb2N1bWVudC5kZWZhdWx0VmlldztcblxuICAgICAgICAgIC8vIFNhZmFyaSAyLTQgYWxsb3dzIHRoZSBzbWlsZXkgYXMgYSB2YWx1ZSwgZGVzcGl0ZSBtYWtpbmcgYSBzbGlkZXJcbiAgICAgICAgICBib29sID0gIGRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUgJiZcbiAgICAgICAgICAgIGRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoaW5wdXRFbGVtLCBudWxsKS5XZWJraXRBcHBlYXJhbmNlICE9PSAndGV4dGZpZWxkJyAmJlxuICAgICAgICAgICAgLy8gTW9iaWxlIGFuZHJvaWQgd2ViIGJyb3dzZXIgaGFzIGZhbHNlIHBvc2l0aXZlLCBzbyBtdXN0XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgaGVpZ2h0IHRvIHNlZSBpZiB0aGUgd2lkZ2V0IGlzIGFjdHVhbGx5IHRoZXJlLlxuICAgICAgICAgICAgKGlucHV0RWxlbS5vZmZzZXRIZWlnaHQgIT09IDApO1xuXG4gICAgICAgICAgZG9jRWxlbWVudC5yZW1vdmVDaGlsZChpbnB1dEVsZW0pO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoL14oc2VhcmNofHRlbCkkLy50ZXN0KGlucHV0RWxlbVR5cGUpKSB7XG4gICAgICAgICAgLy8gU3BlYyBkb2Vzbid0IGRlZmluZSBhbnkgc3BlY2lhbCBwYXJzaW5nIG9yIGRldGVjdGFibGUgVUlcbiAgICAgICAgICAvLyAgIGJlaGF2aW9ycyBzbyB3ZSBwYXNzIHRoZXNlIHRocm91Z2ggYXMgdHJ1ZVxuXG4gICAgICAgICAgLy8gSW50ZXJlc3RpbmdseSwgb3BlcmEgZmFpbHMgdGhlIGVhcmxpZXIgdGVzdCwgc28gaXQgZG9lc24ndFxuICAgICAgICAgIC8vICBldmVuIG1ha2UgaXQgaGVyZS5cblxuICAgICAgICB9IGVsc2UgaWYgKC9eKHVybHxlbWFpbCkkLy50ZXN0KGlucHV0RWxlbVR5cGUpKSB7XG4gICAgICAgICAgLy8gUmVhbCB1cmwgYW5kIGVtYWlsIHN1cHBvcnQgY29tZXMgd2l0aCBwcmViYWtlZCB2YWxpZGF0aW9uLlxuICAgICAgICAgIGJvb2wgPSBpbnB1dEVsZW0uY2hlY2tWYWxpZGl0eSAmJiBpbnB1dEVsZW0uY2hlY2tWYWxpZGl0eSgpID09PSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHRoZSB1cGdyYWRlZCBpbnB1dCBjb21wb250ZW50IHJlamVjdHMgdGhlIDopIHRleHQsIHdlIGdvdCBhIHdpbm5lclxuICAgICAgICAgIGJvb2wgPSBpbnB1dEVsZW0udmFsdWUgIT0gc21pbGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5wdXRzWyBwcm9wc1tpXSBdID0gISFib29sO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRzO1xuICB9KShpbnB1dHR5cGVzKTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcImlucHV0W3R5cGU9XFxcIm51bWJlclxcXCJdIExvY2FsaXphdGlvblwiLFxuICBcInByb3BlcnR5XCI6IFwibG9jYWxpemVkbnVtYmVyXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiLCBcImxvY2FsaXphdGlvblwiLCBcImF0dHJpYnV0ZVwiXSxcbiAgXCJhdXRob3JzXCI6IFtcIlBldGVyIEphbmVzXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiV2Via2l0IEJ1ZyBUcmFja2VyIExpc3RpbmdcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDI0ODRcIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJCYXNlZCBvbiBUaGlzXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly90cmFjLndlYmtpdC5vcmcvYnJvd3Nlci90cnVuay9MYXlvdXRUZXN0cy9mYXN0L2Zvcm1zL3NjcmlwdC10ZXN0cy9pbnB1dC1udW1iZXIta2V5b3BlcmF0aW9uLmpzP3Jldj04MDA5NiNMOVwiXG4gIH1dLFxuICBcImtub3duQnVnc1wiOiBbXCJPbmx5IGV2ZXIgcmV0dXJucyB0cnVlIGlmIHRoZSBicm93c2VyL09TIGlzIGNvbmZpZ3VyZWQgdG8gdXNlIGNvbW1hIGFzIGEgZGVjaW1hbCBzZXBhcmF0b3IuIFRoaXMgaXMgcHJvYmFibHkgZmluZSBmb3IgbW9zdCB1c2UgY2FzZXMuXCJdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyB3aGV0aGVyIGlucHV0IHR5cGU9XCJudW1iZXJcIiBpcyBjYXBhYmxlIG9mIHJlY2VpdmluZyBhbmQgZGlzcGxheWluZyBsb2NhbGl6ZWQgbnVtYmVycywgZS5nLiB3aXRoIGNvbW1hIHNlcGFyYXRvci5cbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2xvY2FsaXplZG51bWJlcicsIGZ1bmN0aW9uKCkge1xuICAgIC8vIHRoaXMgZXh0ZW5kcyBvdXIgdGVzdGluZyBvZiBpbnB1dFt0eXBlPW51bWJlcl0sIHNvIGJvbWIgb3V0IGlmIHRoYXQncyBtaXNzaW5nXG4gICAgaWYgKCFNb2Rlcm5penIuaW5wdXR0eXBlcy5udW1iZXIpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLy8gd2UgcmVseSBvbiBjaGVja1ZhbGlkaXR5IGxhdGVyLCBzbyBib21iIG91dCBlYXJseSBpZiB3ZSBkb24ndCBoYXZlIGl0XG4gICAgaWYgKCFNb2Rlcm5penIuZm9ybXZhbGlkYXRpb24pIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgICB2YXIgZWwgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgZGlmZjtcbiAgICB2YXIgYm9keSA9IGdldEJvZHkoKTtcblxuICAgIHZhciByb290ID0gKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRvY0VsZW1lbnQuaW5zZXJ0QmVmb3JlKGJvZHksIGRvY0VsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQgfHwgZG9jRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9KCkpO1xuICAgIGVsLmlubmVySFRNTCA9ICc8aW5wdXQgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiMS4wXCIgc3RlcD1cIjAuMVwiLz4nO1xuICAgIHZhciBpbnB1dCA9IGVsLmNoaWxkTm9kZXNbMF07XG4gICAgcm9vdC5hcHBlbmRDaGlsZChlbCk7XG4gICAgaW5wdXQuZm9jdXMoKTtcbiAgICB0cnkge1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ0luc2VydFRleHQnLCBmYWxzZSwgJzEsMScpO1xuICAgIH0gY2F0Y2ggKGUpIHsgLy8gcHJldmVudCB3YXJuaW5ncyBpbiBJRVxuICAgIH1cbiAgICBkaWZmID0gaW5wdXQudHlwZSA9PT0gJ251bWJlcicgJiYgaW5wdXQudmFsdWVBc051bWJlciA9PT0gMS4xICYmIGlucHV0LmNoZWNrVmFsaWRpdHkoKTtcbiAgICByb290LnJlbW92ZUNoaWxkKGVsKTtcbiAgICBib2R5LmZha2UgJiYgcm9vdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJvb3QpO1xuICAgIHJldHVybiBkaWZmO1xuICB9KTtcblxuXG5cbiAgLyoqXG4gICAqIGZuQmluZCBpcyBhIHN1cGVyIHNtYWxsIFtiaW5kXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GdW5jdGlvbi9iaW5kKSBwb2x5ZmlsbC5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBmbkJpbmRcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBhIGZ1bmN0aW9uIHlvdSB3YW50IHRvIGNoYW5nZSBgdGhpc2AgcmVmZXJlbmNlIHRvXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB0aGF0IC0gdGhlIGB0aGlzYCB5b3Ugd2FudCB0byBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoXG4gICAqIEByZXR1cm5zIHtmdW5jdGlvbn0gVGhlIHdyYXBwZWQgdmVyc2lvbiBvZiB0aGUgc3VwcGxpZWQgZnVuY3Rpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gZm5CaW5kKGZuLCB0aGF0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIDtcblxuICAvKipcbiAgICogdGVzdERPTVByb3BzIGlzIGEgZ2VuZXJpYyBET00gcHJvcGVydHkgdGVzdDsgaWYgYSBicm93c2VyIHN1cHBvcnRzXG4gICAqICAgYSBjZXJ0YWluIHByb3BlcnR5LCBpdCB3b24ndCByZXR1cm4gdW5kZWZpbmVkIGZvciBpdC5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiB0ZXN0RE9NUHJvcHNcbiAgICogQHBhcmFtIHthcnJheS48c3RyaW5nPn0gcHJvcHMgLSBBbiBhcnJheSBvZiBwcm9wZXJ0aWVzIHRvIHRlc3QgZm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvYmogLSBBbiBvYmplY3Qgb3IgRWxlbWVudCB5b3Ugd2FudCB0byB1c2UgdG8gdGVzdCB0aGUgcGFyYW1ldGVycyBhZ2FpblxuICAgKiBAcGFyYW0ge2Jvb2xlYW58b2JqZWN0fSBlbGVtIC0gQW4gRWxlbWVudCB0byBiaW5kIHRoZSBwcm9wZXJ0eSBsb29rdXAgYWdhaW4uIFVzZSBgZmFsc2VgIHRvIHByZXZlbnQgdGhlIGNoZWNrXG4gICAqL1xuICBmdW5jdGlvbiB0ZXN0RE9NUHJvcHMocHJvcHMsIG9iaiwgZWxlbSkge1xuICAgIHZhciBpdGVtO1xuXG4gICAgZm9yICh2YXIgaSBpbiBwcm9wcykge1xuICAgICAgaWYgKHByb3BzW2ldIGluIG9iaikge1xuXG4gICAgICAgIC8vIHJldHVybiB0aGUgcHJvcGVydHkgbmFtZSBhcyBhIHN0cmluZ1xuICAgICAgICBpZiAoZWxlbSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gcHJvcHNbaV07XG4gICAgICAgIH1cblxuICAgICAgICBpdGVtID0gb2JqW3Byb3BzW2ldXTtcblxuICAgICAgICAvLyBsZXQncyBiaW5kIGEgZnVuY3Rpb25cbiAgICAgICAgaWYgKGlzKGl0ZW0sICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgLy8gYmluZCB0byBvYmogdW5sZXNzIG92ZXJyaWRlblxuICAgICAgICAgIHJldHVybiBmbkJpbmQoaXRlbSwgZWxlbSB8fCBvYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSB1bmJvdW5kIGZ1bmN0aW9uIG9yIG9iaiBvciB2YWx1ZVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgb3VyIFwibW9kZXJuaXpyXCIgZWxlbWVudCB0aGF0IHdlIGRvIG1vc3QgZmVhdHVyZSB0ZXN0cyBvbi5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuXG4gIHZhciBtb2RFbGVtID0ge1xuICAgIGVsZW06IGNyZWF0ZUVsZW1lbnQoJ21vZGVybml6cicpXG4gIH07XG5cbiAgLy8gQ2xlYW4gdXAgdGhpcyBlbGVtZW50XG4gIE1vZGVybml6ci5fcS5wdXNoKGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSBtb2RFbGVtLmVsZW07XG4gIH0pO1xuXG4gIFxuXG4gIHZhciBtU3R5bGUgPSB7XG4gICAgc3R5bGU6IG1vZEVsZW0uZWxlbS5zdHlsZVxuICB9O1xuXG4gIC8vIGtpbGwgcmVmIGZvciBnYywgbXVzdCBoYXBwZW4gYmVmb3JlIG1vZC5lbGVtIGlzIHJlbW92ZWQsIHNvIHdlIHVuc2hpZnQgb24gdG9cbiAgLy8gdGhlIGZyb250IG9mIHRoZSBxdWV1ZS5cbiAgTW9kZXJuaXpyLl9xLnVuc2hpZnQoZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIG1TdHlsZS5zdHlsZTtcbiAgfSk7XG5cbiAgXG5cbiAgLy8gdGVzdFByb3BzIGlzIGEgZ2VuZXJpYyBDU1MgLyBET00gcHJvcGVydHkgdGVzdC5cblxuICAvLyBJbiB0ZXN0aW5nIHN1cHBvcnQgZm9yIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5LCBpdCdzIGxlZ2l0IHRvIHRlc3Q6XG4gIC8vICAgIGBlbGVtLnN0eWxlW3N0eWxlTmFtZV0gIT09IHVuZGVmaW5lZGBcbiAgLy8gSWYgdGhlIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBpdCB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmcsXG4gIC8vIGlmIHVuc3VwcG9ydGVkIGl0IHdpbGwgcmV0dXJuIHVuZGVmaW5lZC5cblxuICAvLyBXZSdsbCB0YWtlIGFkdmFudGFnZSBvZiB0aGlzIHF1aWNrIHRlc3QgYW5kIHNraXAgc2V0dGluZyBhIHN0eWxlXG4gIC8vIG9uIG91ciBtb2Rlcm5penIgZWxlbWVudCwgYnV0IGluc3RlYWQganVzdCB0ZXN0aW5nIHVuZGVmaW5lZCB2c1xuICAvLyBlbXB0eSBzdHJpbmcuXG5cbiAgLy8gUHJvcGVydHkgbmFtZXMgY2FuIGJlIHByb3ZpZGVkIGluIGVpdGhlciBjYW1lbENhc2Ugb3Iga2ViYWItY2FzZS5cblxuICBmdW5jdGlvbiB0ZXN0UHJvcHMocHJvcHMsIHByZWZpeGVkLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuICAgIHNraXBWYWx1ZVRlc3QgPSBpcyhza2lwVmFsdWVUZXN0LCAndW5kZWZpbmVkJykgPyBmYWxzZSA6IHNraXBWYWx1ZVRlc3Q7XG5cbiAgICAvLyBUcnkgbmF0aXZlIGRldGVjdCBmaXJzdFxuICAgIGlmICghaXModmFsdWUsICd1bmRlZmluZWQnKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5hdGl2ZVRlc3RQcm9wcyhwcm9wcywgdmFsdWUpO1xuICAgICAgaWYgKCFpcyhyZXN1bHQsICd1bmRlZmluZWQnKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSBkbyBpdCBwcm9wZXJseVxuICAgIHZhciBhZnRlckluaXQsIGksIHByb3BzTGVuZ3RoLCBwcm9wLCBiZWZvcmU7XG5cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgc3R5bGUgZWxlbWVudCwgdGhhdCBtZWFucyB3ZSdyZSBydW5uaW5nIGFzeW5jIG9yIGFmdGVyXG4gICAgLy8gdGhlIGNvcmUgdGVzdHMsIHNvIHdlJ2xsIG5lZWQgdG8gY3JlYXRlIG91ciBvd24gZWxlbWVudHMgdG8gdXNlXG5cbiAgICAvLyBpbnNpZGUgb2YgYW4gU1ZHIGVsZW1lbnQsIGluIGNlcnRhaW4gYnJvd3NlcnMsIHRoZSBgc3R5bGVgIGVsZW1lbnQgaXMgb25seVxuICAgIC8vIGRlZmluZWQgZm9yIHZhbGlkIHRhZ3MuIFRoZXJlZm9yZSwgaWYgYG1vZGVybml6cmAgZG9lcyBub3QgaGF2ZSBvbmUsIHdlXG4gICAgLy8gZmFsbCBiYWNrIHRvIGEgbGVzcyB1c2VkIGVsZW1lbnQgYW5kIGhvcGUgZm9yIHRoZSBiZXN0LlxuICAgIHZhciBlbGVtcyA9IFsnbW9kZXJuaXpyJywgJ3RzcGFuJ107XG4gICAgd2hpbGUgKCFtU3R5bGUuc3R5bGUpIHtcbiAgICAgIGFmdGVySW5pdCA9IHRydWU7XG4gICAgICBtU3R5bGUubW9kRWxlbSA9IGNyZWF0ZUVsZW1lbnQoZWxlbXMuc2hpZnQoKSk7XG4gICAgICBtU3R5bGUuc3R5bGUgPSBtU3R5bGUubW9kRWxlbS5zdHlsZTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgdGhlIG9iamVjdHMgaWYgd2UgY3JlYXRlZCB0aGVtLlxuICAgIGZ1bmN0aW9uIGNsZWFuRWxlbXMoKSB7XG4gICAgICBpZiAoYWZ0ZXJJbml0KSB7XG4gICAgICAgIGRlbGV0ZSBtU3R5bGUuc3R5bGU7XG4gICAgICAgIGRlbGV0ZSBtU3R5bGUubW9kRWxlbTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9wc0xlbmd0aCA9IHByb3BzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcHNMZW5ndGg7IGkrKykge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgYmVmb3JlID0gbVN0eWxlLnN0eWxlW3Byb3BdO1xuXG4gICAgICBpZiAoY29udGFpbnMocHJvcCwgJy0nKSkge1xuICAgICAgICBwcm9wID0gY3NzVG9ET00ocHJvcCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtU3R5bGUuc3R5bGVbcHJvcF0gIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgIC8vIElmIHZhbHVlIHRvIHRlc3QgaGFzIGJlZW4gcGFzc2VkIGluLCBkbyBhIHNldC1hbmQtY2hlY2sgdGVzdC5cbiAgICAgICAgLy8gMCAoaW50ZWdlcikgaXMgYSB2YWxpZCBwcm9wZXJ0eSB2YWx1ZSwgc28gY2hlY2sgdGhhdCBgdmFsdWVgIGlzbid0XG4gICAgICAgIC8vIHVuZGVmaW5lZCwgcmF0aGVyIHRoYW4ganVzdCBjaGVja2luZyBpdCdzIHRydXRoeS5cbiAgICAgICAgaWYgKCFza2lwVmFsdWVUZXN0ICYmICFpcyh2YWx1ZSwgJ3VuZGVmaW5lZCcpKSB7XG5cbiAgICAgICAgICAvLyBOZWVkcyBhIHRyeSBjYXRjaCBibG9jayBiZWNhdXNlIG9mIG9sZCBJRS4gVGhpcyBpcyBzbG93LCBidXQgd2lsbFxuICAgICAgICAgIC8vIGJlIGF2b2lkZWQgaW4gbW9zdCBjYXNlcyBiZWNhdXNlIGBza2lwVmFsdWVUZXN0YCB3aWxsIGJlIHVzZWQuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1TdHlsZS5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgICAgICAvLyBJZiB0aGUgcHJvcGVydHkgdmFsdWUgaGFzIGNoYW5nZWQsIHdlIGFzc3VtZSB0aGUgdmFsdWUgdXNlZCBpc1xuICAgICAgICAgIC8vIHN1cHBvcnRlZC4gSWYgYHZhbHVlYCBpcyBlbXB0eSBzdHJpbmcsIGl0J2xsIGZhaWwgaGVyZSAoYmVjYXVzZVxuICAgICAgICAgIC8vIGl0IGhhc24ndCBjaGFuZ2VkKSwgd2hpY2ggbWF0Y2hlcyBob3cgYnJvd3NlcnMgaGF2ZSBpbXBsZW1lbnRlZFxuICAgICAgICAgIC8vIENTUy5zdXBwb3J0cygpXG4gICAgICAgICAgaWYgKG1TdHlsZS5zdHlsZVtwcm9wXSAhPSBiZWZvcmUpIHtcbiAgICAgICAgICAgIGNsZWFuRWxlbXMoKTtcbiAgICAgICAgICAgIHJldHVybiBwcmVmaXhlZCA9PSAncGZ4JyA/IHByb3AgOiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UganVzdCByZXR1cm4gdHJ1ZSwgb3IgdGhlIHByb3BlcnR5IG5hbWUgaWYgdGhpcyBpcyBhXG4gICAgICAgIC8vIGBwcmVmaXhlZCgpYCBjYWxsXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNsZWFuRWxlbXMoKTtcbiAgICAgICAgICByZXR1cm4gcHJlZml4ZWQgPT0gJ3BmeCcgPyBwcm9wIDogdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjbGVhbkVsZW1zKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiB0ZXN0UHJvcCgpIGludmVzdGlnYXRlcyB3aGV0aGVyIGEgZ2l2ZW4gc3R5bGUgcHJvcGVydHkgaXMgcmVjb2duaXplZFxuICAgKiBQcm9wZXJ0eSBuYW1lcyBjYW4gYmUgcHJvdmlkZWQgaW4gZWl0aGVyIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci50ZXN0UHJvcFxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIudGVzdFByb3AoKVxuICAgKiBAb3B0aW9uUHJvcCB0ZXN0UHJvcFxuICAgKiBAZnVuY3Rpb24gdGVzdFByb3BcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBOYW1lIG9mIHRoZSBDU1MgcHJvcGVydHkgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt2YWx1ZV0gLSBOYW1lIG9mIHRoZSBDU1MgdmFsdWUgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtib29sZWFufSBbdXNlVmFsdWVdIC0gV2hldGhlciBvciBub3QgdG8gY2hlY2sgdGhlIHZhbHVlIGlmIEBzdXBwb3J0cyBpc24ndCBzdXBwb3J0ZWRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIEp1c3QgbGlrZSBbdGVzdEFsbFByb3BzXSgjbW9kZXJuaXpyLXRlc3RhbGxwcm9wcyksIG9ubHkgaXQgZG9lcyBub3QgY2hlY2sgYW55IHZlbmRvciBwcmVmaXhlZFxuICAgKiB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGUgcHJvcGVydHkgbmFtZSBtdXN0IGJlIHByb3ZpZGVkIGluIGNhbWVsQ2FzZSAoZS5nLiBib3hTaXppbmcgbm90IGJveC1zaXppbmcpXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0UHJvcCgncG9pbnRlckV2ZW50cycpICAvLyB0cnVlXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgY2FuIGFsc28gcHJvdmlkZSBhIHZhbHVlIGFzIGFuIG9wdGlvbmFsIHNlY29uZCBhcmd1bWVudCB0byBjaGVjayBpZiBhXG4gICAqIHNwZWNpZmljIHZhbHVlIGlzIHN1cHBvcnRlZFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFByb3AoJ3BvaW50ZXJFdmVudHMnLCAnbm9uZScpIC8vIHRydWVcbiAgICogTW9kZXJuaXpyLnRlc3RQcm9wKCdwb2ludGVyRXZlbnRzJywgJ3Blbmd1aW4nKSAvLyBmYWxzZVxuICAgKiBgYGBcbiAgICovXG5cbiAgdmFyIHRlc3RQcm9wID0gTW9kZXJuaXpyUHJvdG8udGVzdFByb3AgPSBmdW5jdGlvbihwcm9wLCB2YWx1ZSwgdXNlVmFsdWUpIHtcbiAgICByZXR1cm4gdGVzdFByb3BzKFtwcm9wXSwgdW5kZWZpbmVkLCB2YWx1ZSwgdXNlVmFsdWUpO1xuICB9O1xuICBcblxuICAvKipcbiAgICogdGVzdFByb3BzQWxsIHRlc3RzIGEgbGlzdCBvZiBET00gcHJvcGVydGllcyB3ZSB3YW50IHRvIGNoZWNrIGFnYWluc3QuXG4gICAqIFdlIHNwZWNpZnkgbGl0ZXJhbGx5IEFMTCBwb3NzaWJsZSAoa25vd24gYW5kL29yIGxpa2VseSkgcHJvcGVydGllcyBvblxuICAgKiB0aGUgZWxlbWVudCBpbmNsdWRpbmcgdGhlIG5vbi12ZW5kb3IgcHJlZml4ZWQgb25lLCBmb3IgZm9yd2FyZC1cbiAgICogY29tcGF0aWJpbGl0eS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiB0ZXN0UHJvcHNBbGxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBBIHN0cmluZyBvZiB0aGUgcHJvcGVydHkgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBbcHJlZml4ZWRdIC0gQW4gb2JqZWN0IHRvIGNoZWNrIHRoZSBwcmVmaXhlZCBwcm9wZXJ0aWVzIG9uLiBVc2UgYSBzdHJpbmcgdG8gc2tpcFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IFtlbGVtXSAtIEFuIGVsZW1lbnQgdXNlZCB0byB0ZXN0IHRoZSBwcm9wZXJ0eSBhbmQgdmFsdWUgYWdhaW5zdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSAtIEEgc3RyaW5nIG9mIGEgY3NzIHZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NraXBWYWx1ZVRlc3RdIC0gQW4gYm9vbGVhbiByZXByZXNlbnRpbmcgaWYgeW91IHdhbnQgdG8gdGVzdCBpZiB2YWx1ZSBzdGlja3Mgd2hlbiBzZXRcbiAgICovXG4gIGZ1bmN0aW9uIHRlc3RQcm9wc0FsbChwcm9wLCBwcmVmaXhlZCwgZWxlbSwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpIHtcblxuICAgIHZhciB1Y1Byb3AgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKSxcbiAgICBwcm9wcyA9IChwcm9wICsgJyAnICsgY3Nzb21QcmVmaXhlcy5qb2luKHVjUHJvcCArICcgJykgKyB1Y1Byb3ApLnNwbGl0KCcgJyk7XG5cbiAgICAvLyBkaWQgdGhleSBjYWxsIC5wcmVmaXhlZCgnYm94U2l6aW5nJykgb3IgYXJlIHdlIGp1c3QgdGVzdGluZyBhIHByb3A/XG4gICAgaWYgKGlzKHByZWZpeGVkLCAnc3RyaW5nJykgfHwgaXMocHJlZml4ZWQsICd1bmRlZmluZWQnKSkge1xuICAgICAgcmV0dXJuIHRlc3RQcm9wcyhwcm9wcywgcHJlZml4ZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KTtcblxuICAgICAgLy8gb3RoZXJ3aXNlLCB0aGV5IGNhbGxlZCAucHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvd1ssIGVsZW1dKVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wcyA9IChwcm9wICsgJyAnICsgKGRvbVByZWZpeGVzKS5qb2luKHVjUHJvcCArICcgJykgKyB1Y1Byb3ApLnNwbGl0KCcgJyk7XG4gICAgICByZXR1cm4gdGVzdERPTVByb3BzKHByb3BzLCBwcmVmaXhlZCwgZWxlbSk7XG4gICAgfVxuICB9XG5cbiAgLy8gTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygpIGludmVzdGlnYXRlcyB3aGV0aGVyIGEgZ2l2ZW4gc3R5bGUgcHJvcGVydHksXG4gIC8vIG9yIGFueSBvZiBpdHMgdmVuZG9yLXByZWZpeGVkIHZhcmlhbnRzLCBpcyByZWNvZ25pemVkXG4gIC8vXG4gIC8vIE5vdGUgdGhhdCB0aGUgcHJvcGVydHkgbmFtZXMgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgY2FtZWxDYXNlIHZhcmlhbnQuXG4gIC8vIE1vZGVybml6ci50ZXN0QWxsUHJvcHMoJ2JveFNpemluZycpXG4gIE1vZGVybml6clByb3RvLnRlc3RBbGxQcm9wcyA9IHRlc3RQcm9wc0FsbDtcblxuICBcblxuICAvKipcbiAgICogcHJlZml4ZWQgcmV0dXJucyB0aGUgcHJlZml4ZWQgb3Igbm9ucHJlZml4ZWQgcHJvcGVydHkgbmFtZSB2YXJpYW50IG9mIHlvdXIgaW5wdXRcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIucHJlZml4ZWRcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnByZWZpeGVkKClcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZWRcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHByZWZpeGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHRlc3QgZm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb2JqXSAtIEFuIG9iamVjdCB0byB0ZXN0IGZvciB0aGUgcHJlZml4ZWQgcHJvcGVydGllcyBvblxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbZWxlbV0gLSBBbiBlbGVtZW50IHVzZWQgdG8gdGVzdCBzcGVjaWZpYyBwcm9wZXJ0aWVzIGFnYWluc3RcbiAgICogQHJldHVybnMge3N0cmluZ3xmYWxzZX0gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIChwb3NzaWJseSBwcmVmaXhlZCkgdmFsaWRcbiAgICogdmVyc2lvbiBvZiB0aGUgcHJvcGVydHksIG9yIGBmYWxzZWAgd2hlbiBpdCBpcyB1bnN1cHBvcnRlZC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogTW9kZXJuaXpyLnByZWZpeGVkIHRha2VzIGEgc3RyaW5nIGNzcyB2YWx1ZSBpbiB0aGUgRE9NIHN0eWxlIGNhbWVsQ2FzZSAoYXNcbiAgICogb3Bwb3NlZCB0byB0aGUgY3NzIHN0eWxlIGtlYmFiLWNhc2UpIGZvcm0gYW5kIHJldHVybnMgdGhlIChwb3NzaWJseSBwcmVmaXhlZClcbiAgICogdmVyc2lvbiBvZiB0aGF0IHByb3BlcnR5IHRoYXQgdGhlIGJyb3dzZXIgYWN0dWFsbHkgc3VwcG9ydHMuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpbiBvbGRlciBGaXJlZm94Li4uXG4gICAqIGBgYGpzXG4gICAqIHByZWZpeGVkKCdib3hTaXppbmcnKVxuICAgKiBgYGBcbiAgICogcmV0dXJucyAnTW96Qm94U2l6aW5nJ1xuICAgKlxuICAgKiBJbiBuZXdlciBGaXJlZm94LCBhcyB3ZWxsIGFzIGFueSBvdGhlciBicm93c2VyIHRoYXQgc3VwcG9ydCB0aGUgdW5wcmVmaXhlZFxuICAgKiB2ZXJzaW9uIHdvdWxkIHNpbXBseSByZXR1cm4gYGJveFNpemluZ2AuIEFueSBicm93c2VyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydFxuICAgKiB0aGUgcHJvcGVydHkgYXQgYWxsLCBpdCB3aWxsIHJldHVybiBgZmFsc2VgLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBwcmVmaXhlZCBpcyBjaGVja2VkIGFnYWluc3QgYSBET00gZWxlbWVudC4gSWYgeW91IHdhbnQgdG8gY2hlY2tcbiAgICogZm9yIGEgcHJvcGVydHkgb24gYW5vdGhlciBvYmplY3QsIGp1c3QgcGFzcyBpdCBhcyBhIHNlY29uZCBhcmd1bWVudFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB2YXIgckFGID0gcHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvdyk7XG4gICAqXG4gICAqIHJhZihmdW5jdGlvbigpIHtcbiAgICogIHJlbmRlckZ1bmN0aW9uKCk7XG4gICAqIH0pXG4gICAqIGBgYFxuICAgKlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBfdGhlIGFjdHVhbCBmdW5jdGlvbl8gLSBub3QgdGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKiBJZiB5b3UgbmVlZCB0aGUgYWN0dWFsIG5hbWUgb2YgdGhlIHByb3BlcnR5LCBwYXNzIGluIGBmYWxzZWAgYXMgYSB0aGlyZCBhcmd1bWVudFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB2YXIgckFGUHJvcCA9IHByZWZpeGVkKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCB3aW5kb3csIGZhbHNlKTtcbiAgICpcbiAgICogcmFmUHJvcCA9PT0gJ1dlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZScgLy8gaW4gb2xkZXIgd2Via2l0XG4gICAqIGBgYFxuICAgKlxuICAgKiBPbmUgY29tbW9uIHVzZSBjYXNlIGZvciBwcmVmaXhlZCBpcyBpZiB5b3UncmUgdHJ5aW5nIHRvIGRldGVybWluZSB3aGljaCB0cmFuc2l0aW9uXG4gICAqIGVuZCBldmVudCB0byBiaW5kIHRvLCB5b3UgbWlnaHQgZG8gc29tZXRoaW5nIGxpa2UuLi5cbiAgICogYGBganNcbiAgICogdmFyIHRyYW5zRW5kRXZlbnROYW1lcyA9IHtcbiAgICogICAgICdXZWJraXRUcmFuc2l0aW9uJyA6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgKiBTYWYgNiwgQW5kcm9pZCBCcm93c2VyXG4gICAqICAgICAnTW96VHJhbnNpdGlvbicgICAgOiAndHJhbnNpdGlvbmVuZCcsICAgICAgICogb25seSBmb3IgRkYgPCAxNVxuICAgKiAgICAgJ3RyYW5zaXRpb24nICAgICAgIDogJ3RyYW5zaXRpb25lbmQnICAgICAgICAqIElFMTAsIE9wZXJhLCBDaHJvbWUsIEZGIDE1KywgU2FmIDcrXG4gICAqIH07XG4gICAqXG4gICAqIHZhciB0cmFuc0VuZEV2ZW50TmFtZSA9IHRyYW5zRW5kRXZlbnROYW1lc1sgTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2l0aW9uJykgXTtcbiAgICogYGBgXG4gICAqXG4gICAqIElmIHlvdSB3YW50IGEgc2ltaWxhciBsb29rdXAsIGJ1dCBpbiBrZWJhYi1jYXNlLCB5b3UgY2FuIHVzZSBbcHJlZml4ZWRDU1NdKCNtb2Rlcm5penItcHJlZml4ZWRjc3MpLlxuICAgKi9cblxuICB2YXIgcHJlZml4ZWQgPSBNb2Rlcm5penJQcm90by5wcmVmaXhlZCA9IGZ1bmN0aW9uKHByb3AsIG9iaiwgZWxlbSkge1xuICAgIGlmIChwcm9wLmluZGV4T2YoJ0AnKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGF0UnVsZShwcm9wKTtcbiAgICB9XG5cbiAgICBpZiAocHJvcC5pbmRleE9mKCctJykgIT0gLTEpIHtcbiAgICAgIC8vIENvbnZlcnQga2ViYWItY2FzZSB0byBjYW1lbENhc2VcbiAgICAgIHByb3AgPSBjc3NUb0RPTShwcm9wKTtcbiAgICB9XG4gICAgaWYgKCFvYmopIHtcbiAgICAgIHJldHVybiB0ZXN0UHJvcHNBbGwocHJvcCwgJ3BmeCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZXN0aW5nIERPTSBwcm9wZXJ0eSBlLmcuIE1vZGVybml6ci5wcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93KSAvLyAnbW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lJ1xuICAgICAgcmV0dXJuIHRlc3RQcm9wc0FsbChwcm9wLCBvYmosIGVsZW0pO1xuICAgIH1cbiAgfTtcblxuICBcblxuICAvKipcbiAgICogcHJlZml4ZWRDU1MgaXMganVzdCBsaWtlIFtwcmVmaXhlZF0oI21vZGVybml6ci1wcmVmaXhlZCksIGJ1dCB0aGUgcmV0dXJuZWQgdmFsdWVzIGFyZSBpblxuICAgKiBrZWJhYi1jYXNlIChlLmcuIGBib3gtc2l6aW5nYCkgcmF0aGVyIHRoYW4gY2FtZWxDYXNlIChib3hTaXppbmcpLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5wcmVmaXhlZENTU1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIucHJlZml4ZWRDU1MoKVxuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlZENTU1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gcHJlZml4ZWRDU1NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdGVzdCBmb3JcbiAgICogQHJldHVybnMge3N0cmluZ3xmYWxzZX0gVGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIChwb3NzaWJseSBwcmVmaXhlZClcbiAgICogdmFsaWQgdmVyc2lvbiBvZiB0aGUgcHJvcGVydHksIG9yIGBmYWxzZWAgd2hlbiBpdCBpcyB1bnN1cHBvcnRlZC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYE1vZGVybml6ci5wcmVmaXhlZENTU2AgaXMgbGlrZSBgTW9kZXJuaXpyLnByZWZpeGVkYCwgYnV0IHJldHVybnMgdGhlIHJlc3VsdFxuICAgKiBpbiBoeXBoZW5hdGVkIGZvcm1cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnByZWZpeGVkQ1NTKCd0cmFuc2l0aW9uJykgLy8gJy1tb3otdHJhbnNpdGlvbicgaW4gb2xkIEZpcmVmb3hcbiAgICogYGBgXG4gICAqXG4gICAqIFNpbmNlIGl0IGlzIG9ubHkgdXNlZnVsIGZvciBDU1Mgc3R5bGUgcHJvcGVydGllcywgaXQgY2FuIG9ubHkgYmUgdGVzdGVkIGFnYWluc3RcbiAgICogYW4gSFRNTEVsZW1lbnQuXG4gICAqXG4gICAqIFByb3BlcnRpZXMgY2FuIGJlIHBhc3NlZCBhcyBib3RoIHRoZSBET00gc3R5bGUgY2FtZWxDYXNlIG9yIENTUyBzdHlsZSBrZWJhYi1jYXNlLlxuICAgKi9cblxuICB2YXIgcHJlZml4ZWRDU1MgPSBNb2Rlcm5penJQcm90by5wcmVmaXhlZENTUyA9IGZ1bmN0aW9uKHByb3ApIHtcbiAgICB2YXIgcHJlZml4ZWRQcm9wID0gcHJlZml4ZWQocHJvcCk7XG4gICAgcmV0dXJuIHByZWZpeGVkUHJvcCAmJiBkb21Ub0NTUyhwcmVmaXhlZFByb3ApO1xuICB9O1xuICBcblxuICAvKipcbiAgICogdGVzdEFsbFByb3BzIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIENTUyBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgaW4gdGhlIGJyb3dzZXJcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIudGVzdEFsbFByb3BzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci50ZXN0QWxsUHJvcHMoKVxuICAgKiBAb3B0aW9uUHJvcCB0ZXN0QWxsUHJvcHNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHRlc3RBbGxQcm9wc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1pbmcgdGhlIHByb3BlcnR5IHRvIHRlc3QgKGVpdGhlciBjYW1lbENhc2Ugb3Iga2ViYWItY2FzZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt2YWx1ZV0gLSBTdHJpbmcgb2YgdGhlIHZhbHVlIHRvIHRlc3RcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFZhbHVlVGVzdD1mYWxzZV0gLSBXaGV0aGVyIHRvIHNraXAgdGVzdGluZyB0aGF0IHRoZSB2YWx1ZSBpcyBzdXBwb3J0ZWQgd2hlbiB1c2luZyBub24tbmF0aXZlIGRldGVjdGlvblxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB0ZXN0QWxsUHJvcHMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5LCBpbiBzb21lIHByZWZpeGVkIGZvcm0sXG4gICAqIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdib3hTaXppbmcnKSAgLy8gdHJ1ZVxuICAgKiBgYGBcbiAgICpcbiAgICogSXQgY2FuIG9wdGlvbmFsbHkgYmUgZ2l2ZW4gYSBDU1MgdmFsdWUgaW4gc3RyaW5nIGZvcm0gdG8gdGVzdCBpZiBhIHByb3BlcnR5XG4gICAqIHZhbHVlIGlzIHZhbGlkXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRlc3RBbGxQcm9wcygnZGlzcGxheScsICdibG9jaycpIC8vIHRydWVcbiAgICogdGVzdEFsbFByb3BzKCdkaXNwbGF5JywgJ3Blbmd1aW4nKSAvLyBmYWxzZVxuICAgKiBgYGBcbiAgICpcbiAgICogQSBib29sZWFuIGNhbiBiZSBwYXNzZWQgYXMgYSB0aGlyZCBwYXJhbWV0ZXIgdG8gc2tpcCB0aGUgdmFsdWUgY2hlY2sgd2hlblxuICAgKiBuYXRpdmUgZGV0ZWN0aW9uIChAc3VwcG9ydHMpIGlzbid0IGF2YWlsYWJsZS5cbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdzaGFwZU91dHNpZGUnLCAnY29udGVudC1ib3gnLCB0cnVlKTtcbiAgICogYGBgXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRlc3RBbGxQcm9wcyhwcm9wLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuICAgIHJldHVybiB0ZXN0UHJvcHNBbGwocHJvcCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KTtcbiAgfVxuICBNb2Rlcm5penJQcm90by50ZXN0QWxsUHJvcHMgPSB0ZXN0QWxsUHJvcHM7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBUcmFuc2Zvcm1zXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2Zvcm1zXCIsXG4gIFwiY2FuaXVzZVwiOiBcInRyYW5zZm9ybXMyZFwiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdXG59XG4hKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnY3NzdHJhbnNmb3JtcycsIGZ1bmN0aW9uKCkge1xuICAgIC8vIEFuZHJvaWQgPCAzLjAgaXMgYnVnZ3ksIHNvIHdlIHNuaWZmIGFuZCBibGFja2xpc3RcbiAgICAvLyBodHRwOi8vZ2l0LmlvL2hIekw3d1xuICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0FuZHJvaWQgMi4nKSA9PT0gLTEgJiZcbiAgICAgICAgICAgdGVzdEFsbFByb3BzKCd0cmFuc2Zvcm0nLCAnc2NhbGUoMSknLCB0cnVlKTtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgVHJhbnNmb3JtcyAzRFwiLFxuICBcInByb3BlcnR5XCI6IFwiY3NzdHJhbnNmb3JtczNkXCIsXG4gIFwiY2FuaXVzZVwiOiBcInRyYW5zZm9ybXMzZFwiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdLFxuICBcIndhcm5pbmdzXCI6IFtcbiAgICBcIkNocm9tZSBtYXkgb2NjYXNzaW9uYWxseSBmYWlsIHRoaXMgdGVzdCBvbiBzb21lIHN5c3RlbXM7IG1vcmUgaW5mbzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyOTAwNFwiXG4gIF1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3N0cmFuc2Zvcm1zM2QnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gISF0ZXN0QWxsUHJvcHMoJ3BlcnNwZWN0aXZlJywgJzFweCcsIHRydWUpO1xuICAgIHZhciB1c2VQcmVmaXggPSBNb2Rlcm5penIuX2NvbmZpZy51c2VQcmVmaXhlcztcblxuICAgIC8vIFdlYmtpdCdzIDNEIHRyYW5zZm9ybXMgYXJlIHBhc3NlZCBvZmYgdG8gdGhlIGJyb3dzZXIncyBvd24gZ3JhcGhpY3MgcmVuZGVyZXIuXG4gICAgLy8gICBJdCB3b3JrcyBmaW5lIGluIFNhZmFyaSBvbiBMZW9wYXJkIGFuZCBTbm93IExlb3BhcmQsIGJ1dCBub3QgaW4gQ2hyb21lIGluXG4gICAgLy8gICBzb21lIGNvbmRpdGlvbnMuIEFzIGEgcmVzdWx0LCBXZWJraXQgdHlwaWNhbGx5IHJlY29nbml6ZXMgdGhlIHN5bnRheCBidXRcbiAgICAvLyAgIHdpbGwgc29tZXRpbWVzIHRocm93IGEgZmFsc2UgcG9zaXRpdmUsIHRodXMgd2UgbXVzdCBkbyBhIG1vcmUgdGhvcm91Z2ggY2hlY2s6XG4gICAgaWYgKHJldCAmJiAoIXVzZVByZWZpeCB8fCAnd2Via2l0UGVyc3BlY3RpdmUnIGluIGRvY0VsZW1lbnQuc3R5bGUpKSB7XG4gICAgICB2YXIgbXE7XG4gICAgICB2YXIgZGVmYXVsdFN0eWxlID0gJyNtb2Rlcm5penJ7d2lkdGg6MDtoZWlnaHQ6MH0nO1xuICAgICAgLy8gVXNlIENTUyBDb25kaXRpb25hbCBSdWxlcyBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChNb2Rlcm5penIuc3VwcG9ydHMpIHtcbiAgICAgICAgbXEgPSAnQHN1cHBvcnRzIChwZXJzcGVjdGl2ZTogMXB4KSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UsIFdlYmtpdCBhbGxvd3MgdGhpcyBtZWRpYSBxdWVyeSB0byBzdWNjZWVkIG9ubHkgaWYgdGhlIGZlYXR1cmUgaXMgZW5hYmxlZC5cbiAgICAgICAgLy8gYEBtZWRpYSAodHJhbnNmb3JtLTNkKSwoLXdlYmtpdC10cmFuc2Zvcm0tM2QpeyAuLi4gfWBcbiAgICAgICAgbXEgPSAnQG1lZGlhICh0cmFuc2Zvcm0tM2QpJztcbiAgICAgICAgaWYgKHVzZVByZWZpeCkge1xuICAgICAgICAgIG1xICs9ICcsKC13ZWJraXQtdHJhbnNmb3JtLTNkKSc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbXEgKz0gJ3sjbW9kZXJuaXpye3dpZHRoOjdweDtoZWlnaHQ6MThweDttYXJnaW46MDtwYWRkaW5nOjA7Ym9yZGVyOjB9fSc7XG5cbiAgICAgIHRlc3RTdHlsZXMoZGVmYXVsdFN0eWxlICsgbXEsIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgcmV0ID0gZWxlbS5vZmZzZXRXaWR0aCA9PT0gNyAmJiBlbGVtLm9mZnNldEhlaWdodCA9PT0gMTg7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBUcmFuc2l0aW9uc1wiLFxuICBcInByb3BlcnR5XCI6IFwiY3NzdHJhbnNpdGlvbnNcIixcbiAgXCJjYW5pdXNlXCI6IFwiY3NzLXRyYW5zaXRpb25zXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3N0cmFuc2l0aW9ucycsIHRlc3RBbGxQcm9wcygndHJhbnNpdGlvbicsICdhbGwnLCB0cnVlKSk7XG5cblxuICAvKipcbiAgICogaGFzT3duUHJvcCBpcyBhIHNoaW0gZm9yIGhhc093blByb3BlcnR5IHRoYXQgaXMgbmVlZGVkIGZvciBTYWZhcmkgMi4wIHN1cHBvcnRcbiAgICpcbiAgICogQGF1dGhvciBrYW5nYXhcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBoYXNPd25Qcm9wXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvYmplY3QgLSBUaGUgb2JqZWN0IHRvIGNoZWNrIGZvciBhIHByb3BlcnR5XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSAtIFRoZSBwcm9wZXJ0eSB0byBjaGVjayBmb3JcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIC8vIGhhc093blByb3BlcnR5IHNoaW0gYnkga2FuZ2F4IG5lZWRlZCBmb3IgU2FmYXJpIDIuMCBzdXBwb3J0XG4gIHZhciBoYXNPd25Qcm9wO1xuXG4gIChmdW5jdGlvbigpIHtcbiAgICB2YXIgX2hhc093blByb3BlcnR5ID0gKHt9KS5oYXNPd25Qcm9wZXJ0eTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIC8qIHdlIGhhdmUgbm8gd2F5IG9mIHRlc3RpbmcgSUUgNS41IG9yIHNhZmFyaSAyLFxuICAgICAqIHNvIGp1c3QgYXNzdW1lIHRoZSBlbHNlIGdldHMgaGl0ICovXG4gICAgaWYgKCFpcyhfaGFzT3duUHJvcGVydHksICd1bmRlZmluZWQnKSAmJiAhaXMoX2hhc093blByb3BlcnR5LmNhbGwsICd1bmRlZmluZWQnKSkge1xuICAgICAgaGFzT3duUHJvcCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgICAgICAgcmV0dXJuIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBoYXNPd25Qcm9wID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyAvKiB5ZXMsIHRoaXMgY2FuIGdpdmUgZmFsc2UgcG9zaXRpdmVzL25lZ2F0aXZlcywgYnV0IG1vc3Qgb2YgdGhlIHRpbWUgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aG9zZSAqL1xuICAgICAgICByZXR1cm4gKChwcm9wZXJ0eSBpbiBvYmplY3QpICYmIGlzKG9iamVjdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbcHJvcGVydHldLCAndW5kZWZpbmVkJykpO1xuICAgICAgfTtcbiAgICB9XG4gIH0pKCk7XG5cbiAgXG5cblxuICAgLy8gX2wgdHJhY2tzIGxpc3RlbmVycyBmb3IgYXN5bmMgdGVzdHMsIGFzIHdlbGwgYXMgdGVzdHMgdGhhdCBleGVjdXRlIGFmdGVyIHRoZSBpbml0aWFsIHJ1blxuICBNb2Rlcm5penJQcm90by5fbCA9IHt9O1xuXG4gIC8qKlxuICAgKiBNb2Rlcm5penIub24gaXMgYSB3YXkgdG8gbGlzdGVuIGZvciB0aGUgY29tcGxldGlvbiBvZiBhc3luYyB0ZXN0cy4gQmVpbmdcbiAgICogYXN5bmNocm9ub3VzLCB0aGV5IG1heSBub3QgZmluaXNoIGJlZm9yZSB5b3VyIHNjcmlwdHMgcnVuLiBBcyBhIHJlc3VsdCB5b3VcbiAgICogd2lsbCBnZXQgYSBwb3NzaWJseSBmYWxzZSBuZWdhdGl2ZSBgdW5kZWZpbmVkYCB2YWx1ZS5cbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIub25cbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gU3RyaW5nIG5hbWUgb2YgdGhlIGZlYXR1cmUgZGV0ZWN0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gQ2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJuaW5nIGEgQm9vbGVhbiAtIHRydWUgaWYgZmVhdHVyZSBpcyBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIub24oJ2ZsYXNoJywgZnVuY3Rpb24oIHJlc3VsdCApIHtcbiAgICogICBpZiAocmVzdWx0KSB7XG4gICAqICAgIC8vIHRoZSBicm93c2VyIGhhcyBmbGFzaFxuICAgKiAgIH0gZWxzZSB7XG4gICAqICAgICAvLyB0aGUgYnJvd3NlciBkb2VzIG5vdCBoYXZlIGZsYXNoXG4gICAqICAgfVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqL1xuXG4gIE1vZGVybml6clByb3RvLm9uID0gZnVuY3Rpb24oZmVhdHVyZSwgY2IpIHtcbiAgICAvLyBDcmVhdGUgdGhlIGxpc3Qgb2YgbGlzdGVuZXJzIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBpZiAoIXRoaXMuX2xbZmVhdHVyZV0pIHtcbiAgICAgIHRoaXMuX2xbZmVhdHVyZV0gPSBbXTtcbiAgICB9XG5cbiAgICAvLyBQdXNoIHRoaXMgdGVzdCBvbiB0byB0aGUgbGlzdGVuZXIgbGlzdFxuICAgIHRoaXMuX2xbZmVhdHVyZV0ucHVzaChjYik7XG5cbiAgICAvLyBJZiBpdCdzIGFscmVhZHkgYmVlbiByZXNvbHZlZCwgdHJpZ2dlciBpdCBvbiBuZXh0IHRpY2tcbiAgICBpZiAoTW9kZXJuaXpyLmhhc093blByb3BlcnR5KGZlYXR1cmUpKSB7XG4gICAgICAvLyBOZXh0IFRpY2tcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIE1vZGVybml6ci5fdHJpZ2dlcihmZWF0dXJlLCBNb2Rlcm5penJbZmVhdHVyZV0pO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBfdHJpZ2dlciBpcyB0aGUgcHJpdmF0ZSBmdW5jdGlvbiB1c2VkIHRvIHNpZ25hbCB0ZXN0IGNvbXBsZXRpb24gYW5kIHJ1biBhbnlcbiAgICogY2FsbGJhY2tzIHJlZ2lzdGVyZWQgdGhyb3VnaCBbTW9kZXJuaXpyLm9uXSgjbW9kZXJuaXpyLW9uKVxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5fdHJpZ2dlclxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIF90cmlnZ2VyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlIC0gc3RyaW5nIG5hbWUgb2YgdGhlIGZlYXR1cmUgZGV0ZWN0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbn0gW3Jlc10gLSBBIGZlYXR1cmUgZGV0ZWN0aW9uIGZ1bmN0aW9uLCBvciB0aGUgYm9vbGVhbiA9XG4gICAqIHJlc3VsdCBvZiBhIGZlYXR1cmUgZGV0ZWN0aW9uIGZ1bmN0aW9uXG4gICAqL1xuXG4gIE1vZGVybml6clByb3RvLl90cmlnZ2VyID0gZnVuY3Rpb24oZmVhdHVyZSwgcmVzKSB7XG4gICAgaWYgKCF0aGlzLl9sW2ZlYXR1cmVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNicyA9IHRoaXMuX2xbZmVhdHVyZV07XG5cbiAgICAvLyBGb3JjZSBhc3luY1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgY2I7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgY2JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgICBjYihyZXMpO1xuICAgICAgfVxuICAgIH0sIDApO1xuXG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB0aGVzZSBhZ2FpblxuICAgIGRlbGV0ZSB0aGlzLl9sW2ZlYXR1cmVdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBhZGRUZXN0IGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgb3duIGZlYXR1cmUgZGV0ZWN0cyB0aGF0IGFyZSBub3QgY3VycmVudGx5XG4gICAqIGluY2x1ZGVkIGluIE1vZGVybml6ciAodW5kZXIgdGhlIGNvdmVycyBpdCdzIHRoZSBleGFjdCBzYW1lIGNvZGUgTW9kZXJuaXpyXG4gICAqIHVzZXMgZm9yIGl0cyBvd24gW2ZlYXR1cmUgZGV0ZWN0aW9uc10oaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvdHJlZS9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzKSkuIEp1c3QgbGlrZSB0aGUgb2ZmaWNhbCBkZXRlY3RzLCB0aGUgcmVzdWx0XG4gICAqIHdpbGwgYmUgYWRkZWQgb250byB0aGUgTW9kZXJuaXpyIG9iamVjdCwgYXMgd2VsbCBhcyBhbiBhcHByb3ByaWF0ZSBjbGFzc05hbWUgc2V0IG9uXG4gICAqIHRoZSBodG1sIGVsZW1lbnQgd2hlbiBjb25maWd1cmVkIHRvIGRvIHNvXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLmFkZFRlc3RcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLmFkZFRlc3QoKVxuICAgKiBAb3B0aW9uUHJvcCBhZGRUZXN0XG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBhZGRUZXN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gZmVhdHVyZSAtIFRoZSBzdHJpbmcgbmFtZSBvZiB0aGUgZmVhdHVyZSBkZXRlY3QsIG9yIGFuXG4gICAqIG9iamVjdCBvZiBmZWF0dXJlIGRldGVjdCBuYW1lcyBhbmQgdGVzdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufGJvb2xlYW59IHRlc3QgLSBGdW5jdGlvbiByZXR1cm5pbmcgdHJ1ZSBpZiBmZWF0dXJlIGlzIHN1cHBvcnRlZCxcbiAgICogZmFsc2UgaWYgbm90LiBPdGhlcndpc2UgYSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIGZlYXR1cmUgZGV0ZWN0aW9uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIFRoZSBtb3N0IGNvbW1vbiB3YXkgb2YgY3JlYXRpbmcgeW91ciBvd24gZmVhdHVyZSBkZXRlY3RzIGlzIGJ5IGNhbGxpbmdcbiAgICogYE1vZGVybml6ci5hZGRUZXN0YCB3aXRoIGEgc3RyaW5nIChwcmVmZXJhYmx5IGp1c3QgbG93ZXJjYXNlLCB3aXRob3V0IGFueVxuICAgKiBwdW5jdHVhdGlvbiksIGFuZCBhIGZ1bmN0aW9uIHlvdSB3YW50IGV4ZWN1dGVkIHRoYXQgd2lsbCByZXR1cm4gYSBib29sZWFuIHJlc3VsdFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIuYWRkVGVzdCgnaXRzVHVlc2RheScsIGZ1bmN0aW9uKCkge1xuICAgKiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgKiAgcmV0dXJuIGQuZ2V0RGF5KCkgPT09IDI7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogV2hlbiB0aGUgYWJvdmUgaXMgcnVuLCBpdCB3aWxsIHNldCBNb2Rlcm5penIuaXRzdHVlc2RheSB0byBgdHJ1ZWAgd2hlbiBpdCBpcyB0dWVzZGF5LFxuICAgKiBhbmQgdG8gYGZhbHNlYCBldmVyeSBvdGhlciBkYXkgb2YgdGhlIHdlZWsuIE9uZSB0aGluZyB0byBub3RpY2UgaXMgdGhhdCB0aGUgbmFtZXMgb2ZcbiAgICogZmVhdHVyZSBkZXRlY3QgZnVuY3Rpb25zIGFyZSBhbHdheXMgbG93ZXJjYXNlZCB3aGVuIGFkZGVkIHRvIHRoZSBNb2Rlcm5penIgb2JqZWN0LiBUaGF0XG4gICAqIG1lYW5zIHRoYXQgYE1vZGVybml6ci5pdHNUdWVzZGF5YCB3aWxsIG5vdCBleGlzdCwgYnV0IGBNb2Rlcm5penIuaXRzdHVlc2RheWAgd2lsbC5cbiAgICpcbiAgICpcbiAgICogIFNpbmNlIHdlIG9ubHkgbG9vayBhdCB0aGUgcmV0dXJuZWQgdmFsdWUgZnJvbSBhbnkgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb24sXG4gICAqICB5b3UgZG8gbm90IG5lZWQgdG8gYWN0dWFsbHkgdXNlIGEgZnVuY3Rpb24uIEZvciBzaW1wbGUgZGV0ZWN0aW9ucywganVzdCBwYXNzaW5nXG4gICAqICBpbiBhIHN0YXRlbWVudCB0aGF0IHdpbGwgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZSB3b3JrcyBqdXN0IGZpbmUuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5hZGRUZXN0KCdoYXNKcXVlcnknLCAnalF1ZXJ5JyBpbiB3aW5kb3cpO1xuICAgKiBgYGBcbiAgICpcbiAgICogSnVzdCBsaWtlIGJlZm9yZSwgd2hlbiB0aGUgYWJvdmUgcnVucyBgTW9kZXJuaXpyLmhhc2pxdWVyeWAgd2lsbCBiZSB0cnVlIGlmXG4gICAqIGpRdWVyeSBoYXMgYmVlbiBpbmNsdWRlZCBvbiB0aGUgcGFnZS4gTm90IHVzaW5nIGEgZnVuY3Rpb24gc2F2ZXMgYSBzbWFsbCBhbW91bnRcbiAgICogb2Ygb3ZlcmhlYWQgZm9yIHRoZSBicm93c2VyLCBhcyB3ZWxsIGFzIG1ha2luZyB5b3VyIGNvZGUgbXVjaCBtb3JlIHJlYWRhYmxlLlxuICAgKlxuICAgKiBGaW5hbGx5LCB5b3UgYWxzbyBoYXZlIHRoZSBhYmlsaXR5IHRvIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGZlYXR1cmUgbmFtZXMgYW5kXG4gICAqIHRoZWlyIHRlc3RzLiBUaGlzIGlzIGhhbmR5IGlmIHlvdSB3YW50IHRvIGFkZCBtdWx0aXBsZSBkZXRlY3Rpb25zIGluIG9uZSBnby5cbiAgICogVGhlIGtleXMgc2hvdWxkIGFsd2F5cyBiZSBhIHN0cmluZywgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgZWl0aGVyIGEgYm9vbGVhbiBvclxuICAgKiBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB2YXIgZGV0ZWN0cyA9IHtcbiAgICogICdoYXNqcXVlcnknOiAnalF1ZXJ5JyBpbiB3aW5kb3csXG4gICAqICAnaXRzdHVlc2RheSc6IGZ1bmN0aW9uKCkge1xuICAgKiAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAqICAgIHJldHVybiBkLmdldERheSgpID09PSAyO1xuICAgKiAgfVxuICAgKiB9XG4gICAqXG4gICAqIE1vZGVybml6ci5hZGRUZXN0KGRldGVjdHMpO1xuICAgKiBgYGBcbiAgICpcbiAgICogVGhlcmUgaXMgcmVhbGx5IG5vIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZmlyc3QgbWV0aG9kcyBhbmQgdGhpcyBvbmUsIGl0IGlzXG4gICAqIGp1c3QgYSBjb252ZW5pZW5jZSB0byBsZXQgeW91IHdyaXRlIG1vcmUgcmVhZGFibGUgY29kZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gYWRkVGVzdChmZWF0dXJlLCB0ZXN0KSB7XG5cbiAgICBpZiAodHlwZW9mIGZlYXR1cmUgPT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBmZWF0dXJlKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wKGZlYXR1cmUsIGtleSkpIHtcbiAgICAgICAgICBhZGRUZXN0KGtleSwgZmVhdHVyZVsga2V5IF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcblxuICAgICAgZmVhdHVyZSA9IGZlYXR1cmUudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhciBmZWF0dXJlTmFtZVNwbGl0ID0gZmVhdHVyZS5zcGxpdCgnLicpO1xuICAgICAgdmFyIGxhc3QgPSBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV07XG5cbiAgICAgIC8vIEFnYWluLCB3ZSBkb24ndCBjaGVjayBmb3IgcGFyZW50IHRlc3QgZXhpc3RlbmNlLiBHZXQgdGhhdCByaWdodCwgdGhvdWdoLlxuICAgICAgaWYgKGZlYXR1cmVOYW1lU3BsaXQubGVuZ3RoID09IDIpIHtcbiAgICAgICAgbGFzdCA9IGxhc3RbZmVhdHVyZU5hbWVTcGxpdFsxXV07XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbGFzdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyB3ZSdyZSBnb2luZyB0byBxdWl0IGlmIHlvdSdyZSB0cnlpbmcgdG8gb3ZlcndyaXRlIGFuIGV4aXN0aW5nIHRlc3RcbiAgICAgICAgLy8gaWYgd2Ugd2VyZSB0byBhbGxvdyBpdCwgd2UnZCBkbyB0aGlzOlxuICAgICAgICAvLyAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJcXFxcYihuby0pP1wiICsgZmVhdHVyZSArIFwiXFxcXGJcIik7XG4gICAgICAgIC8vICAgZG9jRWxlbWVudC5jbGFzc05hbWUgPSBkb2NFbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKCByZSwgJycgKTtcbiAgICAgICAgLy8gYnV0LCBubyBybHksIHN0dWZmICdlbS5cbiAgICAgICAgcmV0dXJuIE1vZGVybml6cjtcbiAgICAgIH1cblxuICAgICAgdGVzdCA9IHR5cGVvZiB0ZXN0ID09ICdmdW5jdGlvbicgPyB0ZXN0KCkgOiB0ZXN0O1xuXG4gICAgICAvLyBTZXQgdGhlIHZhbHVlICh0aGlzIGlzIHRoZSBtYWdpYywgcmlnaHQgaGVyZSkuXG4gICAgICBpZiAoZmVhdHVyZU5hbWVTcGxpdC5sZW5ndGggPT0gMSkge1xuICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gPSB0ZXN0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY2FzdCB0byBhIEJvb2xlYW4sIGlmIG5vdCBvbmUgYWxyZWFkeVxuICAgICAgICAvKiBqc2hpbnQgLVcwNTMgKi9cbiAgICAgICAgaWYgKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSAmJiAhKE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSBpbnN0YW5jZW9mIEJvb2xlYW4pKSB7XG4gICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gbmV3IEJvb2xlYW4oTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXVtmZWF0dXJlTmFtZVNwbGl0WzFdXSA9IHRlc3Q7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBhIHNpbmdsZSBjbGFzcyAoZWl0aGVyIGBmZWF0dXJlYCBvciBgbm8tZmVhdHVyZWApXG4gICAgICAvKiBqc2hpbnQgLVcwNDEgKi9cbiAgICAgIHNldENsYXNzZXMoWyghIXRlc3QgJiYgdGVzdCAhPSBmYWxzZSA/ICcnIDogJ25vLScpICsgZmVhdHVyZU5hbWVTcGxpdC5qb2luKCctJyldKTtcbiAgICAgIC8qIGpzaGludCArVzA0MSAqL1xuXG4gICAgICAvLyBUcmlnZ2VyIHRoZSBldmVudFxuICAgICAgTW9kZXJuaXpyLl90cmlnZ2VyKGZlYXR1cmUsIHRlc3QpO1xuICAgIH1cblxuICAgIHJldHVybiBNb2Rlcm5penI7IC8vIGFsbG93IGNoYWluaW5nLlxuICB9XG5cbiAgLy8gQWZ0ZXIgYWxsIHRoZSB0ZXN0cyBhcmUgcnVuLCBhZGQgc2VsZiB0byB0aGUgTW9kZXJuaXpyIHByb3RvdHlwZVxuICBNb2Rlcm5penIuX3EucHVzaChmdW5jdGlvbigpIHtcbiAgICBNb2Rlcm5penJQcm90by5hZGRUZXN0ID0gYWRkVGVzdDtcbiAgfSk7XG5cbiAgXG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJzaXplcyBhdHRyaWJ1dGVcIixcbiAgXCJhc3luY1wiOiB0cnVlLFxuICBcInByb3BlcnR5XCI6IFwic2l6ZXNcIixcbiAgXCJ0YWdzXCI6IFtcImltYWdlXCJdLFxuICBcImF1dGhvcnNcIjogW1wiTWF0IE1hcnF1aXNcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJTcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL3BpY3R1cmUucmVzcG9uc2l2ZWltYWdlcy5vcmcvI3BhcnNlLXNpemVzLWF0dHJcIlxuICAgIH0se1xuICAgIFwibmFtZVwiOiBcIlVzYWdlIERldGFpbHNcIixcbiAgICBcImhyZWZcIjogXCJodHRwOi8vZXJpY3BvcnRpcy5jb20vcG9zdHMvMjAxNC9zcmNzZXQtc2l6ZXMvXCJcbiAgICB9XVxufVxuISovXG4vKiBET0NcblRlc3QgZm9yIHRoZSBgc2l6ZXNgIGF0dHJpYnV0ZSBvbiBpbWFnZXNcbiovXG5cbiAgTW9kZXJuaXpyLmFkZEFzeW5jVGVzdChmdW5jdGlvbigpIHtcbiAgICB2YXIgd2lkdGgxLCB3aWR0aDIsIHRlc3Q7XG4gICAgdmFyIGltYWdlID0gY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgLy8gaW4gYSBwZXJmZWN0IHdvcmxkIHRoaXMgd291bGQgYmUgdGhlIHRlc3QuLi5cbiAgICB2YXIgaXNTaXplcyA9ICdzaXplcycgaW4gaW1hZ2U7XG5cbiAgICAvLyAuLi4gYnV0IHdlIG5lZWQgdG8gZGVhbCB3aXRoIFNhZmFyaSA5Li4uXG4gICAgaWYgKCFpc1NpemVzICYmICgnc3Jjc2V0JyBpbiAgaW1hZ2UpKSB7XG4gICAgICB3aWR0aDIgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQWdBQkFQQUFBUC8vL3dBQUFDSDVCQUFBQUFBQUxBQUFBQUFDQUFFQUFBSUNCQW9BT3c9PSc7XG4gICAgICB3aWR0aDEgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nO1xuXG4gICAgICB0ZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGFkZFRlc3QoJ3NpemVzJywgaW1hZ2Uud2lkdGggPT0gMik7XG4gICAgICB9O1xuXG4gICAgICBpbWFnZS5vbmxvYWQgPSB0ZXN0O1xuICAgICAgaW1hZ2Uub25lcnJvciA9IHRlc3Q7XG4gICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NpemVzJywgJzlweCcpO1xuXG4gICAgICBpbWFnZS5zcmNzZXQgPSB3aWR0aDEgKyAnIDF3LCcgKyB3aWR0aDIgKyAnIDh3JztcbiAgICAgIGltYWdlLnNyYyA9IHdpZHRoMTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkVGVzdCgnc2l6ZXMnLCBpc1NpemVzKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgLy8gUnVuIGVhY2ggdGVzdFxuICB0ZXN0UnVubmVyKCk7XG5cbiAgLy8gUmVtb3ZlIHRoZSBcIm5vLWpzXCIgY2xhc3MgaWYgaXQgZXhpc3RzXG4gIHNldENsYXNzZXMoY2xhc3Nlcyk7XG5cbiAgZGVsZXRlIE1vZGVybml6clByb3RvLmFkZFRlc3Q7XG4gIGRlbGV0ZSBNb2Rlcm5penJQcm90by5hZGRBc3luY1Rlc3Q7XG5cbiAgLy8gUnVuIHRoZSB0aGluZ3MgdGhhdCBhcmUgc3VwcG9zZWQgdG8gcnVuIGFmdGVyIHRoZSB0ZXN0c1xuICBmb3IgKHZhciBpID0gMDsgaSA8IE1vZGVybml6ci5fcS5sZW5ndGg7IGkrKykge1xuICAgIE1vZGVybml6ci5fcVtpXSgpO1xuICB9XG5cbiAgLy8gTGVhayBNb2Rlcm5penIgbmFtZXNwYWNlXG4gIHdpbmRvdy5Nb2Rlcm5penIgPSBNb2Rlcm5penI7XG5cblxuO1xuXG59KSh3aW5kb3csIGRvY3VtZW50KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
