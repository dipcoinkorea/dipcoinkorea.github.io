var Helpers;!function(t){t.GetRectangle=function(t){var e=t.getBoundingClientRect();return{Top:e.top,Right:e.right,Bottom:e.bottom,Left:e.left}},t.IsOutside=function(t,e){return t.Top<=e.Top||t.Left<=e.Left||t.Right>=e.Right||t.Bottom>=e.Bottom},t.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetOutsideDir=function(t,e){var i=[];return t.Top<=e.Top&&i.push(Direction.Top),t.Left<=e.Left&&i.push(Direction.Left),t.Right>=e.Right&&i.push(Direction.Right),t.Bottom>=e.Bottom&&i.push(Direction.Bottom),i},t.RenderImg=function(t,e){for(var i=document.createElement("img"),n="",o=0;o<t.length;o++)n+=t[o].url+" "+t[o].width+"w",o<t.length?n+=",":i.setAttribute("src",t[o].url);return i.setAttribute("srcset",n),e&&i.setAttribute("sizes",e),i}}(Helpers||(Helpers={}));var Direction;!function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"}(Direction||(Direction={}));var HERO_WIDTH=161,HERO_HEIGHT=209,BASESPEED=.3,Hero=function(){function t(t){var e=this;this.Speed=BASESPEED,this.ChangeDir=function(){var t=Helpers.GetRandomInt(0,e._Direction.length-1);e._ChangeDir(t)},this._ChangeDir=function(t){if(!(0>t||t>=e._Direction.length)){var i=e._Direction[t];switch(i){case Direction.Top:e._Direction[t]=Direction.Bottom;break;case Direction.Bottom:e._Direction[t]=Direction.Top;break;case Direction.Left:e._Direction[t]=Direction.Right;break;case Direction.Right:e._Direction[t]=Direction.Left}}},this.Elt=document.createElement("a"),this.Elt.setAttribute("href","home.html"),this.Elt.classList.add("hero"),this.Elt.style.width=HERO_WIDTH+"px",this.Elt.style.height=HERO_HEIGHT+"px",t.appendChild(this.Elt),this.Position={x:50,y:50},this._Direction=[Direction.Top,Direction.Left],this.Move()}return t.prototype.ChangeDirFromCollision=function(t){for(var e=t.length;e--;){var i=t[e],n=this._Direction.indexOf(i);this._ChangeDir(n)}},t.prototype.GoOppositeDir=function(){for(var t=this._Direction.length;t--;)this._ChangeDir(t)},t.prototype.Move=function(){var t=this;this._Direction.forEach(function(e){switch(e){case Direction.Top:t.Position.y=t.Position.y-t.Speed;break;case Direction.Bottom:t.Position.y=t.Position.y+t.Speed;break;case Direction.Left:t.Position.x=t.Position.x-t.Speed;break;case Direction.Right:t.Position.x=t.Position.x+t.Speed}}),this.Elt.style.top=this.Position.y+"%",this.Elt.style.left=this.Position.x+"%"},t}(),Playground;!function(t){var e=document.getElementById("playground");if(e){for(var i=1,n=[],o=Helpers.GetRectangle(e),r=0;i>r;r++)n.push(new Hero(e));var a=function(t){for(var e=0;e<n.length;e++){var i=n[e];i.Move();var r=Helpers.GetRectangle(i.Elt);Helpers.IsOutside(r,o)&&i.ChangeDirFromCollision(Helpers.GetOutsideDir(r,o))}requestAnimationFrame(a)};requestAnimationFrame(a);for(var s=0;s<n.length;s++){var l=n[s];l.Elt.addEventListener("mouseover",function(){l.Speed=3*l.Speed}),l.Elt.addEventListener("mouseout",function(){l.Speed=BASESPEED}),setInterval(function(){Math.random()>.2&&l.ChangeDir()},3e3)}window.addEventListener("resize",function(){o=Helpers.GetRectangle(e)})}}(Playground||(Playground={}));var TUMBLR_API_KEY="osyd8e6IT3O9iaWaflEbzjzaqou01t0fd6YoM8IhgXmuOP8stx",TUMBLR_ID="dipcoin",POST_PER_PAGE=10,Tumblr;!function(t){var e,i=0;t.Init=function(t){e=t,n()},t.PostsLoaded=function(t){for(var i=t.response.posts,n=0;n<i.length;n++){var o=i[n];console.log(o),e.appendChild(r(o))}};var n=function(){var t=document.getElementById("tumblr-data");null!=t&&t.parentElement.removeChild(t);var e="https://api.tumblr.com/v2/blog/"+TUMBLR_ID+".tumblr.com/posts?api_key="+TUMBLR_API_KEY;t=document.createElement("script"),t.id="tumblr-data",t.setAttribute("type","text/javascript"),t.setAttribute("src",e+"&callback=Tumblr.PostsLoaded&start="+i+"&num="+POST_PER_PAGE),document.body.appendChild(t)},o=function(t){if(!t.photos)return null;for(var e=[],i=0;i<t.photos.length;i++)e.push(Helpers.RenderImg(t.photos[i].alt_sizes));return e},r=function(t){var e=document.createElement("article"),i=document.createElement("header"),n=document.createElement("h3"),r=document.createElement("time"),a=document.createElement("div");if(e.classList.add("tumblr-post"),i.classList.add("tumblr-post-header"),e.appendChild(i),r.innerHTML=t.date,i.appendChild(r),t.title&&(n.classList.add("tumblr-post-title"),n.innerHTML=t.title,i.appendChild(n)),t.text&&(a.classList.add("tumblr-post-text"),a.innerHTML=t.text,e.appendChild(a)),t.body&&(a.classList.add("tumblr-post-text"),a.innerHTML=t.body,e.appendChild(a)),"video"==t.type&&t.player){for(var s=0,l=null,d=0;d<t.player.length;d++){var c=t.player[d],u=c.width;s=Math.max(s,u),u==s&&(l=c)}var p=document.createElement("div");p.classList.add("tumblr-video"),p.innerHTML=l.embed_code;var h=p.firstElementChild;"VIDEO"===h.nodeName&&(h.controls=!0),e.appendChild(p)}if("audio"==t.type&&"soundcloud"==t.audio_type){var m=document.createElement("div");m.classList.add("tumblr-audio"),m.innerHTML=t.player,e.appendChild(m)}if(t.photos){for(var f=document.createElement("div"),g=o(t),d=0;d<g.length;d++)f.appendChild(g[d]);f.classList.add("tumblr-images"),e.appendChild(f)}if(t.tags&&t.tags.length>0){var v=document.createElement("div");v.classList.add("tumblr-tags");for(var d=0;d<t.tags.length;d++){var E=document.createElement("span");E.classList.add("tumblr-tag"),E.innerHTML="#"+t.tags[d],v.appendChild(E)}e.appendChild(v)}return e}}(Tumblr||(Tumblr={}));var Home;!function(t){var e=document.getElementById("tumblr");e&&Tumblr.Init(e)}(Home||(Home={}));
!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],t=C[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?w[s[0]]=i:(!w[s[0]]||w[s[0]]instanceof Boolean||(w[s[0]]=new Boolean(w[s[0]])),w[s[0]][s[1]]=i),A.push((i?"":"no-")+s.join("-"))}}function o(e){var t=x.className,n=w._config.classPrefix||"";if(T&&(t=t.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?x.className.baseVal=t:x.className=t)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(){var e=t.body;return e||(e=l(T?"svg":"body"),e.fake=!0),e}function f(e,t){return!!~(""+e).indexOf(t)}function d(e,n,r,i){var o,a,s,f,d="modernizr",c=l("div"),p=u();if(parseInt(r,10))for(;r--;)s=l("div"),s.id=i?i[r]:d+(r+1),c.appendChild(s);return o=l("style"),o.type="text/css",o.id="s"+d,(p.fake?p:c).appendChild(o),p.appendChild(c),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),a=n(c,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=f,x.offsetHeight):c.parentNode.removeChild(c),!!a}function c(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(s(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+s(t[i])+":"+r+")");return o=o.join(" or "),d("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function p(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?p(i,n||t):i);return!1}function h(e,t,i,o){function s(){d&&(delete M.style,delete M.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var u=c(e,i);if(!r(u,"undefined"))return u}for(var d,p,m,h,v,g=["modernizr","tspan"];!M.style;)d=!0,M.modElem=l(g.shift()),M.style=M.modElem.style;for(m=e.length,p=0;m>p;p++)if(h=e[p],v=M.style[h],f(h,"-")&&(h=a(h)),M.style[h]!==n){if(o||r(i,"undefined"))return s(),"pfx"==t?h:!0;try{M.style[h]=i}catch(y){}if(M.style[h]!=v)return s(),"pfx"==t?h:!0}return s(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+j.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?h(s,t,i,o):(s=(e+" "+_.join(a+" ")+a).split(" "),m(s,t,n))}function g(e,t,r){return v(e,n,n,t,r)}function y(e,t){if("object"==typeof e)for(var n in e)V(e,n)&&y(n,e[n]);else{e=e.toLowerCase();var r=e.split("."),i=w[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return w;t="function"==typeof t?t():t,1==r.length?w[r[0]]=t:(!w[r[0]]||w[r[0]]instanceof Boolean||(w[r[0]]=new Boolean(w[r[0]])),w[r[0]][r[1]]=t),o([(t&&0!=t?"":"no-")+r.join("-")]),w._trigger(e,t)}return w}var A=[],C=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){C.push({name:e,fn:t,options:n})},addAsyncTest:function(e){C.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w,w.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var E=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=E;var x=t.documentElement;w.addTest("classlist","classList"in x);var T="svg"===x.nodeName.toLowerCase();T||!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=x.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=x.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),x.elements=n+" "+e,u(t)}function o(e){var t=E[e[b]];return t||(t={},w++,e[b]=w,E[w]=t),t}function a(e,n,r){if(n||(n=t),v)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():C.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||A.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function s(e,n){if(e||(e=t),v)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return x.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function u(e){e||(e=t);var r=o(e);return!x.shivCSS||h||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),v||l(e,r),e}function f(e){for(var t,n=e.getElementsByTagName("*"),i=n.length,o=RegExp("^(?:"+r().join("|")+")$","i"),a=[];i--;)t=n[i],o.test(t.nodeName)&&a.push(t.applyElement(d(t)));return a}function d(e){for(var t,n=e.attributes,r=n.length,i=e.ownerDocument.createElement(S+":"+e.nodeName);r--;)t=n[r],t.specified&&i.setAttribute(t.nodeName,t.nodeValue);return i.style.cssText=e.style.cssText,i}function c(e){for(var t,n=e.split("{"),i=n.length,o=RegExp("(^|[\\s,>+~])("+r().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),a="$1"+S+"\\:$2";i--;)t=n[i]=n[i].split("}"),t[t.length-1]=t[t.length-1].replace(o,a),n[i]=t.join("}");return n.join("{")}function p(e){for(var t=e.length;t--;)e[t].removeNode()}function m(e){function t(){clearTimeout(a._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,i,a=o(e),s=e.namespaces,l=e.parentWindow;return!_||e.printShived?e:("undefined"==typeof s[S]&&s.add(S),l.attachEvent("onbeforeprint",function(){t();for(var o,a,s,l=e.styleSheets,u=[],d=l.length,p=Array(d);d--;)p[d]=l[d];for(;s=p.pop();)if(!s.disabled&&T.test(s.media)){try{o=s.imports,a=o.length}catch(m){a=0}for(d=0;a>d;d++)p.push(o[d]);try{u.push(s.cssText)}catch(m){}}u=c(u.reverse().join("")),i=f(e),r=n(e,u)}),l.attachEvent("onafterprint",function(){p(i),clearTimeout(a._removeSheetTimer),a._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var h,v,g="3.7.3",y=e.html5||{},A=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,C=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",w=0,E={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,v=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){h=!0,v=!0}}();var x={elements:y.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:g,shivCSS:y.shivCSS!==!1,supportsUnknownElements:v,shivMethods:y.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:s,addElements:i};e.html5=x,u(t);var T=/^$|\b(?:all|print)\b/,S="html5shiv",_=!v&&function(){var n=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof n.applyElement||"undefined"==typeof n.removeNode||"undefined"==typeof e.attachEvent)}();x.type+=" print",x.shivPrint=m,m(t),"object"==typeof module&&module.exports&&(module.exports=x)}("undefined"!=typeof e?e:this,t);var S="Moz O ms Webkit",_=b._config.usePrefixes?S.toLowerCase().split(" "):[];b._domPrefixes=_;var N=function(e,t){var n=!1,r=l("div"),i=r.style;if(e in i){var o=_.length;for(i[e]=t,n=i[e];o--&&!n;)i[e]="-"+_[o]+"-"+t,n=i[e]}return""===n&&(n=!1),n};b.prefixedCSSValue=N,w.addTest("canvas",function(){var e=l("canvas");return!(!e.getContext||!e.getContext("2d"))}),w.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",i=0,o=E.length-1;o>i;i++)e=0===i?"to ":"",r+=t+E[i]+"linear-gradient("+e+"left top, #9f9, white);";w._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=l("a"),s=a.style;return s.cssText=r,(""+s.backgroundImage).indexOf("gradient")>-1}),w.addTest("placeholder","placeholder"in l("input")&&"placeholder"in l("textarea")),w.addTest("srcset","srcset"in l("img")),w.addTest("inlinesvg",function(){var e=l("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"==("undefined"!=typeof SVGRect&&e.firstChild&&e.firstChild.namespaceURI)});var k="CSS"in e&&"supports"in e.CSS,P="supportsCSS"in e;w.addTest("supports",k||P);var j=b._config.usePrefixes?S.split(" "):[];b._cssomPrefixes=j;var z=function(t){var r,i=E.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var a=0;i>a;a++){var s=E[a],l=s.toUpperCase()+"_"+r;if(l in o)return"@-"+s.toLowerCase()+"-"+t}return!1};b.atRule=z;var L=b.testStyles=d;w.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",E.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(r,function(e){n=9===e.offsetTop})}return n}),w.addTest("formvalidation",function(){var t=l("form");if(!("checkValidity"in t&&"addEventListener"in t))return!1;if("reportValidity"in t)return!0;var n,r=!1;return w.formvalidationapi=!0,t.addEventListener("submit",function(t){e.opera&&!e.operamini||t.preventDefault(),t.stopPropagation()},!1),t.innerHTML='<input name="modTest" required="required" /><button></button>',L("#modernizr form{position:absolute;top:-99999em}",function(e){e.appendChild(t),n=t.getElementsByTagName("input")[0],n.addEventListener("invalid",function(e){r=!0,e.preventDefault(),e.stopPropagation()},!1),w.formvalidationmessage=!!n.validationMessage,t.getElementsByTagName("button")[0].click()}),r});var B=l("input"),D="search tel url email datetime date month week time datetime-local number range color".split(" "),O={};w.inputtypes=function(e){for(var r,i,o,a=e.length,s="1)",l=0;a>l;l++)B.setAttribute("type",r=e[l]),o="text"!==B.type&&"style"in B,o&&(B.value=s,B.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&B.style.WebkitAppearance!==n?(x.appendChild(B),i=t.defaultView,o=i.getComputedStyle&&"textfield"!==i.getComputedStyle(B,null).WebkitAppearance&&0!==B.offsetHeight,x.removeChild(B)):/^(search|tel)$/.test(r)||(o=/^(url|email)$/.test(r)?B.checkValidity&&B.checkValidity()===!1:B.value!=s)),O[e[l]]=!!o;return O}(D),w.addTest("localizednumber",function(){if(!w.inputtypes.number)return!1;if(!w.formvalidation)return!1;var e,n=l("div"),r=u(),i=function(){return x.insertBefore(r,x.firstElementChild||x.firstChild)}();n.innerHTML='<input type="number" value="1.0" step="0.1"/>';var o=n.childNodes[0];i.appendChild(n),o.focus();try{t.execCommand("InsertText",!1,"1,1")}catch(a){}return e="number"===o.type&&1.1===o.valueAsNumber&&o.checkValidity(),i.removeChild(n),r.fake&&i.parentNode.removeChild(i),e});var $={elem:l("modernizr")};w._q.push(function(){delete $.elem});var M={style:$.elem.style};w._q.unshift(function(){delete M.style});b.testProp=function(e,t,r){return h([e],n,t,r)};b.testAllProps=v;var R=b.prefixed=function(e,t,n){return 0===e.indexOf("@")?z(e):(-1!=e.indexOf("-")&&(e=a(e)),t?v(e,t,n):v(e,"pfx"))};b.prefixedCSS=function(e){var t=R(e);return t&&s(t)};b.testAllProps=g,w.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),w.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=w._config.usePrefixes;if(e&&(!t||"webkitPerspective"in x.style)){var n,r="#modernizr{width:0;height:0}";w.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),w.addTest("csstransitions",g("transition","all",!0));var V;!function(){var e={}.hasOwnProperty;V=r(e,"undefined")||r(e.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),b._l={},b.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),w.hasOwnProperty(e)&&setTimeout(function(){w._trigger(e,w[e])},0)},b._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e,r;for(e=0;e<n.length;e++)(r=n[e])(t)},0),delete this._l[e]}},w._q.push(function(){b.addTest=y}),w.addAsyncTest(function(){var e,t,n,r=l("img"),i="sizes"in r;!i&&"srcset"in r?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){y("sizes",2==r.width)},r.onload=n,r.onerror=n,r.setAttribute("sizes","9px"),r.srcset=e+" 1w,"+t+" 8w",r.src=e):y("sizes",i)}),i(),o(A),delete b.addTest,delete b.addAsyncTest;for(var F=0;F<w._q.length;F++)w._q[F]();e.Modernizr=w}(window,document);
"firstElementChild"in document.documentElement||Object.defineProperty(Element.prototype,"firstElementChild",{get:function(){for(var e,t=this.children,n=0,r=t.length;r>n;++n)if(e=t[n],1===e.nodeType)return e;return null}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm91dHB1dC5qcyIsImxpYi9tb2Rlcm5penItY3VzdG9tLmpzIiwibGliL3BvbHlmaWxscy5qcyJdLCJuYW1lcyI6WyJIZWxwZXJzIiwiR2V0UmVjdGFuZ2xlIiwiZWx0IiwicG9zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiVG9wIiwidG9wIiwiUmlnaHQiLCJyaWdodCIsIkJvdHRvbSIsImJvdHRvbSIsIkxlZnQiLCJsZWZ0IiwiSXNPdXRzaWRlIiwicmVjdCIsImNvbnRhaW5lciIsIkdldFJhbmRvbUludCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIkdldE91dHNpZGVEaXIiLCJyZXN1bHQiLCJwdXNoIiwiRGlyZWN0aW9uIiwiUmVuZGVySW1nIiwiaW1hZ2VzIiwic2l6ZXMiLCJpbWciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmNzZXQiLCJpIiwibGVuZ3RoIiwidXJsIiwid2lkdGgiLCJzZXRBdHRyaWJ1dGUiLCJIRVJPX1dJRFRIIiwiSEVST19IRUlHSFQiLCJCQVNFU1BFRUQiLCJIZXJvIiwiX3RoaXMiLCJ0aGlzIiwiU3BlZWQiLCJDaGFuZ2VEaXIiLCJyYW5kb21EaXJJbmRleCIsIl9EaXJlY3Rpb24iLCJfQ2hhbmdlRGlyIiwiZGlySW5kZXgiLCJmcm9tIiwiRWx0IiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJoZWlnaHQiLCJhcHBlbmRDaGlsZCIsIlBvc2l0aW9uIiwieCIsInkiLCJNb3ZlIiwicHJvdG90eXBlIiwiQ2hhbmdlRGlyRnJvbUNvbGxpc2lvbiIsImZyb21EaXJzIiwibCIsImluZGV4T2YiLCJHb09wcG9zaXRlRGlyIiwiZm9yRWFjaCIsImRpciIsIlBsYXlncm91bmQiLCJDb250YWluZXIiLCJnZXRFbGVtZW50QnlJZCIsIl9Ub3RhbEZhY2VzIiwiX0hlcm9lcyIsIkNvbnRhaW5lclJlY3QiLCJfTG9vcCIsInRpbWVzdGFtcCIsImoiLCJoZXJvIiwiaGVyb1JlY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0SW50ZXJ2YWwiLCJ3aW5kb3ciLCJUVU1CTFJfQVBJX0tFWSIsIlRVTUJMUl9JRCIsIlBPU1RfUEVSX1BBR0UiLCJUdW1ibHIiLCJfQ29udGFpbmVyIiwiX0N1ckluZGV4IiwiSW5pdCIsIl9HZXRQb3N0cyIsIlBvc3RzTG9hZGVkIiwibyIsInBvc3RzIiwicmVzcG9uc2UiLCJwb3N0IiwiY29uc29sZSIsImxvZyIsIl9CdWlsZFBvc3QiLCJzY3JpcHRUYWciLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJyZXFVcmwiLCJpZCIsImJvZHkiLCJfQnVpbGRQaG90b3MiLCJwaG90b3MiLCJhbHRfc2l6ZXMiLCJwb3N0SGVhZGVyIiwicG9zdFRpdGxlRUx0IiwicG9zdERhdGVFbHQiLCJwb3N0VGV4dENvbnRlbnQiLCJpbm5lckhUTUwiLCJkYXRlIiwidGl0bGUiLCJ0ZXh0IiwidHlwZSIsInBsYXllciIsImN1ck1heCIsImxhcmdlc3QiLCJ2aWRlbyIsInZpZGVvV2lkdGgiLCJ2aWRlb1BhcmVudCIsImVtYmVkX2NvZGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIm5vZGVOYW1lIiwiY29udHJvbHMiLCJhdWRpb190eXBlIiwiYXVkaW9QYXJlbnQiLCJwaG90b1BhcmVudCIsInBob3RvRWx0cyIsInRhZ3MiLCJ0YWdFbHQiLCJIb21lIiwiX1R1bWJsckNvbnRhaW5lciIsInVuZGVmaW5lZCIsImlzIiwib2JqIiwidGVzdFJ1bm5lciIsImZlYXR1cmVOYW1lcyIsImZlYXR1cmUiLCJhbGlhc0lkeCIsIm5hbWVJZHgiLCJmZWF0dXJlTmFtZSIsImZlYXR1cmVOYW1lU3BsaXQiLCJmZWF0dXJlSWR4IiwidGVzdHMiLCJoYXNPd25Qcm9wZXJ0eSIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsIm9wdGlvbnMiLCJhbGlhc2VzIiwiZm4iLCJzcGxpdCIsIk1vZGVybml6ciIsIkJvb2xlYW4iLCJjbGFzc2VzIiwiam9pbiIsInNldENsYXNzZXMiLCJjbGFzc05hbWUiLCJkb2NFbGVtZW50IiwiY2xhc3NQcmVmaXgiLCJfY29uZmlnIiwiaXNTVkciLCJiYXNlVmFsIiwiZW5hYmxlSlNDbGFzcyIsInJlSlMiLCJSZWdFeHAiLCJyZXBsYWNlIiwiZW5hYmxlQ2xhc3NlcyIsImNzc1RvRE9NIiwic3RyIiwibTEiLCJtMiIsInRvVXBwZXJDYXNlIiwiZG9tVG9DU1MiLCJhcmd1bWVudHMiLCJjcmVhdGVFbGVtZW50TlMiLCJjYWxsIiwiYXBwbHkiLCJnZXRCb2R5IiwiZmFrZSIsImNvbnRhaW5zIiwic3Vic3RyIiwiaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMiLCJydWxlIiwiY2FsbGJhY2siLCJub2RlcyIsInRlc3RuYW1lcyIsInJldCIsIm5vZGUiLCJkb2NPdmVyZmxvdyIsIm1vZCIsImRpdiIsInBhcnNlSW50Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsImJhY2tncm91bmQiLCJvdmVyZmxvdyIsInBhcmVudE5vZGUiLCJvZmZzZXRIZWlnaHQiLCJuYXRpdmVUZXN0UHJvcHMiLCJwcm9wcyIsInZhbHVlIiwiQ1NTIiwic3VwcG9ydHMiLCJjb25kaXRpb25UZXh0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBvc2l0aW9uIiwiZm5CaW5kIiwidGhhdCIsInRlc3RET01Qcm9wcyIsImVsZW0iLCJpdGVtIiwidGVzdFByb3BzIiwicHJlZml4ZWQiLCJza2lwVmFsdWVUZXN0IiwiY2xlYW5FbGVtcyIsImFmdGVySW5pdCIsIm1TdHlsZSIsIm1vZEVsZW0iLCJwcm9wc0xlbmd0aCIsInByb3AiLCJiZWZvcmUiLCJlbGVtcyIsInNoaWZ0IiwiZSIsInRlc3RQcm9wc0FsbCIsInVjUHJvcCIsImNoYXJBdCIsInNsaWNlIiwiY3Nzb21QcmVmaXhlcyIsInRlc3RBbGxQcm9wcyIsImFkZFRlc3QiLCJ0ZXN0Iiwia2V5IiwiaGFzT3duUHJvcCIsImxhc3QiLCJfdHJpZ2dlciIsIk1vZGVybml6clByb3RvIiwiX3ZlcnNpb24iLCJ1c2VQcmVmaXhlcyIsIl9xIiwib24iLCJjYiIsInNlbGYiLCJzZXRUaW1lb3V0IiwiYWRkQXN5bmNUZXN0IiwiY3JlYXRlU1ZHUmVjdCIsInByZWZpeGVzIiwiX3ByZWZpeGVzIiwiZG9jdW1lbnRFbGVtZW50IiwiYWRkU3R5bGVTaGVldCIsIm93bmVyRG9jdW1lbnQiLCJwIiwicGFyZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbnNlcnRCZWZvcmUiLCJsYXN0Q2hpbGQiLCJmaXJzdENoaWxkIiwiZ2V0RWxlbWVudHMiLCJlbGVtZW50cyIsImh0bWw1IiwiYWRkRWxlbWVudHMiLCJuZXdFbGVtZW50cyIsInNoaXZEb2N1bWVudCIsImdldEV4cGFuZG9EYXRhIiwiZGF0YSIsImV4cGFuZG9EYXRhIiwiZXhwYW5kbyIsImV4cGFuSUQiLCJzdXBwb3J0c1Vua25vd25FbGVtZW50cyIsImNhY2hlIiwiY2xvbmVOb2RlIiwic2F2ZUNsb25lcyIsImNyZWF0ZUVsZW0iLCJjYW5IYXZlQ2hpbGRyZW4iLCJyZVNraXAiLCJ0YWdVcm4iLCJmcmFnIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNsb25lIiwic2hpdk1ldGhvZHMiLCJjcmVhdGVGcmFnIiwiRnVuY3Rpb24iLCJzaGl2Q1NTIiwic3VwcG9ydHNIdG1sNVN0eWxlcyIsImhhc0NTUyIsImFkZFdyYXBwZXJzIiwiaW5kZXgiLCJyZUVsZW1lbnRzIiwiYXBwbHlFbGVtZW50IiwiY3JlYXRlV3JhcHBlciIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwid3JhcHBlciIsInNoaXZOYW1lc3BhY2UiLCJzcGVjaWZpZWQiLCJub2RlVmFsdWUiLCJzaGl2Q3NzVGV4dCIsInBhaXIiLCJwYXJ0cyIsInJlcGxhY2VtZW50IiwicmVtb3ZlV3JhcHBlcnMiLCJ3cmFwcGVycyIsInJlbW92ZU5vZGUiLCJzaGl2UHJpbnQiLCJyZW1vdmVTaGVldCIsImNsZWFyVGltZW91dCIsIl9yZW1vdmVTaGVldFRpbWVyIiwic2hpdmVkU2hlZXQiLCJuYW1lc3BhY2VzIiwib3duZXJXaW5kb3ciLCJwYXJlbnRXaW5kb3ciLCJzdXBwb3J0c1NoaXZhYmxlU2hlZXRzIiwicHJpbnRTaGl2ZWQiLCJhdHRhY2hFdmVudCIsImltcG9ydHMiLCJzaGVldCIsImNvbGxlY3Rpb24iLCJzdHlsZVNoZWV0cyIsInNoZWV0cyIsIkFycmF5IiwicG9wIiwiZGlzYWJsZWQiLCJyZU1lZGlhIiwibWVkaWEiLCJlciIsInJldmVyc2UiLCJ2ZXJzaW9uIiwiYSIsImNoaWxkTm9kZXMiLCJkb2NFbCIsIm1vZHVsZSIsImV4cG9ydHMiLCJvbVByZWZpeGVzIiwiZG9tUHJlZml4ZXMiLCJfZG9tUHJlZml4ZXMiLCJwcmVmaXhlZENTU1ZhbHVlIiwiZ2V0Q29udGV4dCIsImFuZ2xlIiwic3RyMSIsInN0cjIiLCJjc3MiLCJsZW4iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJTVkdSZWN0IiwibmFtZXNwYWNlVVJJIiwibmV3U3ludGF4Iiwib2xkU3ludGF4IiwiX2Nzc29tUHJlZml4ZXMiLCJhdFJ1bGUiLCJjc3NydWxlIiwiQ1NTUnVsZSIsInByZWZpeCIsInRoaXNSdWxlIiwidGVzdFN0eWxlcyIsImJvb2wiLCJEb2N1bWVudFRvdWNoIiwicXVlcnkiLCJvZmZzZXRUb3AiLCJmb3JtIiwiaW5wdXQiLCJpbnZhbGlkRmlyZWQiLCJmb3JtdmFsaWRhdGlvbmFwaSIsIm9wZXJhIiwib3BlcmFtaW5pIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJmb3JtdmFsaWRhdGlvbm1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNsaWNrIiwiaW5wdXRFbGVtIiwiaW5wdXR0eXBlcyIsImlucHV0cyIsImlucHV0RWxlbVR5cGUiLCJkZWZhdWx0VmlldyIsInNtaWxlIiwiV2Via2l0QXBwZWFyYW5jZSIsImNoZWNrVmFsaWRpdHkiLCJudW1iZXIiLCJmb3JtdmFsaWRhdGlvbiIsImRpZmYiLCJlbCIsInJvb3QiLCJmb2N1cyIsImV4ZWNDb21tYW5kIiwidmFsdWVBc051bWJlciIsInVuc2hpZnQiLCJ0ZXN0UHJvcCIsInVzZVZhbHVlIiwicHJlZml4ZWRDU1MiLCJwcmVmaXhlZFByb3AiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1c2VQcmVmaXgiLCJtcSIsImRlZmF1bHRTdHlsZSIsIm9mZnNldFdpZHRoIiwiX2hhc093blByb3BlcnR5Iiwib2JqZWN0IiwicHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsIl9sIiwicmVzIiwiY2JzIiwid2lkdGgxIiwid2lkdGgyIiwiaW1hZ2UiLCJpc1NpemVzIiwib25sb2FkIiwib25lcnJvciIsInNyYyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiRWxlbWVudCIsImdldCIsIm4iLCJjaGlsZHJlbiIsIm5vZGVUeXBlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxVQUNKLFNBQVdBLEdBQ1BBLEVBQVFDLGFBQWUsU0FBVUMsR0FDN0IsR0FBSUMsR0FBTUQsRUFBSUUsdUJBQ2QsUUFDSUMsSUFBS0YsRUFBSUcsSUFDVEMsTUFBT0osRUFBSUssTUFDWEMsT0FBUU4sRUFBSU8sT0FDWkMsS0FBTVIsRUFBSVMsT0FHbEJaLEVBQVFhLFVBQVksU0FBVUMsRUFBTUMsR0FDaEMsTUFBUUQsR0FBS1QsS0FBT1UsRUFBVVYsS0FDdEJTLEVBQUtILE1BQVFJLEVBQVVKLE1BQ3ZCRyxFQUFLUCxPQUFTUSxFQUFVUixPQUN4Qk8sRUFBS0wsUUFBVU0sRUFBVU4sUUFFckNULEVBQVFnQixhQUFlLFNBQVVDLEVBQUtDLEdBQ2xDLE1BQU9DLE1BQUtDLE1BQU1ELEtBQUtFLFVBQVlILEVBQU1ELEVBQU0sSUFBTUEsR0FFekRqQixFQUFRc0IsY0FBZ0IsU0FBVVIsRUFBTUMsR0FDcEMsR0FBSVEsS0FTSixPQVJJVCxHQUFLVCxLQUFPVSxFQUFVVixLQUN0QmtCLEVBQU9DLEtBQUtDLFVBQVVwQixLQUN0QlMsRUFBS0gsTUFBUUksRUFBVUosTUFDdkJZLEVBQU9DLEtBQUtDLFVBQVVkLE1BQ3RCRyxFQUFLUCxPQUFTUSxFQUFVUixPQUN4QmdCLEVBQU9DLEtBQUtDLFVBQVVsQixP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QUFVLFNBQVdELElBR3BCQyxHQUFZLFVBQWFELElBQzVCRCxFQUFTLHFGQUNURCxFQUFTLDZFQUVUNUssRUFBTyxXQUNMRCxFQUFRLFFBQXdCLEdBQWYrSyxFQUFNdFgsUUFHekJzWCxFQUFNRSxPQUFTaEwsRUFDZjhLLEVBQU1HLFFBQVVqTCxFQUNoQjhLLEVBQU1yWCxhQUFhLFFBQVMsT0FFNUJxWCxFQUFNMVgsT0FBU3dYLEVBQVMsT0FBU0MsRUFBUyxNQUMxQ0MsRUFBTUksSUFBTU4sR0FFWjdLLEVBQVEsUUFBU2dMLEtBTXJCaFIsSUFHQW9CLEVBQVdGLFNBRUpvRixHQUFlTixjQUNmTSxHQUFlUSxZQUd0QixLQUFLLEdBQUl4TixHQUFJLEVBQUdBLEVBQUkwSCxFQUFVeUYsR0FBR2xOLE9BQVFELElBQ3ZDMEgsRUFBVXlGLEdBQUduTixJQUlma0QsR0FBT3dFLFVBQVlBLEdBS2xCeEUsT0FBUXJEO0FDNzlFTixxQkFBdUJBLFVBQVMrTixpQkFDakNrSyxPQUFPQyxlQUFlQyxRQUFRcFcsVUFBVyxxQkFDckNxVyxJQUFLLFdBQ0QsSUFBSSxHQUEyQkMsR0FBdkJ2TyxFQUFRakosS0FBS3lYLFNBQWFuWSxFQUFJLEVBQUcrQixFQUFJNEgsRUFBTTFKLE9BQVk4QixFQUFKL0IsSUFBU0EsRUFDaEUsR0FBR2tZLEVBQUl2TyxFQUFNM0osR0FBSSxJQUFNa1ksRUFBRUUsU0FBVSxNQUFPRixFQUM5QyxPQUFPIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSGVscGVycztcbihmdW5jdGlvbiAoSGVscGVycykge1xuICAgIEhlbHBlcnMuR2V0UmVjdGFuZ2xlID0gZnVuY3Rpb24gKGVsdCkge1xuICAgICAgICB2YXIgcG9zID0gZWx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgVG9wOiBwb3MudG9wLFxuICAgICAgICAgICAgUmlnaHQ6IHBvcy5yaWdodCxcbiAgICAgICAgICAgIEJvdHRvbTogcG9zLmJvdHRvbSxcbiAgICAgICAgICAgIExlZnQ6IHBvcy5sZWZ0XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBIZWxwZXJzLklzT3V0c2lkZSA9IGZ1bmN0aW9uIChyZWN0LCBjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIChyZWN0LlRvcCA8PSBjb250YWluZXIuVG9wKVxuICAgICAgICAgICAgfHwgKHJlY3QuTGVmdCA8PSBjb250YWluZXIuTGVmdClcbiAgICAgICAgICAgIHx8IChyZWN0LlJpZ2h0ID49IGNvbnRhaW5lci5SaWdodClcbiAgICAgICAgICAgIHx8IChyZWN0LkJvdHRvbSA+PSBjb250YWluZXIuQm90dG9tKTtcbiAgICB9O1xuICAgIEhlbHBlcnMuR2V0UmFuZG9tSW50ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICAgIH07XG4gICAgSGVscGVycy5HZXRPdXRzaWRlRGlyID0gZnVuY3Rpb24gKHJlY3QsIGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGlmIChyZWN0LlRvcCA8PSBjb250YWluZXIuVG9wKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLlRvcCk7XG4gICAgICAgIGlmIChyZWN0LkxlZnQgPD0gY29udGFpbmVyLkxlZnQpXG4gICAgICAgICAgICByZXN1bHQucHVzaChEaXJlY3Rpb24uTGVmdCk7XG4gICAgICAgIGlmIChyZWN0LlJpZ2h0ID49IGNvbnRhaW5lci5SaWdodClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKERpcmVjdGlvbi5SaWdodCk7XG4gICAgICAgIGlmIChyZWN0LkJvdHRvbSA+PSBjb250YWluZXIuQm90dG9tKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goRGlyZWN0aW9uLkJvdHRvbSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBIZWxwZXJzLlJlbmRlckltZyA9IGZ1bmN0aW9uIChpbWFnZXMsIHNpemVzKSB7XG4gICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLCBzcmNzZXQgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3Jjc2V0ICs9IGltYWdlc1tpXS51cmwgKyBcIiBcIiArIGltYWdlc1tpXS53aWR0aCArIFwid1wiO1xuICAgICAgICAgICAgaWYgKGkgPCBpbWFnZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHNyY3NldCArPSBcIixcIjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGltYWdlc1tpXS51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoXCJzcmNzZXRcIiwgc3Jjc2V0KTtcbiAgICAgICAgaWYgKHNpemVzKVxuICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZShcInNpemVzXCIsIHNpemVzKTtcbiAgICAgICAgcmV0dXJuIGltZztcbiAgICB9O1xufSkoSGVscGVycyB8fCAoSGVscGVycyA9IHt9KSk7XG52YXIgRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiVG9wXCJdID0gMF0gPSBcIlRvcFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDFdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJCb3R0b21cIl0gPSAyXSA9IFwiQm90dG9tXCI7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxlZnRcIl0gPSAzXSA9IFwiTGVmdFwiO1xufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiSGVscGVycy50c1wiLz5cbnZhciBIRVJPX1dJRFRIID0gMTYxO1xudmFyIEhFUk9fSEVJR0hUID0gMjA5O1xudmFyIEJBU0VTUEVFRCA9IDAuMztcbnZhciBIZXJvID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIZXJvKGNvbnRhaW5lcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLlNwZWVkID0gQkFTRVNQRUVEO1xuICAgICAgICAvL0NoYW5nZXMgb25lIG9mIHRoZSBkaXJlY3Rpb24gKHJhbmRvbWx5IHNlbGVjdGVkKVxuICAgICAgICB0aGlzLkNoYW5nZURpciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByYW5kb21EaXJJbmRleCA9IEhlbHBlcnMuR2V0UmFuZG9tSW50KDAsIF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBfdGhpcy5fQ2hhbmdlRGlyKHJhbmRvbURpckluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fQ2hhbmdlRGlyID0gZnVuY3Rpb24gKGRpckluZGV4KSB7XG4gICAgICAgICAgICBpZiAoZGlySW5kZXggPCAwIHx8IGRpckluZGV4ID49IF90aGlzLl9EaXJlY3Rpb24ubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBmcm9tID0gX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF07XG4gICAgICAgICAgICBzd2l0Y2ggKGZyb20pIHtcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5Ub3A6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fRGlyZWN0aW9uW2RpckluZGV4XSA9IERpcmVjdGlvbi5Ub3A7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkxlZnQ6XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9EaXJlY3Rpb25bZGlySW5kZXhdID0gRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX0RpcmVjdGlvbltkaXJJbmRleF0gPSBEaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIHRoaXMuRWx0LnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCJob21lLmh0bWxcIik7XG4gICAgICAgIHRoaXMuRWx0LmNsYXNzTGlzdC5hZGQoXCJoZXJvXCIpO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS53aWR0aCA9IEhFUk9fV0lEVEggKyBcInB4XCI7XG4gICAgICAgIHRoaXMuRWx0LnN0eWxlLmhlaWdodCA9IEhFUk9fSEVJR0hUICsgXCJweFwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5FbHQpO1xuICAgICAgICB0aGlzLlBvc2l0aW9uID0geyB4OiA1MCwgeTogNTAgfTtcbiAgICAgICAgdGhpcy5fRGlyZWN0aW9uID0gW0RpcmVjdGlvbi5Ub3AsIERpcmVjdGlvbi5MZWZ0XTtcbiAgICAgICAgdGhpcy5Nb3ZlKCk7XG4gICAgfVxuICAgIEhlcm8ucHJvdG90eXBlLkNoYW5nZURpckZyb21Db2xsaXNpb24gPSBmdW5jdGlvbiAoZnJvbURpcnMpIHtcbiAgICAgICAgdmFyIGwgPSBmcm9tRGlycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChsLS0pIHtcbiAgICAgICAgICAgIHZhciBmcm9tID0gZnJvbURpcnNbbF07XG4gICAgICAgICAgICB2YXIgZGlySW5kZXggPSB0aGlzLl9EaXJlY3Rpb24uaW5kZXhPZihmcm9tKTtcbiAgICAgICAgICAgIHRoaXMuX0NoYW5nZURpcihkaXJJbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEhlcm8ucHJvdG90eXBlLkdvT3Bwb3NpdGVEaXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsID0gdGhpcy5fRGlyZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICAgICAgdGhpcy5fQ2hhbmdlRGlyKGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBIZXJvLnByb3RvdHlwZS5Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLl9EaXJlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoZGlyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRpcikge1xuICAgICAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlRvcDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueSA9IF90aGlzLlBvc2l0aW9uLnkgLSBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQm90dG9tOlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi55ID0gX3RoaXMuUG9zaXRpb24ueSArIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5MZWZ0OlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5Qb3NpdGlvbi54ID0gX3RoaXMuUG9zaXRpb24ueCAtIF90aGlzLlNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SaWdodDpcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuUG9zaXRpb24ueCA9IF90aGlzLlBvc2l0aW9uLnggKyBfdGhpcy5TcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLkVsdC5zdHlsZS50b3AgPSB0aGlzLlBvc2l0aW9uLnkgKyBcIiVcIjtcbiAgICAgICAgdGhpcy5FbHQuc3R5bGUubGVmdCA9IHRoaXMuUG9zaXRpb24ueCArIFwiJVwiO1xuICAgIH07XG4gICAgcmV0dXJuIEhlcm87XG59KCkpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cImxpYi9kZWZpbml0aW9ucy1jdXN0b20udHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9IZXJvLnRzXCIvPlxudmFyIFBsYXlncm91bmQ7XG4oZnVuY3Rpb24gKFBsYXlncm91bmQpIHtcbiAgICB2YXIgQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5Z3JvdW5kXCIpO1xuICAgIGlmIChDb250YWluZXIpIHtcbiAgICAgICAgdmFyIF9Ub3RhbEZhY2VzID0gMSwgX0hlcm9lcyA9IFtdLCBDb250YWluZXJSZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoQ29udGFpbmVyKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfVG90YWxGYWNlczsgaSsrKSB7XG4gICAgICAgICAgICBfSGVyb2VzLnB1c2gobmV3IEhlcm8oQ29udGFpbmVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9FdmVyeSBmcmFtZVxuICAgICAgICB2YXIgX0xvb3AgPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9IZXJvZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVybyA9IF9IZXJvZXNbal07XG4gICAgICAgICAgICAgICAgLy9Nb3ZlIGhlcm9cbiAgICAgICAgICAgICAgICBoZXJvLk1vdmUoKTtcbiAgICAgICAgICAgICAgICAvL0lmIGhlcm8gaXMgb3V0c2lkZSBjb250YWluZXIsIGNoYW5nZSBpdHMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgdmFyIGhlcm9SZWN0ID0gSGVscGVycy5HZXRSZWN0YW5nbGUoaGVyby5FbHQpO1xuICAgICAgICAgICAgICAgIGlmIChIZWxwZXJzLklzT3V0c2lkZShoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVyby5DaGFuZ2VEaXJGcm9tQ29sbGlzaW9uKEhlbHBlcnMuR2V0T3V0c2lkZURpcihoZXJvUmVjdCwgQ29udGFpbmVyUmVjdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShfTG9vcCk7XG4gICAgICAgIC8vRXZlbnRzXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX0hlcm9lcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy9JZiBtb3VzZSBpcyBvdmVyIEhlcm8sIGdvIGZhc3RlciAgICBcbiAgICAgICAgICAgIHZhciBoZXJvID0gX0hlcm9lc1tqXTtcbiAgICAgICAgICAgIGhlcm8uRWx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vaGVyby5Hb09wcG9zaXRlRGlyKCk7XG4gICAgICAgICAgICAgICAgaGVyby5TcGVlZCA9IGhlcm8uU3BlZWQgKiAzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZXJvLkVsdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGhlcm8uU3BlZWQgPSBCQVNFU1BFRUQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vUmFuZG9tbHkgY2hhbmdlIGRpcmVjdGlvbiBldmVyeSAzIHNlY1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC4yKVxuICAgICAgICAgICAgICAgICAgICBoZXJvLkNoYW5nZURpcigpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9SZWNhbGN1bGF0ZSBjb250YWluZXIgc2l6ZSB3aGVuIGNoYW5naW5nIHdpbmRvdyBzaXplXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIENvbnRhaW5lclJlY3QgPSBIZWxwZXJzLkdldFJlY3RhbmdsZShDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG59KShQbGF5Z3JvdW5kIHx8IChQbGF5Z3JvdW5kID0ge30pKTtcbnZhciBUVU1CTFJfQVBJX0tFWSA9IFwib3N5ZDhlNklUM085aWFXYWZsRWJ6anphcW91MDF0MGZkNllvTThJaGdYbXVPUDhzdHhcIjtcbnZhciBUVU1CTFJfSUQgPSBcImRpcGNvaW5cIjtcbnZhciBQT1NUX1BFUl9QQUdFID0gMTA7XG52YXIgVHVtYmxyO1xuKGZ1bmN0aW9uIChUdW1ibHIpIHtcbiAgICB2YXIgX0NvbnRhaW5lciwgX0xvYWRlciwgX0N1ckluZGV4ID0gMDtcbiAgICBUdW1ibHIuSW5pdCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgX0NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgX0dldFBvc3RzKCk7XG4gICAgfTtcbiAgICBUdW1ibHIuUG9zdHNMb2FkZWQgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgcG9zdHMgPSBvLnJlc3BvbnNlLnBvc3RzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcG9zdCA9IHBvc3RzW2ldO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocG9zdCk7XG4gICAgICAgICAgICBfQ29udGFpbmVyLmFwcGVuZENoaWxkKF9CdWlsZFBvc3QocG9zdCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvL2pzb25wLlxuICAgIHZhciBfR2V0UG9zdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInR1bWJsci1kYXRhXCIpO1xuICAgICAgICBpZiAoc2NyaXB0VGFnICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjcmlwdFRhZy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHNjcmlwdFRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcVVybCA9IFwiaHR0cHM6Ly9hcGkudHVtYmxyLmNvbS92Mi9ibG9nL1wiICsgVFVNQkxSX0lEICsgXCIudHVtYmxyLmNvbS9wb3N0cz9hcGlfa2V5PVwiICsgVFVNQkxSX0FQSV9LRVk7XG4gICAgICAgIHNjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgIHNjcmlwdFRhZy5pZCA9IFwidHVtYmxyLWRhdGFcIjtcbiAgICAgICAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0L2phdmFzY3JpcHRcIik7XG4gICAgICAgIHNjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgcmVxVXJsICsgXCImY2FsbGJhY2s9VHVtYmxyLlBvc3RzTG9hZGVkJnN0YXJ0PVwiICsgX0N1ckluZGV4ICsgXCImbnVtPVwiICsgUE9TVF9QRVJfUEFHRSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcbiAgICB9O1xuICAgIC8vUmVuZGVyaW5nXG4gICAgdmFyIF9CdWlsZFBob3RvcyA9IGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgIGlmICghcG9zdC5waG90b3MpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHBob3RvcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3QucGhvdG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwaG90b3MucHVzaChIZWxwZXJzLlJlbmRlckltZyhwb3N0LnBob3Rvc1tpXS5hbHRfc2l6ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGhvdG9zO1xuICAgIH07XG4gICAgdmFyIF9CdWlsZFBvc3QgPSBmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFydGljbGVcIiksIHBvc3RIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIpLCBwb3N0VGl0bGVFTHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIiksIHBvc3REYXRlRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRpbWVcIiksIHBvc3RUZXh0Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHVtYmxyLXBvc3RcIik7XG4gICAgICAgIHBvc3RIZWFkZXIuY2xhc3NMaXN0LmFkZChcInR1bWJsci1wb3N0LWhlYWRlclwiKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvc3RIZWFkZXIpO1xuICAgICAgICBwb3N0RGF0ZUVsdC5pbm5lckhUTUwgPSBwb3N0LmRhdGU7XG4gICAgICAgIHBvc3RIZWFkZXIuYXBwZW5kQ2hpbGQocG9zdERhdGVFbHQpO1xuICAgICAgICBpZiAocG9zdC50aXRsZSkge1xuICAgICAgICAgICAgcG9zdFRpdGxlRUx0LmNsYXNzTGlzdC5hZGQoXCJ0dW1ibHItcG9zdC10aXRsZVwiKTtcbiAgICAgICAgICAgIHBvc3RUaXRsZUVMdC5pbm5lckhUTUwgPSBwb3N0LnRpdGxlO1xuICAgICAgICAgICAgcG9zdEhlYWRlci5hcHBlbmRDaGlsZChwb3N0VGl0bGVFTHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3N0LnRleHQpIHtcbiAgICAgICAgICAgIHBvc3RUZXh0Q29udGVudC5jbGFzc0xpc3QuYWRkKFwidHVtYmxyLXBvc3QtdGV4dFwiKTtcbiAgICAgICAgICAgIHBvc3RUZXh0Q29udGVudC5pbm5lckhUTUwgPSBwb3N0LnRleHQ7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9zdFRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zdC5ib2R5KSB7XG4gICAgICAgICAgICBwb3N0VGV4dENvbnRlbnQuY2xhc3NMaXN0LmFkZChcInR1bWJsci1wb3N0LXRleHRcIik7XG4gICAgICAgICAgICBwb3N0VGV4dENvbnRlbnQuaW5uZXJIVE1MID0gcG9zdC5ib2R5O1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvc3RUZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3QudHlwZSA9PSBcInZpZGVvXCIgJiYgcG9zdC5wbGF5ZXIpIHtcbiAgICAgICAgICAgIC8vZ2V0IHRoZSBsYXJnZXN0IHZpZGVvXG4gICAgICAgICAgICB2YXIgY3VyTWF4ID0gMCwgbGFyZ2VzdCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc3QucGxheWVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gcG9zdC5wbGF5ZXJbaV0sIHZpZGVvV2lkdGggPSB2aWRlby53aWR0aDtcbiAgICAgICAgICAgICAgICBjdXJNYXggPSBNYXRoLm1heChjdXJNYXgsIHZpZGVvV2lkdGgpO1xuICAgICAgICAgICAgICAgIGlmICh2aWRlb1dpZHRoID09IGN1ck1heClcbiAgICAgICAgICAgICAgICAgICAgbGFyZ2VzdCA9IHZpZGVvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9pbnNlcnQgdGhlIGVtYmVkXG4gICAgICAgICAgICB2YXIgdmlkZW9QYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdmlkZW9QYXJlbnQuY2xhc3NMaXN0LmFkZChcInR1bWJsci12aWRlb1wiKTtcbiAgICAgICAgICAgIHZpZGVvUGFyZW50LmlubmVySFRNTCA9IGxhcmdlc3QuZW1iZWRfY29kZTtcbiAgICAgICAgICAgIHZhciBwbGF5ZXIgPSB2aWRlb1BhcmVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIubm9kZU5hbWUgPT09IFwiVklERU9cIilcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY29udHJvbHMgPSB0cnVlO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHZpZGVvUGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zdC50eXBlID09IFwiYXVkaW9cIiAmJiBwb3N0LmF1ZGlvX3R5cGUgPT0gXCJzb3VuZGNsb3VkXCIpIHtcbiAgICAgICAgICAgIHZhciBhdWRpb1BhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBhdWRpb1BhcmVudC5jbGFzc0xpc3QuYWRkKFwidHVtYmxyLWF1ZGlvXCIpO1xuICAgICAgICAgICAgYXVkaW9QYXJlbnQuaW5uZXJIVE1MID0gcG9zdC5wbGF5ZXI7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYXVkaW9QYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3N0LnBob3Rvcykge1xuICAgICAgICAgICAgdmFyIHBob3RvUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgcGhvdG9FbHRzID0gX0J1aWxkUGhvdG9zKHBvc3QpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaG90b0VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwaG90b1BhcmVudC5hcHBlbmRDaGlsZChwaG90b0VsdHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGhvdG9QYXJlbnQuY2xhc3NMaXN0LmFkZChcInR1bWJsci1pbWFnZXNcIik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocGhvdG9QYXJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3N0LnRhZ3MgJiYgcG9zdC50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0YWdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRhZ3MuY2xhc3NMaXN0LmFkZChcInR1bWJsci10YWdzXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0LnRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFnRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgdGFnRWx0LmNsYXNzTGlzdC5hZGQoXCJ0dW1ibHItdGFnXCIpO1xuICAgICAgICAgICAgICAgIHRhZ0VsdC5pbm5lckhUTUwgPSBcIiNcIiArIHBvc3QudGFnc1tpXTtcbiAgICAgICAgICAgICAgICB0YWdzLmFwcGVuZENoaWxkKHRhZ0VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9O1xufSkoVHVtYmxyIHx8IChUdW1ibHIgPSB7fSkpO1xudmFyIEhvbWU7XG4oZnVuY3Rpb24gKEhvbWUpIHtcbiAgICB2YXIgX1R1bWJsckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHVtYmxyXCIpO1xuICAgIGlmIChfVHVtYmxyQ29udGFpbmVyKVxuICAgICAgICBUdW1ibHIuSW5pdChfVHVtYmxyQ29udGFpbmVyKTtcbn0pKEhvbWUgfHwgKEhvbWUgPSB7fSkpO1xuIiwiLyohXG4gKiBtb2Rlcm5penIgdjMuMy4xXG4gKiBCdWlsZCBodHRwOi8vbW9kZXJuaXpyLmNvbS9kb3dubG9hZD8tY2FudmFzLWNsYXNzbGlzdC1jc3NncmFkaWVudHMtY3NzdHJhbnNmb3Jtcy1jc3N0cmFuc2Zvcm1zM2QtY3NzdHJhbnNpdGlvbnMtaW5saW5lc3ZnLWxvY2FsaXplZG51bWJlci1wbGFjZWhvbGRlci1zaXplcy1zcmNzZXQtc3ZnLXRvdWNoZXZlbnRzLWRvbXByZWZpeGVzLXByZWZpeGVkLXByZWZpeGVkY3NzLXByZWZpeGVkY3NzdmFsdWUtcHJlZml4ZXMtcHJpbnRzaGl2LXNldGNsYXNzZXMtdGVzdGFsbHByb3BzLXRlc3Rwcm9wLWRvbnRtaW5cbiAqXG4gKiBDb3B5cmlnaHQgKGMpXG4gKiAgRmFydWsgQXRlc1xuICogIFBhdWwgSXJpc2hcbiAqICBBbGV4IFNleHRvblxuICogIFJ5YW4gU2VkZG9uXG4gKiAgUGF0cmljayBLZXR0bmVyXG4gKiAgU3R1IENveFxuICogIFJpY2hhcmQgSGVycmVyYVxuXG4gKiBNSVQgTGljZW5zZVxuICovXG5cbi8qXG4gKiBNb2Rlcm5penIgdGVzdHMgd2hpY2ggbmF0aXZlIENTUzMgYW5kIEhUTUw1IGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlXG4gKiBjdXJyZW50IFVBIGFuZCBtYWtlcyB0aGUgcmVzdWx0cyBhdmFpbGFibGUgdG8geW91IGluIHR3byB3YXlzOiBhcyBwcm9wZXJ0aWVzIG9uXG4gKiBhIGdsb2JhbCBgTW9kZXJuaXpyYCBvYmplY3QsIGFuZCBhcyBjbGFzc2VzIG9uIHRoZSBgPGh0bWw+YCBlbGVtZW50LiBUaGlzXG4gKiBpbmZvcm1hdGlvbiBhbGxvd3MgeW91IHRvIHByb2dyZXNzaXZlbHkgZW5oYW5jZSB5b3VyIHBhZ2VzIHdpdGggYSBncmFudWxhciBsZXZlbFxuICogb2YgY29udHJvbCBvdmVyIHRoZSBleHBlcmllbmNlLlxuKi9cblxuOyhmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpe1xuICB2YXIgY2xhc3NlcyA9IFtdO1xuICBcblxuICB2YXIgdGVzdHMgPSBbXTtcbiAgXG5cbiAgLyoqXG4gICAqXG4gICAqIE1vZGVybml6clByb3RvIGlzIHRoZSBjb25zdHJ1Y3RvciBmb3IgTW9kZXJuaXpyXG4gICAqXG4gICAqIEBjbGFzc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKi9cblxuICB2YXIgTW9kZXJuaXpyUHJvdG8gPSB7XG4gICAgLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiwgZHVtbXlcbiAgICBfdmVyc2lvbjogJzMuMy4xJyxcblxuICAgIC8vIEFueSBzZXR0aW5ncyB0aGF0IGRvbid0IHdvcmsgYXMgc2VwYXJhdGUgbW9kdWxlc1xuICAgIC8vIGNhbiBnbyBpbiBoZXJlIGFzIGNvbmZpZ3VyYXRpb24uXG4gICAgX2NvbmZpZzoge1xuICAgICAgJ2NsYXNzUHJlZml4JzogJycsXG4gICAgICAnZW5hYmxlQ2xhc3Nlcyc6IHRydWUsXG4gICAgICAnZW5hYmxlSlNDbGFzcyc6IHRydWUsXG4gICAgICAndXNlUHJlZml4ZXMnOiB0cnVlXG4gICAgfSxcblxuICAgIC8vIFF1ZXVlIG9mIHRlc3RzXG4gICAgX3E6IFtdLFxuXG4gICAgLy8gU3R1YiB0aGVzZSBmb3IgcGVvcGxlIHdobyBhcmUgbGlzdGVuaW5nXG4gICAgb246IGZ1bmN0aW9uKHRlc3QsIGNiKSB7XG4gICAgICAvLyBJIGRvbid0IHJlYWxseSB0aGluayBwZW9wbGUgc2hvdWxkIGRvIHRoaXMsIGJ1dCB3ZSBjYW5cbiAgICAgIC8vIHNhZmUgZ3VhcmQgaXQgYSBiaXQuXG4gICAgICAvLyAtLSBOT1RFOjogdGhpcyBnZXRzIFdBWSBvdmVycmlkZGVuIGluIHNyYy9hZGRUZXN0IGZvciBhY3R1YWwgYXN5bmMgdGVzdHMuXG4gICAgICAvLyBUaGlzIGlzIGluIGNhc2UgcGVvcGxlIGxpc3RlbiB0byBzeW5jaHJvbm91cyB0ZXN0cy4gSSB3b3VsZCBsZWF2ZSBpdCBvdXQsXG4gICAgICAvLyBidXQgdGhlIGNvZGUgdG8gKmRpc2FsbG93KiBzeW5jIHRlc3RzIGluIHRoZSByZWFsIHZlcnNpb24gb2YgdGhpc1xuICAgICAgLy8gZnVuY3Rpb24gaXMgYWN0dWFsbHkgbGFyZ2VyIHRoYW4gdGhpcy5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNiKHNlbGZbdGVzdF0pO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIGFkZFRlc3Q6IGZ1bmN0aW9uKG5hbWUsIGZuLCBvcHRpb25zKSB7XG4gICAgICB0ZXN0cy5wdXNoKHtuYW1lOiBuYW1lLCBmbjogZm4sIG9wdGlvbnM6IG9wdGlvbnN9KTtcbiAgICB9LFxuXG4gICAgYWRkQXN5bmNUZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgdGVzdHMucHVzaCh7bmFtZTogbnVsbCwgZm46IGZufSk7XG4gICAgfVxuICB9O1xuXG4gIFxuXG4gIC8vIEZha2Ugc29tZSBvZiBPYmplY3QuY3JlYXRlIHNvIHdlIGNhbiBmb3JjZSBub24gdGVzdCByZXN1bHRzIHRvIGJlIG5vbiBcIm93blwiIHByb3BlcnRpZXMuXG4gIHZhciBNb2Rlcm5penIgPSBmdW5jdGlvbigpIHt9O1xuICBNb2Rlcm5penIucHJvdG90eXBlID0gTW9kZXJuaXpyUHJvdG87XG5cbiAgLy8gTGVhayBtb2Rlcm5penIgZ2xvYmFsbHkgd2hlbiB5b3UgYHJlcXVpcmVgIGl0IHJhdGhlciB0aGFuIGZvcmNlIGl0IGhlcmUuXG4gIC8vIE92ZXJ3cml0ZSBuYW1lIHNvIGNvbnN0cnVjdG9yIG5hbWUgaXMgbmljZXIgOkRcbiAgTW9kZXJuaXpyID0gbmV3IE1vZGVybml6cigpO1xuXG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcIlNWR1wiLFxuICBcInByb3BlcnR5XCI6IFwic3ZnXCIsXG4gIFwiY2FuaXVzZVwiOiBcInN2Z1wiLFxuICBcInRhZ3NcIjogW1wic3ZnXCJdLFxuICBcImF1dGhvcnNcIjogW1wiRXJpayBEYWhsc3Ryb21cIl0sXG4gIFwicG9seWZpbGxzXCI6IFtcbiAgICBcInN2Z3dlYlwiLFxuICAgIFwicmFwaGFlbFwiLFxuICAgIFwiYW1wbGVzZGtcIixcbiAgICBcImNhbnZnXCIsXG4gICAgXCJzdmctYm9pbGVycGxhdGVcIixcbiAgICBcInNpZVwiLFxuICAgIFwiZG9qb2dmeFwiLFxuICAgIFwiZmFicmljanNcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciBTVkcgaW4gYDxlbWJlZD5gIG9yIGA8b2JqZWN0PmAgZWxlbWVudHMuXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdzdmcnLCAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykuY3JlYXRlU1ZHUmVjdCk7XG5cblxuICAvKipcbiAgICogTGlzdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gc2V0IGZvciBjc3MgdGVzdHMuIFNlZSB0aWNrZXQgIzIxXG4gICAqIGh0dHA6Ly9naXQuaW8vdlVHbDRcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuX3ByZWZpeGVzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5fcHJlZml4ZXNcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZXNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogTW9kZXJuaXpyLl9wcmVmaXhlcyBpcyB0aGUgaW50ZXJuYWwgbGlzdCBvZiBwcmVmaXhlcyB0aGF0IHdlIHRlc3QgYWdhaW5zdFxuICAgKiBpbnNpZGUgb2YgdGhpbmdzIGxpa2UgW3ByZWZpeGVkXSgjbW9kZXJuaXpyLXByZWZpeGVkKSBhbmQgW3ByZWZpeGVkQ1NTXSgjLWNvZGUtbW9kZXJuaXpyLXByZWZpeGVkY3NzKS4gSXQgaXMgc2ltcGx5XG4gICAqIGFuIGFycmF5IG9mIGtlYmFiLWNhc2UgdmVuZG9yIHByZWZpeGVzIHlvdSBjYW4gdXNlIHdpdGhpbiB5b3VyIGNvZGUuXG4gICAqXG4gICAqIFNvbWUgY29tbW9uIHVzZSBjYXNlcyBpbmNsdWRlXG4gICAqXG4gICAqIEdlbmVyYXRpbmcgYWxsIHBvc3NpYmxlIHByZWZpeGVkIHZlcnNpb24gb2YgYSBDU1MgcHJvcGVydHlcbiAgICogYGBganNcbiAgICogdmFyIHJ1bGUgPSBNb2Rlcm5penIuX3ByZWZpeGVzLmpvaW4oJ3RyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgJyk7XG4gICAqXG4gICAqIHJ1bGUgPT09ICd0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IHdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG1vei10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG8tdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyBtcy10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7J1xuICAgKiBgYGBcbiAgICpcbiAgICogR2VuZXJhdGluZyBhbGwgcG9zc2libGUgcHJlZml4ZWQgdmVyc2lvbiBvZiBhIENTUyB2YWx1ZVxuICAgKiBgYGBqc1xuICAgKiBydWxlID0gJ2Rpc3BsYXk6JyArICBNb2Rlcm5penIuX3ByZWZpeGVzLmpvaW4oJ2ZsZXg7IGRpc3BsYXk6JykgKyAnZmxleCc7XG4gICAqXG4gICAqIHJ1bGUgPT09ICdkaXNwbGF5OmZsZXg7IGRpc3BsYXk6LXdlYmtpdC1mbGV4OyBkaXNwbGF5Oi1tb3otZmxleDsgZGlzcGxheTotby1mbGV4OyBkaXNwbGF5Oi1tcy1mbGV4OyBkaXNwbGF5OmZsZXgnXG4gICAqIGBgYFxuICAgKi9cblxuICAvLyB3ZSB1c2UgWycnLCcnXSByYXRoZXIgdGhhbiBhbiBlbXB0eSBhcnJheSBpbiBvcmRlciB0byBhbGxvdyBhIHBhdHRlcm4gb2YgLmBqb2luKClgaW5nIHByZWZpeGVzIHRvIHRlc3RcbiAgLy8gdmFsdWVzIGluIGZlYXR1cmUgZGV0ZWN0cyB0byBjb250aW51ZSB0byB3b3JrXG4gIHZhciBwcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gJyAtd2Via2l0LSAtbW96LSAtby0gLW1zLSAnLnNwbGl0KCcgJykgOiBbJycsJyddKTtcblxuICAvLyBleHBvc2UgdGhlc2UgZm9yIHRoZSBwbHVnaW4gQVBJLiBMb29rIGluIHRoZSBzb3VyY2UgZm9yIGhvdyB0byBqb2luKCkgdGhlbSBhZ2FpbnN0IHlvdXIgaW5wdXRcbiAgTW9kZXJuaXpyUHJvdG8uX3ByZWZpeGVzID0gcHJlZml4ZXM7XG5cbiAgXG5cbiAgLyoqXG4gICAqIGlzIHJldHVybnMgYSBib29sZWFuIGlmIHRoZSB0eXBlb2YgYW4gb2JqIGlzIGV4YWN0bHkgdHlwZS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBpc1xuICAgKiBAcGFyYW0geyp9IG9iaiAtIEEgdGhpbmcgd2Ugd2FudCB0byBjaGVjayB0aGUgdHlwZSBvZlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEEgc3RyaW5nIHRvIGNvbXBhcmUgdGhlIHR5cGVvZiBhZ2FpbnN0XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpcyhvYmosIHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gdHlwZTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIFJ1biB0aHJvdWdoIGFsbCB0ZXN0cyBhbmQgZGV0ZWN0IHRoZWlyIHN1cHBvcnQgaW4gdGhlIGN1cnJlbnQgVUEuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cblxuICBmdW5jdGlvbiB0ZXN0UnVubmVyKCkge1xuICAgIHZhciBmZWF0dXJlTmFtZXM7XG4gICAgdmFyIGZlYXR1cmU7XG4gICAgdmFyIGFsaWFzSWR4O1xuICAgIHZhciByZXN1bHQ7XG4gICAgdmFyIG5hbWVJZHg7XG4gICAgdmFyIGZlYXR1cmVOYW1lO1xuICAgIHZhciBmZWF0dXJlTmFtZVNwbGl0O1xuXG4gICAgZm9yICh2YXIgZmVhdHVyZUlkeCBpbiB0ZXN0cykge1xuICAgICAgaWYgKHRlc3RzLmhhc093blByb3BlcnR5KGZlYXR1cmVJZHgpKSB7XG4gICAgICAgIGZlYXR1cmVOYW1lcyA9IFtdO1xuICAgICAgICBmZWF0dXJlID0gdGVzdHNbZmVhdHVyZUlkeF07XG4gICAgICAgIC8vIHJ1biB0aGUgdGVzdCwgdGhyb3cgdGhlIHJldHVybiB2YWx1ZSBpbnRvIHRoZSBNb2Rlcm5penIsXG4gICAgICAgIC8vIHRoZW4gYmFzZWQgb24gdGhhdCBib29sZWFuLCBkZWZpbmUgYW4gYXBwcm9wcmlhdGUgY2xhc3NOYW1lXG4gICAgICAgIC8vIGFuZCBwdXNoIGl0IGludG8gYW4gYXJyYXkgb2YgY2xhc3NlcyB3ZSdsbCBqb2luIGxhdGVyLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBuYW1lLCBpdCdzIGFuICdhc3luYycgdGVzdCB0aGF0IGlzIHJ1bixcbiAgICAgICAgLy8gYnV0IG5vdCBkaXJlY3RseSBhZGRlZCB0byB0aGUgb2JqZWN0LiBUaGF0IHNob3VsZFxuICAgICAgICAvLyBiZSBkb25lIHdpdGggYSBwb3N0LXJ1biBhZGRUZXN0IGNhbGwuXG4gICAgICAgIGlmIChmZWF0dXJlLm5hbWUpIHtcbiAgICAgICAgICBmZWF0dXJlTmFtZXMucHVzaChmZWF0dXJlLm5hbWUudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgICAgICBpZiAoZmVhdHVyZS5vcHRpb25zICYmIGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzICYmIGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gQWRkIGFsbCB0aGUgYWxpYXNlcyBpbnRvIHRoZSBuYW1lcyBsaXN0XG4gICAgICAgICAgICBmb3IgKGFsaWFzSWR4ID0gMDsgYWxpYXNJZHggPCBmZWF0dXJlLm9wdGlvbnMuYWxpYXNlcy5sZW5ndGg7IGFsaWFzSWR4KyspIHtcbiAgICAgICAgICAgICAgZmVhdHVyZU5hbWVzLnB1c2goZmVhdHVyZS5vcHRpb25zLmFsaWFzZXNbYWxpYXNJZHhdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgdGVzdCwgb3IgdXNlIHRoZSByYXcgdmFsdWUgaWYgaXQncyBub3QgYSBmdW5jdGlvblxuICAgICAgICByZXN1bHQgPSBpcyhmZWF0dXJlLmZuLCAnZnVuY3Rpb24nKSA/IGZlYXR1cmUuZm4oKSA6IGZlYXR1cmUuZm47XG5cblxuICAgICAgICAvLyBTZXQgZWFjaCBvZiB0aGUgbmFtZXMgb24gdGhlIE1vZGVybml6ciBvYmplY3RcbiAgICAgICAgZm9yIChuYW1lSWR4ID0gMDsgbmFtZUlkeCA8IGZlYXR1cmVOYW1lcy5sZW5ndGg7IG5hbWVJZHgrKykge1xuICAgICAgICAgIGZlYXR1cmVOYW1lID0gZmVhdHVyZU5hbWVzW25hbWVJZHhdO1xuICAgICAgICAgIC8vIFN1cHBvcnQgZG90IHByb3BlcnRpZXMgYXMgc3ViIHRlc3RzLiBXZSBkb24ndCBkbyBjaGVja2luZyB0byBtYWtlIHN1cmVcbiAgICAgICAgICAvLyB0aGF0IHRoZSBpbXBsaWVkIHBhcmVudCB0ZXN0cyBoYXZlIGJlZW4gYWRkZWQuIFlvdSBtdXN0IGNhbGwgdGhlbSBpblxuICAgICAgICAgIC8vIG9yZGVyIChlaXRoZXIgaW4gdGhlIHRlc3QsIG9yIG1ha2UgdGhlIHBhcmVudCB0ZXN0IGEgZGVwZW5kZW5jeSkuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBDYXAgaXQgdG8gVFdPIHRvIG1ha2UgdGhlIGxvZ2ljIHNpbXBsZSBhbmQgYmVjYXVzZSB3aG8gbmVlZHMgdGhhdCBraW5kIG9mIHN1YnRlc3RpbmdcbiAgICAgICAgICAvLyBoYXNodGFnIGZhbW91cyBsYXN0IHdvcmRzXG4gICAgICAgICAgZmVhdHVyZU5hbWVTcGxpdCA9IGZlYXR1cmVOYW1lLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgICBpZiAoZmVhdHVyZU5hbWVTcGxpdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IHJlc3VsdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY2FzdCB0byBhIEJvb2xlYW4sIGlmIG5vdCBvbmUgYWxyZWFkeVxuICAgICAgICAgICAgLyoganNoaW50IC1XMDUzICovXG4gICAgICAgICAgICBpZiAoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dICYmICEoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dIGluc3RhbmNlb2YgQm9vbGVhbikpIHtcbiAgICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gbmV3IEJvb2xlYW4oTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dW2ZlYXR1cmVOYW1lU3BsaXRbMV1dID0gcmVzdWx0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsYXNzZXMucHVzaCgocmVzdWx0ID8gJycgOiAnbm8tJykgKyBmZWF0dXJlTmFtZVNwbGl0LmpvaW4oJy0nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgO1xuXG4gIC8qKlxuICAgKiBkb2NFbGVtZW50IGlzIGEgY29udmVuaWVuY2Ugd3JhcHBlciB0byBncmFiIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGRvY3VtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gVGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgZG9jdW1lbnRcbiAgICovXG5cbiAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIFxuLyohXG57XG4gIFwibmFtZVwiOiBcImNsYXNzTGlzdFwiLFxuICBcImNhbml1c2VcIjogXCJjbGFzc2xpc3RcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNsYXNzbGlzdFwiLFxuICBcInRhZ3NcIjogW1wiZG9tXCJdLFxuICBcImJ1aWxkZXJBbGlhc2VzXCI6IFtcImRhdGF2aWV3X2FwaVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIk1ETiBEb2NzXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL2VsZW1lbnQuY2xhc3NMaXN0XCJcbiAgfV1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjbGFzc2xpc3QnLCAnY2xhc3NMaXN0JyBpbiBkb2NFbGVtZW50KTtcblxuXG4gIC8qKlxuICAgKiBBIGNvbnZlbmllbmNlIGhlbHBlciB0byBjaGVjayBpZiB0aGUgZG9jdW1lbnQgd2UgYXJlIHJ1bm5pbmcgaW4gaXMgYW4gU1ZHIGRvY3VtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgdmFyIGlzU1ZHID0gZG9jRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3ZnJztcbiAgXG5cbiAgLyoqXG4gICAqIHNldENsYXNzZXMgdGFrZXMgYW4gYXJyYXkgb2YgY2xhc3MgbmFtZXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgcm9vdCBlbGVtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gc2V0Q2xhc3Nlc1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBjbGFzc2VzIC0gQXJyYXkgb2YgY2xhc3MgbmFtZXNcbiAgICovXG5cbiAgLy8gUGFzcyBpbiBhbiBhbmQgYXJyYXkgb2YgY2xhc3MgbmFtZXMsIGUuZy46XG4gIC8vICBbJ25vLXdlYnAnLCAnYm9yZGVycmFkaXVzJywgLi4uXVxuICBmdW5jdGlvbiBzZXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gZG9jRWxlbWVudC5jbGFzc05hbWU7XG4gICAgdmFyIGNsYXNzUHJlZml4ID0gTW9kZXJuaXpyLl9jb25maWcuY2xhc3NQcmVmaXggfHwgJyc7XG5cbiAgICBpZiAoaXNTVkcpIHtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5iYXNlVmFsO1xuICAgIH1cblxuICAgIC8vIENoYW5nZSBgbm8tanNgIHRvIGBqc2AgKGluZGVwZW5kZW50bHkgb2YgdGhlIGBlbmFibGVDbGFzc2VzYCBvcHRpb24pXG4gICAgLy8gSGFuZGxlIGNsYXNzUHJlZml4IG9uIHRoaXMgdG9vXG4gICAgaWYgKE1vZGVybml6ci5fY29uZmlnLmVuYWJsZUpTQ2xhc3MpIHtcbiAgICAgIHZhciByZUpTID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGNsYXNzUHJlZml4ICsgJ25vLWpzKFxcXFxzfCQpJyk7XG4gICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUucmVwbGFjZShyZUpTLCAnJDEnICsgY2xhc3NQcmVmaXggKyAnanMkMicpO1xuICAgIH1cblxuICAgIGlmIChNb2Rlcm5penIuX2NvbmZpZy5lbmFibGVDbGFzc2VzKSB7XG4gICAgICAvLyBBZGQgdGhlIG5ldyBjbGFzc2VzXG4gICAgICBjbGFzc05hbWUgKz0gJyAnICsgY2xhc3NQcmVmaXggKyBjbGFzc2VzLmpvaW4oJyAnICsgY2xhc3NQcmVmaXgpO1xuICAgICAgaXNTVkcgPyBkb2NFbGVtZW50LmNsYXNzTmFtZS5iYXNlVmFsID0gY2xhc3NOYW1lIDogZG9jRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgfVxuXG4gIH1cblxuICA7XG5cbi8qKlxuICAqIEBvcHRpb25OYW1lIGh0bWw1cHJpbnRzaGl2XG4gICogQG9wdGlvblByb3AgaHRtbDVwcmludHNoaXZcbiAgKi9cblxuICAvLyBUYWtlIHRoZSBodG1sNSB2YXJpYWJsZSBvdXQgb2YgdGhlIGh0bWw1c2hpdiBzY29wZSBzbyB3ZSBjYW4gcmV0dXJuIGl0LlxuICB2YXIgaHRtbDU7XG4gIGlmICghaXNTVkcpIHtcblxuICAgIC8qKlxuICAgICAqIEBwcmVzZXJ2ZSBIVE1MNSBTaGl2IDMuNy4zIHwgQGFmYXJrYXMgQGpkYWx0b24gQGpvbl9uZWFsIEByZW0gfCBNSVQvR1BMMiBMaWNlbnNlZFxuICAgICAqL1xuICAgIDsoZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCkge1xuICAgICAgLypqc2hpbnQgZXZpbDp0cnVlICovXG4gICAgICAvKiogdmVyc2lvbiAqL1xuICAgICAgdmFyIHZlcnNpb24gPSAnMy43LjMnO1xuXG4gICAgICAvKiogUHJlc2V0IG9wdGlvbnMgKi9cbiAgICAgIHZhciBvcHRpb25zID0gd2luZG93Lmh0bWw1IHx8IHt9O1xuXG4gICAgICAvKiogVXNlZCB0byBza2lwIHByb2JsZW0gZWxlbWVudHMgKi9cbiAgICAgIHZhciByZVNraXAgPSAvXjx8Xig/OmJ1dHRvbnxtYXB8c2VsZWN0fHRleHRhcmVhfG9iamVjdHxpZnJhbWV8b3B0aW9ufG9wdGdyb3VwKSQvaTtcblxuICAgICAgLyoqIE5vdCBhbGwgZWxlbWVudHMgY2FuIGJlIGNsb25lZCBpbiBJRSAqKi9cbiAgICAgIHZhciBzYXZlQ2xvbmVzID0gL14oPzphfGJ8Y29kZXxkaXZ8ZmllbGRzZXR8aDF8aDJ8aDN8aDR8aDV8aDZ8aXxsYWJlbHxsaXxvbHxwfHF8c3BhbnxzdHJvbmd8c3R5bGV8dGFibGV8dGJvZHl8dGR8dGh8dHJ8dWwpJC9pO1xuXG4gICAgICAvKiogRGV0ZWN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgZGVmYXVsdCBodG1sNSBzdHlsZXMgKi9cbiAgICAgIHZhciBzdXBwb3J0c0h0bWw1U3R5bGVzO1xuXG4gICAgICAvKiogTmFtZSBvZiB0aGUgZXhwYW5kbywgdG8gd29yayB3aXRoIG11bHRpcGxlIGRvY3VtZW50cyBvciB0byByZS1zaGl2IG9uZSBkb2N1bWVudCAqL1xuICAgICAgdmFyIGV4cGFuZG8gPSAnX2h0bWw1c2hpdic7XG5cbiAgICAgIC8qKiBUaGUgaWQgZm9yIHRoZSB0aGUgZG9jdW1lbnRzIGV4cGFuZG8gKi9cbiAgICAgIHZhciBleHBhbklEID0gMDtcblxuICAgICAgLyoqIENhY2hlZCBkYXRhIGZvciBlYWNoIGRvY3VtZW50ICovXG4gICAgICB2YXIgZXhwYW5kb0RhdGEgPSB7fTtcblxuICAgICAgLyoqIERldGVjdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIHVua25vd24gZWxlbWVudHMgKi9cbiAgICAgIHZhciBzdXBwb3J0c1Vua25vd25FbGVtZW50cztcblxuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgIGEuaW5uZXJIVE1MID0gJzx4eXo+PC94eXo+JztcbiAgICAgICAgICAvL2lmIHRoZSBoaWRkZW4gcHJvcGVydHkgaXMgaW1wbGVtZW50ZWQgd2UgY2FuIGFzc3VtZSwgdGhhdCB0aGUgYnJvd3NlciBzdXBwb3J0cyBiYXNpYyBIVE1MNSBTdHlsZXNcbiAgICAgICAgICBzdXBwb3J0c0h0bWw1U3R5bGVzID0gKCdoaWRkZW4nIGluIGEpO1xuXG4gICAgICAgICAgc3VwcG9ydHNVbmtub3duRWxlbWVudHMgPSBhLmNoaWxkTm9kZXMubGVuZ3RoID09IDEgfHwgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gYXNzaWduIGEgZmFsc2UgcG9zaXRpdmUgaWYgdW5hYmxlIHRvIHNoaXZcbiAgICAgICAgICAgIChkb2N1bWVudC5jcmVhdGVFbGVtZW50KSgnYScpO1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICB0eXBlb2YgZnJhZy5jbG9uZU5vZGUgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgZnJhZy5jcmVhdGVEb2N1bWVudEZyYWdtZW50ID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY3JlYXRlRWxlbWVudCA9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KCkpO1xuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAvLyBhc3NpZ24gYSBmYWxzZSBwb3NpdGl2ZSBpZiBkZXRlY3Rpb24gZmFpbHMgPT4gdW5hYmxlIHRvIHNoaXZcbiAgICAgICAgICBzdXBwb3J0c0h0bWw1U3R5bGVzID0gdHJ1ZTtcbiAgICAgICAgICBzdXBwb3J0c1Vua25vd25FbGVtZW50cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgfSgpKTtcblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIHN0eWxlIHNoZWV0IHdpdGggdGhlIGdpdmVuIENTUyB0ZXh0IGFuZCBhZGRzIGl0IHRvIHRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjc3NUZXh0IFRoZSBDU1MgdGV4dC5cbiAgICAgICAqIEByZXR1cm5zIHtTdHlsZVNoZWV0fSBUaGUgc3R5bGUgZWxlbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYWRkU3R5bGVTaGVldChvd25lckRvY3VtZW50LCBjc3NUZXh0KSB7XG4gICAgICAgIHZhciBwID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyksXG4gICAgICAgICAgcGFyZW50ID0gb3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdIHx8IG93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgIHAuaW5uZXJIVE1MID0gJ3g8c3R5bGU+JyArIGNzc1RleHQgKyAnPC9zdHlsZT4nO1xuICAgICAgICByZXR1cm4gcGFyZW50Lmluc2VydEJlZm9yZShwLmxhc3RDaGlsZCwgcGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIGBodG1sNS5lbGVtZW50c2AgYXMgYW4gYXJyYXkuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBvZiBzaGl2ZWQgZWxlbWVudCBub2RlIG5hbWVzLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gaHRtbDUuZWxlbWVudHM7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZWxlbWVudHMgPT0gJ3N0cmluZycgPyBlbGVtZW50cy5zcGxpdCgnICcpIDogZWxlbWVudHM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRXh0ZW5kcyB0aGUgYnVpbHQtaW4gbGlzdCBvZiBodG1sNSBlbGVtZW50c1xuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gbmV3RWxlbWVudHMgd2hpdGVzcGFjZSBzZXBhcmF0ZWQgbGlzdCBvciBhcnJheSBvZiBuZXcgZWxlbWVudCBuYW1lcyB0byBzaGl2XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBjb250ZXh0IGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBhZGRFbGVtZW50cyhuZXdFbGVtZW50cywgb3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBodG1sNS5lbGVtZW50cztcbiAgICAgICAgaWYodHlwZW9mIGVsZW1lbnRzICE9ICdzdHJpbmcnKXtcbiAgICAgICAgICBlbGVtZW50cyA9IGVsZW1lbnRzLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgbmV3RWxlbWVudHMgIT0gJ3N0cmluZycpe1xuICAgICAgICAgIG5ld0VsZW1lbnRzID0gbmV3RWxlbWVudHMuam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIGh0bWw1LmVsZW1lbnRzID0gZWxlbWVudHMgKycgJysgbmV3RWxlbWVudHM7XG4gICAgICAgIHNoaXZEb2N1bWVudChvd25lckRvY3VtZW50KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBkYXRhIGFzc29jaWF0ZWQgdG8gdGhlIGdpdmVuIGRvY3VtZW50XG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3Qgb2YgZGF0YS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgZGF0YSA9IGV4cGFuZG9EYXRhW293bmVyRG9jdW1lbnRbZXhwYW5kb11dO1xuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0ge307XG4gICAgICAgICAgZXhwYW5JRCsrO1xuICAgICAgICAgIG93bmVyRG9jdW1lbnRbZXhwYW5kb10gPSBleHBhbklEO1xuICAgICAgICAgIGV4cGFuZG9EYXRhW2V4cGFuSURdID0gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIGEgc2hpdmVkIGVsZW1lbnQgZm9yIHRoZSBnaXZlbiBub2RlTmFtZSBhbmQgZG9jdW1lbnRcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lIG5hbWUgb2YgdGhlIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGNvbnRleHQgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc2hpdmVkIGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIG93bmVyRG9jdW1lbnQsIGRhdGEpe1xuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICBvd25lckRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3VwcG9ydHNVbmtub3duRWxlbWVudHMpe1xuICAgICAgICAgIHJldHVybiBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9kZTtcblxuICAgICAgICBpZiAoZGF0YS5jYWNoZVtub2RlTmFtZV0pIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jYWNoZVtub2RlTmFtZV0uY2xvbmVOb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2F2ZUNsb25lcy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgICAgIG5vZGUgPSAoZGF0YS5jYWNoZVtub2RlTmFtZV0gPSBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpKS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIGFkZGluZyBzb21lIGVsZW1lbnRzIHRvIGZyYWdtZW50cyBpbiBJRSA8IDkgYmVjYXVzZVxuICAgICAgICAvLyAqIEF0dHJpYnV0ZXMgbGlrZSBgbmFtZWAgb3IgYHR5cGVgIGNhbm5vdCBiZSBzZXQvY2hhbmdlZCBvbmNlIGFuIGVsZW1lbnRcbiAgICAgICAgLy8gICBpcyBpbnNlcnRlZCBpbnRvIGEgZG9jdW1lbnQvZnJhZ21lbnRcbiAgICAgICAgLy8gKiBMaW5rIGVsZW1lbnRzIHdpdGggYHNyY2AgYXR0cmlidXRlcyB0aGF0IGFyZSBpbmFjY2Vzc2libGUsIGFzIHdpdGhcbiAgICAgICAgLy8gICBhIDQwMyByZXNwb25zZSwgd2lsbCBjYXVzZSB0aGUgdGFiL3dpbmRvdyB0byBjcmFzaFxuICAgICAgICAvLyAqIFNjcmlwdCBlbGVtZW50cyBhcHBlbmRlZCB0byBmcmFnbWVudHMgd2lsbCBleGVjdXRlIHdoZW4gdGhlaXIgYHNyY2BcbiAgICAgICAgLy8gICBvciBgdGV4dGAgcHJvcGVydHkgaXMgc2V0XG4gICAgICAgIHJldHVybiBub2RlLmNhbkhhdmVDaGlsZHJlbiAmJiAhcmVTa2lwLnRlc3Qobm9kZU5hbWUpICYmICFub2RlLnRhZ1VybiA/IGRhdGEuZnJhZy5hcHBlbmRDaGlsZChub2RlKSA6IG5vZGU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBhIHNoaXZlZCBEb2N1bWVudEZyYWdtZW50IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBzaGl2ZWQgRG9jdW1lbnRGcmFnbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRGcmFnbWVudChvd25lckRvY3VtZW50LCBkYXRhKXtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmKHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKXtcbiAgICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG4gICAgICAgIHZhciBjbG9uZSA9IGRhdGEuZnJhZy5jbG9uZU5vZGUoKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICBlbGVtcyA9IGdldEVsZW1lbnRzKCksXG4gICAgICAgICAgbCA9IGVsZW1zLmxlbmd0aDtcbiAgICAgICAgZm9yKDtpPGw7aSsrKXtcbiAgICAgICAgICBjbG9uZS5jcmVhdGVFbGVtZW50KGVsZW1zW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgIG1ldGhvZHMgb2YgdGhlIGRvY3VtZW50LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZNZXRob2RzKG93bmVyRG9jdW1lbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLmNhY2hlKSB7XG4gICAgICAgICAgZGF0YS5jYWNoZSA9IHt9O1xuICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbSA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudDtcbiAgICAgICAgICBkYXRhLmNyZWF0ZUZyYWcgPSBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ7XG4gICAgICAgICAgZGF0YS5mcmFnID0gZGF0YS5jcmVhdGVGcmFnKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGVOYW1lKSB7XG4gICAgICAgICAgLy9hYm9ydCBzaGl2XG4gICAgICAgICAgaWYgKCFodG1sNS5zaGl2TWV0aG9kcykge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG5vZGVOYW1lLCBvd25lckRvY3VtZW50LCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBGdW5jdGlvbignaCxmJywgJ3JldHVybiBmdW5jdGlvbigpeycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFyIG49Zi5jbG9uZU5vZGUoKSxjPW4uY3JlYXRlRWxlbWVudDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2guc2hpdk1ldGhvZHMmJignICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yb2xsIHRoZSBgY3JlYXRlRWxlbWVudGAgY2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RWxlbWVudHMoKS5qb2luKCkucmVwbGFjZSgvW1xcd1xcLTpdKy9nLCBmdW5jdGlvbihub2RlTmFtZSkge1xuICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgZGF0YS5mcmFnLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICAgIHJldHVybiAnYyhcIicgKyBub2RlTmFtZSArICdcIiknO1xuICAgICAgICB9KSArXG4gICAgICAgICAgJyk7cmV0dXJuIG59J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkoaHRtbDUsIGRhdGEuZnJhZyk7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gc2hpdi5cbiAgICAgICAqIEByZXR1cm5zIHtEb2N1bWVudH0gVGhlIHNoaXZlZCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdkRvY3VtZW50KG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG5cbiAgICAgICAgaWYgKGh0bWw1LnNoaXZDU1MgJiYgIXN1cHBvcnRzSHRtbDVTdHlsZXMgJiYgIWRhdGEuaGFzQ1NTKSB7XG4gICAgICAgICAgZGF0YS5oYXNDU1MgPSAhIWFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZWN0cyBibG9jayBkaXNwbGF5IG5vdCBkZWZpbmVkIGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcnRpY2xlLGFzaWRlLGRpYWxvZyxmaWdjYXB0aW9uLGZpZ3VyZSxmb290ZXIsaGVhZGVyLGhncm91cCxtYWluLG5hdixzZWN0aW9ue2Rpc3BsYXk6YmxvY2t9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkcyBzdHlsaW5nIG5vdCBwcmVzZW50IGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGVzIG5vbi1yZW5kZXJlZCBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZW1wbGF0ZXtkaXNwbGF5Om5vbmV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKSB7XG4gICAgICAgICAgc2hpdk1ldGhvZHMob3duZXJEb2N1bWVudCwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBgaHRtbDVgIG9iamVjdCBpcyBleHBvc2VkIHNvIHRoYXQgbW9yZSBlbGVtZW50cyBjYW4gYmUgc2hpdmVkIGFuZFxuICAgICAgICogZXhpc3Rpbmcgc2hpdmluZyBjYW4gYmUgZGV0ZWN0ZWQgb24gaWZyYW1lcy5cbiAgICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqXG4gICAgICAgKiAvLyBvcHRpb25zIGNhbiBiZSBjaGFuZ2VkIGJlZm9yZSB0aGUgc2NyaXB0IGlzIGluY2x1ZGVkXG4gICAgICAgKiBodG1sNSA9IHsgJ2VsZW1lbnRzJzogJ21hcmsgc2VjdGlvbicsICdzaGl2Q1NTJzogZmFsc2UsICdzaGl2TWV0aG9kcyc6IGZhbHNlIH07XG4gICAgICAgKi9cbiAgICAgIHZhciBodG1sNSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBub2RlIG5hbWVzIG9mIHRoZSBlbGVtZW50cyB0byBzaGl2LlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQXJyYXl8U3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICAnZWxlbWVudHMnOiBvcHRpb25zLmVsZW1lbnRzIHx8ICdhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gYmRpIGNhbnZhcyBkYXRhIGRhdGFsaXN0IGRldGFpbHMgZGlhbG9nIGZpZ2NhcHRpb24gZmlndXJlIGZvb3RlciBoZWFkZXIgaGdyb3VwIG1haW4gbWFyayBtZXRlciBuYXYgb3V0cHV0IHBpY3R1cmUgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRlbXBsYXRlIHRpbWUgdmlkZW8nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjdXJyZW50IHZlcnNpb24gb2YgaHRtbDVzaGl2XG4gICAgICAgICAqL1xuICAgICAgICAndmVyc2lvbic6IHZlcnNpb24sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBIVE1MNSBzdHlsZSBzaGVldCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICAnc2hpdkNTUyc6IChvcHRpb25zLnNoaXZDU1MgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXMgZXF1YWwgdG8gdHJ1ZSBpZiBhIGJyb3dzZXIgc3VwcG9ydHMgY3JlYXRpbmcgdW5rbm93bi9IVE1MNSBlbGVtZW50c1xuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3N1cHBvcnRzVW5rbm93bkVsZW1lbnRzJzogc3VwcG9ydHNVbmtub3duRWxlbWVudHMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBkb2N1bWVudCdzIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgXG4gICAgICAgICAqIG1ldGhvZHMgc2hvdWxkIGJlIG92ZXJ3cml0dGVuLlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3NoaXZNZXRob2RzJzogKG9wdGlvbnMuc2hpdk1ldGhvZHMgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzdHJpbmcgdG8gZGVzY3JpYmUgdGhlIHR5cGUgb2YgYGh0bWw1YCBvYmplY3QgKFwiZGVmYXVsdFwiIG9yIFwiZGVmYXVsdCBwcmludFwiKS5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgJ3R5cGUnOiAnZGVmYXVsdCcsXG5cbiAgICAgICAgLy8gc2hpdnMgdGhlIGRvY3VtZW50IGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGBodG1sNWAgb2JqZWN0IG9wdGlvbnNcbiAgICAgICAgJ3NoaXZEb2N1bWVudCc6IHNoaXZEb2N1bWVudCxcblxuICAgICAgICAvL2NyZWF0ZXMgYSBzaGl2ZWQgZWxlbWVudFxuICAgICAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50LFxuXG4gICAgICAgIC8vY3JlYXRlcyBhIHNoaXZlZCBkb2N1bWVudEZyYWdtZW50XG4gICAgICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6IGNyZWF0ZURvY3VtZW50RnJhZ21lbnQsXG5cbiAgICAgICAgLy9leHRlbmRzIGxpc3Qgb2YgZWxlbWVudHNcbiAgICAgICAgYWRkRWxlbWVudHM6IGFkZEVsZW1lbnRzXG4gICAgICB9O1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLy8gZXhwb3NlIGh0bWw1XG4gICAgICB3aW5kb3cuaHRtbDUgPSBodG1sNTtcblxuICAgICAgLy8gc2hpdiB0aGUgZG9jdW1lbnRcbiAgICAgIHNoaXZEb2N1bWVudChkb2N1bWVudCk7XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQcmludCBTaGl2IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKiogVXNlZCB0byBmaWx0ZXIgbWVkaWEgdHlwZXMgKi9cbiAgICAgIHZhciByZU1lZGlhID0gL14kfFxcYig/OmFsbHxwcmludClcXGIvO1xuXG4gICAgICAvKiogVXNlZCB0byBuYW1lc3BhY2UgcHJpbnRhYmxlIGVsZW1lbnRzICovXG4gICAgICB2YXIgc2hpdk5hbWVzcGFjZSA9ICdodG1sNXNoaXYnO1xuXG4gICAgICAvKiogRGV0ZWN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgc2hpdmFibGUgc3R5bGUgc2hlZXRzICovXG4gICAgICB2YXIgc3VwcG9ydHNTaGl2YWJsZVNoZWV0cyA9ICFzdXBwb3J0c1Vua25vd25FbGVtZW50cyAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGFzc2lnbiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHVuYWJsZSB0byBzaGl2XG4gICAgICAgIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmV0dXJuICEoXG4gICAgICAgICAgdHlwZW9mIGRvY3VtZW50Lm5hbWVzcGFjZXMgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2N1bWVudC5wYXJlbnRXaW5kb3cgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2NFbC5hcHBseUVsZW1lbnQgPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBkb2NFbC5yZW1vdmVOb2RlID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygd2luZG93LmF0dGFjaEV2ZW50ID09ICd1bmRlZmluZWQnXG4gICAgICAgICk7XG4gICAgICB9KCkpO1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbGwgSFRNTDUgZWxlbWVudHMgaW4gdGhlIGdpdmVuIGRvY3VtZW50IHdpdGggcHJpbnRhYmxlIGVsZW1lbnRzLlxuICAgICAgICogKGVnLiB0aGUgXCJoZWFkZXJcIiBlbGVtZW50IGlzIHdyYXBwZWQgd2l0aCB0aGUgXCJodG1sNXNoaXY6aGVhZGVyXCIgZWxlbWVudClcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgd3JhcHBlcnMgYWRkZWQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGFkZFdyYXBwZXJzKG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIG5vZGUsXG4gICAgICAgIG5vZGVzID0gb3duZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpLFxuICAgICAgICAgIGluZGV4ID0gbm9kZXMubGVuZ3RoLFxuICAgICAgICAgIHJlRWxlbWVudHMgPSBSZWdFeHAoJ14oPzonICsgZ2V0RWxlbWVudHMoKS5qb2luKCd8JykgKyAnKSQnLCAnaScpLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGVzW2luZGV4XTtcbiAgICAgICAgICBpZiAocmVFbGVtZW50cy50ZXN0KG5vZGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChub2RlLmFwcGx5RWxlbWVudChjcmVhdGVXcmFwcGVyKG5vZGUpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIHByaW50YWJsZSB3cmFwcGVyIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7RWxlbWVudH0gVGhlIHdyYXBwZXIuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZWxlbWVudCkge1xuICAgICAgICB2YXIgbm9kZSxcbiAgICAgICAgbm9kZXMgPSBlbGVtZW50LmF0dHJpYnV0ZXMsXG4gICAgICAgICAgaW5kZXggPSBub2Rlcy5sZW5ndGgsXG4gICAgICAgICAgd3JhcHBlciA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHNoaXZOYW1lc3BhY2UgKyAnOicgKyBlbGVtZW50Lm5vZGVOYW1lKTtcblxuICAgICAgICAvLyBjb3B5IGVsZW1lbnQgYXR0cmlidXRlcyB0byB0aGUgd3JhcHBlclxuICAgICAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgICAgIG5vZGUgPSBub2Rlc1tpbmRleF07XG4gICAgICAgICAgbm9kZS5zcGVjaWZpZWQgJiYgd3JhcHBlci5zZXRBdHRyaWJ1dGUobm9kZS5ub2RlTmFtZSwgbm9kZS5ub2RlVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvcHkgZWxlbWVudCBzdHlsZXMgdG8gdGhlIHdyYXBwZXJcbiAgICAgICAgd3JhcHBlci5zdHlsZS5jc3NUZXh0ID0gZWxlbWVudC5zdHlsZS5jc3NUZXh0O1xuICAgICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgZ2l2ZW4gQ1NTIHRleHQuXG4gICAgICAgKiAoZWcuIGhlYWRlcnt9IGJlY29tZXMgaHRtbDVzaGl2XFw6aGVhZGVye30pXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNzc1RleHQgVGhlIENTUyB0ZXh0IHRvIHNoaXYuXG4gICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgc2hpdmVkIENTUyB0ZXh0LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2Q3NzVGV4dChjc3NUZXh0KSB7XG4gICAgICAgIHZhciBwYWlyLFxuICAgICAgICBwYXJ0cyA9IGNzc1RleHQuc3BsaXQoJ3snKSxcbiAgICAgICAgICBpbmRleCA9IHBhcnRzLmxlbmd0aCxcbiAgICAgICAgICByZUVsZW1lbnRzID0gUmVnRXhwKCcoXnxbXFxcXHMsPit+XSkoJyArIGdldEVsZW1lbnRzKCkuam9pbignfCcpICsgJykoPz1bW1xcXFxzLD4rfiMuOl18JCknLCAnZ2knKSxcbiAgICAgICAgICByZXBsYWNlbWVudCA9ICckMScgKyBzaGl2TmFtZXNwYWNlICsgJ1xcXFw6JDInO1xuXG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgcGFpciA9IHBhcnRzW2luZGV4XSA9IHBhcnRzW2luZGV4XS5zcGxpdCgnfScpO1xuICAgICAgICAgIHBhaXJbcGFpci5sZW5ndGggLSAxXSA9IHBhaXJbcGFpci5sZW5ndGggLSAxXS5yZXBsYWNlKHJlRWxlbWVudHMsIHJlcGxhY2VtZW50KTtcbiAgICAgICAgICBwYXJ0c1tpbmRleF0gPSBwYWlyLmpvaW4oJ30nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHMuam9pbigneycpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIHdyYXBwZXJzLCBsZWF2aW5nIHRoZSBvcmlnaW5hbCBlbGVtZW50cy5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW1zIHtBcnJheX0gd3JhcHBlcnMgQW4gYXJyYXkgb2YgcHJpbnRhYmxlIHdyYXBwZXJzLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZW1vdmVXcmFwcGVycyh3cmFwcGVycykge1xuICAgICAgICB2YXIgaW5kZXggPSB3cmFwcGVycy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgd3JhcHBlcnNbaW5kZXhdLnJlbW92ZU5vZGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBTaGl2cyB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHByaW50LlxuICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBvd25lckRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBzaGl2LlxuICAgICAgICogQHJldHVybnMge0RvY3VtZW50fSBUaGUgc2hpdmVkIGRvY3VtZW50LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBzaGl2UHJpbnQob3duZXJEb2N1bWVudCkge1xuICAgICAgICB2YXIgc2hpdmVkU2hlZXQsXG4gICAgICAgIHdyYXBwZXJzLFxuICAgICAgICBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCksXG4gICAgICAgICAgbmFtZXNwYWNlcyA9IG93bmVyRG9jdW1lbnQubmFtZXNwYWNlcyxcbiAgICAgICAgICBvd25lcldpbmRvdyA9IG93bmVyRG9jdW1lbnQucGFyZW50V2luZG93O1xuXG4gICAgICAgIGlmICghc3VwcG9ydHNTaGl2YWJsZVNoZWV0cyB8fCBvd25lckRvY3VtZW50LnByaW50U2hpdmVkKSB7XG4gICAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzW3NoaXZOYW1lc3BhY2VdID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbmFtZXNwYWNlcy5hZGQoc2hpdk5hbWVzcGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTaGVldCgpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5fcmVtb3ZlU2hlZXRUaW1lcik7XG4gICAgICAgICAgaWYgKHNoaXZlZFNoZWV0KSB7XG4gICAgICAgICAgICBzaGl2ZWRTaGVldC5yZW1vdmVOb2RlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGl2ZWRTaGVldD0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIG93bmVyV2luZG93LmF0dGFjaEV2ZW50KCdvbmJlZm9yZXByaW50JywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICByZW1vdmVTaGVldCgpO1xuXG4gICAgICAgICAgdmFyIGltcG9ydHMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIHNoZWV0LFxuICAgICAgICAgIGNvbGxlY3Rpb24gPSBvd25lckRvY3VtZW50LnN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgY3NzVGV4dCA9IFtdLFxuICAgICAgICAgICAgaW5kZXggPSBjb2xsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICAgIHNoZWV0cyA9IEFycmF5KGluZGV4KTtcblxuICAgICAgICAgIC8vIGNvbnZlcnQgc3R5bGVTaGVldHMgY29sbGVjdGlvbiB0byBhbiBhcnJheVxuICAgICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgICBzaGVldHNbaW5kZXhdID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbmNhdCBhbGwgc3R5bGUgc2hlZXQgQ1NTIHRleHRcbiAgICAgICAgICB3aGlsZSAoKHNoZWV0ID0gc2hlZXRzLnBvcCgpKSkge1xuICAgICAgICAgICAgLy8gSUUgZG9lcyBub3QgZW5mb3JjZSBhIHNhbWUgb3JpZ2luIHBvbGljeSBmb3IgZXh0ZXJuYWwgc3R5bGUgc2hlZXRzLi4uXG4gICAgICAgICAgICAvLyBidXQgaGFzIHRyb3VibGUgd2l0aCBzb21lIGR5bmFtaWNhbGx5IGNyZWF0ZWQgc3R5bGVzaGVldHNcbiAgICAgICAgICAgIGlmICghc2hlZXQuZGlzYWJsZWQgJiYgcmVNZWRpYS50ZXN0KHNoZWV0Lm1lZGlhKSkge1xuXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW1wb3J0cyA9IHNoZWV0LmltcG9ydHM7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gaW1wb3J0cy5sZW5ndGg7XG4gICAgICAgICAgICAgIH0gY2F0Y2goZXIpe1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBzaGVldHMucHVzaChpbXBvcnRzW2luZGV4XSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNzc1RleHQucHVzaChzaGVldC5jc3NUZXh0KTtcbiAgICAgICAgICAgICAgfSBjYXRjaChlcil7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHdyYXAgYWxsIEhUTUw1IGVsZW1lbnRzIHdpdGggcHJpbnRhYmxlIGVsZW1lbnRzIGFuZCBhZGQgdGhlIHNoaXZlZCBzdHlsZSBzaGVldFxuICAgICAgICAgIGNzc1RleHQgPSBzaGl2Q3NzVGV4dChjc3NUZXh0LnJldmVyc2UoKS5qb2luKCcnKSk7XG4gICAgICAgICAgd3JhcHBlcnMgPSBhZGRXcmFwcGVycyhvd25lckRvY3VtZW50KTtcbiAgICAgICAgICBzaGl2ZWRTaGVldCA9IGFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCwgY3NzVGV4dCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3duZXJXaW5kb3cuYXR0YWNoRXZlbnQoJ29uYWZ0ZXJwcmludCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHJlbW92ZSB3cmFwcGVycywgbGVhdmluZyB0aGUgb3JpZ2luYWwgZWxlbWVudHMsIGFuZCByZW1vdmUgdGhlIHNoaXZlZCBzdHlsZSBzaGVldFxuICAgICAgICAgIHJlbW92ZVdyYXBwZXJzKHdyYXBwZXJzKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5fcmVtb3ZlU2hlZXRUaW1lcik7XG4gICAgICAgICAgZGF0YS5fcmVtb3ZlU2hlZXRUaW1lciA9IHNldFRpbWVvdXQocmVtb3ZlU2hlZXQsIDUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG93bmVyRG9jdW1lbnQucHJpbnRTaGl2ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudDtcbiAgICAgIH1cblxuICAgICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgIC8vIGV4cG9zZSBBUElcbiAgICAgIGh0bWw1LnR5cGUgKz0gJyBwcmludCc7XG4gICAgICBodG1sNS5zaGl2UHJpbnQgPSBzaGl2UHJpbnQ7XG5cbiAgICAgIC8vIHNoaXYgZm9yIHByaW50XG4gICAgICBzaGl2UHJpbnQoZG9jdW1lbnQpO1xuXG4gICAgICBpZih0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKXtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBodG1sNTtcbiAgICAgIH1cblxuICAgIH0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGRvY3VtZW50KSk7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIElmIHRoZSBicm93c2VycyBmb2xsb3cgdGhlIHNwZWMsIHRoZW4gdGhleSB3b3VsZCBleHBvc2UgdmVuZG9yLXNwZWNpZmljIHN0eWxlIGFzOlxuICAgKiAgIGVsZW0uc3R5bGUuV2Via2l0Qm9yZGVyUmFkaXVzXG4gICAqIGluc3RlYWQgb2Ygc29tZXRoaW5nIGxpa2UgdGhlIGZvbGxvd2luZywgd2hpY2ggd291bGQgYmUgdGVjaG5pY2FsbHkgaW5jb3JyZWN0OlxuICAgKiAgIGVsZW0uc3R5bGUud2Via2l0Qm9yZGVyUmFkaXVzXG5cbiAgICogV2Via2l0IGdob3N0cyB0aGVpciBwcm9wZXJ0aWVzIGluIGxvd2VyY2FzZSBidXQgT3BlcmEgJiBNb3ogZG8gbm90LlxuICAgKiBNaWNyb3NvZnQgdXNlcyBhIGxvd2VyY2FzZSBgbXNgIGluc3RlYWQgb2YgdGhlIGNvcnJlY3QgYE1zYCBpbiBJRTgrXG4gICAqICAgZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDgvMDMvMTAvMjEuNDguMTAvXG5cbiAgICogTW9yZSBoZXJlOiBnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzL2lzc3VlLzIxXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmVuZG9yLXNwZWNpZmljIHN0eWxlIHByb3BlcnRpZXNcbiAgICovXG5cbiAgdmFyIG9tUHJlZml4ZXMgPSAnTW96IE8gbXMgV2Via2l0JztcbiAgXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgSmF2YVNjcmlwdCBET00gdmFsdWVzIHVzZWQgZm9yIHRlc3RzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl9kb21QcmVmaXhlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuX2RvbVByZWZpeGVzXG4gICAqIEBvcHRpb25Qcm9wIGRvbVByZWZpeGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyBbX3ByZWZpeGVzXSgjbW9kZXJuaXpyLV9wcmVmaXhlcyksIGJ1dCByYXRoZXJcbiAgICogdGhhbiBrZWJhYi1jYXNlIHByb3BlcnRpZXMsIGFsbCBwcm9wZXJ0aWVzIGFyZSB0aGVpciBDYXBpdGFsaXplZCB2YXJpYW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgPT09IFsgXCJNb3pcIiwgXCJPXCIsIFwibXNcIiwgXCJXZWJraXRcIiBdO1xuICAgKiBgYGBcbiAgICovXG5cbiAgdmFyIGRvbVByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyBvbVByZWZpeGVzLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKSA6IFtdKTtcbiAgTW9kZXJuaXpyUHJvdG8uX2RvbVByZWZpeGVzID0gZG9tUHJlZml4ZXM7XG4gIFxuXG4gIC8qKlxuICAgKiBjc3NUb0RPTSB0YWtlcyBhIGtlYmFiLWNhc2Ugc3RyaW5nIGFuZCBjb252ZXJ0cyBpdCB0byBjYW1lbENhc2VcbiAgICogZS5nLiBib3gtc2l6aW5nIC0+IGJveFNpemluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNzc1RvRE9NXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gU3RyaW5nIG5hbWUgb2Yga2ViYWItY2FzZSBwcm9wIHdlIHdhbnQgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY2FtZWxDYXNlIHZlcnNpb24gb2YgdGhlIHN1cHBsaWVkIG5hbWVcbiAgICovXG5cbiAgZnVuY3Rpb24gY3NzVG9ET00obmFtZSkge1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UoLyhbYS16XSktKFthLXpdKS9nLCBmdW5jdGlvbihzdHIsIG0xLCBtMikge1xuICAgICAgcmV0dXJuIG0xICsgbTIudG9VcHBlckNhc2UoKTtcbiAgICB9KS5yZXBsYWNlKC9eLS8sICcnKTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIGRvbVRvQ1NTIHRha2VzIGEgY2FtZWxDYXNlIHN0cmluZyBhbmQgY29udmVydHMgaXQgdG8ga2ViYWItY2FzZVxuICAgKiBlLmcuIGJveFNpemluZyAtPiBib3gtc2l6aW5nXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gZG9tVG9DU1NcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBTdHJpbmcgbmFtZSBvZiBjYW1lbENhc2UgcHJvcCB3ZSB3YW50IHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGtlYmFiLWNhc2UgdmVyc2lvbiBvZiB0aGUgc3VwcGxpZWQgbmFtZVxuICAgKi9cblxuICBmdW5jdGlvbiBkb21Ub0NTUyhuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbihzdHIsIG0xKSB7XG4gICAgICByZXR1cm4gJy0nICsgbTEudG9Mb3dlckNhc2UoKTtcbiAgICB9KS5yZXBsYWNlKC9ebXMtLywgJy1tcy0nKTtcbiAgfVxuICA7XG5cbiAgLyoqXG4gICAqIGNyZWF0ZUVsZW1lbnQgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBkb2N1bWVudC5jcmVhdGVFbGVtZW50LiBTaW5jZSB3ZVxuICAgKiB1c2UgY3JlYXRlRWxlbWVudCBhbGwgb3ZlciB0aGUgcGxhY2UsIHRoaXMgYWxsb3dzIGZvciAoc2xpZ2h0bHkpIHNtYWxsZXIgY29kZVxuICAgKiBhcyB3ZWxsIGFzIGFic3RyYWN0aW5nIGF3YXkgaXNzdWVzIHdpdGggY3JlYXRpbmcgZWxlbWVudHMgaW4gY29udGV4dHMgb3RoZXIgdGhhblxuICAgKiBIVE1MIGRvY3VtZW50cyAoZS5nLiBTVkcgZG9jdW1lbnRzKS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBjcmVhdGVFbGVtZW50XG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBBbiBIVE1MIG9yIFNWRyBlbGVtZW50XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIGlzIHRoZSBjYXNlIGluIElFNywgd2hlcmUgdGhlIHR5cGUgb2YgY3JlYXRlRWxlbWVudCBpcyBcIm9iamVjdFwiLlxuICAgICAgLy8gRm9yIHRoaXMgcmVhc29uLCB3ZSBjYW5ub3QgY2FsbCBhcHBseSgpIGFzIE9iamVjdCBpcyBub3QgYSBGdW5jdGlvbi5cbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIGlmIChpc1NWRykge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUy5jYWxsKGRvY3VtZW50LCAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBhcmd1bWVudHNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5hcHBseShkb2N1bWVudCwgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHByZWZpeGVkQ1NTVmFsdWUgaXMgYSB3YXkgdGVzdCBmb3IgcHJlZml4ZWQgY3NzIHByb3BlcnRpZXMgKGUuZy4gZGlzcGxheTogLXdlYmtpdC1mbGV4KVxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5wcmVmaXhlZENTU1ZhbHVlKClcbiAgICogQG9wdGlvblByb3AgcHJlZml4ZWRDU1NWYWx1ZVxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gcHJlZml4ZWRDU1NWYWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBTdHJpbmcgdmFsdWUgb2YgdGhlIG5vbiBwcmVmaXhlZCB2ZXJzaW9uIG9mIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2YWxpZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWVgIGlzIGEgd2F5IHRlc3QgZm9yIHByZWZpeGVkIGNzcyBwcm9wZXJ0aWVzIChlLmcuIGRpc3BsYXk6IC13ZWJraXQtZmxleClcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnByZWZpeGVkQ1NTVmFsdWUoJ2JhY2tncm91bmQnLCAnbGluZWFyLWdyYWRpZW50KGxlZnQsIHJlZCwgcmVkKScpXG4gICAqIGBgYFxuICAgKlxuICAgKi9cblxuICB2YXIgcHJlZml4ZWRDU1NWYWx1ZSA9IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgIHZhciBlbGVtID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuICAgIGlmIChwcm9wIGluIHN0eWxlKSB7XG4gICAgICB2YXIgaSA9IGRvbVByZWZpeGVzLmxlbmd0aDtcblxuICAgICAgc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgIHJlc3VsdCA9IHN0eWxlW3Byb3BdO1xuXG4gICAgICB3aGlsZSAoaS0tICYmICFyZXN1bHQpIHtcbiAgICAgICAgc3R5bGVbcHJvcF0gPSAnLScgKyBkb21QcmVmaXhlc1tpXSArICctJyArIHZhbHVlO1xuICAgICAgICByZXN1bHQgPSBzdHlsZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSAnJykge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBNb2Rlcm5penJQcm90by5wcmVmaXhlZENTU1ZhbHVlID0gcHJlZml4ZWRDU1NWYWx1ZTtcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ2FudmFzXCIsXG4gIFwicHJvcGVydHlcIjogXCJjYW52YXNcIixcbiAgXCJjYW5pdXNlXCI6IFwiY2FudmFzXCIsXG4gIFwidGFnc1wiOiBbXCJjYW52YXNcIiwgXCJncmFwaGljc1wiXSxcbiAgXCJwb2x5ZmlsbHNcIjogW1wiZmxhc2hjYW52YXNcIiwgXCJleGNhbnZhc1wiLCBcInNsY2FudmFzXCIsIFwiZnhjYW52YXNcIl1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHN1cHBvcnQgZm9yIHRoZSBgPGNhbnZhcz5gIGVsZW1lbnQgZm9yIDJEIGRyYXdpbmcuXG4qL1xuXG4gIC8vIE9uIHRoZSBTNjAgYW5kIEJCIFN0b3JtLCBnZXRDb250ZXh0IGV4aXN0cywgYnV0IGFsd2F5cyByZXR1cm5zIHVuZGVmaW5lZFxuICAvLyBzbyB3ZSBhY3R1YWxseSBoYXZlIHRvIGNhbGwgZ2V0Q29udGV4dCgpIHRvIHZlcmlmeVxuICAvLyBnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzL2lzc3VlLzk3L1xuICBNb2Rlcm5penIuYWRkVGVzdCgnY2FudmFzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW0gPSBjcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICByZXR1cm4gISEoZWxlbS5nZXRDb250ZXh0ICYmIGVsZW0uZ2V0Q29udGV4dCgnMmQnKSk7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIEdyYWRpZW50c1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtZ3JhZGllbnRzXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3NncmFkaWVudHNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJrbm93bkJ1Z3NcIjogW1wiRmFsc2UtcG9zaXRpdmVzIG9uIHdlYk9TIChodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvMjAyKVwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIldlYmtpdCBHcmFkaWVudCBTeW50YXhcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3dlYmtpdC5vcmcvYmxvZy8xNzUvaW50cm9kdWNpbmctY3NzLWdyYWRpZW50cy9cIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJMaW5lYXIgR3JhZGllbnQgU3ludGF4XCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2xpbmVhci1ncmFkaWVudFwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIlczQyBHcmFkaWVudCBTcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy1pbWFnZXMtMy8jZ3JhZGllbnRzXCJcbiAgfV1cbn1cbiEqL1xuXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc2dyYWRpZW50cycsIGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHN0cjEgPSAnYmFja2dyb3VuZC1pbWFnZTonO1xuICAgIHZhciBzdHIyID0gJ2dyYWRpZW50KGxpbmVhcixsZWZ0IHRvcCxyaWdodCBib3R0b20sZnJvbSgjOWY5KSx0byh3aGl0ZSkpOyc7XG4gICAgdmFyIGNzcyA9ICcnO1xuICAgIHZhciBhbmdsZTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwcmVmaXhlcy5sZW5ndGggLSAxOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFuZ2xlID0gKGkgPT09IDAgPyAndG8gJyA6ICcnKTtcbiAgICAgIGNzcyArPSBzdHIxICsgcHJlZml4ZXNbaV0gKyAnbGluZWFyLWdyYWRpZW50KCcgKyBhbmdsZSArICdsZWZ0IHRvcCwgIzlmOSwgd2hpdGUpOyc7XG4gICAgfVxuXG4gICAgaWYgKE1vZGVybml6ci5fY29uZmlnLnVzZVByZWZpeGVzKSB7XG4gICAgLy8gbGVnYWN5IHdlYmtpdCBzeW50YXggKEZJWE1FOiByZW1vdmUgd2hlbiBzeW50YXggbm90IGluIHVzZSBhbnltb3JlKVxuICAgICAgY3NzICs9IHN0cjEgKyAnLXdlYmtpdC0nICsgc3RyMjtcbiAgICB9XG5cbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuICAgIHN0eWxlLmNzc1RleHQgPSBjc3M7XG5cbiAgICAvLyBJRTYgcmV0dXJucyB1bmRlZmluZWQgc28gY2FzdCB0byBzdHJpbmdcbiAgICByZXR1cm4gKCcnICsgc3R5bGUuYmFja2dyb3VuZEltYWdlKS5pbmRleE9mKCdncmFkaWVudCcpID4gLTE7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwicGxhY2Vob2xkZXIgYXR0cmlidXRlXCIsXG4gIFwicHJvcGVydHlcIjogXCJwbGFjZWhvbGRlclwiLFxuICBcInRhZ3NcIjogW1wiZm9ybXNcIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiZm9ybXNfcGxhY2Vob2xkZXJcIl1cbn1cbiEqL1xuLyogRE9DXG5UZXN0cyBmb3IgcGxhY2Vob2xkZXIgYXR0cmlidXRlIGluIGlucHV0cyBhbmQgdGV4dGFyZWFzXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdwbGFjZWhvbGRlcicsICgncGxhY2Vob2xkZXInIGluIGNyZWF0ZUVsZW1lbnQoJ2lucHV0JykgJiYgJ3BsYWNlaG9sZGVyJyBpbiBjcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpKSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJzcmNzZXQgYXR0cmlidXRlXCIsXG4gIFwicHJvcGVydHlcIjogXCJzcmNzZXRcIixcbiAgXCJ0YWdzXCI6IFtcImltYWdlXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiU21hc2hpbmcgTWFnYXppbmUgQXJ0aWNsZVwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FQTkdcIlxuICAgIH0se1xuICAgIFwibmFtZVwiOiBcIkdlbmVyYXRlIG11bHRpLXJlc29sdXRpb24gaW1hZ2VzIGZvciBzcmNzZXQgd2l0aCBHcnVudFwiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vYWRkeW9zbWFuaS5jb20vYmxvZy9nZW5lcmF0ZS1tdWx0aS1yZXNvbHV0aW9uLWltYWdlcy1mb3Itc3Jjc2V0LXdpdGgtZ3J1bnQvXCJcbiAgICB9XVxufVxuISovXG4vKiBET0NcblRlc3QgZm9yIHRoZSBzcmNzZXQgYXR0cmlidXRlIG9mIGltYWdlc1xuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnc3Jjc2V0JywgJ3NyY3NldCcgaW4gY3JlYXRlRWxlbWVudCgnaW1nJykpO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiSW5saW5lIFNWR1wiLFxuICBcInByb3BlcnR5XCI6IFwiaW5saW5lc3ZnXCIsXG4gIFwiY2FuaXVzZVwiOiBcInN2Zy1odG1sNVwiLFxuICBcInRhZ3NcIjogW1wic3ZnXCJdLFxuICBcIm5vdGVzXCI6IFt7XG4gICAgXCJuYW1lXCI6IFwiVGVzdCBwYWdlXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9wYXVsaXJpc2guY29tL2RlbW8vaW5saW5lLXN2Z1wiXG4gIH0sIHtcbiAgICBcIm5hbWVcIjogXCJUZXN0IHBhZ2UgYW5kIHJlc3VsdHNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2NvZGVwZW4uaW8vZWx0b25tZXNxdWl0YS9mdWxsL0dnWGJ2by9cIlxuICB9XSxcbiAgXCJwb2x5ZmlsbHNcIjogW1wiaW5saW5lLXN2Zy1wb2x5ZmlsbFwiXSxcbiAgXCJrbm93bkJ1Z3NcIjogW1wiRmFsc2UgbmVnYXRpdmUgb24gc29tZSBDaHJvbWlhIGJyb3dzZXJzLlwiXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgaW5saW5lIFNWRyBpbiBIVE1MIChub3Qgd2l0aGluIFhIVE1MKS5cbiovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2lubGluZXN2ZycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gJzxzdmcvPic7XG4gICAgcmV0dXJuICh0eXBlb2YgU1ZHUmVjdCAhPSAndW5kZWZpbmVkJyAmJiBkaXYuZmlyc3RDaGlsZCAmJiBkaXYuZmlyc3RDaGlsZC5uYW1lc3BhY2VVUkkpID09ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFN1cHBvcnRzXCIsXG4gIFwicHJvcGVydHlcIjogXCJzdXBwb3J0c1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtZmVhdHVyZXF1ZXJpZXNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJidWlsZGVyQWxpYXNlc1wiOiBbXCJjc3Nfc3VwcG9ydHNcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJXMyBTcGVjXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzMy1jb25kaXRpb25hbC8jYXQtc3VwcG9ydHNcIlxuICB9LHtcbiAgICBcIm5hbWVcIjogXCJSZWxhdGVkIEdpdGh1YiBJc3N1ZVwiLFxuICAgIFwiaHJlZlwiOiBcImdpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9pc3N1ZXMvNjQ4XCJcbiAgfSx7XG4gICAgXCJuYW1lXCI6IFwiVzMgSW5mb1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2NzczMtY29uZGl0aW9uYWwvI3RoZS1jc3NzdXBwb3J0c3J1bGUtaW50ZXJmYWNlXCJcbiAgfV1cbn1cbiEqL1xuXG4gIHZhciBuZXdTeW50YXggPSAnQ1NTJyBpbiB3aW5kb3cgJiYgJ3N1cHBvcnRzJyBpbiB3aW5kb3cuQ1NTO1xuICB2YXIgb2xkU3ludGF4ID0gJ3N1cHBvcnRzQ1NTJyBpbiB3aW5kb3c7XG4gIE1vZGVybml6ci5hZGRUZXN0KCdzdXBwb3J0cycsIG5ld1N5bnRheCB8fCBvbGRTeW50YXgpO1xuXG5cbiAgLyoqXG4gICAqIGdldEJvZHkgcmV0dXJucyB0aGUgYm9keSBvZiBhIGRvY3VtZW50LCBvciBhbiBlbGVtZW50IHRoYXQgY2FuIHN0YW5kIGluIGZvclxuICAgKiB0aGUgYm9keSBpZiBhIHJlYWwgYm9keSBkb2VzIG5vdCBleGlzdFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGdldEJvZHlcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IFJldHVybnMgdGhlIHJlYWwgYm9keSBvZiBhIGRvY3VtZW50LCBvciBhblxuICAgKiBhcnRpZmljaWFsbHkgY3JlYXRlZCBlbGVtZW50IHRoYXQgc3RhbmRzIGluIGZvciB0aGUgYm9keVxuICAgKi9cblxuICBmdW5jdGlvbiBnZXRCb2R5KCkge1xuICAgIC8vIEFmdGVyIHBhZ2UgbG9hZCBpbmplY3RpbmcgYSBmYWtlIGJvZHkgZG9lc24ndCB3b3JrIHNvIGNoZWNrIGlmIGJvZHkgZXhpc3RzXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgaWYgKCFib2R5KSB7XG4gICAgICAvLyBDYW4ndCB1c2UgdGhlIHJlYWwgYm9keSBjcmVhdGUgYSBmYWtlIG9uZS5cbiAgICAgIGJvZHkgPSBjcmVhdGVFbGVtZW50KGlzU1ZHID8gJ3N2ZycgOiAnYm9keScpO1xuICAgICAgYm9keS5mYWtlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9keTtcbiAgfVxuXG4gIDtcblxuICB2YXIgY3Nzb21QcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gb21QcmVmaXhlcy5zcGxpdCgnICcpIDogW10pO1xuICBNb2Rlcm5penJQcm90by5fY3Nzb21QcmVmaXhlcyA9IGNzc29tUHJlZml4ZXM7XG4gIFxuXG4gIC8qKlxuICAgKiBhdFJ1bGUgcmV0dXJucyBhIGdpdmVuIENTUyBwcm9wZXJ0eSBhdC1ydWxlIChlZyBAa2V5ZnJhbWVzKSwgcG9zc2libHkgaW5cbiAgICogc29tZSBwcmVmaXhlZCBmb3JtLCBvciBmYWxzZSwgaW4gdGhlIGNhc2Ugb2YgYW4gdW5zdXBwb3J0ZWQgcnVsZVxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5hdFJ1bGVcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLmF0UnVsZSgpXG4gICAqIEBvcHRpb25Qcm9wIGF0UnVsZVxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gYXRSdWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWUgb2YgdGhlIEAtcnVsZSB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGJvb2xlYW59IFRoZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSAocG9zc2libHkgcHJlZml4ZWQpXG4gICAqIHZhbGlkIHZlcnNpb24gb2YgdGhlIEAtcnVsZSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiAgdmFyIGtleWZyYW1lcyA9IE1vZGVybml6ci5hdFJ1bGUoJ0BrZXlmcmFtZXMnKTtcbiAgICpcbiAgICogIGlmIChrZXlmcmFtZXMpIHtcbiAgICogICAgLy8ga2V5ZnJhbWVzIGFyZSBzdXBwb3J0ZWRcbiAgICogICAgLy8gY291bGQgYmUgYEAtd2Via2l0LWtleWZyYW1lc2Agb3IgYEBrZXlmcmFtZXNgXG4gICAqICB9IGVsc2Uge1xuICAgKiAgICAvLyBrZXlmcmFtZXMgPT09IGBmYWxzZWBcbiAgICogIH1cbiAgICogYGBgXG4gICAqXG4gICAqL1xuXG4gIHZhciBhdFJ1bGUgPSBmdW5jdGlvbihwcm9wKSB7XG4gICAgdmFyIGxlbmd0aCA9IHByZWZpeGVzLmxlbmd0aDtcbiAgICB2YXIgY3NzcnVsZSA9IHdpbmRvdy5DU1NSdWxlO1xuICAgIHZhciBydWxlO1xuXG4gICAgaWYgKHR5cGVvZiBjc3NydWxlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoIXByb3ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgbGl0ZXJhbCBAIGZyb20gYmVnaW5uaW5nIG9mIHByb3ZpZGVkIHByb3BlcnR5XG4gICAgcHJvcCA9IHByb3AucmVwbGFjZSgvXkAvLCAnJyk7XG5cbiAgICAvLyBDU1NSdWxlcyB1c2UgdW5kZXJzY29yZXMgaW5zdGVhZCBvZiBkYXNoZXNcbiAgICBydWxlID0gcHJvcC5yZXBsYWNlKC8tL2csICdfJykudG9VcHBlckNhc2UoKSArICdfUlVMRSc7XG5cbiAgICBpZiAocnVsZSBpbiBjc3NydWxlKSB7XG4gICAgICByZXR1cm4gJ0AnICsgcHJvcDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBwcmVmaXhlcyBnaXZlcyB1cyBzb21ldGhpbmcgbGlrZSAtby0sIGFuZCB3ZSB3YW50IE9fXG4gICAgICB2YXIgcHJlZml4ID0gcHJlZml4ZXNbaV07XG4gICAgICB2YXIgdGhpc1J1bGUgPSBwcmVmaXgudG9VcHBlckNhc2UoKSArICdfJyArIHJ1bGU7XG5cbiAgICAgIGlmICh0aGlzUnVsZSBpbiBjc3NydWxlKSB7XG4gICAgICAgIHJldHVybiAnQC0nICsgcHJlZml4LnRvTG93ZXJDYXNlKCkgKyAnLScgKyBwcm9wO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBNb2Rlcm5penJQcm90by5hdFJ1bGUgPSBhdFJ1bGU7XG5cbiAgXG5cblxuICAvKipcbiAgICogY29udGFpbnMgY2hlY2tzIHRvIHNlZSBpZiBhIHN0cmluZyBjb250YWlucyBhbm90aGVyIHN0cmluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNvbnRhaW5zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHdlIHdhbnQgdG8gY2hlY2sgZm9yIHN1YnN0cmluZ3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnN0ciAtIFRoZSBzdWJzdHJpbmcgd2Ugd2FudCB0byBzZWFyY2ggdGhlIGZpcnN0IHN0cmluZyBmb3JcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHN0ciwgc3Vic3RyKSB7XG4gICAgcmV0dXJuICEhfignJyArIHN0cikuaW5kZXhPZihzdWJzdHIpO1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiBpbmplY3RFbGVtZW50V2l0aFN0eWxlcyBpbmplY3RzIGFuIGVsZW1lbnQgd2l0aCBzdHlsZSBlbGVtZW50IGFuZCBzb21lIENTUyBydWxlc1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlIC0gU3RyaW5nIHJlcHJlc2VudGluZyBhIGNzcyBydWxlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gdGVzdCB0aGUgaW5qZWN0ZWQgZWxlbWVudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW25vZGVzXSAtIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBub2RlcyB5b3Ugd2FudCBpbmplY3RlZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbdGVzdG5hbWVzXSAtIEFuIGFycmF5IG9mIHN0cmluZ3MgdGhhdCBhcmUgdXNlZCBhcyBpZHMgZm9yIHRoZSBhZGRpdGlvbmFsIG5vZGVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpbmplY3RFbGVtZW50V2l0aFN0eWxlcyhydWxlLCBjYWxsYmFjaywgbm9kZXMsIHRlc3RuYW1lcykge1xuICAgIHZhciBtb2QgPSAnbW9kZXJuaXpyJztcbiAgICB2YXIgc3R5bGU7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgbm9kZTtcbiAgICB2YXIgZG9jT3ZlcmZsb3c7XG4gICAgdmFyIGRpdiA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBib2R5ID0gZ2V0Qm9keSgpO1xuXG4gICAgaWYgKHBhcnNlSW50KG5vZGVzLCAxMCkpIHtcbiAgICAgIC8vIEluIG9yZGVyIG5vdCB0byBnaXZlIGZhbHNlIHBvc2l0aXZlcyB3ZSBjcmVhdGUgYSBub2RlIGZvciBlYWNoIHRlc3RcbiAgICAgIC8vIFRoaXMgYWxzbyBhbGxvd3MgdGhlIG1ldGhvZCB0byBzY2FsZSBmb3IgdW5zcGVjaWZpZWQgdXNlc1xuICAgICAgd2hpbGUgKG5vZGVzLS0pIHtcbiAgICAgICAgbm9kZSA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBub2RlLmlkID0gdGVzdG5hbWVzID8gdGVzdG5hbWVzW25vZGVzXSA6IG1vZCArIChub2RlcyArIDEpO1xuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3R5bGUgPSBjcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgIHN0eWxlLmlkID0gJ3MnICsgbW9kO1xuXG4gICAgLy8gSUU2IHdpbGwgZmFsc2UgcG9zaXRpdmUgb24gc29tZSB0ZXN0cyBkdWUgdG8gdGhlIHN0eWxlIGVsZW1lbnQgaW5zaWRlIHRoZSB0ZXN0IGRpdiBzb21laG93IGludGVyZmVyaW5nIG9mZnNldEhlaWdodCwgc28gaW5zZXJ0IGl0IGludG8gYm9keSBvciBmYWtlYm9keS5cbiAgICAvLyBPcGVyYSB3aWxsIGFjdCBhbGwgcXVpcmt5IHdoZW4gaW5qZWN0aW5nIGVsZW1lbnRzIGluIGRvY3VtZW50RWxlbWVudCB3aGVuIHBhZ2UgaXMgc2VydmVkIGFzIHhtbCwgbmVlZHMgZmFrZWJvZHkgdG9vLiAjMjcwXG4gICAgKCFib2R5LmZha2UgPyBkaXYgOiBib2R5KS5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuXG4gICAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJ1bGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGUpKTtcbiAgICB9XG4gICAgZGl2LmlkID0gbW9kO1xuXG4gICAgaWYgKGJvZHkuZmFrZSkge1xuICAgICAgLy9hdm9pZCBjcmFzaGluZyBJRTgsIGlmIGJhY2tncm91bmQgaW1hZ2UgaXMgdXNlZFxuICAgICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7XG4gICAgICAvL1NhZmFyaSA1LjEzLzUuMS40IE9TWCBzdG9wcyBsb2FkaW5nIGlmIDo6LXdlYmtpdC1zY3JvbGxiYXIgaXMgdXNlZCBhbmQgc2Nyb2xsYmFycyBhcmUgdmlzaWJsZVxuICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgZG9jT3ZlcmZsb3cgPSBkb2NFbGVtZW50LnN0eWxlLm92ZXJmbG93O1xuICAgICAgZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgZG9jRWxlbWVudC5hcHBlbmRDaGlsZChib2R5KTtcbiAgICB9XG5cbiAgICByZXQgPSBjYWxsYmFjayhkaXYsIHJ1bGUpO1xuICAgIC8vIElmIHRoaXMgaXMgZG9uZSBhZnRlciBwYWdlIGxvYWQgd2UgZG9uJ3Qgd2FudCB0byByZW1vdmUgdGhlIGJvZHkgc28gY2hlY2sgaWYgYm9keSBleGlzdHNcbiAgICBpZiAoYm9keS5mYWtlKSB7XG4gICAgICBib2R5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYm9keSk7XG4gICAgICBkb2NFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gZG9jT3ZlcmZsb3c7XG4gICAgICAvLyBUcmlnZ2VyIGxheW91dCBzbyBraW5ldGljIHNjcm9sbGluZyBpc24ndCBkaXNhYmxlZCBpbiBpT1M2K1xuICAgICAgZG9jRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhcmV0O1xuXG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHRlc3RTdHlsZXMgaW5qZWN0cyBhbiBlbGVtZW50IHdpdGggc3R5bGUgZWxlbWVudCBhbmQgc29tZSBDU1MgcnVsZXNcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIudGVzdFN0eWxlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIudGVzdFN0eWxlcygpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RTdHlsZXNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHRlc3RTdHlsZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJ1bGUgLSBTdHJpbmcgcmVwcmVzZW50aW5nIGEgY3NzIHJ1bGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgLSBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byB0ZXN0IHRoZSBpbmplY3RlZCBlbGVtZW50XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbm9kZXNdIC0gQW4gaW50ZWdlciByZXByZXNlbnRpbmcgdGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIG5vZGVzIHlvdSB3YW50IGluamVjdGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IFt0ZXN0bmFtZXNdIC0gQW4gYXJyYXkgb2Ygc3RyaW5ncyB0aGF0IGFyZSB1c2VkIGFzIGlkcyBmb3IgdGhlIGFkZGl0aW9uYWwgbm9kZXNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBNb2Rlcm5penIudGVzdFN0eWxlc2AgdGFrZXMgYSBDU1MgcnVsZSBhbmQgaW5qZWN0cyBpdCBvbnRvIHRoZSBjdXJyZW50IHBhZ2VcbiAgICogYWxvbmcgd2l0aCAocG9zc2libHkgbXVsdGlwbGUpIERPTSBlbGVtZW50cy4gVGhpcyBsZXRzIHlvdSBjaGVjayBmb3IgZmVhdHVyZXNcbiAgICogdGhhdCBjYW4gbm90IGJlIGRldGVjdGVkIGJ5IHNpbXBseSBjaGVja2luZyB0aGUgW0lETF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Nb3ppbGxhL0RldmVsb3Blcl9ndWlkZS9JbnRlcmZhY2VfZGV2ZWxvcG1lbnRfZ3VpZGUvSURMX2ludGVyZmFjZV9ydWxlcykuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjbW9kZXJuaXpyIHsgd2lkdGg6IDlweDsgY29sb3I6IHBhcGF5YXdoaXA7IH0nLCBmdW5jdGlvbihlbGVtLCBydWxlKSB7XG4gICAqICAgLy8gZWxlbSBpcyB0aGUgZmlyc3QgRE9NIG5vZGUgaW4gdGhlIHBhZ2UgKGJ5IGRlZmF1bHQgI21vZGVybml6cilcbiAgICogICAvLyBydWxlIGlzIHRoZSBmaXJzdCBhcmd1bWVudCB5b3Ugc3VwcGxpZWQgLSB0aGUgQ1NTIHJ1bGUgaW4gc3RyaW5nIGZvcm1cbiAgICpcbiAgICogICBhZGRUZXN0KCd3aWR0aHdvcmtzJywgZWxlbS5zdHlsZS53aWR0aCA9PT0gJzlweCcpXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91ciB0ZXN0IHJlcXVpcmVzIG11bHRpcGxlIG5vZGVzLCB5b3UgY2FuIGluY2x1ZGUgYSB0aGlyZCBhcmd1bWVudFxuICAgKiBpbmRpY2F0aW5nIGhvdyBtYW55IGFkZGl0aW9uYWwgZGl2IGVsZW1lbnRzIHRvIGluY2x1ZGUgb24gdGhlIHBhZ2UuIFRoZVxuICAgKiBhZGRpdGlvbmFsIG5vZGVzIGFyZSBpbmplY3RlZCBhcyBjaGlsZHJlbiBvZiB0aGUgYGVsZW1gIHRoYXQgaXMgcmV0dXJuZWQgYXNcbiAgICogdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RTdHlsZXMoJyNtb2Rlcm5penIge3dpZHRoOiAxcHh9OyAjbW9kZXJuaXpyMiB7d2lkdGg6IDJweH0nLCBmdW5jdGlvbihlbGVtKSB7XG4gICAqICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVybml6cicpLnN0eWxlLndpZHRoID09PSAnMXB4JzsgLy8gdHJ1ZVxuICAgKiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5penIyJykuc3R5bGUud2lkdGggPT09ICcycHgnOyAvLyB0cnVlXG4gICAqICAgZWxlbS5maXJzdENoaWxkID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuaXpyMicpOyAvLyB0cnVlXG4gICAqIH0sIDEpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgYWxsIG9mIHRoZSBhZGRpdGlvbmFsIGVsZW1lbnRzIGhhdmUgYW4gSUQgb2YgYG1vZGVybml6cltuXWAsIHdoZXJlXG4gICAqIGBuYCBpcyBpdHMgaW5kZXggKGUuZy4gdGhlIGZpcnN0IGFkZGl0aW9uYWwsIHNlY29uZCBvdmVyYWxsIGlzIGAjbW9kZXJuaXpyMmAsXG4gICAqIHRoZSBzZWNvbmQgYWRkaXRpb25hbCBpcyBgI21vZGVybml6cjNgLCBldGMuKS5cbiAgICogSWYgeW91IHdhbnQgdG8gaGF2ZSBtb3JlIG1lYW5pbmdmdWwgSURzIGZvciB5b3VyIGZ1bmN0aW9uLCB5b3UgY2FuIHByb3ZpZGVcbiAgICogdGhlbSBhcyB0aGUgZm91cnRoIGFyZ3VtZW50LCBhcyBhbiBhcnJheSBvZiBzdHJpbmdzXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjZm9vIHt3aWR0aDogMTBweH07ICNiYXIge2hlaWdodDogMjBweH0nLCBmdW5jdGlvbihlbGVtKSB7XG4gICAqICAgZWxlbS5maXJzdENoaWxkID09PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9vJyk7IC8vIHRydWVcbiAgICogICBlbGVtLmxhc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcicpOyAvLyB0cnVlXG4gICAqIH0sIDIsIFsnZm9vJywgJ2JhciddKTtcbiAgICogYGBgXG4gICAqXG4gICAqL1xuXG4gIHZhciB0ZXN0U3R5bGVzID0gTW9kZXJuaXpyUHJvdG8udGVzdFN0eWxlcyA9IGluamVjdEVsZW1lbnRXaXRoU3R5bGVzO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInRvdWNoZXZlbnRzXCIsXG4gIFwiY2FuaXVzZVwiIDogXCJ0b3VjaFwiLFxuICBcInRhZ3NcIjogW1wibWVkaWFcIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHMgc3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELXRvdWNoLWV2ZW50cy0yMDEzMDEyNC9cIlxuICB9XSxcbiAgXCJ3YXJuaW5nc1wiOiBbXG4gICAgXCJJbmRpY2F0ZXMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIFRvdWNoIEV2ZW50cyBzcGVjLCBhbmQgZG9lcyBub3QgbmVjZXNzYXJpbHkgcmVmbGVjdCBhIHRvdWNoc2NyZWVuIGRldmljZVwiXG4gIF0sXG4gIFwia25vd25CdWdzXCI6IFtcbiAgICBcIkZhbHNlLXBvc2l0aXZlIG9uIHNvbWUgY29uZmlndXJhdGlvbnMgb2YgTm9raWEgTjkwMFwiLFxuICAgIFwiRmFsc2UtcG9zaXRpdmUgb24gc29tZSBCbGFja0JlcnJ5IDYuMCBidWlsZHMg4oCTIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy8zNzIjaXNzdWVjb21tZW50LTMxMTI2OTVcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuSW5kaWNhdGVzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBXM0MgVG91Y2ggRXZlbnRzIEFQSS5cblxuVGhpcyAqZG9lcyBub3QqIG5lY2Vzc2FyaWx5IHJlZmxlY3QgYSB0b3VjaHNjcmVlbiBkZXZpY2U6XG5cbiogT2xkZXIgdG91Y2hzY3JlZW4gZGV2aWNlcyBvbmx5IGVtdWxhdGUgbW91c2UgZXZlbnRzXG4qIE1vZGVybiBJRSB0b3VjaCBkZXZpY2VzIGltcGxlbWVudCB0aGUgUG9pbnRlciBFdmVudHMgQVBJIGluc3RlYWQ6IHVzZSBgTW9kZXJuaXpyLnBvaW50ZXJldmVudHNgIHRvIGRldGVjdCBzdXBwb3J0IGZvciB0aGF0XG4qIFNvbWUgYnJvd3NlcnMgJiBPUyBzZXR1cHMgbWF5IGVuYWJsZSB0b3VjaCBBUElzIHdoZW4gbm8gdG91Y2hzY3JlZW4gaXMgY29ubmVjdGVkXG4qIEZ1dHVyZSBicm93c2VycyBtYXkgaW1wbGVtZW50IG90aGVyIGV2ZW50IG1vZGVscyBmb3IgdG91Y2ggaW50ZXJhY3Rpb25zXG5cblNlZSB0aGlzIGFydGljbGU6IFtZb3UgQ2FuJ3QgRGV0ZWN0IEEgVG91Y2hzY3JlZW5dKGh0dHA6Ly93d3cuc3R1Y294LmNvbS9ibG9nL3lvdS1jYW50LWRldGVjdC1hLXRvdWNoc2NyZWVuLykuXG5cbkl0J3MgcmVjb21tZW5kZWQgdG8gYmluZCBib3RoIG1vdXNlIGFuZCB0b3VjaC9wb2ludGVyIGV2ZW50cyBzaW11bHRhbmVvdXNseSDigJMgc2VlIFt0aGlzIEhUTUw1IFJvY2tzIHR1dG9yaWFsXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL21vYmlsZS90b3VjaGFuZG1vdXNlLykuXG5cblRoaXMgdGVzdCB3aWxsIGFsc28gcmV0dXJuIGB0cnVlYCBmb3IgRmlyZWZveCA0IE11bHRpdG91Y2ggc3VwcG9ydC5cbiovXG5cbiAgLy8gQ2hyb21lIChkZXNrdG9wKSB1c2VkIHRvIGxpZSBhYm91dCBpdHMgc3VwcG9ydCBvbiB0aGlzLCBidXQgdGhhdCBoYXMgc2luY2UgYmVlbiByZWN0aWZpZWQ6IGh0dHA6Ly9jcmJ1Zy5jb20vMzY0MTVcbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ3RvdWNoZXZlbnRzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvb2w7XG4gICAgaWYgKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2YgRG9jdW1lbnRUb3VjaCkge1xuICAgICAgYm9vbCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluY2x1ZGUgdGhlICdoZWFydHonIGFzIGEgd2F5IHRvIGhhdmUgYSBub24gbWF0Y2hpbmcgTVEgdG8gaGVscCB0ZXJtaW5hdGUgdGhlIGpvaW5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0LmlvL3Z6bkZIXG4gICAgICB2YXIgcXVlcnkgPSBbJ0BtZWRpYSAoJywgcHJlZml4ZXMuam9pbigndG91Y2gtZW5hYmxlZCksKCcpLCAnaGVhcnR6JywgJyknLCAneyNtb2Rlcm5penJ7dG9wOjlweDtwb3NpdGlvbjphYnNvbHV0ZX19J10uam9pbignJyk7XG4gICAgICB0ZXN0U3R5bGVzKHF1ZXJ5LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGJvb2wgPSBub2RlLm9mZnNldFRvcCA9PT0gOTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYm9vbDtcbiAgfSk7XG5cbi8qIVxue1xuICBcIm5hbWVcIjogXCJGb3JtIFZhbGlkYXRpb25cIixcbiAgXCJwcm9wZXJ0eVwiOiBcImZvcm12YWxpZGF0aW9uXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiLCBcInZhbGlkYXRpb25cIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiZm9ybXNfdmFsaWRhdGlvblwiXVxufVxuISovXG4vKiBET0NcblRoaXMgaW1wbGVtZW50YXRpb24gb25seSB0ZXN0cyBzdXBwb3J0IGZvciBpbnRlcmFjdGl2ZSBmb3JtIHZhbGlkYXRpb24uXG5UbyBjaGVjayB2YWxpZGF0aW9uIGZvciBhIHNwZWNpZmljIHR5cGUgb3IgYSBzcGVjaWZpYyBvdGhlciBjb25zdHJhaW50LFxudGhlIHRlc3QgY2FuIGJlIGNvbWJpbmVkOlxuXG4tIGBNb2Rlcm5penIuaW5wdXR0eXBlcy5udW1iZXIgJiYgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uYCAoYnJvd3NlciBzdXBwb3J0cyByYW5nZU92ZXJmbG93LCB0eXBlTWlzbWF0Y2ggZXRjLiBmb3IgdHlwZT1udW1iZXIpXG4tIGBNb2Rlcm5penIuaW5wdXQucmVxdWlyZWQgJiYgTW9kZXJuaXpyLmZvcm12YWxpZGF0aW9uYCAoYnJvd3NlciBzdXBwb3J0cyB2YWx1ZU1pc3NpbmcpXG4qL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdmb3JtdmFsaWRhdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBmb3JtID0gY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIGlmICghKCdjaGVja1ZhbGlkaXR5JyBpbiBmb3JtKSB8fCAhKCdhZGRFdmVudExpc3RlbmVyJyBpbiBmb3JtKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoJ3JlcG9ydFZhbGlkaXR5JyBpbiBmb3JtKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGludmFsaWRGaXJlZCA9IGZhbHNlO1xuICAgIHZhciBpbnB1dDtcblxuICAgIE1vZGVybml6ci5mb3JtdmFsaWRhdGlvbmFwaSA9ICB0cnVlO1xuXG4gICAgLy8gUHJldmVudCBmb3JtIGZyb20gYmVpbmcgc3VibWl0dGVkXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBPbGQgUHJlc3RvIGJhc2VkIE9wZXJhIGRvZXMgbm90IHZhbGlkYXRlIGZvcm0sIGlmIHN1Ym1pdCBpcyBwcmV2ZW50ZWRcbiAgICAgIC8vIGFsdGhvdWdoIE9wZXJhIE1pbmkgc2VydmVycyB1c2UgbmV3ZXIgUHJlc3RvLlxuICAgICAgaWYgKCF3aW5kb3cub3BlcmEgfHwgd2luZG93Lm9wZXJhbWluaSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIC8vIENhbGxpbmcgZm9ybS5zdWJtaXQoKSBkb2Vzbid0IHRyaWdnZXIgaW50ZXJhY3RpdmUgdmFsaWRhdGlvbixcbiAgICAvLyB1c2UgYSBzdWJtaXQgYnV0dG9uIGluc3RlYWRcbiAgICAvL29sZGVyIG9wZXJhIGJyb3dzZXJzIG5lZWQgYSBuYW1lIGF0dHJpYnV0ZVxuICAgIGZvcm0uaW5uZXJIVE1MID0gJzxpbnB1dCBuYW1lPVwibW9kVGVzdFwiIHJlcXVpcmVkPVwicmVxdWlyZWRcIiAvPjxidXR0b24+PC9idXR0b24+JztcblxuICAgIHRlc3RTdHlsZXMoJyNtb2Rlcm5penIgZm9ybXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTk5OTk5ZW19JywgZnVuY3Rpb24obm9kZSkge1xuICAgICAgbm9kZS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgaW5wdXQgPSBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpWzBdO1xuXG4gICAgICAvLyBSZWNvcmQgd2hldGhlciBcImludmFsaWRcIiBldmVudCBpcyBmaXJlZFxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW52YWxpZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaW52YWxpZEZpcmVkID0gdHJ1ZTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAvL09wZXJhIGRvZXMgbm90IGZ1bGx5IHN1cHBvcnQgdGhlIHZhbGlkYXRpb25NZXNzYWdlIHByb3BlcnR5XG4gICAgICBNb2Rlcm5penIuZm9ybXZhbGlkYXRpb25tZXNzYWdlID0gISFpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcblxuICAgICAgLy8gU3VibWl0IGZvcm0gYnkgY2xpY2tpbmcgc3VibWl0IGJ1dHRvblxuICAgICAgZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYnV0dG9uJylbMF0uY2xpY2soKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpbnZhbGlkRmlyZWQ7XG4gIH0pO1xuXG5cbiAgLyoqXG4gICAqIG5hdGl2ZVRlc3RQcm9wcyBhbGxvd3MgZm9yIHVzIHRvIHVzZSBuYXRpdmUgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb25hbGl0eSBpZiBhdmFpbGFibGUuXG4gICAqIHNvbWUgcHJlZml4ZWQgZm9ybSwgb3IgZmFsc2UsIGluIHRoZSBjYXNlIG9mIGFuIHVuc3VwcG9ydGVkIHJ1bGVcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBuYXRpdmVUZXN0UHJvcHNcbiAgICogQHBhcmFtIHthcnJheX0gcHJvcHMgLSBBbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIHdlIHdhbnQgdG8gY2hlY2sgdmlhIEBzdXBwb3J0c1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnx1bmRlZmluZWR9IEEgYm9vbGVhbiB3aGVuIEBzdXBwb3J0cyBleGlzdHMsIHVuZGVmaW5lZCBvdGhlcndpc2VcbiAgICovXG5cbiAgLy8gQWNjZXB0cyBhIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMgYW5kIGEgc2luZ2xlIHZhbHVlXG4gIC8vIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgbmF0aXZlIGRldGVjdGlvbiBub3QgYXZhaWxhYmxlXG4gIGZ1bmN0aW9uIG5hdGl2ZVRlc3RQcm9wcyhwcm9wcywgdmFsdWUpIHtcbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcbiAgICAvLyBTdGFydCB3aXRoIHRoZSBKUyBBUEk6IGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29uZGl0aW9uYWwvI3RoZS1jc3MtaW50ZXJmYWNlXG4gICAgaWYgKCdDU1MnIGluIHdpbmRvdyAmJiAnc3VwcG9ydHMnIGluIHdpbmRvdy5DU1MpIHtcbiAgICAgIC8vIFRyeSBldmVyeSBwcmVmaXhlZCB2YXJpYW50IG9mIHRoZSBwcm9wZXJ0eVxuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBpZiAod2luZG93LkNTUy5zdXBwb3J0cyhkb21Ub0NTUyhwcm9wc1tpXSksIHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSBmYWxsIGJhY2sgdG8gYXQtcnVsZSAoZm9yIE9wZXJhIDEyLngpXG4gICAgZWxzZSBpZiAoJ0NTU1N1cHBvcnRzUnVsZScgaW4gd2luZG93KSB7XG4gICAgICAvLyBCdWlsZCBhIGNvbmRpdGlvbiBzdHJpbmcgZm9yIGV2ZXJ5IHByZWZpeGVkIHZhcmlhbnRcbiAgICAgIHZhciBjb25kaXRpb25UZXh0ID0gW107XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbmRpdGlvblRleHQucHVzaCgnKCcgKyBkb21Ub0NTUyhwcm9wc1tpXSkgKyAnOicgKyB2YWx1ZSArICcpJyk7XG4gICAgICB9XG4gICAgICBjb25kaXRpb25UZXh0ID0gY29uZGl0aW9uVGV4dC5qb2luKCcgb3IgJyk7XG4gICAgICByZXR1cm4gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMoJ0BzdXBwb3J0cyAoJyArIGNvbmRpdGlvblRleHQgKyAnKSB7ICNtb2Rlcm5penIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IH0gfScsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkucG9zaXRpb24gPT0gJ2Fic29sdXRlJztcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIDtcblxuICAvKipcbiAgICogc2luY2Ugd2UgaGF2ZSBhIGZhaXJseSBsYXJnZSBudW1iZXIgb2YgaW5wdXQgdGVzdHMgdGhhdCBkb24ndCBtdXRhdGUgdGhlIGlucHV0XG4gICAqIHdlIGNyZWF0ZSBhIHNpbmdsZSBlbGVtZW50IHRoYXQgY2FuIGJlIHNoYXJlZCB3aXRoIGFsbCBvZiB0aG9zZSB0ZXN0cyBmb3IgYVxuICAgKiBtaW5vciBwZXJmIGJvb3N0XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7SFRNTElucHV0RWxlbWVudH1cbiAgICovXG4gIHZhciBpbnB1dEVsZW0gPSBjcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBcbi8qIVxue1xuICBcIm5hbWVcIjogXCJGb3JtIGlucHV0IHR5cGVzXCIsXG4gIFwicHJvcGVydHlcIjogXCJpbnB1dHR5cGVzXCIsXG4gIFwiY2FuaXVzZVwiOiBcImZvcm1zXCIsXG4gIFwidGFnc1wiOiBbXCJmb3Jtc1wiXSxcbiAgXCJhdXRob3JzXCI6IFtcIk1pa2UgVGF5bG9yXCJdLFxuICBcInBvbHlmaWxsc1wiOiBbXG4gICAgXCJqcXVlcnl0b29sc1wiLFxuICAgIFwid2Vic2hpbXNcIixcbiAgICBcImg1ZlwiLFxuICAgIFwid2ViZm9ybXMyXCIsXG4gICAgXCJud3hmb3Jtc1wiLFxuICAgIFwiZmRzbGlkZXJcIixcbiAgICBcImh0bWw1c2xpZGVyXCIsXG4gICAgXCJnYWxsZXJ5aHRtbDVmb3Jtc1wiLFxuICAgIFwianNjb2xvclwiLFxuICAgIFwiaHRtbDVmb3Jtc2hpbVwiLFxuICAgIFwic2VsZWN0ZWRvcHRpb25zanNcIixcbiAgICBcImZvcm12YWxpZGF0aW9uanNcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuRGV0ZWN0cyBzdXBwb3J0IGZvciBIVE1MNSBmb3JtIGlucHV0IHR5cGVzIGFuZCBleHBvc2VzIEJvb2xlYW4gc3VicHJvcGVydGllcyB3aXRoIHRoZSByZXN1bHRzOlxuXG5gYGBqYXZhc2NyaXB0XG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5jb2xvclxuTW9kZXJuaXpyLmlucHV0dHlwZXMuZGF0ZVxuTW9kZXJuaXpyLmlucHV0dHlwZXMuZGF0ZXRpbWVcbk1vZGVybml6ci5pbnB1dHR5cGVzWydkYXRldGltZS1sb2NhbCddXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy5lbWFpbFxuTW9kZXJuaXpyLmlucHV0dHlwZXMubW9udGhcbk1vZGVybml6ci5pbnB1dHR5cGVzLm51bWJlclxuTW9kZXJuaXpyLmlucHV0dHlwZXMucmFuZ2Vcbk1vZGVybml6ci5pbnB1dHR5cGVzLnNlYXJjaFxuTW9kZXJuaXpyLmlucHV0dHlwZXMudGVsXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy50aW1lXG5Nb2Rlcm5penIuaW5wdXR0eXBlcy51cmxcbk1vZGVybml6ci5pbnB1dHR5cGVzLndlZWtcbmBgYFxuKi9cblxuICAvLyBSdW4gdGhyb3VnaCBIVE1MNSdzIG5ldyBpbnB1dCB0eXBlcyB0byBzZWUgaWYgdGhlIFVBIHVuZGVyc3RhbmRzIGFueS5cbiAgLy8gICBUaGlzIGlzIHB1dCBiZWhpbmQgdGhlIHRlc3RzIHJ1bmxvb3AgYmVjYXVzZSBpdCBkb2Vzbid0IHJldHVybiBhXG4gIC8vICAgdHJ1ZS9mYWxzZSBsaWtlIGFsbCB0aGUgb3RoZXIgdGVzdHM7IGluc3RlYWQsIGl0IHJldHVybnMgYW4gb2JqZWN0XG4gIC8vICAgY29udGFpbmluZyBlYWNoIGlucHV0IHR5cGUgd2l0aCBpdHMgY29ycmVzcG9uZGluZyB0cnVlL2ZhbHNlIHZhbHVlXG5cbiAgLy8gQmlnIHRoYW5rcyB0byBAbWlrZXRheWxyIGZvciB0aGUgaHRtbDUgZm9ybXMgZXhwZXJ0aXNlLiBtaWtldGF5bHIuY29tL1xuICB2YXIgaW5wdXR0eXBlcyA9ICdzZWFyY2ggdGVsIHVybCBlbWFpbCBkYXRldGltZSBkYXRlIG1vbnRoIHdlZWsgdGltZSBkYXRldGltZS1sb2NhbCBudW1iZXIgcmFuZ2UgY29sb3InLnNwbGl0KCcgJyk7XG4gIHZhciBpbnB1dHMgPSB7fTtcblxuICBNb2Rlcm5penIuaW5wdXR0eXBlcyA9IChmdW5jdGlvbihwcm9wcykge1xuICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHNtaWxlID0gJzEpJztcbiAgICB2YXIgaW5wdXRFbGVtVHlwZTtcbiAgICB2YXIgZGVmYXVsdFZpZXc7XG4gICAgdmFyIGJvb2w7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgIGlucHV0RWxlbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCBpbnB1dEVsZW1UeXBlID0gcHJvcHNbaV0pO1xuICAgICAgYm9vbCA9IGlucHV0RWxlbS50eXBlICE9PSAndGV4dCcgJiYgJ3N0eWxlJyBpbiBpbnB1dEVsZW07XG5cbiAgICAgIC8vIFdlIGZpcnN0IGNoZWNrIHRvIHNlZSBpZiB0aGUgdHlwZSB3ZSBnaXZlIGl0IHN0aWNrcy4uXG4gICAgICAvLyBJZiB0aGUgdHlwZSBkb2VzLCB3ZSBmZWVkIGl0IGEgdGV4dHVhbCB2YWx1ZSwgd2hpY2ggc2hvdWxkbid0IGJlIHZhbGlkLlxuICAgICAgLy8gSWYgdGhlIHZhbHVlIGRvZXNuJ3Qgc3RpY2ssIHdlIGtub3cgdGhlcmUncyBpbnB1dCBzYW5pdGl6YXRpb24gd2hpY2ggaW5mZXJzIGEgY3VzdG9tIFVJXG4gICAgICBpZiAoYm9vbCkge1xuXG4gICAgICAgIGlucHV0RWxlbS52YWx1ZSAgICAgICAgID0gc21pbGU7XG4gICAgICAgIGlucHV0RWxlbS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6aGlkZGVuOyc7XG5cbiAgICAgICAgaWYgKC9ecmFuZ2UkLy50ZXN0KGlucHV0RWxlbVR5cGUpICYmIGlucHV0RWxlbS5zdHlsZS5XZWJraXRBcHBlYXJhbmNlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgIGRvY0VsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXRFbGVtKTtcbiAgICAgICAgICBkZWZhdWx0VmlldyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG4gICAgICAgICAgLy8gU2FmYXJpIDItNCBhbGxvd3MgdGhlIHNtaWxleSBhcyBhIHZhbHVlLCBkZXNwaXRlIG1ha2luZyBhIHNsaWRlclxuICAgICAgICAgIGJvb2wgPSAgZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSAmJlxuICAgICAgICAgICAgZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShpbnB1dEVsZW0sIG51bGwpLldlYmtpdEFwcGVhcmFuY2UgIT09ICd0ZXh0ZmllbGQnICYmXG4gICAgICAgICAgICAvLyBNb2JpbGUgYW5kcm9pZCB3ZWIgYnJvd3NlciBoYXMgZmFsc2UgcG9zaXRpdmUsIHNvIG11c3RcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBoZWlnaHQgdG8gc2VlIGlmIHRoZSB3aWRnZXQgaXMgYWN0dWFsbHkgdGhlcmUuXG4gICAgICAgICAgICAoaW5wdXRFbGVtLm9mZnNldEhlaWdodCAhPT0gMCk7XG5cbiAgICAgICAgICBkb2NFbGVtZW50LnJlbW92ZUNoaWxkKGlucHV0RWxlbSk7XG5cbiAgICAgICAgfSBlbHNlIGlmICgvXihzZWFyY2h8dGVsKSQvLnRlc3QoaW5wdXRFbGVtVHlwZSkpIHtcbiAgICAgICAgICAvLyBTcGVjIGRvZXNuJ3QgZGVmaW5lIGFueSBzcGVjaWFsIHBhcnNpbmcgb3IgZGV0ZWN0YWJsZSBVSVxuICAgICAgICAgIC8vICAgYmVoYXZpb3JzIHNvIHdlIHBhc3MgdGhlc2UgdGhyb3VnaCBhcyB0cnVlXG5cbiAgICAgICAgICAvLyBJbnRlcmVzdGluZ2x5LCBvcGVyYSBmYWlscyB0aGUgZWFybGllciB0ZXN0LCBzbyBpdCBkb2Vzbid0XG4gICAgICAgICAgLy8gIGV2ZW4gbWFrZSBpdCBoZXJlLlxuXG4gICAgICAgIH0gZWxzZSBpZiAoL14odXJsfGVtYWlsKSQvLnRlc3QoaW5wdXRFbGVtVHlwZSkpIHtcbiAgICAgICAgICAvLyBSZWFsIHVybCBhbmQgZW1haWwgc3VwcG9ydCBjb21lcyB3aXRoIHByZWJha2VkIHZhbGlkYXRpb24uXG4gICAgICAgICAgYm9vbCA9IGlucHV0RWxlbS5jaGVja1ZhbGlkaXR5ICYmIGlucHV0RWxlbS5jaGVja1ZhbGlkaXR5KCkgPT09IGZhbHNlO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlIHVwZ3JhZGVkIGlucHV0IGNvbXBvbnRlbnQgcmVqZWN0cyB0aGUgOikgdGV4dCwgd2UgZ290IGEgd2lubmVyXG4gICAgICAgICAgYm9vbCA9IGlucHV0RWxlbS52YWx1ZSAhPSBzbWlsZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbnB1dHNbIHByb3BzW2ldIF0gPSAhIWJvb2w7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dHM7XG4gIH0pKGlucHV0dHlwZXMpO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiaW5wdXRbdHlwZT1cXFwibnVtYmVyXFxcIl0gTG9jYWxpemF0aW9uXCIsXG4gIFwicHJvcGVydHlcIjogXCJsb2NhbGl6ZWRudW1iZXJcIixcbiAgXCJ0YWdzXCI6IFtcImZvcm1zXCIsIFwibG9jYWxpemF0aW9uXCIsIFwiYXR0cmlidXRlXCJdLFxuICBcImF1dGhvcnNcIjogW1wiUGV0ZXIgSmFuZXNcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJXZWJraXQgQnVnIFRyYWNrZXIgTGlzdGluZ1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD00MjQ4NFwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIkJhc2VkIG9uIFRoaXNcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL3RyYWMud2Via2l0Lm9yZy9icm93c2VyL3RydW5rL0xheW91dFRlc3RzL2Zhc3QvZm9ybXMvc2NyaXB0LXRlc3RzL2lucHV0LW51bWJlci1rZXlvcGVyYXRpb24uanM/cmV2PTgwMDk2I0w5XCJcbiAgfV0sXG4gIFwia25vd25CdWdzXCI6IFtcIk9ubHkgZXZlciByZXR1cm5zIHRydWUgaWYgdGhlIGJyb3dzZXIvT1MgaXMgY29uZmlndXJlZCB0byB1c2UgY29tbWEgYXMgYSBkZWNpbWFsIHNlcGFyYXRvci4gVGhpcyBpcyBwcm9iYWJseSBmaW5lIGZvciBtb3N0IHVzZSBjYXNlcy5cIl1cbn1cbiEqL1xuLyogRE9DXG5EZXRlY3RzIHdoZXRoZXIgaW5wdXQgdHlwZT1cIm51bWJlclwiIGlzIGNhcGFibGUgb2YgcmVjZWl2aW5nIGFuZCBkaXNwbGF5aW5nIGxvY2FsaXplZCBudW1iZXJzLCBlLmcuIHdpdGggY29tbWEgc2VwYXJhdG9yLlxuKi9cblxuICBNb2Rlcm5penIuYWRkVGVzdCgnbG9jYWxpemVkbnVtYmVyJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gdGhpcyBleHRlbmRzIG91ciB0ZXN0aW5nIG9mIGlucHV0W3R5cGU9bnVtYmVyXSwgc28gYm9tYiBvdXQgaWYgdGhhdCdzIG1pc3NpbmdcbiAgICBpZiAoIU1vZGVybml6ci5pbnB1dHR5cGVzLm51bWJlcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyB3ZSByZWx5IG9uIGNoZWNrVmFsaWRpdHkgbGF0ZXIsIHNvIGJvbWIgb3V0IGVhcmx5IGlmIHdlIGRvbid0IGhhdmUgaXRcbiAgICBpZiAoIU1vZGVybml6ci5mb3JtdmFsaWRhdGlvbikgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIHZhciBlbCA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBkaWZmO1xuICAgIHZhciBib2R5ID0gZ2V0Qm9keSgpO1xuXG4gICAgdmFyIHJvb3QgPSAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZG9jRWxlbWVudC5pbnNlcnRCZWZvcmUoYm9keSwgZG9jRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCB8fCBkb2NFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH0oKSk7XG4gICAgZWwuaW5uZXJIVE1MID0gJzxpbnB1dCB0eXBlPVwibnVtYmVyXCIgdmFsdWU9XCIxLjBcIiBzdGVwPVwiMC4xXCIvPic7XG4gICAgdmFyIGlucHV0ID0gZWwuY2hpbGROb2Rlc1swXTtcbiAgICByb290LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpbnB1dC5mb2N1cygpO1xuICAgIHRyeSB7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnSW5zZXJ0VGV4dCcsIGZhbHNlLCAnMSwxJyk7XG4gICAgfSBjYXRjaCAoZSkgeyAvLyBwcmV2ZW50IHdhcm5pbmdzIGluIElFXG4gICAgfVxuICAgIGRpZmYgPSBpbnB1dC50eXBlID09PSAnbnVtYmVyJyAmJiBpbnB1dC52YWx1ZUFzTnVtYmVyID09PSAxLjEgJiYgaW5wdXQuY2hlY2tWYWxpZGl0eSgpO1xuICAgIHJvb3QucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIGJvZHkuZmFrZSAmJiByb290LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocm9vdCk7XG4gICAgcmV0dXJuIGRpZmY7XG4gIH0pO1xuXG5cblxuICAvKipcbiAgICogZm5CaW5kIGlzIGEgc3VwZXIgc21hbGwgW2JpbmRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uL2JpbmQpIHBvbHlmaWxsLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGZuQmluZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIGEgZnVuY3Rpb24geW91IHdhbnQgdG8gY2hhbmdlIGB0aGlzYCByZWZlcmVuY2UgdG9cbiAgICogQHBhcmFtIHtvYmplY3R9IHRoYXQgLSB0aGUgYHRoaXNgIHlvdSB3YW50IHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGhcbiAgICogQHJldHVybnMge2Z1bmN0aW9ufSBUaGUgd3JhcHBlZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBmdW5jdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiBmbkJpbmQoZm4sIHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgO1xuXG4gIC8qKlxuICAgKiB0ZXN0RE9NUHJvcHMgaXMgYSBnZW5lcmljIERPTSBwcm9wZXJ0eSB0ZXN0OyBpZiBhIGJyb3dzZXIgc3VwcG9ydHNcbiAgICogICBhIGNlcnRhaW4gcHJvcGVydHksIGl0IHdvbid0IHJldHVybiB1bmRlZmluZWQgZm9yIGl0LlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHRlc3RET01Qcm9wc1xuICAgKiBAcGFyYW0ge2FycmF5LjxzdHJpbmc+fSBwcm9wcyAtIEFuIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIEFuIG9iamVjdCBvciBFbGVtZW50IHlvdSB3YW50IHRvIHVzZSB0byB0ZXN0IHRoZSBwYXJhbWV0ZXJzIGFnYWluXG4gICAqIEBwYXJhbSB7Ym9vbGVhbnxvYmplY3R9IGVsZW0gLSBBbiBFbGVtZW50IHRvIGJpbmQgdGhlIHByb3BlcnR5IGxvb2t1cCBhZ2Fpbi4gVXNlIGBmYWxzZWAgdG8gcHJldmVudCB0aGUgY2hlY2tcbiAgICovXG4gIGZ1bmN0aW9uIHRlc3RET01Qcm9wcyhwcm9wcywgb2JqLCBlbGVtKSB7XG4gICAgdmFyIGl0ZW07XG5cbiAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7XG4gICAgICBpZiAocHJvcHNbaV0gaW4gb2JqKSB7XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9wZXJ0eSBuYW1lIGFzIGEgc3RyaW5nXG4gICAgICAgIGlmIChlbGVtID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBwcm9wc1tpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW0gPSBvYmpbcHJvcHNbaV1dO1xuXG4gICAgICAgIC8vIGxldCdzIGJpbmQgYSBmdW5jdGlvblxuICAgICAgICBpZiAoaXMoaXRlbSwgJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgICAvLyBiaW5kIHRvIG9iaiB1bmxlc3Mgb3ZlcnJpZGVuXG4gICAgICAgICAgcmV0dXJuIGZuQmluZChpdGVtLCBlbGVtIHx8IG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gdGhlIHVuYm91bmQgZnVuY3Rpb24gb3Igb2JqIG9yIHZhbHVlXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBvdXIgXCJtb2Rlcm5penJcIiBlbGVtZW50IHRoYXQgd2UgZG8gbW9zdCBmZWF0dXJlIHRlc3RzIG9uLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICovXG5cbiAgdmFyIG1vZEVsZW0gPSB7XG4gICAgZWxlbTogY3JlYXRlRWxlbWVudCgnbW9kZXJuaXpyJylcbiAgfTtcblxuICAvLyBDbGVhbiB1cCB0aGlzIGVsZW1lbnRcbiAgTW9kZXJuaXpyLl9xLnB1c2goZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIG1vZEVsZW0uZWxlbTtcbiAgfSk7XG5cbiAgXG5cbiAgdmFyIG1TdHlsZSA9IHtcbiAgICBzdHlsZTogbW9kRWxlbS5lbGVtLnN0eWxlXG4gIH07XG5cbiAgLy8ga2lsbCByZWYgZm9yIGdjLCBtdXN0IGhhcHBlbiBiZWZvcmUgbW9kLmVsZW0gaXMgcmVtb3ZlZCwgc28gd2UgdW5zaGlmdCBvbiB0b1xuICAvLyB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlLlxuICBNb2Rlcm5penIuX3EudW5zaGlmdChmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgbVN0eWxlLnN0eWxlO1xuICB9KTtcblxuICBcblxuICAvLyB0ZXN0UHJvcHMgaXMgYSBnZW5lcmljIENTUyAvIERPTSBwcm9wZXJ0eSB0ZXN0LlxuXG4gIC8vIEluIHRlc3Rpbmcgc3VwcG9ydCBmb3IgYSBnaXZlbiBDU1MgcHJvcGVydHksIGl0J3MgbGVnaXQgdG8gdGVzdDpcbiAgLy8gICAgYGVsZW0uc3R5bGVbc3R5bGVOYW1lXSAhPT0gdW5kZWZpbmVkYFxuICAvLyBJZiB0aGUgcHJvcGVydHkgaXMgc3VwcG9ydGVkIGl0IHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZyxcbiAgLy8gaWYgdW5zdXBwb3J0ZWQgaXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkLlxuXG4gIC8vIFdlJ2xsIHRha2UgYWR2YW50YWdlIG9mIHRoaXMgcXVpY2sgdGVzdCBhbmQgc2tpcCBzZXR0aW5nIGEgc3R5bGVcbiAgLy8gb24gb3VyIG1vZGVybml6ciBlbGVtZW50LCBidXQgaW5zdGVhZCBqdXN0IHRlc3RpbmcgdW5kZWZpbmVkIHZzXG4gIC8vIGVtcHR5IHN0cmluZy5cblxuICAvLyBQcm9wZXJ0eSBuYW1lcyBjYW4gYmUgcHJvdmlkZWQgaW4gZWl0aGVyIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlLlxuXG4gIGZ1bmN0aW9uIHRlc3RQcm9wcyhwcm9wcywgcHJlZml4ZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG4gICAgc2tpcFZhbHVlVGVzdCA9IGlzKHNraXBWYWx1ZVRlc3QsICd1bmRlZmluZWQnKSA/IGZhbHNlIDogc2tpcFZhbHVlVGVzdDtcblxuICAgIC8vIFRyeSBuYXRpdmUgZGV0ZWN0IGZpcnN0XG4gICAgaWYgKCFpcyh2YWx1ZSwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmF0aXZlVGVzdFByb3BzKHByb3BzLCB2YWx1ZSk7XG4gICAgICBpZiAoIWlzKHJlc3VsdCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlIGRvIGl0IHByb3Blcmx5XG4gICAgdmFyIGFmdGVySW5pdCwgaSwgcHJvcHNMZW5ndGgsIHByb3AsIGJlZm9yZTtcblxuICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBzdHlsZSBlbGVtZW50LCB0aGF0IG1lYW5zIHdlJ3JlIHJ1bm5pbmcgYXN5bmMgb3IgYWZ0ZXJcbiAgICAvLyB0aGUgY29yZSB0ZXN0cywgc28gd2UnbGwgbmVlZCB0byBjcmVhdGUgb3VyIG93biBlbGVtZW50cyB0byB1c2VcblxuICAgIC8vIGluc2lkZSBvZiBhbiBTVkcgZWxlbWVudCwgaW4gY2VydGFpbiBicm93c2VycywgdGhlIGBzdHlsZWAgZWxlbWVudCBpcyBvbmx5XG4gICAgLy8gZGVmaW5lZCBmb3IgdmFsaWQgdGFncy4gVGhlcmVmb3JlLCBpZiBgbW9kZXJuaXpyYCBkb2VzIG5vdCBoYXZlIG9uZSwgd2VcbiAgICAvLyBmYWxsIGJhY2sgdG8gYSBsZXNzIHVzZWQgZWxlbWVudCBhbmQgaG9wZSBmb3IgdGhlIGJlc3QuXG4gICAgdmFyIGVsZW1zID0gWydtb2Rlcm5penInLCAndHNwYW4nXTtcbiAgICB3aGlsZSAoIW1TdHlsZS5zdHlsZSkge1xuICAgICAgYWZ0ZXJJbml0ID0gdHJ1ZTtcbiAgICAgIG1TdHlsZS5tb2RFbGVtID0gY3JlYXRlRWxlbWVudChlbGVtcy5zaGlmdCgpKTtcbiAgICAgIG1TdHlsZS5zdHlsZSA9IG1TdHlsZS5tb2RFbGVtLnN0eWxlO1xuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0aGUgb2JqZWN0cyBpZiB3ZSBjcmVhdGVkIHRoZW0uXG4gICAgZnVuY3Rpb24gY2xlYW5FbGVtcygpIHtcbiAgICAgIGlmIChhZnRlckluaXQpIHtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5zdHlsZTtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5tb2RFbGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wc0xlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBiZWZvcmUgPSBtU3R5bGUuc3R5bGVbcHJvcF07XG5cbiAgICAgIGlmIChjb250YWlucyhwcm9wLCAnLScpKSB7XG4gICAgICAgIHByb3AgPSBjc3NUb0RPTShwcm9wKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1TdHlsZS5zdHlsZVtwcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgLy8gSWYgdmFsdWUgdG8gdGVzdCBoYXMgYmVlbiBwYXNzZWQgaW4sIGRvIGEgc2V0LWFuZC1jaGVjayB0ZXN0LlxuICAgICAgICAvLyAwIChpbnRlZ2VyKSBpcyBhIHZhbGlkIHByb3BlcnR5IHZhbHVlLCBzbyBjaGVjayB0aGF0IGB2YWx1ZWAgaXNuJ3RcbiAgICAgICAgLy8gdW5kZWZpbmVkLCByYXRoZXIgdGhhbiBqdXN0IGNoZWNraW5nIGl0J3MgdHJ1dGh5LlxuICAgICAgICBpZiAoIXNraXBWYWx1ZVRlc3QgJiYgIWlzKHZhbHVlLCAndW5kZWZpbmVkJykpIHtcblxuICAgICAgICAgIC8vIE5lZWRzIGEgdHJ5IGNhdGNoIGJsb2NrIGJlY2F1c2Ugb2Ygb2xkIElFLiBUaGlzIGlzIHNsb3csIGJ1dCB3aWxsXG4gICAgICAgICAgLy8gYmUgYXZvaWRlZCBpbiBtb3N0IGNhc2VzIGJlY2F1c2UgYHNraXBWYWx1ZVRlc3RgIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbVN0eWxlLnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBoYXMgY2hhbmdlZCwgd2UgYXNzdW1lIHRoZSB2YWx1ZSB1c2VkIGlzXG4gICAgICAgICAgLy8gc3VwcG9ydGVkLiBJZiBgdmFsdWVgIGlzIGVtcHR5IHN0cmluZywgaXQnbGwgZmFpbCBoZXJlIChiZWNhdXNlXG4gICAgICAgICAgLy8gaXQgaGFzbid0IGNoYW5nZWQpLCB3aGljaCBtYXRjaGVzIGhvdyBicm93c2VycyBoYXZlIGltcGxlbWVudGVkXG4gICAgICAgICAgLy8gQ1NTLnN1cHBvcnRzKClcbiAgICAgICAgICBpZiAobVN0eWxlLnN0eWxlW3Byb3BdICE9IGJlZm9yZSkge1xuICAgICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVkID09ICdwZngnID8gcHJvcCA6IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IHJldHVybiB0cnVlLCBvciB0aGUgcHJvcGVydHkgbmFtZSBpZiB0aGlzIGlzIGFcbiAgICAgICAgLy8gYHByZWZpeGVkKClgIGNhbGxcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgIHJldHVybiBwcmVmaXhlZCA9PSAncGZ4JyA/IHByb3AgOiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNsZWFuRWxlbXMoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICA7XG5cbiAgLyoqXG4gICAqIHRlc3RQcm9wKCkgaW52ZXN0aWdhdGVzIHdoZXRoZXIgYSBnaXZlbiBzdHlsZSBwcm9wZXJ0eSBpcyByZWNvZ25pemVkXG4gICAqIFByb3BlcnR5IG5hbWVzIGNhbiBiZSBwcm92aWRlZCBpbiBlaXRoZXIgY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2UuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnRlc3RQcm9wXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci50ZXN0UHJvcCgpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RQcm9wXG4gICAqIEBmdW5jdGlvbiB0ZXN0UHJvcFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIE5hbWUgb2YgdGhlIENTUyBwcm9wZXJ0eSB0byBjaGVja1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSAtIE5hbWUgb2YgdGhlIENTUyB2YWx1ZSB0byBjaGVja1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt1c2VWYWx1ZV0gLSBXaGV0aGVyIG9yIG5vdCB0byBjaGVjayB0aGUgdmFsdWUgaWYgQHN1cHBvcnRzIGlzbid0IHN1cHBvcnRlZFxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSnVzdCBsaWtlIFt0ZXN0QWxsUHJvcHNdKCNtb2Rlcm5penItdGVzdGFsbHByb3BzKSwgb25seSBpdCBkb2VzIG5vdCBjaGVjayBhbnkgdmVuZG9yIHByZWZpeGVkXG4gICAqIHZlcnNpb24gb2YgdGhlIHN0cmluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IHRoZSBwcm9wZXJ0eSBuYW1lIG11c3QgYmUgcHJvdmlkZWQgaW4gY2FtZWxDYXNlIChlLmcuIGJveFNpemluZyBub3QgYm94LXNpemluZylcbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLnRlc3RQcm9wKCdwb2ludGVyRXZlbnRzJykgIC8vIHRydWVcbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGEgdmFsdWUgYXMgYW4gb3B0aW9uYWwgc2Vjb25kIGFyZ3VtZW50IHRvIGNoZWNrIGlmIGFcbiAgICogc3BlY2lmaWMgdmFsdWUgaXMgc3VwcG9ydGVkXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0UHJvcCgncG9pbnRlckV2ZW50cycsICdub25lJykgLy8gdHJ1ZVxuICAgKiBNb2Rlcm5penIudGVzdFByb3AoJ3BvaW50ZXJFdmVudHMnLCAncGVuZ3VpbicpIC8vIGZhbHNlXG4gICAqIGBgYFxuICAgKi9cblxuICB2YXIgdGVzdFByb3AgPSBNb2Rlcm5penJQcm90by50ZXN0UHJvcCA9IGZ1bmN0aW9uKHByb3AsIHZhbHVlLCB1c2VWYWx1ZSkge1xuICAgIHJldHVybiB0ZXN0UHJvcHMoW3Byb3BdLCB1bmRlZmluZWQsIHZhbHVlLCB1c2VWYWx1ZSk7XG4gIH07XG4gIFxuXG4gIC8qKlxuICAgKiB0ZXN0UHJvcHNBbGwgdGVzdHMgYSBsaXN0IG9mIERPTSBwcm9wZXJ0aWVzIHdlIHdhbnQgdG8gY2hlY2sgYWdhaW5zdC5cbiAgICogV2Ugc3BlY2lmeSBsaXRlcmFsbHkgQUxMIHBvc3NpYmxlIChrbm93biBhbmQvb3IgbGlrZWx5KSBwcm9wZXJ0aWVzIG9uXG4gICAqIHRoZSBlbGVtZW50IGluY2x1ZGluZyB0aGUgbm9uLXZlbmRvciBwcmVmaXhlZCBvbmUsIGZvciBmb3J3YXJkLVxuICAgKiBjb21wYXRpYmlsaXR5LlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHRlc3RQcm9wc0FsbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIEEgc3RyaW5nIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IFtwcmVmaXhlZF0gLSBBbiBvYmplY3QgdG8gY2hlY2sgdGhlIHByZWZpeGVkIHByb3BlcnRpZXMgb24uIFVzZSBhIHN0cmluZyB0byBza2lwXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gW2VsZW1dIC0gQW4gZWxlbWVudCB1c2VkIHRvIHRlc3QgdGhlIHByb3BlcnR5IGFuZCB2YWx1ZSBhZ2FpbnN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIC0gQSBzdHJpbmcgb2YgYSBjc3MgdmFsdWVcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFZhbHVlVGVzdF0gLSBBbiBib29sZWFuIHJlcHJlc2VudGluZyBpZiB5b3Ugd2FudCB0byB0ZXN0IGlmIHZhbHVlIHN0aWNrcyB3aGVuIHNldFxuICAgKi9cbiAgZnVuY3Rpb24gdGVzdFByb3BzQWxsKHByb3AsIHByZWZpeGVkLCBlbGVtLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuXG4gICAgdmFyIHVjUHJvcCA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnNsaWNlKDEpLFxuICAgIHByb3BzID0gKHByb3AgKyAnICcgKyBjc3NvbVByZWZpeGVzLmpvaW4odWNQcm9wICsgJyAnKSArIHVjUHJvcCkuc3BsaXQoJyAnKTtcblxuICAgIC8vIGRpZCB0aGV5IGNhbGwgLnByZWZpeGVkKCdib3hTaXppbmcnKSBvciBhcmUgd2UganVzdCB0ZXN0aW5nIGEgcHJvcD9cbiAgICBpZiAoaXMocHJlZml4ZWQsICdzdHJpbmcnKSB8fCBpcyhwcmVmaXhlZCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICByZXR1cm4gdGVzdFByb3BzKHByb3BzLCBwcmVmaXhlZCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpO1xuXG4gICAgICAvLyBvdGhlcndpc2UsIHRoZXkgY2FsbGVkIC5wcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93WywgZWxlbV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHByb3BzID0gKHByb3AgKyAnICcgKyAoZG9tUHJlZml4ZXMpLmpvaW4odWNQcm9wICsgJyAnKSArIHVjUHJvcCkuc3BsaXQoJyAnKTtcbiAgICAgIHJldHVybiB0ZXN0RE9NUHJvcHMocHJvcHMsIHByZWZpeGVkLCBlbGVtKTtcbiAgICB9XG4gIH1cblxuICAvLyBNb2Rlcm5penIudGVzdEFsbFByb3BzKCkgaW52ZXN0aWdhdGVzIHdoZXRoZXIgYSBnaXZlbiBzdHlsZSBwcm9wZXJ0eSxcbiAgLy8gb3IgYW55IG9mIGl0cyB2ZW5kb3ItcHJlZml4ZWQgdmFyaWFudHMsIGlzIHJlY29nbml6ZWRcbiAgLy9cbiAgLy8gTm90ZSB0aGF0IHRoZSBwcm9wZXJ0eSBuYW1lcyBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSBjYW1lbENhc2UgdmFyaWFudC5cbiAgLy8gTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygnYm94U2l6aW5nJylcbiAgTW9kZXJuaXpyUHJvdG8udGVzdEFsbFByb3BzID0gdGVzdFByb3BzQWxsO1xuXG4gIFxuXG4gIC8qKlxuICAgKiBwcmVmaXhlZCByZXR1cm5zIHRoZSBwcmVmaXhlZCBvciBub25wcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIHZhcmlhbnQgb2YgeW91ciBpbnB1dFxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5wcmVmaXhlZFxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIucHJlZml4ZWQoKVxuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlZFxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gcHJlZml4ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgLSBTdHJpbmcgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdGVzdCBmb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvYmpdIC0gQW4gb2JqZWN0IHRvIHRlc3QgZm9yIHRoZSBwcmVmaXhlZCBwcm9wZXJ0aWVzIG9uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtlbGVtXSAtIEFuIGVsZW1lbnQgdXNlZCB0byB0ZXN0IHNwZWNpZmljIHByb3BlcnRpZXMgYWdhaW5zdFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKSB2YWxpZFxuICAgKiB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBNb2Rlcm5penIucHJlZml4ZWQgdGFrZXMgYSBzdHJpbmcgY3NzIHZhbHVlIGluIHRoZSBET00gc3R5bGUgY2FtZWxDYXNlIChhc1xuICAgKiBvcHBvc2VkIHRvIHRoZSBjc3Mgc3R5bGUga2ViYWItY2FzZSkgZm9ybSBhbmQgcmV0dXJucyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2ZXJzaW9uIG9mIHRoYXQgcHJvcGVydHkgdGhhdCB0aGUgYnJvd3NlciBhY3R1YWxseSBzdXBwb3J0cy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGluIG9sZGVyIEZpcmVmb3guLi5cbiAgICogYGBganNcbiAgICogcHJlZml4ZWQoJ2JveFNpemluZycpXG4gICAqIGBgYFxuICAgKiByZXR1cm5zICdNb3pCb3hTaXppbmcnXG4gICAqXG4gICAqIEluIG5ld2VyIEZpcmVmb3gsIGFzIHdlbGwgYXMgYW55IG90aGVyIGJyb3dzZXIgdGhhdCBzdXBwb3J0IHRoZSB1bnByZWZpeGVkXG4gICAqIHZlcnNpb24gd291bGQgc2ltcGx5IHJldHVybiBgYm94U2l6aW5nYC4gQW55IGJyb3dzZXIgdGhhdCBkb2VzIG5vdCBzdXBwb3J0XG4gICAqIHRoZSBwcm9wZXJ0eSBhdCBhbGwsIGl0IHdpbGwgcmV0dXJuIGBmYWxzZWAuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHByZWZpeGVkIGlzIGNoZWNrZWQgYWdhaW5zdCBhIERPTSBlbGVtZW50LiBJZiB5b3Ugd2FudCB0byBjaGVja1xuICAgKiBmb3IgYSBwcm9wZXJ0eSBvbiBhbm90aGVyIG9iamVjdCwganVzdCBwYXNzIGl0IGFzIGEgc2Vjb25kIGFyZ3VtZW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciByQUYgPSBwcmVmaXhlZCgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJywgd2luZG93KTtcbiAgICpcbiAgICogcmFmKGZ1bmN0aW9uKCkge1xuICAgKiAgcmVuZGVyRnVuY3Rpb24oKTtcbiAgICogfSlcbiAgICogYGBgXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIF90aGUgYWN0dWFsIGZ1bmN0aW9uXyAtIG5vdCB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAqIElmIHlvdSBuZWVkIHRoZSBhY3R1YWwgbmFtZSBvZiB0aGUgcHJvcGVydHksIHBhc3MgaW4gYGZhbHNlYCBhcyBhIHRoaXJkIGFyZ3VtZW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciByQUZQcm9wID0gcHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvdywgZmFsc2UpO1xuICAgKlxuICAgKiByYWZQcm9wID09PSAnV2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lJyAvLyBpbiBvbGRlciB3ZWJraXRcbiAgICogYGBgXG4gICAqXG4gICAqIE9uZSBjb21tb24gdXNlIGNhc2UgZm9yIHByZWZpeGVkIGlzIGlmIHlvdSdyZSB0cnlpbmcgdG8gZGV0ZXJtaW5lIHdoaWNoIHRyYW5zaXRpb25cbiAgICogZW5kIGV2ZW50IHRvIGJpbmQgdG8sIHlvdSBtaWdodCBkbyBzb21ldGhpbmcgbGlrZS4uLlxuICAgKiBgYGBqc1xuICAgKiB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xuICAgKiAgICAgJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLCAqIFNhZiA2LCBBbmRyb2lkIEJyb3dzZXJcbiAgICogICAgICdNb3pUcmFuc2l0aW9uJyAgICA6ICd0cmFuc2l0aW9uZW5kJywgICAgICAgKiBvbmx5IGZvciBGRiA8IDE1XG4gICAqICAgICAndHJhbnNpdGlvbicgICAgICAgOiAndHJhbnNpdGlvbmVuZCcgICAgICAgICogSUUxMCwgT3BlcmEsIENocm9tZSwgRkYgMTUrLCBTYWYgNytcbiAgICogfTtcbiAgICpcbiAgICogdmFyIHRyYW5zRW5kRXZlbnROYW1lID0gdHJhbnNFbmRFdmVudE5hbWVzWyBNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zaXRpb24nKSBdO1xuICAgKiBgYGBcbiAgICpcbiAgICogSWYgeW91IHdhbnQgYSBzaW1pbGFyIGxvb2t1cCwgYnV0IGluIGtlYmFiLWNhc2UsIHlvdSBjYW4gdXNlIFtwcmVmaXhlZENTU10oI21vZGVybml6ci1wcmVmaXhlZGNzcykuXG4gICAqL1xuXG4gIHZhciBwcmVmaXhlZCA9IE1vZGVybml6clByb3RvLnByZWZpeGVkID0gZnVuY3Rpb24ocHJvcCwgb2JqLCBlbGVtKSB7XG4gICAgaWYgKHByb3AuaW5kZXhPZignQCcpID09PSAwKSB7XG4gICAgICByZXR1cm4gYXRSdWxlKHByb3ApO1xuICAgIH1cblxuICAgIGlmIChwcm9wLmluZGV4T2YoJy0nKSAhPSAtMSkge1xuICAgICAgLy8gQ29udmVydCBrZWJhYi1jYXNlIHRvIGNhbWVsQ2FzZVxuICAgICAgcHJvcCA9IGNzc1RvRE9NKHByb3ApO1xuICAgIH1cbiAgICBpZiAoIW9iaikge1xuICAgICAgcmV0dXJuIHRlc3RQcm9wc0FsbChwcm9wLCAncGZ4Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3RpbmcgRE9NIHByb3BlcnR5IGUuZy4gTW9kZXJuaXpyLnByZWZpeGVkKCdyZXF1ZXN0QW5pbWF0aW9uRnJhbWUnLCB3aW5kb3cpIC8vICdtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXG4gICAgICByZXR1cm4gdGVzdFByb3BzQWxsKHByb3AsIG9iaiwgZWxlbSk7XG4gICAgfVxuICB9O1xuXG4gIFxuXG4gIC8qKlxuICAgKiBwcmVmaXhlZENTUyBpcyBqdXN0IGxpa2UgW3ByZWZpeGVkXSgjbW9kZXJuaXpyLXByZWZpeGVkKSwgYnV0IHRoZSByZXR1cm5lZCB2YWx1ZXMgYXJlIGluXG4gICAqIGtlYmFiLWNhc2UgKGUuZy4gYGJveC1zaXppbmdgKSByYXRoZXIgdGhhbiBjYW1lbENhc2UgKGJveFNpemluZykuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnByZWZpeGVkQ1NTXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci5wcmVmaXhlZENTUygpXG4gICAqIEBvcHRpb25Qcm9wIHByZWZpeGVkQ1NTXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiBwcmVmaXhlZENTU1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGZhbHNlfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgKHBvc3NpYmx5IHByZWZpeGVkKVxuICAgKiB2YWxpZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eSwgb3IgYGZhbHNlYCB3aGVuIGl0IGlzIHVuc3VwcG9ydGVkLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnByZWZpeGVkQ1NTYCBpcyBsaWtlIGBNb2Rlcm5penIucHJlZml4ZWRgLCBidXQgcmV0dXJucyB0aGUgcmVzdWx0XG4gICAqIGluIGh5cGhlbmF0ZWQgZm9ybVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIucHJlZml4ZWRDU1MoJ3RyYW5zaXRpb24nKSAvLyAnLW1vei10cmFuc2l0aW9uJyBpbiBvbGQgRmlyZWZveFxuICAgKiBgYGBcbiAgICpcbiAgICogU2luY2UgaXQgaXMgb25seSB1c2VmdWwgZm9yIENTUyBzdHlsZSBwcm9wZXJ0aWVzLCBpdCBjYW4gb25seSBiZSB0ZXN0ZWQgYWdhaW5zdFxuICAgKiBhbiBIVE1MRWxlbWVudC5cbiAgICpcbiAgICogUHJvcGVydGllcyBjYW4gYmUgcGFzc2VkIGFzIGJvdGggdGhlIERPTSBzdHlsZSBjYW1lbENhc2Ugb3IgQ1NTIHN0eWxlIGtlYmFiLWNhc2UuXG4gICAqL1xuXG4gIHZhciBwcmVmaXhlZENTUyA9IE1vZGVybml6clByb3RvLnByZWZpeGVkQ1NTID0gZnVuY3Rpb24ocHJvcCkge1xuICAgIHZhciBwcmVmaXhlZFByb3AgPSBwcmVmaXhlZChwcm9wKTtcbiAgICByZXR1cm4gcHJlZml4ZWRQcm9wICYmIGRvbVRvQ1NTKHByZWZpeGVkUHJvcCk7XG4gIH07XG4gIFxuXG4gIC8qKlxuICAgKiB0ZXN0QWxsUHJvcHMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBpbiB0aGUgYnJvd3NlclxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci50ZXN0QWxsUHJvcHNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygpXG4gICAqIEBvcHRpb25Qcm9wIHRlc3RBbGxQcm9wc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gdGVzdEFsbFByb3BzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIC0gU3RyaW5nIG5hbWluZyB0aGUgcHJvcGVydHkgdG8gdGVzdCAoZWl0aGVyIGNhbWVsQ2FzZSBvciBrZWJhYi1jYXNlKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3ZhbHVlXSAtIFN0cmluZyBvZiB0aGUgdmFsdWUgdG8gdGVzdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtza2lwVmFsdWVUZXN0PWZhbHNlXSAtIFdoZXRoZXIgdG8gc2tpcCB0ZXN0aW5nIHRoYXQgdGhlIHZhbHVlIGlzIHN1cHBvcnRlZCB3aGVuIHVzaW5nIG5vbi1uYXRpdmUgZGV0ZWN0aW9uXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHRlc3RBbGxQcm9wcyBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBDU1MgcHJvcGVydHksIGluIHNvbWUgcHJlZml4ZWQgZm9ybSxcbiAgICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0ZXN0QWxsUHJvcHMoJ2JveFNpemluZycpICAvLyB0cnVlXG4gICAqIGBgYFxuICAgKlxuICAgKiBJdCBjYW4gb3B0aW9uYWxseSBiZSBnaXZlbiBhIENTUyB2YWx1ZSBpbiBzdHJpbmcgZm9ybSB0byB0ZXN0IGlmIGEgcHJvcGVydHlcbiAgICogdmFsdWUgaXMgdmFsaWRcbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdkaXNwbGF5JywgJ2Jsb2NrJykgLy8gdHJ1ZVxuICAgKiB0ZXN0QWxsUHJvcHMoJ2Rpc3BsYXknLCAncGVuZ3VpbicpIC8vIGZhbHNlXG4gICAqIGBgYFxuICAgKlxuICAgKiBBIGJvb2xlYW4gY2FuIGJlIHBhc3NlZCBhcyBhIHRoaXJkIHBhcmFtZXRlciB0byBza2lwIHRoZSB2YWx1ZSBjaGVjayB3aGVuXG4gICAqIG5hdGl2ZSBkZXRlY3Rpb24gKEBzdXBwb3J0cykgaXNuJ3QgYXZhaWxhYmxlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0ZXN0QWxsUHJvcHMoJ3NoYXBlT3V0c2lkZScsICdjb250ZW50LWJveCcsIHRydWUpO1xuICAgKiBgYGBcbiAgICovXG5cbiAgZnVuY3Rpb24gdGVzdEFsbFByb3BzKHByb3AsIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG4gICAgcmV0dXJuIHRlc3RQcm9wc0FsbChwcm9wLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdmFsdWUsIHNraXBWYWx1ZVRlc3QpO1xuICB9XG4gIE1vZGVybml6clByb3RvLnRlc3RBbGxQcm9wcyA9IHRlc3RBbGxQcm9wcztcbiAgXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zZm9ybXNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcImNzc3RyYW5zZm9ybXNcIixcbiAgXCJjYW5pdXNlXCI6IFwidHJhbnNmb3JtczJkXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl1cbn1cbiEqL1xuXG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3N0cmFuc2Zvcm1zJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gQW5kcm9pZCA8IDMuMCBpcyBidWdneSwgc28gd2Ugc25pZmYgYW5kIGJsYWNrbGlzdFxuICAgIC8vIGh0dHA6Ly9naXQuaW8vaEh6TDd3XG4gICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCAyLicpID09PSAtMSAmJlxuICAgICAgICAgICB0ZXN0QWxsUHJvcHMoJ3RyYW5zZm9ybScsICdzY2FsZSgxKScsIHRydWUpO1xuICB9KTtcblxuLyohXG57XG4gIFwibmFtZVwiOiBcIkNTUyBUcmFuc2Zvcm1zIDNEXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2Zvcm1zM2RcIixcbiAgXCJjYW5pdXNlXCI6IFwidHJhbnNmb3JtczNkXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl0sXG4gIFwid2FybmluZ3NcIjogW1xuICAgIFwiQ2hyb21lIG1heSBvY2Nhc3Npb25hbGx5IGZhaWwgdGhpcyB0ZXN0IG9uIHNvbWUgc3lzdGVtczsgbW9yZSBpbmZvOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTI5MDA0XCJcbiAgXVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zZm9ybXMzZCcsIGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSAhIXRlc3RBbGxQcm9wcygncGVyc3BlY3RpdmUnLCAnMXB4JywgdHJ1ZSk7XG4gICAgdmFyIHVzZVByZWZpeCA9IE1vZGVybml6ci5fY29uZmlnLnVzZVByZWZpeGVzO1xuXG4gICAgLy8gV2Via2l0J3MgM0QgdHJhbnNmb3JtcyBhcmUgcGFzc2VkIG9mZiB0byB0aGUgYnJvd3NlcidzIG93biBncmFwaGljcyByZW5kZXJlci5cbiAgICAvLyAgIEl0IHdvcmtzIGZpbmUgaW4gU2FmYXJpIG9uIExlb3BhcmQgYW5kIFNub3cgTGVvcGFyZCwgYnV0IG5vdCBpbiBDaHJvbWUgaW5cbiAgICAvLyAgIHNvbWUgY29uZGl0aW9ucy4gQXMgYSByZXN1bHQsIFdlYmtpdCB0eXBpY2FsbHkgcmVjb2duaXplcyB0aGUgc3ludGF4IGJ1dFxuICAgIC8vICAgd2lsbCBzb21ldGltZXMgdGhyb3cgYSBmYWxzZSBwb3NpdGl2ZSwgdGh1cyB3ZSBtdXN0IGRvIGEgbW9yZSB0aG9yb3VnaCBjaGVjazpcbiAgICBpZiAocmV0ICYmICghdXNlUHJlZml4IHx8ICd3ZWJraXRQZXJzcGVjdGl2ZScgaW4gZG9jRWxlbWVudC5zdHlsZSkpIHtcbiAgICAgIHZhciBtcTtcbiAgICAgIHZhciBkZWZhdWx0U3R5bGUgPSAnI21vZGVybml6cnt3aWR0aDowO2hlaWdodDowfSc7XG4gICAgICAvLyBVc2UgQ1NTIENvbmRpdGlvbmFsIFJ1bGVzIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKE1vZGVybml6ci5zdXBwb3J0cykge1xuICAgICAgICBtcSA9ICdAc3VwcG9ydHMgKHBlcnNwZWN0aXZlOiAxcHgpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgV2Via2l0IGFsbG93cyB0aGlzIG1lZGlhIHF1ZXJ5IHRvIHN1Y2NlZWQgb25seSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkLlxuICAgICAgICAvLyBgQG1lZGlhICh0cmFuc2Zvcm0tM2QpLCgtd2Via2l0LXRyYW5zZm9ybS0zZCl7IC4uLiB9YFxuICAgICAgICBtcSA9ICdAbWVkaWEgKHRyYW5zZm9ybS0zZCknO1xuICAgICAgICBpZiAodXNlUHJlZml4KSB7XG4gICAgICAgICAgbXEgKz0gJywoLXdlYmtpdC10cmFuc2Zvcm0tM2QpJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtcSArPSAneyNtb2Rlcm5penJ7d2lkdGg6N3B4O2hlaWdodDoxOHB4O21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MH19JztcblxuICAgICAgdGVzdFN0eWxlcyhkZWZhdWx0U3R5bGUgKyBtcSwgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICByZXQgPSBlbGVtLm9mZnNldFdpZHRoID09PSA3ICYmIGVsZW0ub2Zmc2V0SGVpZ2h0ID09PSAxODtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH0pO1xuXG4vKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zaXRpb25zXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2l0aW9uc1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtdHJhbnNpdGlvbnNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXVxufVxuISovXG5cbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zaXRpb25zJywgdGVzdEFsbFByb3BzKCd0cmFuc2l0aW9uJywgJ2FsbCcsIHRydWUpKTtcblxuXG4gIC8qKlxuICAgKiBoYXNPd25Qcm9wIGlzIGEgc2hpbSBmb3IgaGFzT3duUHJvcGVydHkgdGhhdCBpcyBuZWVkZWQgZm9yIFNhZmFyaSAyLjAgc3VwcG9ydFxuICAgKlxuICAgKiBAYXV0aG9yIGthbmdheFxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGhhc093blByb3BcbiAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCAtIFRoZSBvYmplY3QgdG8gY2hlY2sgZm9yIGEgcHJvcGVydHlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IC0gVGhlIHByb3BlcnR5IHRvIGNoZWNrIGZvclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgLy8gaGFzT3duUHJvcGVydHkgc2hpbSBieSBrYW5nYXggbmVlZGVkIGZvciBTYWZhcmkgMi4wIHN1cHBvcnRcbiAgdmFyIGhhc093blByb3A7XG5cbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBfaGFzT3duUHJvcGVydHkgPSAoe30pLmhhc093blByb3BlcnR5O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgLyogd2UgaGF2ZSBubyB3YXkgb2YgdGVzdGluZyBJRSA1LjUgb3Igc2FmYXJpIDIsXG4gICAgICogc28ganVzdCBhc3N1bWUgdGhlIGVsc2UgZ2V0cyBoaXQgKi9cbiAgICBpZiAoIWlzKF9oYXNPd25Qcm9wZXJ0eSwgJ3VuZGVmaW5lZCcpICYmICFpcyhfaGFzT3duUHJvcGVydHkuY2FsbCwgJ3VuZGVmaW5lZCcpKSB7XG4gICAgICBoYXNPd25Qcm9wID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgICAgICByZXR1cm4gX2hhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhhc093blByb3AgPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IC8qIHllcywgdGhpcyBjYW4gZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMvbmVnYXRpdmVzLCBidXQgbW9zdCBvZiB0aGUgdGltZSB3ZSBkb24ndCBjYXJlIGFib3V0IHRob3NlICovXG4gICAgICAgIHJldHVybiAoKHByb3BlcnR5IGluIG9iamVjdCkgJiYgaXMob2JqZWN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZVtwcm9wZXJ0eV0sICd1bmRlZmluZWQnKSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSkoKTtcblxuICBcblxuXG4gICAvLyBfbCB0cmFja3MgbGlzdGVuZXJzIGZvciBhc3luYyB0ZXN0cywgYXMgd2VsbCBhcyB0ZXN0cyB0aGF0IGV4ZWN1dGUgYWZ0ZXIgdGhlIGluaXRpYWwgcnVuXG4gIE1vZGVybml6clByb3RvLl9sID0ge307XG5cbiAgLyoqXG4gICAqIE1vZGVybml6ci5vbiBpcyBhIHdheSB0byBsaXN0ZW4gZm9yIHRoZSBjb21wbGV0aW9uIG9mIGFzeW5jIHRlc3RzLiBCZWluZ1xuICAgKiBhc3luY2hyb25vdXMsIHRoZXkgbWF5IG5vdCBmaW5pc2ggYmVmb3JlIHlvdXIgc2NyaXB0cyBydW4uIEFzIGEgcmVzdWx0IHlvdVxuICAgKiB3aWxsIGdldCBhIHBvc3NpYmx5IGZhbHNlIG5lZ2F0aXZlIGB1bmRlZmluZWRgIHZhbHVlLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5vblxuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZnVuY3Rpb24gb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBTdHJpbmcgbmFtZSBvZiB0aGUgZmVhdHVyZSBkZXRlY3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgLSBDYWxsYmFjayBmdW5jdGlvbiByZXR1cm5pbmcgYSBCb29sZWFuIC0gdHJ1ZSBpZiBmZWF0dXJlIGlzIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90XG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5vbignZmxhc2gnLCBmdW5jdGlvbiggcmVzdWx0ICkge1xuICAgKiAgIGlmIChyZXN1bHQpIHtcbiAgICogICAgLy8gdGhlIGJyb3dzZXIgaGFzIGZsYXNoXG4gICAqICAgfSBlbHNlIHtcbiAgICogICAgIC8vIHRoZSBicm93c2VyIGRvZXMgbm90IGhhdmUgZmxhc2hcbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG5cbiAgTW9kZXJuaXpyUHJvdG8ub24gPSBmdW5jdGlvbihmZWF0dXJlLCBjYikge1xuICAgIC8vIENyZWF0ZSB0aGUgbGlzdCBvZiBsaXN0ZW5lcnMgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghdGhpcy5fbFtmZWF0dXJlXSkge1xuICAgICAgdGhpcy5fbFtmZWF0dXJlXSA9IFtdO1xuICAgIH1cblxuICAgIC8vIFB1c2ggdGhpcyB0ZXN0IG9uIHRvIHRoZSBsaXN0ZW5lciBsaXN0XG4gICAgdGhpcy5fbFtmZWF0dXJlXS5wdXNoKGNiKTtcblxuICAgIC8vIElmIGl0J3MgYWxyZWFkeSBiZWVuIHJlc29sdmVkLCB0cmlnZ2VyIGl0IG9uIG5leHQgdGlja1xuICAgIGlmIChNb2Rlcm5penIuaGFzT3duUHJvcGVydHkoZmVhdHVyZSkpIHtcbiAgICAgIC8vIE5leHQgVGlja1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgTW9kZXJuaXpyLl90cmlnZ2VyKGZlYXR1cmUsIE1vZGVybml6cltmZWF0dXJlXSk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIF90cmlnZ2VyIGlzIHRoZSBwcml2YXRlIGZ1bmN0aW9uIHVzZWQgdG8gc2lnbmFsIHRlc3QgY29tcGxldGlvbiBhbmQgcnVuIGFueVxuICAgKiBjYWxsYmFja3MgcmVnaXN0ZXJlZCB0aHJvdWdoIFtNb2Rlcm5penIub25dKCNtb2Rlcm5penItb24pXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl90cmlnZ2VyXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gX3RyaWdnZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmUgLSBzdHJpbmcgbmFtZSBvZiB0aGUgZmVhdHVyZSBkZXRlY3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFufSBbcmVzXSAtIEEgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb24sIG9yIHRoZSBib29sZWFuID1cbiAgICogcmVzdWx0IG9mIGEgZmVhdHVyZSBkZXRlY3Rpb24gZnVuY3Rpb25cbiAgICovXG5cbiAgTW9kZXJuaXpyUHJvdG8uX3RyaWdnZXIgPSBmdW5jdGlvbihmZWF0dXJlLCByZXMpIHtcbiAgICBpZiAoIXRoaXMuX2xbZmVhdHVyZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY2JzID0gdGhpcy5fbFtmZWF0dXJlXTtcblxuICAgIC8vIEZvcmNlIGFzeW5jXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBjYjtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2IgPSBjYnNbaV07XG4gICAgICAgIGNiKHJlcyk7XG4gICAgICB9XG4gICAgfSwgMCk7XG5cbiAgICAvLyBEb24ndCB0cmlnZ2VyIHRoZXNlIGFnYWluXG4gICAgZGVsZXRlIHRoaXMuX2xbZmVhdHVyZV07XG4gIH07XG5cbiAgLyoqXG4gICAqIGFkZFRlc3QgYWxsb3dzIHlvdSB0byBkZWZpbmUgeW91ciBvd24gZmVhdHVyZSBkZXRlY3RzIHRoYXQgYXJlIG5vdCBjdXJyZW50bHlcbiAgICogaW5jbHVkZWQgaW4gTW9kZXJuaXpyICh1bmRlciB0aGUgY292ZXJzIGl0J3MgdGhlIGV4YWN0IHNhbWUgY29kZSBNb2Rlcm5penJcbiAgICogdXNlcyBmb3IgaXRzIG93biBbZmVhdHVyZSBkZXRlY3Rpb25zXShodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci90cmVlL21hc3Rlci9mZWF0dXJlLWRldGVjdHMpKS4gSnVzdCBsaWtlIHRoZSBvZmZpY2FsIGRldGVjdHMsIHRoZSByZXN1bHRcbiAgICogd2lsbCBiZSBhZGRlZCBvbnRvIHRoZSBNb2Rlcm5penIgb2JqZWN0LCBhcyB3ZWxsIGFzIGFuIGFwcHJvcHJpYXRlIGNsYXNzTmFtZSBzZXQgb25cbiAgICogdGhlIGh0bWwgZWxlbWVudCB3aGVuIGNvbmZpZ3VyZWQgdG8gZG8gc29cbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIuYWRkVGVzdFxuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuYWRkVGVzdCgpXG4gICAqIEBvcHRpb25Qcm9wIGFkZFRlc3RcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIGFkZFRlc3RcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBmZWF0dXJlIC0gVGhlIHN0cmluZyBuYW1lIG9mIHRoZSBmZWF0dXJlIGRldGVjdCwgb3IgYW5cbiAgICogb2JqZWN0IG9mIGZlYXR1cmUgZGV0ZWN0IG5hbWVzIGFuZCB0ZXN0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbn0gdGVzdCAtIEZ1bmN0aW9uIHJldHVybmluZyB0cnVlIGlmIGZlYXR1cmUgaXMgc3VwcG9ydGVkLFxuICAgKiBmYWxzZSBpZiBub3QuIE90aGVyd2lzZSBhIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgZmVhdHVyZSBkZXRlY3Rpb25cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogVGhlIG1vc3QgY29tbW9uIHdheSBvZiBjcmVhdGluZyB5b3VyIG93biBmZWF0dXJlIGRldGVjdHMgaXMgYnkgY2FsbGluZ1xuICAgKiBgTW9kZXJuaXpyLmFkZFRlc3RgIHdpdGggYSBzdHJpbmcgKHByZWZlcmFibHkganVzdCBsb3dlcmNhc2UsIHdpdGhvdXQgYW55XG4gICAqIHB1bmN0dWF0aW9uKSwgYW5kIGEgZnVuY3Rpb24geW91IHdhbnQgZXhlY3V0ZWQgdGhhdCB3aWxsIHJldHVybiBhIGJvb2xlYW4gcmVzdWx0XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5hZGRUZXN0KCdpdHNUdWVzZGF5JywgZnVuY3Rpb24oKSB7XG4gICAqICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAqICByZXR1cm4gZC5nZXREYXkoKSA9PT0gMjtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBXaGVuIHRoZSBhYm92ZSBpcyBydW4sIGl0IHdpbGwgc2V0IE1vZGVybml6ci5pdHN0dWVzZGF5IHRvIGB0cnVlYCB3aGVuIGl0IGlzIHR1ZXNkYXksXG4gICAqIGFuZCB0byBgZmFsc2VgIGV2ZXJ5IG90aGVyIGRheSBvZiB0aGUgd2Vlay4gT25lIHRoaW5nIHRvIG5vdGljZSBpcyB0aGF0IHRoZSBuYW1lcyBvZlxuICAgKiBmZWF0dXJlIGRldGVjdCBmdW5jdGlvbnMgYXJlIGFsd2F5cyBsb3dlcmNhc2VkIHdoZW4gYWRkZWQgdG8gdGhlIE1vZGVybml6ciBvYmplY3QuIFRoYXRcbiAgICogbWVhbnMgdGhhdCBgTW9kZXJuaXpyLml0c1R1ZXNkYXlgIHdpbGwgbm90IGV4aXN0LCBidXQgYE1vZGVybml6ci5pdHN0dWVzZGF5YCB3aWxsLlxuICAgKlxuICAgKlxuICAgKiAgU2luY2Ugd2Ugb25seSBsb29rIGF0IHRoZSByZXR1cm5lZCB2YWx1ZSBmcm9tIGFueSBmZWF0dXJlIGRldGVjdGlvbiBmdW5jdGlvbixcbiAgICogIHlvdSBkbyBub3QgbmVlZCB0byBhY3R1YWxseSB1c2UgYSBmdW5jdGlvbi4gRm9yIHNpbXBsZSBkZXRlY3Rpb25zLCBqdXN0IHBhc3NpbmdcbiAgICogIGluIGEgc3RhdGVtZW50IHRoYXQgd2lsbCByZXR1cm4gYSBib29sZWFuIHZhbHVlIHdvcmtzIGp1c3QgZmluZS5cbiAgICpcbiAgICogYGBganNcbiAgICogTW9kZXJuaXpyLmFkZFRlc3QoJ2hhc0pxdWVyeScsICdqUXVlcnknIGluIHdpbmRvdyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBKdXN0IGxpa2UgYmVmb3JlLCB3aGVuIHRoZSBhYm92ZSBydW5zIGBNb2Rlcm5penIuaGFzanF1ZXJ5YCB3aWxsIGJlIHRydWUgaWZcbiAgICogalF1ZXJ5IGhhcyBiZWVuIGluY2x1ZGVkIG9uIHRoZSBwYWdlLiBOb3QgdXNpbmcgYSBmdW5jdGlvbiBzYXZlcyBhIHNtYWxsIGFtb3VudFxuICAgKiBvZiBvdmVyaGVhZCBmb3IgdGhlIGJyb3dzZXIsIGFzIHdlbGwgYXMgbWFraW5nIHlvdXIgY29kZSBtdWNoIG1vcmUgcmVhZGFibGUuXG4gICAqXG4gICAqIEZpbmFsbHksIHlvdSBhbHNvIGhhdmUgdGhlIGFiaWxpdHkgdG8gcGFzcyBpbiBhbiBvYmplY3Qgb2YgZmVhdHVyZSBuYW1lcyBhbmRcbiAgICogdGhlaXIgdGVzdHMuIFRoaXMgaXMgaGFuZHkgaWYgeW91IHdhbnQgdG8gYWRkIG11bHRpcGxlIGRldGVjdGlvbnMgaW4gb25lIGdvLlxuICAgKiBUaGUga2V5cyBzaG91bGQgYWx3YXlzIGJlIGEgc3RyaW5nLCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBlaXRoZXIgYSBib29sZWFuIG9yXG4gICAqIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHZhciBkZXRlY3RzID0ge1xuICAgKiAgJ2hhc2pxdWVyeSc6ICdqUXVlcnknIGluIHdpbmRvdyxcbiAgICogICdpdHN0dWVzZGF5JzogZnVuY3Rpb24oKSB7XG4gICAqICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICogICAgcmV0dXJuIGQuZ2V0RGF5KCkgPT09IDI7XG4gICAqICB9XG4gICAqIH1cbiAgICpcbiAgICogTW9kZXJuaXpyLmFkZFRlc3QoZGV0ZWN0cyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGVyZSBpcyByZWFsbHkgbm8gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBmaXJzdCBtZXRob2RzIGFuZCB0aGlzIG9uZSwgaXQgaXNcbiAgICoganVzdCBhIGNvbnZlbmllbmNlIHRvIGxldCB5b3Ugd3JpdGUgbW9yZSByZWFkYWJsZSBjb2RlLlxuICAgKi9cblxuICBmdW5jdGlvbiBhZGRUZXN0KGZlYXR1cmUsIHRlc3QpIHtcblxuICAgIGlmICh0eXBlb2YgZmVhdHVyZSA9PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIGZlYXR1cmUpIHtcbiAgICAgICAgaWYgKGhhc093blByb3AoZmVhdHVyZSwga2V5KSkge1xuICAgICAgICAgIGFkZFRlc3Qoa2V5LCBmZWF0dXJlWyBrZXkgXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuXG4gICAgICBmZWF0dXJlID0gZmVhdHVyZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIGZlYXR1cmVOYW1lU3BsaXQgPSBmZWF0dXJlLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgbGFzdCA9IE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXTtcblxuICAgICAgLy8gQWdhaW4sIHdlIGRvbid0IGNoZWNrIGZvciBwYXJlbnQgdGVzdCBleGlzdGVuY2UuIEdldCB0aGF0IHJpZ2h0LCB0aG91Z2guXG4gICAgICBpZiAoZmVhdHVyZU5hbWVTcGxpdC5sZW5ndGggPT0gMikge1xuICAgICAgICBsYXN0ID0gbGFzdFtmZWF0dXJlTmFtZVNwbGl0WzFdXTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBsYXN0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIHdlJ3JlIGdvaW5nIHRvIHF1aXQgaWYgeW91J3JlIHRyeWluZyB0byBvdmVyd3JpdGUgYW4gZXhpc3RpbmcgdGVzdFxuICAgICAgICAvLyBpZiB3ZSB3ZXJlIHRvIGFsbG93IGl0LCB3ZSdkIGRvIHRoaXM6XG4gICAgICAgIC8vICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIlxcXFxiKG5vLSk/XCIgKyBmZWF0dXJlICsgXCJcXFxcYlwiKTtcbiAgICAgICAgLy8gICBkb2NFbGVtZW50LmNsYXNzTmFtZSA9IGRvY0VsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UoIHJlLCAnJyApO1xuICAgICAgICAvLyBidXQsIG5vIHJseSwgc3R1ZmYgJ2VtLlxuICAgICAgICByZXR1cm4gTW9kZXJuaXpyO1xuICAgICAgfVxuXG4gICAgICB0ZXN0ID0gdHlwZW9mIHRlc3QgPT0gJ2Z1bmN0aW9uJyA/IHRlc3QoKSA6IHRlc3Q7XG5cbiAgICAgIC8vIFNldCB0aGUgdmFsdWUgKHRoaXMgaXMgdGhlIG1hZ2ljLCByaWdodCBoZXJlKS5cbiAgICAgIGlmIChmZWF0dXJlTmFtZVNwbGl0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIE1vZGVybml6cltmZWF0dXJlTmFtZVNwbGl0WzBdXSA9IHRlc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjYXN0IHRvIGEgQm9vbGVhbiwgaWYgbm90IG9uZSBhbHJlYWR5XG4gICAgICAgIC8qIGpzaGludCAtVzA1MyAqL1xuICAgICAgICBpZiAoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dICYmICEoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dIGluc3RhbmNlb2YgQm9vbGVhbikpIHtcbiAgICAgICAgICBNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0gPSBuZXcgQm9vbGVhbihNb2Rlcm5penJbZmVhdHVyZU5hbWVTcGxpdFswXV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dW2ZlYXR1cmVOYW1lU3BsaXRbMV1dID0gdGVzdDtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IGEgc2luZ2xlIGNsYXNzIChlaXRoZXIgYGZlYXR1cmVgIG9yIGBuby1mZWF0dXJlYClcbiAgICAgIC8qIGpzaGludCAtVzA0MSAqL1xuICAgICAgc2V0Q2xhc3NlcyhbKCEhdGVzdCAmJiB0ZXN0ICE9IGZhbHNlID8gJycgOiAnbm8tJykgKyBmZWF0dXJlTmFtZVNwbGl0LmpvaW4oJy0nKV0pO1xuICAgICAgLyoganNoaW50ICtXMDQxICovXG5cbiAgICAgIC8vIFRyaWdnZXIgdGhlIGV2ZW50XG4gICAgICBNb2Rlcm5penIuX3RyaWdnZXIoZmVhdHVyZSwgdGVzdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1vZGVybml6cjsgLy8gYWxsb3cgY2hhaW5pbmcuXG4gIH1cblxuICAvLyBBZnRlciBhbGwgdGhlIHRlc3RzIGFyZSBydW4sIGFkZCBzZWxmIHRvIHRoZSBNb2Rlcm5penIgcHJvdG90eXBlXG4gIE1vZGVybml6ci5fcS5wdXNoKGZ1bmN0aW9uKCkge1xuICAgIE1vZGVybml6clByb3RvLmFkZFRlc3QgPSBhZGRUZXN0O1xuICB9KTtcblxuICBcblxuLyohXG57XG4gIFwibmFtZVwiOiBcInNpemVzIGF0dHJpYnV0ZVwiLFxuICBcImFzeW5jXCI6IHRydWUsXG4gIFwicHJvcGVydHlcIjogXCJzaXplc1wiLFxuICBcInRhZ3NcIjogW1wiaW1hZ2VcIl0sXG4gIFwiYXV0aG9yc1wiOiBbXCJNYXQgTWFycXVpc1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlNwZWNcIixcbiAgICBcImhyZWZcIjogXCJodHRwOi8vcGljdHVyZS5yZXNwb25zaXZlaW1hZ2VzLm9yZy8jcGFyc2Utc2l6ZXMtYXR0clwiXG4gICAgfSx7XG4gICAgXCJuYW1lXCI6IFwiVXNhZ2UgRGV0YWlsc1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHA6Ly9lcmljcG9ydGlzLmNvbS9wb3N0cy8yMDE0L3NyY3NldC1zaXplcy9cIlxuICAgIH1dXG59XG4hKi9cbi8qIERPQ1xuVGVzdCBmb3IgdGhlIGBzaXplc2AgYXR0cmlidXRlIG9uIGltYWdlc1xuKi9cblxuICBNb2Rlcm5penIuYWRkQXN5bmNUZXN0KGZ1bmN0aW9uKCkge1xuICAgIHZhciB3aWR0aDEsIHdpZHRoMiwgdGVzdDtcbiAgICB2YXIgaW1hZ2UgPSBjcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAvLyBpbiBhIHBlcmZlY3Qgd29ybGQgdGhpcyB3b3VsZCBiZSB0aGUgdGVzdC4uLlxuICAgIHZhciBpc1NpemVzID0gJ3NpemVzJyBpbiBpbWFnZTtcblxuICAgIC8vIC4uLiBidXQgd2UgbmVlZCB0byBkZWFsIHdpdGggU2FmYXJpIDkuLi5cbiAgICBpZiAoIWlzU2l6ZXMgJiYgKCdzcmNzZXQnIGluICBpbWFnZSkpIHtcbiAgICAgIHdpZHRoMiA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBZ0FCQVBBQUFQLy8vd0FBQUNINUJBQUFBQUFBTEFBQUFBQUNBQUVBQUFJQ0JBb0FPdz09JztcbiAgICAgIHdpZHRoMSA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUFBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PSc7XG5cbiAgICAgIHRlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYWRkVGVzdCgnc2l6ZXMnLCBpbWFnZS53aWR0aCA9PSAyKTtcbiAgICAgIH07XG5cbiAgICAgIGltYWdlLm9ubG9hZCA9IHRlc3Q7XG4gICAgICBpbWFnZS5vbmVycm9yID0gdGVzdDtcbiAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc2l6ZXMnLCAnOXB4Jyk7XG5cbiAgICAgIGltYWdlLnNyY3NldCA9IHdpZHRoMSArICcgMXcsJyArIHdpZHRoMiArICcgOHcnO1xuICAgICAgaW1hZ2Uuc3JjID0gd2lkdGgxO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRUZXN0KCdzaXplcycsIGlzU2l6ZXMpO1xuICAgIH1cbiAgfSk7XG5cblxuICAvLyBSdW4gZWFjaCB0ZXN0XG4gIHRlc3RSdW5uZXIoKTtcblxuICAvLyBSZW1vdmUgdGhlIFwibm8tanNcIiBjbGFzcyBpZiBpdCBleGlzdHNcbiAgc2V0Q2xhc3NlcyhjbGFzc2VzKTtcblxuICBkZWxldGUgTW9kZXJuaXpyUHJvdG8uYWRkVGVzdDtcbiAgZGVsZXRlIE1vZGVybml6clByb3RvLmFkZEFzeW5jVGVzdDtcblxuICAvLyBSdW4gdGhlIHRoaW5ncyB0aGF0IGFyZSBzdXBwb3NlZCB0byBydW4gYWZ0ZXIgdGhlIHRlc3RzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTW9kZXJuaXpyLl9xLmxlbmd0aDsgaSsrKSB7XG4gICAgTW9kZXJuaXpyLl9xW2ldKCk7XG4gIH1cblxuICAvLyBMZWFrIE1vZGVybml6ciBuYW1lc3BhY2VcbiAgd2luZG93Lk1vZGVybml6ciA9IE1vZGVybml6cjtcblxuXG47XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQpOyIsImlmKCEoXCJmaXJzdEVsZW1lbnRDaGlsZFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpe1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgXCJmaXJzdEVsZW1lbnRDaGlsZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGZvcih2YXIgbm9kZXMgPSB0aGlzLmNoaWxkcmVuLCBuLCBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7ICsraSlcbiAgICAgICAgICAgICAgICBpZihuID0gbm9kZXNbaV0sIDEgPT09IG4ubm9kZVR5cGUpIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
